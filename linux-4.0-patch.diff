diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/aes_generic.c linux-4.0.orig/crypto/aes_generic.c
--- linux-4.0/crypto/aes_generic.c	2015-04-20 22:13:06.460167504 +0100
+++ linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-deferred_module_init(aes_init);
+module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/af_alg.c linux-4.0.orig/crypto/af_alg.c
--- linux-4.0/crypto/af_alg.c	2015-04-25 12:21:27.697501229 +0100
+++ linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-async_module_init(af_alg_init);
+module_init(af_alg_init);
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/algif_hash.c linux-4.0.orig/crypto/algif_hash.c
--- linux-4.0/crypto/algif_hash.c	2015-04-25 12:24:02.257503057 +0100
+++ linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-async_module_init(algif_hash_init);
+module_init(algif_hash_init);
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/algif_skcipher.c linux-4.0.orig/crypto/algif_skcipher.c
--- linux-4.0/crypto/algif_skcipher.c	2015-04-25 12:24:02.247503057 +0100
+++ linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-async_module_init(algif_skcipher_init);
+module_init(algif_skcipher_init);
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/ansi_cprng.c linux-4.0.orig/crypto/ansi_cprng.c
--- linux-4.0/crypto/ansi_cprng.c	2015-04-20 22:13:06.507167504 +0100
+++ linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-deferred_module_init(prng_mod_init);
+module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/asymmetric_keys/asymmetric_type.c linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-20 22:13:09.392167539 +0100
+++ linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-deferred_module_init(asymmetric_key_init);
+module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-20 22:13:06.512167505 +0100
+++ linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-deferred_module_init(pkcs7_key_init);
+module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/asymmetric_keys/x509_public_key.c linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-20 22:13:06.515167505 +0100
+++ linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-deferred_module_init(x509_key_init);
+module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/authenc.c linux-4.0.orig/crypto/authenc.c
--- linux-4.0/crypto/authenc.c	2015-04-25 13:09:50.373535554 +0100
+++ linux-4.0.orig/crypto/authenc.c	2015-04-12 23:12:50.000000000 +0100
@@ -716,7 +716,7 @@ static void __exit crypto_authenc_module
 	crypto_unregister_template(&crypto_authenc_tmpl);
 }
 
-async_module_init(crypto_authenc_module_init);
+module_init(crypto_authenc_module_init);
 module_exit(crypto_authenc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/authencesn.c linux-4.0.orig/crypto/authencesn.c
--- linux-4.0/crypto/authencesn.c	2015-04-25 13:09:50.381535554 +0100
+++ linux-4.0.orig/crypto/authencesn.c	2015-04-12 23:12:50.000000000 +0100
@@ -808,7 +808,7 @@ static void __exit crypto_authenc_esn_mo
 	crypto_unregister_template(&crypto_authenc_esn_tmpl);
 }
 
-async_module_init(crypto_authenc_esn_module_init);
+module_init(crypto_authenc_esn_module_init);
 module_exit(crypto_authenc_esn_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/blowfish_generic.c linux-4.0.orig/crypto/blowfish_generic.c
--- linux-4.0/crypto/blowfish_generic.c	2015-04-25 13:29:56.391549816 +0100
+++ linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-async_module_init(blowfish_mod_init);
+module_init(blowfish_mod_init);
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/cast5_generic.c linux-4.0.orig/crypto/cast5_generic.c
--- linux-4.0/crypto/cast5_generic.c	2015-04-25 13:17:53.998541273 +0100
+++ linux-4.0.orig/crypto/cast5_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -544,7 +544,7 @@ static void __exit cast5_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-async_module_init(cast5_mod_init);
+module_init(cast5_mod_init);
 module_exit(cast5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/cast6_generic.c linux-4.0.orig/crypto/cast6_generic.c
--- linux-4.0/crypto/cast6_generic.c	2015-04-25 13:17:54.008541273 +0100
+++ linux-4.0.orig/crypto/cast6_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -286,7 +286,7 @@ static void __exit cast6_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-async_module_init(cast6_mod_init);
+module_init(cast6_mod_init);
 module_exit(cast6_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/cbc.c linux-4.0.orig/crypto/cbc.c
--- linux-4.0/crypto/cbc.c	2015-04-20 22:13:06.531167505 +0100
+++ linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-deferred_module_init(crypto_cbc_module_init);
+module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crc32.c linux-4.0.orig/crypto/crc32.c
--- linux-4.0/crypto/crc32.c	2015-04-20 22:13:06.533167505 +0100
+++ linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(crc32_mod_init);
+module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crc32c_generic.c linux-4.0.orig/crypto/crc32c_generic.c
--- linux-4.0/crypto/crc32c_generic.c	2015-04-20 22:13:06.535167505 +0100
+++ linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(crc32c_mod_init);
+module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crct10dif_generic.c linux-4.0.orig/crypto/crct10dif_generic.c
--- linux-4.0/crypto/crct10dif_generic.c	2015-04-20 22:13:06.537167505 +0100
+++ linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(crct10dif_mod_init);
+module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crypto_null.c linux-4.0.orig/crypto/crypto_null.c
--- linux-4.0/crypto/crypto_null.c	2015-04-20 22:13:06.541167505 +0100
+++ linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-deferred_module_init(crypto_null_mod_init);
+module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crypto_user.c linux-4.0.orig/crypto/crypto_user.c
--- linux-4.0/crypto/crypto_user.c	2015-04-20 22:13:06.543167505 +0100
+++ linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-deferred_module_init(crypto_user_init);
+module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/ecb.c linux-4.0.orig/crypto/ecb.c
--- linux-4.0/crypto/ecb.c	2015-04-20 22:13:06.545167505 +0100
+++ linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-deferred_module_init(crypto_ecb_module_init);
+module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lrw.c linux-4.0.orig/crypto/lrw.c
--- linux-4.0/crypto/lrw.c	2015-04-20 22:13:06.548167505 +0100
+++ linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-deferred_module_init(crypto_module_init);
+module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lz4.c linux-4.0.orig/crypto/lz4.c
--- linux-4.0/crypto/lz4.c	2015-04-20 22:13:06.549167505 +0100
+++ linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-deferred_module_init(lz4_mod_init);
+module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lz4hc.c linux-4.0.orig/crypto/lz4hc.c
--- linux-4.0/crypto/lz4hc.c	2015-04-20 22:13:06.552167505 +0100
+++ linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-deferred_module_init(lz4hc_mod_init);
+module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lzo.c linux-4.0.orig/crypto/lzo.c
--- linux-4.0/crypto/lzo.c	2015-04-25 13:00:31.553528946 +0100
+++ linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-async_module_init(lzo_mod_init);
+module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/md4.c linux-4.0.orig/crypto/md4.c
--- linux-4.0/crypto/md4.c	2015-04-20 22:13:06.558167505 +0100
+++ linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(md4_mod_init);
+module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/md5.c linux-4.0.orig/crypto/md5.c
--- linux-4.0/crypto/md5.c	2015-04-20 22:13:06.561167505 +0100
+++ linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(md5_mod_init);
+module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd128.c linux-4.0.orig/crypto/rmd128.c
--- linux-4.0/crypto/rmd128.c	2015-04-20 22:13:06.564167505 +0100
+++ linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd128_mod_init);
+module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd160.c linux-4.0.orig/crypto/rmd160.c
--- linux-4.0/crypto/rmd160.c	2015-04-20 22:13:06.566167505 +0100
+++ linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd160_mod_init);
+module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd256.c linux-4.0.orig/crypto/rmd256.c
--- linux-4.0/crypto/rmd256.c	2015-04-20 22:13:06.568167505 +0100
+++ linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd256_mod_init);
+module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd320.c linux-4.0.orig/crypto/rmd320.c
--- linux-4.0/crypto/rmd320.c	2015-04-20 22:13:06.571167505 +0100
+++ linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd320_mod_init);
+module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/sha1_generic.c linux-4.0.orig/crypto/sha1_generic.c
--- linux-4.0/crypto/sha1_generic.c	2015-04-20 22:13:06.573167505 +0100
+++ linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(sha1_generic_mod_init);
+module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/sha256_generic.c linux-4.0.orig/crypto/sha256_generic.c
--- linux-4.0/crypto/sha256_generic.c	2015-04-20 22:13:06.575167505 +0100
+++ linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-deferred_module_init(sha256_generic_mod_init);
+module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/sha512_generic.c linux-4.0.orig/crypto/sha512_generic.c
--- linux-4.0/crypto/sha512_generic.c	2015-04-20 22:13:06.578167505 +0100
+++ linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-deferred_module_init(sha512_generic_mod_init);
+module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/tcrypt.c linux-4.0.orig/crypto/tcrypt.c
--- linux-4.0/crypto/tcrypt.c	2015-04-20 22:13:06.582167505 +0100
+++ linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-deferred_module_init(tcrypt_mod_init);
+module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/tea.c linux-4.0.orig/crypto/tea.c
--- linux-4.0/crypto/tea.c	2015-04-20 22:13:06.585167505 +0100
+++ linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-deferred_module_init(tea_mod_init);
+module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/tgr192.c linux-4.0.orig/crypto/tgr192.c
--- linux-4.0/crypto/tgr192.c	2015-04-20 22:13:06.588167505 +0100
+++ linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-deferred_module_init(tgr192_mod_init);
+module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/twofish_generic.c linux-4.0.orig/crypto/twofish_generic.c
--- linux-4.0/crypto/twofish_generic.c	2015-04-20 22:13:06.590167505 +0100
+++ linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-deferred_module_init(twofish_mod_init);
+module_init(twofish_mod_init);
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/wp512.c linux-4.0.orig/crypto/wp512.c
--- linux-4.0/crypto/wp512.c	2015-04-20 22:13:06.596167506 +0100
+++ linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-deferred_module_init(wp512_mod_init);
+module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/xcbc.c linux-4.0.orig/crypto/xcbc.c
--- linux-4.0/crypto/xcbc.c	2015-04-20 22:13:06.598167506 +0100
+++ linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-deferred_module_init(crypto_xcbc_module_init);
+module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/xts.c linux-4.0.orig/crypto/xts.c
--- linux-4.0/crypto/xts.c	2015-04-20 22:13:06.600167506 +0100
+++ linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-deferred_module_init(crypto_module_init);
+module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/zlib.c linux-4.0.orig/crypto/zlib.c
--- linux-4.0/crypto/zlib.c	2015-04-25 13:23:17.917545104 +0100
+++ linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-async_module_init(zlib_mod_init);
+module_init(zlib_mod_init);
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/ac.c linux-4.0.orig/drivers/acpi/ac.c
--- linux-4.0/drivers/acpi/ac.c	2015-04-20 21:09:50.016122610 +0100
+++ linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-async_module_init(acpi_ac_init);
+module_init(acpi_ac_init);
 module_exit(acpi_ac_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/acpi_ipmi.c linux-4.0.orig/drivers/acpi/acpi_ipmi.c
--- linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-20 21:09:50.020122610 +0100
+++ linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-async_module_init(acpi_ipmi_init);
+module_init(acpi_ipmi_init);
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/acpi_pad.c linux-4.0.orig/drivers/acpi/acpi_pad.c
--- linux-4.0/drivers/acpi/acpi_pad.c	2015-04-20 21:09:50.023122610 +0100
+++ linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-async_module_init(acpi_pad_init);
+module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/battery.c linux-4.0.orig/drivers/acpi/battery.c
--- linux-4.0/drivers/acpi/battery.c	2015-04-20 21:09:50.027122610 +0100
+++ linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-async_module_init(acpi_battery_init);
+module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/processor_driver.c linux-4.0.orig/drivers/acpi/processor_driver.c
--- linux-4.0/drivers/acpi/processor_driver.c	2015-04-20 21:09:50.030122610 +0100
+++ linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-async_module_init(acpi_processor_driver_init);
+module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/sbs.c linux-4.0.orig/drivers/acpi/sbs.c
--- linux-4.0/drivers/acpi/sbs.c	2015-04-20 21:09:50.034122610 +0100
+++ linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-async_module_init(acpi_sbs_init);
+module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/thermal.c linux-4.0.orig/drivers/acpi/thermal.c
--- linux-4.0/drivers/acpi/thermal.c	2015-04-20 21:09:50.038122610 +0100
+++ linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-async_module_init(acpi_thermal_init);
+module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/video.c linux-4.0.orig/drivers/acpi/video.c
--- linux-4.0/drivers/acpi/video.c	2015-04-20 21:09:50.070122610 +0100
+++ linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-async_module_init(acpi_video_init);
+module_init(acpi_video_init);
 module_exit(acpi_video_exit);
Only in linux-4.0/drivers: async.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/ata/acard-ahci.c linux-4.0.orig/drivers/ata/acard-ahci.c
--- linux-4.0/drivers/ata/acard-ahci.c	2015-04-19 23:13:29.272001581 +0100
+++ linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-async_module_pci_driver(acard_ahci_pci_driver);
+module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/ata/ahci.c linux-4.0.orig/drivers/ata/ahci.c
--- linux-4.0/drivers/ata/ahci.c	2015-04-19 23:24:31.701009415 +0100
+++ linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-async_module_pci_driver(ahci_pci_driver);
+module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/agp/backend.c linux-4.0.orig/drivers/char/agp/backend.c
--- linux-4.0/drivers/char/agp/backend.c	2015-04-19 23:42:07.686021902 +0100
+++ linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-async_module_init(agp_init);
+module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/agp/nvidia-agp.c linux-4.0.orig/drivers/char/agp/nvidia-agp.c
--- linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-20 21:09:50.073122610 +0100
+++ linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-async_module_init(agp_nvidia_init,agp_init);
+module_init(agp_nvidia_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/hpet.c linux-4.0.orig/drivers/char/hpet.c
--- linux-4.0/drivers/char/hpet.c	2015-04-20 21:09:50.077122610 +0100
+++ linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-async_module_init(hpet_init);
+module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/hw_random/core.c linux-4.0.orig/drivers/char/hw_random/core.c
--- linux-4.0/drivers/char/hw_random/core.c	2015-04-25 14:05:00.843574702 +0100
+++ linux-4.0.orig/drivers/char/hw_random/core.c	2015-04-12 23:12:50.000000000 +0100
@@ -552,7 +552,7 @@ static void __exit hwrng_modexit(void)
 	unregister_miscdev();
 }
 
-async_module_init(hwrng_modinit);
+module_init(hwrng_modinit);
 module_exit(hwrng_modexit);
 
 MODULE_DESCRIPTION("H/W Random Number Generator (RNG) driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/hw_random/intel-rng.c linux-4.0.orig/drivers/char/hw_random/intel-rng.c
--- linux-4.0/drivers/char/hw_random/intel-rng.c	2015-04-25 14:06:23.957575685 +0100
+++ linux-4.0.orig/drivers/char/hw_random/intel-rng.c	2015-04-12 23:12:50.000000000 +0100
@@ -325,7 +325,7 @@ PFX "RNG, try using the 'no_fwh_detect'
 }
 
 
-static int __init intel_rng_mod_init(void)
+static int __init mod_init(void)
 {
 	int err = -ENODEV;
 	int i;
@@ -411,7 +411,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-async_module_init(intel_rng_mod_init);
+module_init(mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for Intel chipsets");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_conservative.c linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-19 21:38:49.773934419 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-async_module_init(cpufreq_gov_dbs_init);
+module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_ondemand.c linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-19 21:38:49.714934419 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-async_module_init(cpufreq_gov_dbs_init);
+module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_powersave.c linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-19 21:38:49.689934418 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-async_module_init(cpufreq_gov_powersave_init);
+module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_stats.c linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-19 21:38:49.685934418 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-async_module_init(cpufreq_stats_init);
+module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_userspace.c linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-19 21:38:49.680934418 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-async_module_init(cpufreq_gov_userspace_init);
+module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/speedstep-ich.c linux-4.0.orig/drivers/cpufreq/speedstep-ich.c
--- linux-4.0/drivers/cpufreq/speedstep-ich.c	2015-04-25 00:38:38.345208687 +0100
+++ linux-4.0.orig/drivers/cpufreq/speedstep-ich.c	2015-04-12 23:12:50.000000000 +0100
@@ -383,5 +383,5 @@ MODULE_DESCRIPTION("Speedstep driver for
 		"with ICH-M southbridges.");
 MODULE_LICENSE("GPL");
 
-async_module_init(speedstep_init);
+module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/dma/ioat/pci.c linux-4.0.orig/drivers/dma/ioat/pci.c
--- linux-4.0/drivers/dma/ioat/pci.c	2015-04-25 11:29:21.053464255 +0100
+++ linux-4.0.orig/drivers/dma/ioat/pci.c	2015-04-12 23:12:50.000000000 +0100
@@ -252,7 +252,7 @@ static int __init ioat_init_module(void)
 
 	return err;
 }
-async_module_init(ioat_init_module);
+module_init(ioat_init_module);
 
 static void __exit ioat_exit_module(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/gpu/drm/drm_drv.c linux-4.0.orig/drivers/gpu/drm/drm_drv.c
--- linux-4.0/drivers/gpu/drm/drm_drv.c	2015-04-22 23:44:48.342738378 +0100
+++ linux-4.0.orig/drivers/gpu/drm/drm_drv.c	2015-04-12 23:12:50.000000000 +0100
@@ -908,5 +908,5 @@ static void __exit drm_core_exit(void)
 	idr_destroy(&drm_minors_idr);
 }
 
-async_module_init(drm_core_init,agp_init);
+module_init(drm_core_init);
 module_exit(drm_core_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/gpu/drm/Kconfig linux-4.0.orig/drivers/gpu/drm/Kconfig
--- linux-4.0/drivers/gpu/drm/Kconfig	2015-04-13 23:52:11.415705252 +0100
+++ linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
@@ -77,13 +77,10 @@ config DRM_KMS_CMA_HELPER
 	help
 	  Choose this if you need the KMS CMA helper functions
 
-
 source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
-source "drivers/gpu/drm/nvidia-ion/Kconfig"
-
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/gpu/drm/Makefile linux-4.0.orig/drivers/gpu/drm/Makefile
--- linux-4.0/drivers/gpu/drm/Makefile	2015-04-13 23:49:11.367703122 +0100
+++ linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
@@ -34,7 +34,6 @@ CFLAGS_drm_trace_points.o := -I$(src)
 
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
-obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-core.c linux-4.0.orig/drivers/hid/hid-core.c
--- linux-4.0/drivers/hid/hid-core.c	2015-04-20 22:56:30.026198292 +0100
+++ linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-async_module_init(hid_init);
+module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-elo.c linux-4.0.orig/drivers/hid/hid-elo.c
--- linux-4.0/drivers/hid/hid-elo.c	2015-04-20 22:56:30.015198292 +0100
+++ linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-async_module_init(elo_driver_init);
+module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/uhid.c linux-4.0.orig/drivers/hid/uhid.c
--- linux-4.0/drivers/hid/uhid.c	2015-04-20 22:54:45.122197052 +0100
+++ linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-async_module_init(uhid_init);
+module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/usbhid/hid-core.c linux-4.0.orig/drivers/hid/usbhid/hid-core.c
--- linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-20 22:56:30.042198292 +0100
+++ linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-async_module_init(hid_init);
+module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hwmon/acpi_power_meter.c linux-4.0.orig/drivers/hwmon/acpi_power_meter.c
--- linux-4.0/drivers/hwmon/acpi_power_meter.c	2015-04-25 00:21:07.441196260 +0100
+++ linux-4.0.orig/drivers/hwmon/acpi_power_meter.c	2015-04-12 23:12:50.000000000 +0100
@@ -1011,5 +1011,5 @@ MODULE_LICENSE("GPL");
 module_param(force_cap_on, bool, 0644);
 MODULE_PARM_DESC(force_cap_on, "Enable power cap even it is unsafe to do so.");
 
-async_module_init(acpi_power_meter_init);
+module_init(acpi_power_meter_init);
 module_exit(acpi_power_meter_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/keyboard/atkbd.c linux-4.0.orig/drivers/input/keyboard/atkbd.c
--- linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-20 22:13:06.626167506 +0100
+++ linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-deferred_module_init(atkbd_init);
+module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/misc/uinput.c linux-4.0.orig/drivers/input/misc/uinput.c
--- linux-4.0/drivers/input/misc/uinput.c	2015-04-20 22:13:06.629167506 +0100
+++ linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-deferred_module_init(uinput_init);
+module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/mouse/psmouse-base.c linux-4.0.orig/drivers/input/mouse/psmouse-base.c
--- linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-20 22:13:06.633167506 +0100
+++ linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-deferred_module_init(psmouse_init);
+module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/mousedev.c linux-4.0.orig/drivers/input/mousedev.c
--- linux-4.0/drivers/input/mousedev.c	2015-04-20 22:13:06.664167506 +0100
+++ linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-deferred_module_init(mousedev_init);
+module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/serio/i8042.c linux-4.0.orig/drivers/input/serio/i8042.c
--- linux-4.0/drivers/input/serio/i8042.c	2015-04-20 22:13:06.667167506 +0100
+++ linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-deferred_module_init(i8042_init);
+module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/serio/serport.c linux-4.0.orig/drivers/input/serio/serport.c
--- linux-4.0/drivers/input/serio/serport.c	2015-04-20 22:13:06.669167506 +0100
+++ linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-deferred_module_init(serport_init);
+module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/Kconfig linux-4.0.orig/drivers/Kconfig
--- linux-4.0/drivers/Kconfig	2015-04-20 21:56:26.393155678 +0100
+++ linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
@@ -1,20 +1,5 @@
 menu "Device Drivers"
 
-config ASYNCHRO_MODULE_INIT
-	bool "Initialize module in Asynchronize way using single module dependencies"
-	---help---
-	Asynchrone drivers initialization routine 
-	
-if ASYNCHRO_MODULE_INIT
-	config ASYNCHRO_MODULE_INIT_DEBUG
-	bool "Debug mode"
-	
-	config ASYNCHRO_MODULE_INIT_THREADS	
-	int "Maximum number of threads"
-	range 0 4
-	default "2" 
-endif
-	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/Makefile linux-4.0.orig/drivers/Makefile
--- linux-4.0/drivers/Makefile	2015-04-19 16:33:49.593718013 +0100
+++ linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
@@ -33,9 +33,6 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
-#ready for asyncronized initialization
-obj-y += async.o
-
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -168,5 +165,3 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
-
-
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/mmc/card/block.c linux-4.0.orig/drivers/mmc/card/block.c
--- linux-4.0/drivers/mmc/card/block.c	2015-04-25 00:41:58.668211056 +0100
+++ linux-4.0.orig/drivers/mmc/card/block.c	2015-04-12 23:12:50.000000000 +0100
@@ -2579,7 +2579,7 @@ static void __exit mmc_blk_exit(void)
 	unregister_blkdev(MMC_BLOCK_MAJOR, "mmc");
 }
 
-async_module_init(mmc_blk_init);
+module_init(mmc_blk_init);
 module_exit(mmc_blk_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/mtd/mtdcore.c linux-4.0.orig/drivers/mtd/mtdcore.c
--- linux-4.0/drivers/mtd/mtdcore.c	2015-04-23 00:38:01.389857454 +0100
+++ linux-4.0.orig/drivers/mtd/mtdcore.c	2015-04-12 23:12:50.000000000 +0100
@@ -1275,7 +1275,7 @@ static void __exit cleanup_mtd(void)
 	bdi_destroy(&mtd_bdi);
 }
 
-async_module_init(init_mtd);
+module_init(init_mtd);
 module_exit(cleanup_mtd);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/mtd/ubi/build.c linux-4.0.orig/drivers/mtd/ubi/build.c
--- linux-4.0/drivers/mtd/ubi/build.c	2015-04-24 18:21:46.563941294 +0100
+++ linux-4.0.orig/drivers/mtd/ubi/build.c	2015-04-12 23:12:50.000000000 +0100
@@ -1336,7 +1336,7 @@ out:
 	pr_err("UBI error: cannot initialize UBI, error %d", err);
 	return err;
 }
-async_module_init(ubi_init);
+late_initcall(ubi_init);
 
 static void __exit ubi_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/net/wireless/b43/main.c linux-4.0.orig/drivers/net/wireless/b43/main.c
--- linux-4.0/drivers/net/wireless/b43/main.c	2015-04-20 22:13:06.678167506 +0100
+++ linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-deferred_module_init(b43_init)
+module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/net/wireless/b43legacy/main.c linux-4.0.orig/drivers/net/wireless/b43legacy/main.c
--- linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-20 22:13:06.684167507 +0100
+++ linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-deferred_module_init(b43legacy_init)
+module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-25 14:12:34.842580070 +0100
+++ linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-async_module_init(ipw2100_init);
+module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c
--- linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-25 14:10:57.707578922 +0100
+++ linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-12 23:12:50.000000000 +0100
@@ -318,4 +318,4 @@ MODULE_PARM_DESC(debug, "debug output ma
 #endif				/* CONFIG_LIBIPW_DEBUG */
 
 module_exit(libipw_exit);
-async_module_init(libipw_init);
+module_init(libipw_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/hotplug/pciehp_core.c linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-20 21:09:50.227122612 +0100
+++ linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-async_module_init(pcied_init,pci_hotplug_init);
+module_init(pcied_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-20 21:09:50.225122612 +0100
+++ linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-async_module_init(pci_hotplug_init,pcie_portdrv_init);
+module_init(pci_hotplug_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/hotplug/shpchp_core.c linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-20 22:41:35.815187718 +0100
+++ linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-async_module_init(shpcd_init,pcied_init);
+module_init(shpcd_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/pcie/portdrv_pci.c linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-20 22:41:42.408187796 +0100
+++ linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-async_module_init(pcie_portdrv_init);
+module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/platform/x86/mxm-wmi.c linux-4.0.orig/drivers/platform/x86/mxm-wmi.c
--- linux-4.0/drivers/platform/x86/mxm-wmi.c	2015-04-25 00:36:29.980207169 +0100
+++ linux-4.0.orig/drivers/platform/x86/mxm-wmi.c	2015-04-12 23:12:50.000000000 +0100
@@ -107,5 +107,5 @@ static void __exit mxm_wmi_exit(void)
 {
 }
 
-async_module_init(mxm_wmi_init);
+module_init(mxm_wmi_init);
 module_exit(mxm_wmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/uio/uio.c linux-4.0.orig/drivers/uio/uio.c
--- linux-4.0/drivers/uio/uio.c	2015-04-25 00:23:10.927197720 +0100
+++ linux-4.0.orig/drivers/uio/uio.c	2015-04-12 23:12:50.000000000 +0100
@@ -887,6 +887,6 @@ static void __exit uio_exit(void)
 	release_uio_class();
 }
 
-async_module_init(uio_init)
+module_init(uio_init)
 module_exit(uio_exit)
 MODULE_LICENSE("GPL v2");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/uio/uio_cif.c linux-4.0.orig/drivers/uio/uio_cif.c
--- linux-4.0/drivers/uio/uio_cif.c	2015-04-25 00:22:42.880197388 +0100
+++ linux-4.0.orig/drivers/uio/uio_cif.c	2015-04-12 23:12:50.000000000 +0100
@@ -134,7 +134,7 @@ static struct pci_driver hilscher_pci_dr
 	.remove = hilscher_pci_remove,
 };
 
-async_module_pci_driver(hilscher_pci_driver);
+module_pci_driver(hilscher_pci_driver);
 MODULE_DEVICE_TABLE(pci, hilscher_pci_ids);
 MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Hans J. Koch, Benedikt Spranger");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ehci-hcd.c linux-4.0.orig/drivers/usb/host/ehci-hcd.c
--- linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-20 22:43:20.656188957 +0100
+++ linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-async_module_init(ehci_hcd_init);
+module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ehci-pci.c linux-4.0.orig/drivers/usb/host/ehci-pci.c
--- linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-20 22:43:20.579188957 +0100
+++ linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-async_module_init(ehci_pci_init,ehci_hcd_init);
+module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ehci-platform.c linux-4.0.orig/drivers/usb/host/ehci-platform.c
--- linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-20 22:43:20.574188957 +0100
+++ linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-async_module_init(ehci_platform_init,ehci_hcd_init);
+module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ohci-hcd.c linux-4.0.orig/drivers/usb/host/ohci-hcd.c
--- linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-20 22:43:20.567188956 +0100
+++ linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-async_module_init(ohci_hcd_mod_init,ehci_platform_init);
+module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ohci-pci.c linux-4.0.orig/drivers/usb/host/ohci-pci.c
--- linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-20 22:43:20.559188956 +0100
+++ linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-async_module_init(ohci_pci_init,ohci_hcd_mod_init);
+module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ohci-platform.c linux-4.0.orig/drivers/usb/host/ohci-platform.c
--- linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-20 22:43:20.543188956 +0100
+++ linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-async_module_init(ohci_platform_init,ohci_hcd_mod_init);
+module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ssb-hcd.c linux-4.0.orig/drivers/usb/host/ssb-hcd.c
--- linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-20 22:43:20.538188956 +0100
+++ linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-async_module_init(ssb_hcd_init);
+module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/uhci-hcd.c linux-4.0.orig/drivers/usb/host/uhci-hcd.c
--- linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-20 22:43:20.532188956 +0100
+++ linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-async_module_init(uhci_hcd_init);
+module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/cifs/cifsfs.c linux-4.0.orig/fs/cifs/cifsfs.c
--- linux-4.0/fs/cifs/cifsfs.c	2015-04-23 23:19:45.719851229 +0100
+++ linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs);
+module_init(init_cifs)
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/ext3/super.c linux-4.0.orig/fs/ext3/super.c
--- linux-4.0/fs/ext3/super.c	2015-04-25 13:44:36.823560227 +0100
+++ linux-4.0.orig/fs/ext3/super.c	2015-04-12 23:12:50.000000000 +0100
@@ -3161,5 +3161,5 @@ static void __exit exit_ext3_fs(void)
 MODULE_AUTHOR("Remy Card, Stephen Tweedie, Andrew Morton, Andreas Dilger, Theodore Ts'o and others");
 MODULE_DESCRIPTION("Second Extended Filesystem with journaling extensions");
 MODULE_LICENSE("GPL");
-async_module_init(init_ext3_fs)
+module_init(init_ext3_fs)
 module_exit(exit_ext3_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fat/inode.c linux-4.0.orig/fs/fat/inode.c
--- linux-4.0/fs/fat/inode.c	2015-04-25 13:38:24.870555829 +0100
+++ linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-async_module_init(init_fat_fs)
+module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fat/namei_msdos.c linux-4.0.orig/fs/fat/namei_msdos.c
--- linux-4.0/fs/fat/namei_msdos.c	2015-04-25 13:39:33.847556644 +0100
+++ linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-async_module_init(init_msdos_fs)
+module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fat/namei_vfat.c linux-4.0.orig/fs/fat/namei_vfat.c
--- linux-4.0/fs/fat/namei_vfat.c	2015-04-25 13:39:16.708556442 +0100
+++ linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-async_module_init(init_vfat_fs)
+module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fuse/cuse.c linux-4.0.orig/fs/fuse/cuse.c
--- linux-4.0/fs/fuse/cuse.c	2015-04-25 13:35:19.189553633 +0100
+++ linux-4.0.orig/fs/fuse/cuse.c	2015-04-12 23:12:50.000000000 +0100
@@ -637,7 +637,7 @@ static void __exit cuse_exit(void)
 	class_destroy(cuse_class);
 }
 
-async_module_init(cuse_init);
+module_init(cuse_init);
 module_exit(cuse_exit);
 
 MODULE_AUTHOR("Tejun Heo <tj@kernel.org>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fuse/inode.c linux-4.0.orig/fs/fuse/inode.c
--- linux-4.0/fs/fuse/inode.c	2015-04-25 13:34:15.408552879 +0100
+++ linux-4.0.orig/fs/fuse/inode.c	2015-04-12 23:12:50.000000000 +0100
@@ -1319,5 +1319,5 @@ static void __exit fuse_exit(void)
 	fuse_dev_cleanup();
 }
 
-async_module_init(fuse_init);
+module_init(fuse_init);
 module_exit(fuse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/isofs/inode.c linux-4.0.orig/fs/isofs/inode.c
--- linux-4.0/fs/isofs/inode.c	2015-04-25 13:25:05.182546372 +0100
+++ linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-async_module_init(init_iso9660_fs)
+module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/jbd/journal.c linux-4.0.orig/fs/jbd/journal.c
--- linux-4.0/fs/jbd/journal.c	2015-04-25 13:42:47.154558930 +0100
+++ linux-4.0.orig/fs/jbd/journal.c	2015-04-12 23:12:50.000000000 +0100
@@ -2140,6 +2140,6 @@ static void __exit journal_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-async_module_init(journal_init);
+module_init(journal_init);
 module_exit(journal_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/ntfs/super.c linux-4.0.orig/fs/ntfs/super.c
--- linux-4.0/fs/ntfs/super.c	2015-04-20 22:13:06.758167507 +0100
+++ linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-deferred_module_init(init_ntfs_fs)
+module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/init/main.c linux-4.0.orig/init/main.c
--- linux-4.0/init/main.c	2015-04-18 22:19:31.372041768 +0100
+++ linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	//free_initmem();
+	free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/net/bluetooth/rfcomm/core.c linux-4.0.orig/net/bluetooth/rfcomm/core.c
--- linux-4.0/net/bluetooth/rfcomm/core.c	2015-04-22 23:52:16.904755106 +0100
+++ linux-4.0.orig/net/bluetooth/rfcomm/core.c	2015-04-12 23:12:50.000000000 +0100
@@ -2255,7 +2255,7 @@ static void __exit rfcomm_exit(void)
 	rfcomm_cleanup_sockets();
 }
 
-async_module_init(rfcomm_init);
+module_init(rfcomm_init);
 module_exit(rfcomm_exit);
 
 module_param(disable_cfc, bool, 0644);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/net/wireless/lib80211.c linux-4.0.orig/net/wireless/lib80211.c
--- linux-4.0/net/wireless/lib80211.c	2015-04-25 11:22:23.247459314 +0100
+++ linux-4.0.orig/net/wireless/lib80211.c	2015-04-12 23:12:50.000000000 +0100
@@ -253,5 +253,5 @@ static void __exit lib80211_exit(void)
 	BUG_ON(!list_empty(&lib80211_crypto_algs));
 }
 
-async_module_init(lib80211_init);
+module_init(lib80211_init);
 module_exit(lib80211_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/net/wireless/lib80211_crypt_ccmp.c linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c
--- linux-4.0/net/wireless/lib80211_crypt_ccmp.c	2015-04-25 14:09:41.624578022 +0100
+++ linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c	2015-04-12 23:12:50.000000000 +0100
@@ -475,5 +475,5 @@ static void __exit lib80211_crypto_ccmp_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_ccmp);
 }
 
-async_module_init(lib80211_crypto_ccmp_init);
+module_init(lib80211_crypto_ccmp_init);
 module_exit(lib80211_crypto_ccmp_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/net/wireless/lib80211_crypt_tkip.c linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c
--- linux-4.0/net/wireless/lib80211_crypt_tkip.c	2015-04-25 14:09:41.604578022 +0100
+++ linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c	2015-04-12 23:12:50.000000000 +0100
@@ -758,5 +758,5 @@ static void __exit lib80211_crypto_tkip_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_tkip);
 }
 
-async_module_init(lib80211_crypto_tkip_init);
+module_init(lib80211_crypto_tkip_init);
 module_exit(lib80211_crypto_tkip_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/net/wireless/lib80211_crypt_wep.c linux-4.0.orig/net/wireless/lib80211_crypt_wep.c
--- linux-4.0/net/wireless/lib80211_crypt_wep.c	2015-04-25 14:10:00.619578247 +0100
+++ linux-4.0.orig/net/wireless/lib80211_crypt_wep.c	2015-04-12 23:12:50.000000000 +0100
@@ -285,5 +285,5 @@ static void __exit lib80211_crypto_wep_e
 	lib80211_unregister_crypto_ops(&lib80211_crypt_wep);
 }
 
-async_module_init(lib80211_crypto_wep_init);
+module_init(lib80211_crypto_wep_init);
 module_exit(lib80211_crypto_wep_exit);
Only in linux-4.0: .project
Only in linux-4.0: .settings
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/compress_offload.c linux-4.0.orig/sound/core/compress_offload.c
--- linux-4.0/sound/core/compress_offload.c	2015-04-20 22:13:06.775167508 +0100
+++ linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-deferred_module_init(snd_compress_init);
+module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/hrtimer.c linux-4.0.orig/sound/core/hrtimer.c
--- linux-4.0/sound/core/hrtimer.c	2015-04-23 00:03:13.589779595 +0100
+++ linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-async_module_init(snd_hrtimer_init,alsa_timer_init);
+module_init(snd_hrtimer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/hwdep.c linux-4.0.orig/sound/core/hwdep.c
--- linux-4.0/sound/core/hwdep.c	2015-04-23 00:11:44.178798636 +0100
+++ linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-async_module_init(alsa_hwdep_init,alsa_pcm_init);
+module_init(alsa_hwdep_init)
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/oss/mixer_oss.c linux-4.0.orig/sound/core/oss/mixer_oss.c
--- linux-4.0/sound/core/oss/mixer_oss.c	2015-04-23 00:05:35.965784905 +0100
+++ linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-async_module_init(alsa_mixer_oss_init,alsa_timer_init)
+module_init(alsa_mixer_oss_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/oss/pcm_oss.c linux-4.0.orig/sound/core/oss/pcm_oss.c
--- linux-4.0/sound/core/oss/pcm_oss.c	2015-04-23 00:09:44.572794176 +0100
+++ linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-async_module_init(alsa_pcm_oss_init,alsa_pcm_init)
+module_init(alsa_pcm_oss_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/pcm.c linux-4.0.orig/sound/core/pcm.c
--- linux-4.0/sound/core/pcm.c	2015-04-23 00:09:44.605794177 +0100
+++ linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-async_module_init(alsa_pcm_init,alsa_mixer_oss_init)
+module_init(alsa_pcm_init)
 module_exit(alsa_pcm_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/rawmidi.c linux-4.0.orig/sound/core/rawmidi.c
--- linux-4.0/sound/core/rawmidi.c	2015-04-20 22:13:06.795167508 +0100
+++ linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-deferred_module_init(alsa_rawmidi_init)
+module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/rtctimer.c linux-4.0.orig/sound/core/rtctimer.c
--- linux-4.0/sound/core/rtctimer.c	2015-04-20 22:13:06.797167508 +0100
+++ linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-deferred_module_init(rtctimer_init)
+module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/oss/seq_oss.c linux-4.0.orig/sound/core/seq/oss/seq_oss.c
--- linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-20 22:13:06.799167508 +0100
+++ linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-deferred_module_init(alsa_seq_oss_init)
+module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq.c linux-4.0.orig/sound/core/seq/seq.c
--- linux-4.0/sound/core/seq/seq.c	2015-04-23 00:35:01.473850745 +0100
+++ linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-async_module_init(alsa_seq_init,alsa_seq_device_init)
+module_init(alsa_seq_init)
 module_exit(alsa_seq_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_device.c linux-4.0.orig/sound/core/seq/seq_device.c
--- linux-4.0/sound/core/seq/seq_device.c	2015-04-23 00:35:56.908852812 +0100
+++ linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-async_module_init(alsa_seq_device_init,alsa_timer_init)
+module_init(alsa_seq_device_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_dummy.c linux-4.0.orig/sound/core/seq/seq_dummy.c
--- linux-4.0/sound/core/seq/seq_dummy.c	2015-04-23 00:35:54.787852733 +0100
+++ linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-async_module_init(alsa_seq_dummy_init,alsa_seq_init)
+module_init(alsa_seq_dummy_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_midi.c linux-4.0.orig/sound/core/seq/seq_midi.c
--- linux-4.0/sound/core/seq/seq_midi.c	2015-04-23 00:35:39.608852167 +0100
+++ linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-async_module_init(alsa_seq_midi_init,alsa_seq_init)
+module_init(alsa_seq_midi_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_midi_emul.c linux-4.0.orig/sound/core/seq/seq_midi_emul.c
--- linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-20 22:13:06.805167508 +0100
+++ linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-deferred_module_init(alsa_seq_midi_emul_init)
+module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_midi_event.c linux-4.0.orig/sound/core/seq/seq_midi_event.c
--- linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-20 22:13:06.807167508 +0100
+++ linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-deferred_module_init(alsa_seq_midi_event_init)
+module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_virmidi.c linux-4.0.orig/sound/core/seq/seq_virmidi.c
--- linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-20 22:13:06.811167508 +0100
+++ linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-deferred_module_init(alsa_virmidi_init)
+module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/timer.c linux-4.0.orig/sound/core/timer.c
--- linux-4.0/sound/core/timer.c	2015-04-23 00:01:55.820776695 +0100
+++ linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-async_module_init(alsa_timer_init)
+module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/aloop.c linux-4.0.orig/sound/drivers/aloop.c
--- linux-4.0/sound/drivers/aloop.c	2015-04-20 22:13:06.820167508 +0100
+++ linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-deferred_module_init(alsa_card_loopback_init)
+module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/dummy.c linux-4.0.orig/sound/drivers/dummy.c
--- linux-4.0/sound/drivers/dummy.c	2015-04-20 22:13:06.823167508 +0100
+++ linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-deferred_module_init(alsa_card_dummy_init)
+module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/mpu401/mpu401.c linux-4.0.orig/sound/drivers/mpu401/mpu401.c
--- linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-20 22:13:06.828167508 +0100
+++ linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-deferred_module_init(alsa_card_mpu401_init)
+module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/mpu401/mpu401_uart.c linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-20 22:13:06.826167508 +0100
+++ linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-deferred_module_init(alsa_mpu401_uart_init)
+module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/virmidi.c linux-4.0.orig/sound/drivers/virmidi.c
--- linux-4.0/sound/drivers/virmidi.c	2015-04-20 22:13:06.830167508 +0100
+++ linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-deferred_module_init(alsa_card_virmidi_init)
+module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/oss/soundcard.c linux-4.0.orig/sound/oss/soundcard.c
--- linux-4.0/sound/oss/soundcard.c	2015-04-20 22:13:06.833167508 +0100
+++ linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-deferred_module_init(oss_init);
+module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/hda_intel.c linux-4.0.orig/sound/pci/hda/hda_intel.c
--- linux-4.0/sound/pci/hda/hda_intel.c	2015-04-24 18:38:21.477953059 +0100
+++ linux-4.0.orig/sound/pci/hda/hda_intel.c	2015-04-12 23:12:50.000000000 +0100
@@ -2183,4 +2183,4 @@ static struct pci_driver azx_driver = {
 	},
 };
 
-async_module_pci_driver(azx_driver);
+module_pci_driver(azx_driver);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_analog.c linux-4.0.orig/sound/pci/hda/patch_analog.c
--- linux-4.0/sound/pci/hda/patch_analog.c	2015-04-23 00:27:57.196834922 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-async_module_init(patch_analog_init,alsa_hwdep_init)
+module_init(patch_analog_init)
 module_exit(patch_analog_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_ca0110.c linux-4.0.orig/sound/pci/hda/patch_ca0110.c
--- linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-23 00:30:47.838841286 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-async_module_init(patch_ca0110_init,alsa_hwdep_init)
+module_init(patch_ca0110_init)
 module_exit(patch_ca0110_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_ca0132.c linux-4.0.orig/sound/pci/hda/patch_ca0132.c
--- linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-23 00:24:21.396826875 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-async_module_init(patch_ca0132_init,alsa_hwdep_init)
+module_init(patch_ca0132_init)
 module_exit(patch_ca0132_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_cirrus.c linux-4.0.orig/sound/pci/hda/patch_cirrus.c
--- linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-23 00:28:56.911837149 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-async_module_init(patch_cirrus_init,alsa_hwdep_init)
+module_init(patch_cirrus_init)
 module_exit(patch_cirrus_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_cmedia.c linux-4.0.orig/sound/pci/hda/patch_cmedia.c
--- linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-23 00:30:47.845841286 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-async_module_init(patch_cmedia_init,alsa_hwdep_init)
+module_init(patch_cmedia_init)
 module_exit(patch_cmedia_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_conexant.c linux-4.0.orig/sound/pci/hda/patch_conexant.c
--- linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-23 00:30:47.788841284 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-async_module_init(patch_conexant_init,alsa_hwdep_init)
+module_init(patch_conexant_init)
 module_exit(patch_conexant_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_hdmi.c linux-4.0.orig/sound/pci/hda/patch_hdmi.c
--- linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-23 00:30:47.856841287 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-async_module_init(patch_hdmi_init,alsa_hwdep_init)
+module_init(patch_hdmi_init)
 module_exit(patch_hdmi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_realtek.c linux-4.0.orig/sound/pci/hda/patch_realtek.c
--- linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-23 00:30:47.823841285 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-async_module_init(patch_realtek_init,alsa_hwdep_init)
+module_init(patch_realtek_init)
 module_exit(patch_realtek_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_si3054.c linux-4.0.orig/sound/pci/hda/patch_si3054.c
--- linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-23 00:31:17.252842383 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-async_module_init(patch_si3054_init,alsa_hwdep_init)
+module_init(patch_si3054_init)
 module_exit(patch_si3054_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_sigmatel.c linux-4.0.orig/sound/pci/hda/patch_sigmatel.c
--- linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-23 00:28:36.566836391 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-async_module_init(patch_sigmatel_init,alsa_hwdep_init)
+module_init(patch_sigmatel_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_via.c linux-4.0.orig/sound/pci/hda/patch_via.c
--- linux-4.0/sound/pci/hda/patch_via.c	2015-04-23 00:30:47.831841286 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-async_module_init(patch_via_init,alsa_hwdep_init)
+module_init(patch_via_init)
 module_exit(patch_via_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/ppc/powermac.c linux-4.0.orig/sound/ppc/powermac.c
--- linux-4.0/sound/ppc/powermac.c	2015-04-20 22:13:06.887167509 +0100
+++ linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-deferred_module_init(alsa_card_pmac_init)
+module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/ppc/snd_ps3.c linux-4.0.orig/sound/ppc/snd_ps3.c
--- linux-4.0/sound/ppc/snd_ps3.c	2015-04-20 22:13:06.892167509 +0100
+++ linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-deferred_module_init(snd_ps3_init);
+module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/synth/emux/emux.c linux-4.0.orig/sound/synth/emux/emux.c
--- linux-4.0/sound/synth/emux/emux.c	2015-04-20 22:13:06.894167509 +0100
+++ linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-deferred_module_init(alsa_emux_init)
+module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/synth/util_mem.c linux-4.0.orig/sound/synth/util_mem.c
--- linux-4.0/sound/synth/util_mem.c	2015-04-20 22:13:06.896167509 +0100
+++ linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-deferred_module_init(alsa_util_mem_init)
+module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/aes_generic.c linux-4.0/crypto/aes_generic.c
--- linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/aes_generic.c	2015-04-20 22:13:06.460167504 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+deferred_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/af_alg.c linux-4.0/crypto/af_alg.c
--- linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/af_alg.c	2015-04-25 12:21:27.697501229 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+async_module_init(af_alg_init);
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_hash.c linux-4.0/crypto/algif_hash.c
--- linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_hash.c	2015-04-25 12:24:02.257503057 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+async_module_init(algif_hash_init);
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_skcipher.c linux-4.0/crypto/algif_skcipher.c
--- linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_skcipher.c	2015-04-25 12:24:02.247503057 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+async_module_init(algif_skcipher_init);
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ansi_cprng.c linux-4.0/crypto/ansi_cprng.c
--- linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ansi_cprng.c	2015-04-20 22:13:06.507167504 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+deferred_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.0/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-20 22:13:09.392167539 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+deferred_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-20 22:13:06.512167505 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+deferred_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.0/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-20 22:13:06.515167505 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+deferred_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/authenc.c linux-4.0/crypto/authenc.c
--- linux-4.0.orig/crypto/authenc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/authenc.c	2015-04-25 13:09:50.373535554 +0100
@@ -716,7 +716,7 @@ static void __exit crypto_authenc_module
 	crypto_unregister_template(&crypto_authenc_tmpl);
 }
 
-module_init(crypto_authenc_module_init);
+async_module_init(crypto_authenc_module_init);
 module_exit(crypto_authenc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/authencesn.c linux-4.0/crypto/authencesn.c
--- linux-4.0.orig/crypto/authencesn.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/authencesn.c	2015-04-25 13:09:50.381535554 +0100
@@ -808,7 +808,7 @@ static void __exit crypto_authenc_esn_mo
 	crypto_unregister_template(&crypto_authenc_esn_tmpl);
 }
 
-module_init(crypto_authenc_esn_module_init);
+async_module_init(crypto_authenc_esn_module_init);
 module_exit(crypto_authenc_esn_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/blowfish_generic.c linux-4.0/crypto/blowfish_generic.c
--- linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/blowfish_generic.c	2015-04-25 13:29:56.391549816 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+async_module_init(blowfish_mod_init);
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cast5_generic.c linux-4.0/crypto/cast5_generic.c
--- linux-4.0.orig/crypto/cast5_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cast5_generic.c	2015-04-25 13:17:53.998541273 +0100
@@ -544,7 +544,7 @@ static void __exit cast5_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast5_mod_init);
+async_module_init(cast5_mod_init);
 module_exit(cast5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cast6_generic.c linux-4.0/crypto/cast6_generic.c
--- linux-4.0.orig/crypto/cast6_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cast6_generic.c	2015-04-25 13:17:54.008541273 +0100
@@ -286,7 +286,7 @@ static void __exit cast6_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast6_mod_init);
+async_module_init(cast6_mod_init);
 module_exit(cast6_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cbc.c linux-4.0/crypto/cbc.c
--- linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cbc.c	2015-04-20 22:13:06.531167505 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+deferred_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32.c linux-4.0/crypto/crc32.c
--- linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32.c	2015-04-20 22:13:06.533167505 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+deferred_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32c_generic.c linux-4.0/crypto/crc32c_generic.c
--- linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32c_generic.c	2015-04-20 22:13:06.535167505 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+deferred_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crct10dif_generic.c linux-4.0/crypto/crct10dif_generic.c
--- linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crct10dif_generic.c	2015-04-20 22:13:06.537167505 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+deferred_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_null.c linux-4.0/crypto/crypto_null.c
--- linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_null.c	2015-04-20 22:13:06.541167505 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+deferred_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_user.c linux-4.0/crypto/crypto_user.c
--- linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_user.c	2015-04-20 22:13:06.543167505 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+deferred_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ecb.c linux-4.0/crypto/ecb.c
--- linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ecb.c	2015-04-20 22:13:06.545167505 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+deferred_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lrw.c linux-4.0/crypto/lrw.c
--- linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lrw.c	2015-04-20 22:13:06.548167505 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4.c linux-4.0/crypto/lz4.c
--- linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4.c	2015-04-20 22:13:06.549167505 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+deferred_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4hc.c linux-4.0/crypto/lz4hc.c
--- linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4hc.c	2015-04-20 22:13:06.552167505 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+deferred_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lzo.c linux-4.0/crypto/lzo.c
--- linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lzo.c	2015-04-25 13:00:31.553528946 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+async_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md4.c linux-4.0/crypto/md4.c
--- linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md4.c	2015-04-20 22:13:06.558167505 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+deferred_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md5.c linux-4.0/crypto/md5.c
--- linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md5.c	2015-04-20 22:13:06.561167505 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+deferred_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd128.c linux-4.0/crypto/rmd128.c
--- linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd128.c	2015-04-20 22:13:06.564167505 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+deferred_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd160.c linux-4.0/crypto/rmd160.c
--- linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd160.c	2015-04-20 22:13:06.566167505 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+deferred_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd256.c linux-4.0/crypto/rmd256.c
--- linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd256.c	2015-04-20 22:13:06.568167505 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+deferred_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd320.c linux-4.0/crypto/rmd320.c
--- linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd320.c	2015-04-20 22:13:06.571167505 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+deferred_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha1_generic.c linux-4.0/crypto/sha1_generic.c
--- linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha1_generic.c	2015-04-20 22:13:06.573167505 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+deferred_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha256_generic.c linux-4.0/crypto/sha256_generic.c
--- linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha256_generic.c	2015-04-20 22:13:06.575167505 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+deferred_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha512_generic.c linux-4.0/crypto/sha512_generic.c
--- linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha512_generic.c	2015-04-20 22:13:06.578167505 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+deferred_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tcrypt.c linux-4.0/crypto/tcrypt.c
--- linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tcrypt.c	2015-04-20 22:13:06.582167505 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+deferred_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tea.c linux-4.0/crypto/tea.c
--- linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tea.c	2015-04-20 22:13:06.585167505 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+deferred_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tgr192.c linux-4.0/crypto/tgr192.c
--- linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tgr192.c	2015-04-20 22:13:06.588167505 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+deferred_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/twofish_generic.c linux-4.0/crypto/twofish_generic.c
--- linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/twofish_generic.c	2015-04-20 22:13:06.590167505 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+deferred_module_init(twofish_mod_init);
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/wp512.c linux-4.0/crypto/wp512.c
--- linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/wp512.c	2015-04-20 22:13:06.596167506 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+deferred_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xcbc.c linux-4.0/crypto/xcbc.c
--- linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xcbc.c	2015-04-20 22:13:06.598167506 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+deferred_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xts.c linux-4.0/crypto/xts.c
--- linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xts.c	2015-04-20 22:13:06.600167506 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/zlib.c linux-4.0/crypto/zlib.c
--- linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/zlib.c	2015-04-25 13:23:17.917545104 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+async_module_init(zlib_mod_init);
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/ac.c linux-4.0/drivers/acpi/ac.c
--- linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/ac.c	2015-04-20 21:09:50.016122610 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+async_module_init(acpi_ac_init);
 module_exit(acpi_ac_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_ipmi.c linux-4.0/drivers/acpi/acpi_ipmi.c
--- linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-20 21:09:50.020122610 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+async_module_init(acpi_ipmi_init);
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_pad.c linux-4.0/drivers/acpi/acpi_pad.c
--- linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_pad.c	2015-04-20 21:09:50.023122610 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+async_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/battery.c linux-4.0/drivers/acpi/battery.c
--- linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/battery.c	2015-04-20 21:09:50.027122610 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+async_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/processor_driver.c linux-4.0/drivers/acpi/processor_driver.c
--- linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/processor_driver.c	2015-04-20 21:09:50.030122610 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+async_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/sbs.c linux-4.0/drivers/acpi/sbs.c
--- linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/sbs.c	2015-04-20 21:09:50.034122610 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+async_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/thermal.c linux-4.0/drivers/acpi/thermal.c
--- linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/thermal.c	2015-04-20 21:09:50.038122610 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+async_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/video.c linux-4.0/drivers/acpi/video.c
--- linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/video.c	2015-04-20 21:09:50.070122610 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+async_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
Only in linux-4.0/drivers: async.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/acard-ahci.c linux-4.0/drivers/ata/acard-ahci.c
--- linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/acard-ahci.c	2015-04-19 23:13:29.272001581 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-module_pci_driver(acard_ahci_pci_driver);
+async_module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-19 23:24:31.701009415 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/backend.c linux-4.0/drivers/char/agp/backend.c
--- linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/backend.c	2015-04-19 23:42:07.686021902 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+async_module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/nvidia-agp.c linux-4.0/drivers/char/agp/nvidia-agp.c
--- linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-20 21:09:50.073122610 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+async_module_init(agp_nvidia_init,agp_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hpet.c linux-4.0/drivers/char/hpet.c
--- linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hpet.c	2015-04-20 21:09:50.077122610 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+async_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/core.c linux-4.0/drivers/char/hw_random/core.c
--- linux-4.0.orig/drivers/char/hw_random/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/core.c	2015-04-25 14:05:00.843574702 +0100
@@ -552,7 +552,7 @@ static void __exit hwrng_modexit(void)
 	unregister_miscdev();
 }
 
-module_init(hwrng_modinit);
+async_module_init(hwrng_modinit);
 module_exit(hwrng_modexit);
 
 MODULE_DESCRIPTION("H/W Random Number Generator (RNG) driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/intel-rng.c linux-4.0/drivers/char/hw_random/intel-rng.c
--- linux-4.0.orig/drivers/char/hw_random/intel-rng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/intel-rng.c	2015-04-25 14:06:23.957575685 +0100
@@ -325,7 +325,7 @@ PFX "RNG, try using the 'no_fwh_detect'
 }
 
 
-static int __init mod_init(void)
+static int __init intel_rng_mod_init(void)
 {
 	int err = -ENODEV;
 	int i;
@@ -411,7 +411,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-module_init(mod_init);
+async_module_init(intel_rng_mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for Intel chipsets");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.0/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-19 21:38:49.773934419 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+async_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.0/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-19 21:38:49.714934419 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+async_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.0/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-19 21:38:49.689934418 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+async_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c linux-4.0/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-19 21:38:49.685934418 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+async_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.0/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-19 21:38:49.680934418 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+async_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/speedstep-ich.c linux-4.0/drivers/cpufreq/speedstep-ich.c
--- linux-4.0.orig/drivers/cpufreq/speedstep-ich.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/speedstep-ich.c	2015-04-25 00:38:38.345208687 +0100
@@ -383,5 +383,5 @@ MODULE_DESCRIPTION("Speedstep driver for
 		"with ICH-M southbridges.");
 MODULE_LICENSE("GPL");
 
-module_init(speedstep_init);
+async_module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/dma/ioat/pci.c linux-4.0/drivers/dma/ioat/pci.c
--- linux-4.0.orig/drivers/dma/ioat/pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/dma/ioat/pci.c	2015-04-25 11:29:21.053464255 +0100
@@ -252,7 +252,7 @@ static int __init ioat_init_module(void)
 
 	return err;
 }
-module_init(ioat_init_module);
+async_module_init(ioat_init_module);
 
 static void __exit ioat_exit_module(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/drm_drv.c linux-4.0/drivers/gpu/drm/drm_drv.c
--- linux-4.0.orig/drivers/gpu/drm/drm_drv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/drm_drv.c	2015-04-22 23:44:48.342738378 +0100
@@ -908,5 +908,5 @@ static void __exit drm_core_exit(void)
 	idr_destroy(&drm_minors_idr);
 }
 
-module_init(drm_core_init);
+async_module_init(drm_core_init,agp_init);
 module_exit(drm_core_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-13 23:52:11.415705252 +0100
@@ -77,10 +77,13 @@ config DRM_KMS_CMA_HELPER
 	help
 	  Choose this if you need the KMS CMA helper functions
 
+
 source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-13 23:49:11.367703122 +0100
@@ -34,6 +34,7 @@ CFLAGS_drm_trace_points.o := -I$(src)
 
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-core.c linux-4.0/drivers/hid/hid-core.c
--- linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-core.c	2015-04-20 22:56:30.026198292 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+async_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-elo.c linux-4.0/drivers/hid/hid-elo.c
--- linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-elo.c	2015-04-20 22:56:30.015198292 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+async_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/uhid.c linux-4.0/drivers/hid/uhid.c
--- linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/uhid.c	2015-04-20 22:54:45.122197052 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+async_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/usbhid/hid-core.c linux-4.0/drivers/hid/usbhid/hid-core.c
--- linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-20 22:56:30.042198292 +0100
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+async_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hwmon/acpi_power_meter.c linux-4.0/drivers/hwmon/acpi_power_meter.c
--- linux-4.0.orig/drivers/hwmon/acpi_power_meter.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hwmon/acpi_power_meter.c	2015-04-25 00:21:07.441196260 +0100
@@ -1011,5 +1011,5 @@ MODULE_LICENSE("GPL");
 module_param(force_cap_on, bool, 0644);
 MODULE_PARM_DESC(force_cap_on, "Enable power cap even it is unsafe to do so.");
 
-module_init(acpi_power_meter_init);
+async_module_init(acpi_power_meter_init);
 module_exit(acpi_power_meter_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/keyboard/atkbd.c linux-4.0/drivers/input/keyboard/atkbd.c
--- linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-20 22:13:06.626167506 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+deferred_module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/misc/uinput.c linux-4.0/drivers/input/misc/uinput.c
--- linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/misc/uinput.c	2015-04-20 22:13:06.629167506 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+deferred_module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mouse/psmouse-base.c linux-4.0/drivers/input/mouse/psmouse-base.c
--- linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-20 22:13:06.633167506 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+deferred_module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mousedev.c linux-4.0/drivers/input/mousedev.c
--- linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mousedev.c	2015-04-20 22:13:06.664167506 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+deferred_module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/i8042.c linux-4.0/drivers/input/serio/i8042.c
--- linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/i8042.c	2015-04-20 22:13:06.667167506 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+deferred_module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/serport.c linux-4.0/drivers/input/serio/serport.c
--- linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/serport.c	2015-04-20 22:13:06.669167506 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+deferred_module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-20 21:56:26.393155678 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-19 16:33:49.593718013 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mmc/card/block.c linux-4.0/drivers/mmc/card/block.c
--- linux-4.0.orig/drivers/mmc/card/block.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mmc/card/block.c	2015-04-25 00:41:58.668211056 +0100
@@ -2579,7 +2579,7 @@ static void __exit mmc_blk_exit(void)
 	unregister_blkdev(MMC_BLOCK_MAJOR, "mmc");
 }
 
-module_init(mmc_blk_init);
+async_module_init(mmc_blk_init);
 module_exit(mmc_blk_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/mtdcore.c linux-4.0/drivers/mtd/mtdcore.c
--- linux-4.0.orig/drivers/mtd/mtdcore.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/mtdcore.c	2015-04-23 00:38:01.389857454 +0100
@@ -1275,7 +1275,7 @@ static void __exit cleanup_mtd(void)
 	bdi_destroy(&mtd_bdi);
 }
 
-module_init(init_mtd);
+async_module_init(init_mtd);
 module_exit(cleanup_mtd);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/ubi/build.c linux-4.0/drivers/mtd/ubi/build.c
--- linux-4.0.orig/drivers/mtd/ubi/build.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/ubi/build.c	2015-04-24 18:21:46.563941294 +0100
@@ -1336,7 +1336,7 @@ out:
 	pr_err("UBI error: cannot initialize UBI, error %d", err);
 	return err;
 }
-late_initcall(ubi_init);
+async_module_init(ubi_init);
 
 static void __exit ubi_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43/main.c linux-4.0/drivers/net/wireless/b43/main.c
--- linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43/main.c	2015-04-20 22:13:06.678167506 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+deferred_module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43legacy/main.c linux-4.0/drivers/net/wireless/b43legacy/main.c
--- linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-20 22:13:06.684167507 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+deferred_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-25 14:12:34.842580070 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+async_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-25 14:10:57.707578922 +0100
@@ -318,4 +318,4 @@ MODULE_PARM_DESC(debug, "debug output ma
 #endif				/* CONFIG_LIBIPW_DEBUG */
 
 module_exit(libipw_exit);
-module_init(libipw_init);
+async_module_init(libipw_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c linux-4.0/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-20 21:09:50.227122612 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+async_module_init(pcied_init,pci_hotplug_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-20 21:09:50.225122612 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+async_module_init(pci_hotplug_init,pcie_portdrv_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c linux-4.0/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-20 22:41:35.815187718 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+async_module_init(shpcd_init,pcied_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c linux-4.0/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-20 22:41:42.408187796 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+async_module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/platform/x86/mxm-wmi.c linux-4.0/drivers/platform/x86/mxm-wmi.c
--- linux-4.0.orig/drivers/platform/x86/mxm-wmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/platform/x86/mxm-wmi.c	2015-04-25 00:36:29.980207169 +0100
@@ -107,5 +107,5 @@ static void __exit mxm_wmi_exit(void)
 {
 }
 
-module_init(mxm_wmi_init);
+async_module_init(mxm_wmi_init);
 module_exit(mxm_wmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio.c linux-4.0/drivers/uio/uio.c
--- linux-4.0.orig/drivers/uio/uio.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio.c	2015-04-25 00:23:10.927197720 +0100
@@ -887,6 +887,6 @@ static void __exit uio_exit(void)
 	release_uio_class();
 }
 
-module_init(uio_init)
+async_module_init(uio_init)
 module_exit(uio_exit)
 MODULE_LICENSE("GPL v2");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio_cif.c linux-4.0/drivers/uio/uio_cif.c
--- linux-4.0.orig/drivers/uio/uio_cif.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio_cif.c	2015-04-25 00:22:42.880197388 +0100
@@ -134,7 +134,7 @@ static struct pci_driver hilscher_pci_dr
 	.remove = hilscher_pci_remove,
 };
 
-module_pci_driver(hilscher_pci_driver);
+async_module_pci_driver(hilscher_pci_driver);
 MODULE_DEVICE_TABLE(pci, hilscher_pci_ids);
 MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Hans J. Koch, Benedikt Spranger");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-20 22:43:20.656188957 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+async_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-20 22:43:20.579188957 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+async_module_init(ehci_pci_init,ehci_hcd_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-20 22:43:20.574188957 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+async_module_init(ehci_platform_init,ehci_hcd_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-20 22:43:20.567188956 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+async_module_init(ohci_hcd_mod_init,ehci_platform_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-20 22:43:20.559188956 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+async_module_init(ohci_pci_init,ohci_hcd_mod_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-20 22:43:20.543188956 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+async_module_init(ohci_platform_init,ohci_hcd_mod_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ssb-hcd.c linux-4.0/drivers/usb/host/ssb-hcd.c
--- linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-20 22:43:20.538188956 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+async_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/uhci-hcd.c linux-4.0/drivers/usb/host/uhci-hcd.c
--- linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-20 22:43:20.532188956 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+async_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-23 23:19:45.719851229 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+module_init(init_cifs);
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ext3/super.c linux-4.0/fs/ext3/super.c
--- linux-4.0.orig/fs/ext3/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ext3/super.c	2015-04-25 13:44:36.823560227 +0100
@@ -3161,5 +3161,5 @@ static void __exit exit_ext3_fs(void)
 MODULE_AUTHOR("Remy Card, Stephen Tweedie, Andrew Morton, Andreas Dilger, Theodore Ts'o and others");
 MODULE_DESCRIPTION("Second Extended Filesystem with journaling extensions");
 MODULE_LICENSE("GPL");
-module_init(init_ext3_fs)
+async_module_init(init_ext3_fs)
 module_exit(exit_ext3_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/inode.c linux-4.0/fs/fat/inode.c
--- linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/inode.c	2015-04-25 13:38:24.870555829 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+async_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_msdos.c linux-4.0/fs/fat/namei_msdos.c
--- linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_msdos.c	2015-04-25 13:39:33.847556644 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+async_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_vfat.c linux-4.0/fs/fat/namei_vfat.c
--- linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_vfat.c	2015-04-25 13:39:16.708556442 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+async_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fuse/cuse.c linux-4.0/fs/fuse/cuse.c
--- linux-4.0.orig/fs/fuse/cuse.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fuse/cuse.c	2015-04-25 13:35:19.189553633 +0100
@@ -637,7 +637,7 @@ static void __exit cuse_exit(void)
 	class_destroy(cuse_class);
 }
 
-module_init(cuse_init);
+async_module_init(cuse_init);
 module_exit(cuse_exit);
 
 MODULE_AUTHOR("Tejun Heo <tj@kernel.org>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fuse/inode.c linux-4.0/fs/fuse/inode.c
--- linux-4.0.orig/fs/fuse/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fuse/inode.c	2015-04-25 13:34:15.408552879 +0100
@@ -1319,5 +1319,5 @@ static void __exit fuse_exit(void)
 	fuse_dev_cleanup();
 }
 
-module_init(fuse_init);
+async_module_init(fuse_init);
 module_exit(fuse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/isofs/inode.c linux-4.0/fs/isofs/inode.c
--- linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/isofs/inode.c	2015-04-25 13:25:05.182546372 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+async_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/jbd/journal.c linux-4.0/fs/jbd/journal.c
--- linux-4.0.orig/fs/jbd/journal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/jbd/journal.c	2015-04-25 13:42:47.154558930 +0100
@@ -2140,6 +2140,6 @@ static void __exit journal_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(journal_init);
+async_module_init(journal_init);
 module_exit(journal_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ntfs/super.c linux-4.0/fs/ntfs/super.c
--- linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ntfs/super.c	2015-04-20 22:13:06.758167507 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+deferred_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-18 22:19:31.372041768 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/bluetooth/rfcomm/core.c linux-4.0/net/bluetooth/rfcomm/core.c
--- linux-4.0.orig/net/bluetooth/rfcomm/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/bluetooth/rfcomm/core.c	2015-04-22 23:52:16.904755106 +0100
@@ -2255,7 +2255,7 @@ static void __exit rfcomm_exit(void)
 	rfcomm_cleanup_sockets();
 }
 
-module_init(rfcomm_init);
+async_module_init(rfcomm_init);
 module_exit(rfcomm_exit);
 
 module_param(disable_cfc, bool, 0644);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211.c linux-4.0/net/wireless/lib80211.c
--- linux-4.0.orig/net/wireless/lib80211.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211.c	2015-04-25 11:22:23.247459314 +0100
@@ -253,5 +253,5 @@ static void __exit lib80211_exit(void)
 	BUG_ON(!list_empty(&lib80211_crypto_algs));
 }
 
-module_init(lib80211_init);
+async_module_init(lib80211_init);
 module_exit(lib80211_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c linux-4.0/net/wireless/lib80211_crypt_ccmp.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_ccmp.c	2015-04-25 14:09:41.624578022 +0100
@@ -475,5 +475,5 @@ static void __exit lib80211_crypto_ccmp_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_ccmp);
 }
 
-module_init(lib80211_crypto_ccmp_init);
+async_module_init(lib80211_crypto_ccmp_init);
 module_exit(lib80211_crypto_ccmp_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c linux-4.0/net/wireless/lib80211_crypt_tkip.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_tkip.c	2015-04-25 14:09:41.604578022 +0100
@@ -758,5 +758,5 @@ static void __exit lib80211_crypto_tkip_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_tkip);
 }
 
-module_init(lib80211_crypto_tkip_init);
+async_module_init(lib80211_crypto_tkip_init);
 module_exit(lib80211_crypto_tkip_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_wep.c linux-4.0/net/wireless/lib80211_crypt_wep.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_wep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_wep.c	2015-04-25 14:10:00.619578247 +0100
@@ -285,5 +285,5 @@ static void __exit lib80211_crypto_wep_e
 	lib80211_unregister_crypto_ops(&lib80211_crypt_wep);
 }
 
-module_init(lib80211_crypto_wep_init);
+async_module_init(lib80211_crypto_wep_init);
 module_exit(lib80211_crypto_wep_exit);
Only in linux-4.0: .project
Only in linux-4.0: .settings
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/compress_offload.c linux-4.0/sound/core/compress_offload.c
--- linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/compress_offload.c	2015-04-20 22:13:06.775167508 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+deferred_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hrtimer.c linux-4.0/sound/core/hrtimer.c
--- linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hrtimer.c	2015-04-23 00:03:13.589779595 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+async_module_init(snd_hrtimer_init,alsa_timer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-26 00:02:19.270998505 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+async_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/mixer_oss.c linux-4.0/sound/core/oss/mixer_oss.c
--- linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/mixer_oss.c	2015-04-23 00:05:35.965784905 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+async_module_init(alsa_mixer_oss_init,alsa_timer_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/pcm_oss.c linux-4.0/sound/core/oss/pcm_oss.c
--- linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/pcm_oss.c	2015-04-23 00:09:44.572794176 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+async_module_init(alsa_pcm_oss_init,alsa_pcm_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/pcm.c linux-4.0/sound/core/pcm.c
--- linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/pcm.c	2015-04-23 00:09:44.605794177 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+async_module_init(alsa_pcm_init,alsa_mixer_oss_init)
 module_exit(alsa_pcm_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rawmidi.c linux-4.0/sound/core/rawmidi.c
--- linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rawmidi.c	2015-04-20 22:13:06.795167508 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+deferred_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rtctimer.c linux-4.0/sound/core/rtctimer.c
--- linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rtctimer.c	2015-04-20 22:13:06.797167508 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+deferred_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/oss/seq_oss.c linux-4.0/sound/core/seq/oss/seq_oss.c
--- linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-20 22:13:06.799167508 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+deferred_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq.c linux-4.0/sound/core/seq/seq.c
--- linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq.c	2015-04-23 00:35:01.473850745 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+async_module_init(alsa_seq_init,alsa_seq_device_init)
 module_exit(alsa_seq_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_device.c linux-4.0/sound/core/seq/seq_device.c
--- linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_device.c	2015-04-23 00:35:56.908852812 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-module_init(alsa_seq_device_init)
+async_module_init(alsa_seq_device_init,alsa_timer_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_dummy.c linux-4.0/sound/core/seq/seq_dummy.c
--- linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_dummy.c	2015-04-23 00:35:54.787852733 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+async_module_init(alsa_seq_dummy_init,alsa_seq_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-23 00:35:39.608852167 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+async_module_init(alsa_seq_midi_init,alsa_seq_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_emul.c linux-4.0/sound/core/seq/seq_midi_emul.c
--- linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-20 22:13:06.805167508 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+deferred_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_event.c linux-4.0/sound/core/seq/seq_midi_event.c
--- linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-20 22:13:06.807167508 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+deferred_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_virmidi.c linux-4.0/sound/core/seq/seq_virmidi.c
--- linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-20 22:13:06.811167508 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+deferred_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/timer.c linux-4.0/sound/core/timer.c
--- linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/timer.c	2015-04-23 00:01:55.820776695 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+async_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/aloop.c linux-4.0/sound/drivers/aloop.c
--- linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/aloop.c	2015-04-20 22:13:06.820167508 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+deferred_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/dummy.c linux-4.0/sound/drivers/dummy.c
--- linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/dummy.c	2015-04-20 22:13:06.823167508 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+deferred_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401.c linux-4.0/sound/drivers/mpu401/mpu401.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-20 22:13:06.828167508 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+deferred_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.0/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-20 22:13:06.826167508 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+deferred_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/virmidi.c linux-4.0/sound/drivers/virmidi.c
--- linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/virmidi.c	2015-04-20 22:13:06.830167508 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+deferred_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/soundcard.c linux-4.0/sound/oss/soundcard.c
--- linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/soundcard.c	2015-04-20 22:13:06.833167508 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+deferred_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/hda_intel.c linux-4.0/sound/pci/hda/hda_intel.c
--- linux-4.0.orig/sound/pci/hda/hda_intel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/hda_intel.c	2015-04-24 18:38:21.477953059 +0100
@@ -2183,4 +2183,4 @@ static struct pci_driver azx_driver = {
 	},
 };
 
-module_pci_driver(azx_driver);
+async_module_pci_driver(azx_driver);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_analog.c linux-4.0/sound/pci/hda/patch_analog.c
--- linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_analog.c	2015-04-23 00:27:57.196834922 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-module_init(patch_analog_init)
+async_module_init(patch_analog_init,alsa_hwdep_init)
 module_exit(patch_analog_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0110.c linux-4.0/sound/pci/hda/patch_ca0110.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-23 00:30:47.838841286 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-module_init(patch_ca0110_init)
+async_module_init(patch_ca0110_init,alsa_hwdep_init)
 module_exit(patch_ca0110_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0132.c linux-4.0/sound/pci/hda/patch_ca0132.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-23 00:24:21.396826875 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-module_init(patch_ca0132_init)
+async_module_init(patch_ca0132_init,alsa_hwdep_init)
 module_exit(patch_ca0132_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cirrus.c linux-4.0/sound/pci/hda/patch_cirrus.c
--- linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-23 00:28:56.911837149 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-module_init(patch_cirrus_init)
+async_module_init(patch_cirrus_init,alsa_hwdep_init)
 module_exit(patch_cirrus_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cmedia.c linux-4.0/sound/pci/hda/patch_cmedia.c
--- linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-23 00:30:47.845841286 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-module_init(patch_cmedia_init)
+async_module_init(patch_cmedia_init,alsa_hwdep_init)
 module_exit(patch_cmedia_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_conexant.c linux-4.0/sound/pci/hda/patch_conexant.c
--- linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-23 00:30:47.788841284 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-module_init(patch_conexant_init)
+async_module_init(patch_conexant_init,alsa_hwdep_init)
 module_exit(patch_conexant_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_hdmi.c linux-4.0/sound/pci/hda/patch_hdmi.c
--- linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-23 00:30:47.856841287 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-module_init(patch_hdmi_init)
+async_module_init(patch_hdmi_init,alsa_hwdep_init)
 module_exit(patch_hdmi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_realtek.c linux-4.0/sound/pci/hda/patch_realtek.c
--- linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-23 00:30:47.823841285 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-module_init(patch_realtek_init)
+async_module_init(patch_realtek_init,alsa_hwdep_init)
 module_exit(patch_realtek_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_si3054.c linux-4.0/sound/pci/hda/patch_si3054.c
--- linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-23 00:31:17.252842383 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-module_init(patch_si3054_init)
+async_module_init(patch_si3054_init,alsa_hwdep_init)
 module_exit(patch_si3054_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_sigmatel.c linux-4.0/sound/pci/hda/patch_sigmatel.c
--- linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-23 00:28:36.566836391 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-module_init(patch_sigmatel_init)
+async_module_init(patch_sigmatel_init,alsa_hwdep_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_via.c linux-4.0/sound/pci/hda/patch_via.c
--- linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_via.c	2015-04-23 00:30:47.831841286 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-module_init(patch_via_init)
+async_module_init(patch_via_init,alsa_hwdep_init)
 module_exit(patch_via_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/powermac.c linux-4.0/sound/ppc/powermac.c
--- linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/powermac.c	2015-04-20 22:13:06.887167509 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+deferred_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/snd_ps3.c linux-4.0/sound/ppc/snd_ps3.c
--- linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/snd_ps3.c	2015-04-20 22:13:06.892167509 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+deferred_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/emux/emux.c linux-4.0/sound/synth/emux/emux.c
--- linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/emux/emux.c	2015-04-20 22:13:06.894167509 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+deferred_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/util_mem.c linux-4.0/sound/synth/util_mem.c
--- linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/util_mem.c	2015-04-20 22:13:06.896167509 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+deferred_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/aes_generic.c linux-4.0/crypto/aes_generic.c
--- linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/aes_generic.c	2015-04-20 22:13:06.460167504 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+deferred_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/af_alg.c linux-4.0/crypto/af_alg.c
--- linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/af_alg.c	2015-04-26 00:38:58.813024515 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+deferred_module_init(af_alg_init);
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_hash.c linux-4.0/crypto/algif_hash.c
--- linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_hash.c	2015-04-26 00:38:58.817024515 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+deferred_module_init(algif_hash_init);
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_skcipher.c linux-4.0/crypto/algif_skcipher.c
--- linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_skcipher.c	2015-04-26 00:38:58.896024516 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+deferred_module_init(algif_skcipher_init);
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ansi_cprng.c linux-4.0/crypto/ansi_cprng.c
--- linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ansi_cprng.c	2015-04-20 22:13:06.507167504 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+deferred_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.0/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-20 22:13:09.392167539 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+deferred_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-20 22:13:06.512167505 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+deferred_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.0/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-20 22:13:06.515167505 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+deferred_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/authenc.c linux-4.0/crypto/authenc.c
--- linux-4.0.orig/crypto/authenc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/authenc.c	2015-04-26 00:38:58.899024516 +0100
@@ -716,7 +716,7 @@ static void __exit crypto_authenc_module
 	crypto_unregister_template(&crypto_authenc_tmpl);
 }
 
-module_init(crypto_authenc_module_init);
+deferred_module_init(crypto_authenc_module_init);
 module_exit(crypto_authenc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/authencesn.c linux-4.0/crypto/authencesn.c
--- linux-4.0.orig/crypto/authencesn.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/authencesn.c	2015-04-26 00:38:58.901024516 +0100
@@ -808,7 +808,7 @@ static void __exit crypto_authenc_esn_mo
 	crypto_unregister_template(&crypto_authenc_esn_tmpl);
 }
 
-module_init(crypto_authenc_esn_module_init);
+deferred_module_init(crypto_authenc_esn_module_init);
 module_exit(crypto_authenc_esn_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/blowfish_generic.c linux-4.0/crypto/blowfish_generic.c
--- linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/blowfish_generic.c	2015-04-26 00:38:58.907024516 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+deferred_module_init(blowfish_mod_init);
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cast5_generic.c linux-4.0/crypto/cast5_generic.c
--- linux-4.0.orig/crypto/cast5_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cast5_generic.c	2015-04-26 00:38:58.911024516 +0100
@@ -544,7 +544,7 @@ static void __exit cast5_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast5_mod_init);
+deferred_module_init(cast5_mod_init);
 module_exit(cast5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cast6_generic.c linux-4.0/crypto/cast6_generic.c
--- linux-4.0.orig/crypto/cast6_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cast6_generic.c	2015-04-26 00:38:58.913024516 +0100
@@ -286,7 +286,7 @@ static void __exit cast6_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast6_mod_init);
+deferred_module_init(cast6_mod_init);
 module_exit(cast6_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cbc.c linux-4.0/crypto/cbc.c
--- linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cbc.c	2015-04-20 22:13:06.531167505 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+deferred_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32.c linux-4.0/crypto/crc32.c
--- linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32.c	2015-04-20 22:13:06.533167505 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+deferred_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32c_generic.c linux-4.0/crypto/crc32c_generic.c
--- linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32c_generic.c	2015-04-20 22:13:06.535167505 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+deferred_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crct10dif_generic.c linux-4.0/crypto/crct10dif_generic.c
--- linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crct10dif_generic.c	2015-04-20 22:13:06.537167505 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+deferred_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_null.c linux-4.0/crypto/crypto_null.c
--- linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_null.c	2015-04-20 22:13:06.541167505 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+deferred_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_user.c linux-4.0/crypto/crypto_user.c
--- linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_user.c	2015-04-20 22:13:06.543167505 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+deferred_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ecb.c linux-4.0/crypto/ecb.c
--- linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ecb.c	2015-04-20 22:13:06.545167505 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+deferred_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lrw.c linux-4.0/crypto/lrw.c
--- linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lrw.c	2015-04-20 22:13:06.548167505 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4.c linux-4.0/crypto/lz4.c
--- linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4.c	2015-04-20 22:13:06.549167505 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+deferred_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4hc.c linux-4.0/crypto/lz4hc.c
--- linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4hc.c	2015-04-20 22:13:06.552167505 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+deferred_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lzo.c linux-4.0/crypto/lzo.c
--- linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lzo.c	2015-04-26 00:38:58.915024516 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+deferred_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md4.c linux-4.0/crypto/md4.c
--- linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md4.c	2015-04-20 22:13:06.558167505 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+deferred_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md5.c linux-4.0/crypto/md5.c
--- linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md5.c	2015-04-20 22:13:06.561167505 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+deferred_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd128.c linux-4.0/crypto/rmd128.c
--- linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd128.c	2015-04-20 22:13:06.564167505 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+deferred_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd160.c linux-4.0/crypto/rmd160.c
--- linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd160.c	2015-04-20 22:13:06.566167505 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+deferred_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd256.c linux-4.0/crypto/rmd256.c
--- linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd256.c	2015-04-20 22:13:06.568167505 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+deferred_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd320.c linux-4.0/crypto/rmd320.c
--- linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd320.c	2015-04-20 22:13:06.571167505 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+deferred_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha1_generic.c linux-4.0/crypto/sha1_generic.c
--- linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha1_generic.c	2015-04-20 22:13:06.573167505 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+deferred_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha256_generic.c linux-4.0/crypto/sha256_generic.c
--- linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha256_generic.c	2015-04-20 22:13:06.575167505 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+deferred_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha512_generic.c linux-4.0/crypto/sha512_generic.c
--- linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha512_generic.c	2015-04-20 22:13:06.578167505 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+deferred_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tcrypt.c linux-4.0/crypto/tcrypt.c
--- linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tcrypt.c	2015-04-20 22:13:06.582167505 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+deferred_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tea.c linux-4.0/crypto/tea.c
--- linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tea.c	2015-04-20 22:13:06.585167505 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+deferred_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tgr192.c linux-4.0/crypto/tgr192.c
--- linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tgr192.c	2015-04-20 22:13:06.588167505 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+deferred_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/twofish_generic.c linux-4.0/crypto/twofish_generic.c
--- linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/twofish_generic.c	2015-04-20 22:13:06.590167505 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+deferred_module_init(twofish_mod_init);
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/wp512.c linux-4.0/crypto/wp512.c
--- linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/wp512.c	2015-04-20 22:13:06.596167506 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+deferred_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xcbc.c linux-4.0/crypto/xcbc.c
--- linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xcbc.c	2015-04-20 22:13:06.598167506 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+deferred_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xts.c linux-4.0/crypto/xts.c
--- linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xts.c	2015-04-20 22:13:06.600167506 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/zlib.c linux-4.0/crypto/zlib.c
--- linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/zlib.c	2015-04-26 00:38:58.917024516 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+deferred_module_init(zlib_mod_init);
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/ac.c linux-4.0/drivers/acpi/ac.c
--- linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/ac.c	2015-04-26 00:38:58.971024517 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+deferred_module_init(acpi_ac_init);
 module_exit(acpi_ac_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_ipmi.c linux-4.0/drivers/acpi/acpi_ipmi.c
--- linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-26 00:38:58.974024517 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+deferred_module_init(acpi_ipmi_init);
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_pad.c linux-4.0/drivers/acpi/acpi_pad.c
--- linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_pad.c	2015-04-26 00:38:58.976024517 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+deferred_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/battery.c linux-4.0/drivers/acpi/battery.c
--- linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/battery.c	2015-04-26 00:38:58.978024517 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+deferred_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/processor_driver.c linux-4.0/drivers/acpi/processor_driver.c
--- linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/processor_driver.c	2015-04-26 00:38:58.989024517 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+deferred_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/sbs.c linux-4.0/drivers/acpi/sbs.c
--- linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/sbs.c	2015-04-26 00:38:58.991024517 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+deferred_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/thermal.c linux-4.0/drivers/acpi/thermal.c
--- linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/thermal.c	2015-04-26 00:38:58.994024517 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+deferred_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/video.c linux-4.0/drivers/acpi/video.c
--- linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/video.c	2015-04-20 21:09:50.070122610 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+async_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
Only in linux-4.0/drivers: async.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/acard-ahci.c linux-4.0/drivers/ata/acard-ahci.c
--- linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/acard-ahci.c	2015-04-19 23:13:29.272001581 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-module_pci_driver(acard_ahci_pci_driver);
+async_module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-19 23:24:31.701009415 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/backend.c linux-4.0/drivers/char/agp/backend.c
--- linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/backend.c	2015-04-19 23:42:07.686021902 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+async_module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/nvidia-agp.c linux-4.0/drivers/char/agp/nvidia-agp.c
--- linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-20 21:09:50.073122610 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+async_module_init(agp_nvidia_init,agp_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hpet.c linux-4.0/drivers/char/hpet.c
--- linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hpet.c	2015-04-26 00:38:59.055024518 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+deferred_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/core.c linux-4.0/drivers/char/hw_random/core.c
--- linux-4.0.orig/drivers/char/hw_random/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/core.c	2015-04-26 00:38:59.060024518 +0100
@@ -552,7 +552,7 @@ static void __exit hwrng_modexit(void)
 	unregister_miscdev();
 }
 
-module_init(hwrng_modinit);
+deferred_module_init(hwrng_modinit);
 module_exit(hwrng_modexit);
 
 MODULE_DESCRIPTION("H/W Random Number Generator (RNG) driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/intel-rng.c linux-4.0/drivers/char/hw_random/intel-rng.c
--- linux-4.0.orig/drivers/char/hw_random/intel-rng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/intel-rng.c	2015-04-26 00:38:59.066024518 +0100
@@ -325,7 +325,7 @@ PFX "RNG, try using the 'no_fwh_detect'
 }
 
 
-static int __init mod_init(void)
+static int __init intel_rng_mod_init(void)
 {
 	int err = -ENODEV;
 	int i;
@@ -411,7 +411,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-module_init(mod_init);
+deferred_module_init(intel_rng_mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for Intel chipsets");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.0/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-26 00:38:59.070024518 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.0/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-26 00:38:59.073024518 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.0/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-26 00:38:59.075024518 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+deferred_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c linux-4.0/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-26 00:38:59.077024518 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+deferred_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.0/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-26 00:38:59.078024518 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+deferred_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/speedstep-ich.c linux-4.0/drivers/cpufreq/speedstep-ich.c
--- linux-4.0.orig/drivers/cpufreq/speedstep-ich.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/speedstep-ich.c	2015-04-26 00:38:59.080024518 +0100
@@ -383,5 +383,5 @@ MODULE_DESCRIPTION("Speedstep driver for
 		"with ICH-M southbridges.");
 MODULE_LICENSE("GPL");
 
-module_init(speedstep_init);
+deferred_module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/dma/ioat/pci.c linux-4.0/drivers/dma/ioat/pci.c
--- linux-4.0.orig/drivers/dma/ioat/pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/dma/ioat/pci.c	2015-04-25 11:29:21.053464255 +0100
@@ -252,7 +252,7 @@ static int __init ioat_init_module(void)
 
 	return err;
 }
-module_init(ioat_init_module);
+async_module_init(ioat_init_module);
 
 static void __exit ioat_exit_module(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/drm_drv.c linux-4.0/drivers/gpu/drm/drm_drv.c
--- linux-4.0.orig/drivers/gpu/drm/drm_drv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/drm_drv.c	2015-04-26 00:38:59.082024518 +0100
@@ -908,5 +908,5 @@ static void __exit drm_core_exit(void)
 	idr_destroy(&drm_minors_idr);
 }
 
-module_init(drm_core_init);
+deferred_module_init(drm_core_init,agp_init);
 module_exit(drm_core_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-13 23:52:11.415705252 +0100
@@ -77,10 +77,13 @@ config DRM_KMS_CMA_HELPER
 	help
 	  Choose this if you need the KMS CMA helper functions
 
+
 source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-13 23:49:11.367703122 +0100
@@ -34,6 +34,7 @@ CFLAGS_drm_trace_points.o := -I$(src)
 
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-core.c linux-4.0/drivers/hid/hid-core.c
--- linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-core.c	2015-04-26 00:38:59.131024519 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+deferred_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-elo.c linux-4.0/drivers/hid/hid-elo.c
--- linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-elo.c	2015-04-26 00:38:59.133024519 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+deferred_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/uhid.c linux-4.0/drivers/hid/uhid.c
--- linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/uhid.c	2015-04-26 00:38:59.135024519 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+deferred_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/usbhid/hid-core.c linux-4.0/drivers/hid/usbhid/hid-core.c
--- linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-26 00:38:59.153024519 +0100
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+deferred_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hwmon/acpi_power_meter.c linux-4.0/drivers/hwmon/acpi_power_meter.c
--- linux-4.0.orig/drivers/hwmon/acpi_power_meter.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hwmon/acpi_power_meter.c	2015-04-26 00:38:59.186024520 +0100
@@ -1011,5 +1011,5 @@ MODULE_LICENSE("GPL");
 module_param(force_cap_on, bool, 0644);
 MODULE_PARM_DESC(force_cap_on, "Enable power cap even it is unsafe to do so.");
 
-module_init(acpi_power_meter_init);
+deferred_module_init(acpi_power_meter_init);
 module_exit(acpi_power_meter_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/keyboard/atkbd.c linux-4.0/drivers/input/keyboard/atkbd.c
--- linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-20 22:13:06.626167506 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+deferred_module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/misc/uinput.c linux-4.0/drivers/input/misc/uinput.c
--- linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/misc/uinput.c	2015-04-20 22:13:06.629167506 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+deferred_module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mouse/psmouse-base.c linux-4.0/drivers/input/mouse/psmouse-base.c
--- linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-20 22:13:06.633167506 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+deferred_module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mousedev.c linux-4.0/drivers/input/mousedev.c
--- linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mousedev.c	2015-04-20 22:13:06.664167506 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+deferred_module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/i8042.c linux-4.0/drivers/input/serio/i8042.c
--- linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/i8042.c	2015-04-20 22:13:06.667167506 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+deferred_module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/serport.c linux-4.0/drivers/input/serio/serport.c
--- linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/serport.c	2015-04-20 22:13:06.669167506 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+deferred_module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-20 21:56:26.393155678 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-19 16:33:49.593718013 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mmc/card/block.c linux-4.0/drivers/mmc/card/block.c
--- linux-4.0.orig/drivers/mmc/card/block.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mmc/card/block.c	2015-04-26 00:38:59.190024520 +0100
@@ -2579,7 +2579,7 @@ static void __exit mmc_blk_exit(void)
 	unregister_blkdev(MMC_BLOCK_MAJOR, "mmc");
 }
 
-module_init(mmc_blk_init);
+deferred_module_init(mmc_blk_init);
 module_exit(mmc_blk_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/mtdcore.c linux-4.0/drivers/mtd/mtdcore.c
--- linux-4.0.orig/drivers/mtd/mtdcore.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/mtdcore.c	2015-04-26 00:38:59.194024520 +0100
@@ -1275,7 +1275,7 @@ static void __exit cleanup_mtd(void)
 	bdi_destroy(&mtd_bdi);
 }
 
-module_init(init_mtd);
+deferred_module_init(init_mtd);
 module_exit(cleanup_mtd);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/ubi/build.c linux-4.0/drivers/mtd/ubi/build.c
--- linux-4.0.orig/drivers/mtd/ubi/build.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/ubi/build.c	2015-04-26 00:38:59.257024521 +0100
@@ -1336,7 +1336,7 @@ out:
 	pr_err("UBI error: cannot initialize UBI, error %d", err);
 	return err;
 }
-late_initcall(ubi_init);
+deferred_module_init(ubi_init);
 
 static void __exit ubi_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43/main.c linux-4.0/drivers/net/wireless/b43/main.c
--- linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43/main.c	2015-04-20 22:13:06.678167506 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+deferred_module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43legacy/main.c linux-4.0/drivers/net/wireless/b43legacy/main.c
--- linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-20 22:13:06.684167507 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+deferred_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-26 00:38:59.269024521 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+deferred_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-26 00:38:59.271024521 +0100
@@ -318,4 +318,4 @@ MODULE_PARM_DESC(debug, "debug output ma
 #endif				/* CONFIG_LIBIPW_DEBUG */
 
 module_exit(libipw_exit);
-module_init(libipw_init);
+deferred_module_init(libipw_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c linux-4.0/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-26 00:38:59.314024521 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+deferred_module_init(pcied_init,pci_hotplug_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-26 00:38:59.312024521 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+deferred_module_init(pci_hotplug_init,pcie_portdrv_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c linux-4.0/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-26 00:38:59.316024521 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+deferred_module_init(shpcd_init,pcied_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c linux-4.0/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-26 00:38:59.346024522 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+deferred_module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/platform/x86/mxm-wmi.c linux-4.0/drivers/platform/x86/mxm-wmi.c
--- linux-4.0.orig/drivers/platform/x86/mxm-wmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/platform/x86/mxm-wmi.c	2015-04-26 00:38:59.349024522 +0100
@@ -107,5 +107,5 @@ static void __exit mxm_wmi_exit(void)
 {
 }
 
-module_init(mxm_wmi_init);
+deferred_module_init(mxm_wmi_init);
 module_exit(mxm_wmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio.c linux-4.0/drivers/uio/uio.c
--- linux-4.0.orig/drivers/uio/uio.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio.c	2015-04-26 00:38:59.351024522 +0100
@@ -887,6 +887,6 @@ static void __exit uio_exit(void)
 	release_uio_class();
 }
 
-module_init(uio_init)
+deferred_module_init(uio_init)
 module_exit(uio_exit)
 MODULE_LICENSE("GPL v2");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio_cif.c linux-4.0/drivers/uio/uio_cif.c
--- linux-4.0.orig/drivers/uio/uio_cif.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio_cif.c	2015-04-25 00:22:42.880197388 +0100
@@ -134,7 +134,7 @@ static struct pci_driver hilscher_pci_dr
 	.remove = hilscher_pci_remove,
 };
 
-module_pci_driver(hilscher_pci_driver);
+async_module_pci_driver(hilscher_pci_driver);
 MODULE_DEVICE_TABLE(pci, hilscher_pci_ids);
 MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Hans J. Koch, Benedikt Spranger");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-26 00:38:59.355024522 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+deferred_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-26 00:38:59.357024522 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+deferred_module_init(ehci_pci_init,ehci_hcd_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-26 00:38:59.359024522 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+deferred_module_init(ehci_platform_init,ehci_hcd_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-26 00:38:59.362024522 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+deferred_module_init(ohci_hcd_mod_init,ehci_platform_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-26 00:38:59.364024522 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+deferred_module_init(ohci_pci_init,ohci_hcd_mod_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-26 00:38:59.366024522 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+deferred_module_init(ohci_platform_init,ohci_hcd_mod_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ssb-hcd.c linux-4.0/drivers/usb/host/ssb-hcd.c
--- linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-26 00:38:59.367024522 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+deferred_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/uhci-hcd.c linux-4.0/drivers/usb/host/uhci-hcd.c
--- linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-26 00:38:59.369024522 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+deferred_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-23 23:19:45.719851229 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+module_init(init_cifs);
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ext3/super.c linux-4.0/fs/ext3/super.c
--- linux-4.0.orig/fs/ext3/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ext3/super.c	2015-04-26 00:38:59.375024522 +0100
@@ -3161,5 +3161,5 @@ static void __exit exit_ext3_fs(void)
 MODULE_AUTHOR("Remy Card, Stephen Tweedie, Andrew Morton, Andreas Dilger, Theodore Ts'o and others");
 MODULE_DESCRIPTION("Second Extended Filesystem with journaling extensions");
 MODULE_LICENSE("GPL");
-module_init(init_ext3_fs)
+deferred_module_init(init_ext3_fs)
 module_exit(exit_ext3_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/inode.c linux-4.0/fs/fat/inode.c
--- linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/inode.c	2015-04-26 00:38:59.378024522 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+deferred_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_msdos.c linux-4.0/fs/fat/namei_msdos.c
--- linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_msdos.c	2015-04-26 00:38:59.380024522 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+deferred_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_vfat.c linux-4.0/fs/fat/namei_vfat.c
--- linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_vfat.c	2015-04-26 00:38:59.382024522 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+deferred_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fuse/cuse.c linux-4.0/fs/fuse/cuse.c
--- linux-4.0.orig/fs/fuse/cuse.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fuse/cuse.c	2015-04-26 00:38:59.385024522 +0100
@@ -637,7 +637,7 @@ static void __exit cuse_exit(void)
 	class_destroy(cuse_class);
 }
 
-module_init(cuse_init);
+deferred_module_init(cuse_init);
 module_exit(cuse_exit);
 
 MODULE_AUTHOR("Tejun Heo <tj@kernel.org>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fuse/inode.c linux-4.0/fs/fuse/inode.c
--- linux-4.0.orig/fs/fuse/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fuse/inode.c	2015-04-26 00:38:59.387024522 +0100
@@ -1319,5 +1319,5 @@ static void __exit fuse_exit(void)
 	fuse_dev_cleanup();
 }
 
-module_init(fuse_init);
+deferred_module_init(fuse_init);
 module_exit(fuse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/isofs/inode.c linux-4.0/fs/isofs/inode.c
--- linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/isofs/inode.c	2015-04-26 00:38:59.390024522 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+deferred_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/jbd/journal.c linux-4.0/fs/jbd/journal.c
--- linux-4.0.orig/fs/jbd/journal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/jbd/journal.c	2015-04-26 00:38:59.394024522 +0100
@@ -2140,6 +2140,6 @@ static void __exit journal_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(journal_init);
+deferred_module_init(journal_init);
 module_exit(journal_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ntfs/super.c linux-4.0/fs/ntfs/super.c
--- linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ntfs/super.c	2015-04-20 22:13:06.758167507 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+deferred_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-18 22:19:31.372041768 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/bluetooth/rfcomm/core.c linux-4.0/net/bluetooth/rfcomm/core.c
--- linux-4.0.orig/net/bluetooth/rfcomm/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/bluetooth/rfcomm/core.c	2015-04-26 00:38:59.398024522 +0100
@@ -2255,7 +2255,7 @@ static void __exit rfcomm_exit(void)
 	rfcomm_cleanup_sockets();
 }
 
-module_init(rfcomm_init);
+deferred_module_init(rfcomm_init);
 module_exit(rfcomm_exit);
 
 module_param(disable_cfc, bool, 0644);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211.c linux-4.0/net/wireless/lib80211.c
--- linux-4.0.orig/net/wireless/lib80211.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211.c	2015-04-26 00:38:59.406024522 +0100
@@ -253,5 +253,5 @@ static void __exit lib80211_exit(void)
 	BUG_ON(!list_empty(&lib80211_crypto_algs));
 }
 
-module_init(lib80211_init);
+deferred_module_init(lib80211_init);
 module_exit(lib80211_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c linux-4.0/net/wireless/lib80211_crypt_ccmp.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_ccmp.c	2015-04-26 00:38:59.400024522 +0100
@@ -475,5 +475,5 @@ static void __exit lib80211_crypto_ccmp_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_ccmp);
 }
 
-module_init(lib80211_crypto_ccmp_init);
+deferred_module_init(lib80211_crypto_ccmp_init);
 module_exit(lib80211_crypto_ccmp_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c linux-4.0/net/wireless/lib80211_crypt_tkip.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_tkip.c	2015-04-26 00:38:59.402024522 +0100
@@ -758,5 +758,5 @@ static void __exit lib80211_crypto_tkip_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_tkip);
 }
 
-module_init(lib80211_crypto_tkip_init);
+deferred_module_init(lib80211_crypto_tkip_init);
 module_exit(lib80211_crypto_tkip_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_wep.c linux-4.0/net/wireless/lib80211_crypt_wep.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_wep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_wep.c	2015-04-26 00:38:59.404024522 +0100
@@ -285,5 +285,5 @@ static void __exit lib80211_crypto_wep_e
 	lib80211_unregister_crypto_ops(&lib80211_crypt_wep);
 }
 
-module_init(lib80211_crypto_wep_init);
+deferred_module_init(lib80211_crypto_wep_init);
 module_exit(lib80211_crypto_wep_exit);
Only in linux-4.0: .project
Only in linux-4.0: .settings
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/compress_offload.c linux-4.0/sound/core/compress_offload.c
--- linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/compress_offload.c	2015-04-20 22:13:06.775167508 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+deferred_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hrtimer.c linux-4.0/sound/core/hrtimer.c
--- linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hrtimer.c	2015-04-26 00:38:59.407024522 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+deferred_module_init(snd_hrtimer_init,alsa_timer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-26 00:38:59.409024522 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+deferred_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/mixer_oss.c linux-4.0/sound/core/oss/mixer_oss.c
--- linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/mixer_oss.c	2015-04-26 00:38:59.439024523 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+deferred_module_init(alsa_mixer_oss_init,alsa_timer_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/pcm_oss.c linux-4.0/sound/core/oss/pcm_oss.c
--- linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/pcm_oss.c	2015-04-26 00:38:59.444024523 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+deferred_module_init(alsa_pcm_oss_init,alsa_pcm_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/pcm.c linux-4.0/sound/core/pcm.c
--- linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/pcm.c	2015-04-26 00:38:59.448024523 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+deferred_module_init(alsa_pcm_init,alsa_mixer_oss_init)
 module_exit(alsa_pcm_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rawmidi.c linux-4.0/sound/core/rawmidi.c
--- linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rawmidi.c	2015-04-20 22:13:06.795167508 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+deferred_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rtctimer.c linux-4.0/sound/core/rtctimer.c
--- linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rtctimer.c	2015-04-20 22:13:06.797167508 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+deferred_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/oss/seq_oss.c linux-4.0/sound/core/seq/oss/seq_oss.c
--- linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-20 22:13:06.799167508 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+deferred_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq.c linux-4.0/sound/core/seq/seq.c
--- linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq.c	2015-04-26 00:38:59.523024524 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+deferred_module_init(alsa_seq_init,alsa_seq_device_init)
 module_exit(alsa_seq_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_device.c linux-4.0/sound/core/seq/seq_device.c
--- linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_device.c	2015-04-26 00:38:59.517024524 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-module_init(alsa_seq_device_init)
+deferred_module_init(alsa_seq_device_init,alsa_timer_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_dummy.c linux-4.0/sound/core/seq/seq_dummy.c
--- linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_dummy.c	2015-04-26 00:38:59.519024524 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+deferred_module_init(alsa_seq_dummy_init,alsa_seq_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-26 00:38:59.521024524 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+deferred_module_init(alsa_seq_midi_init,alsa_seq_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_emul.c linux-4.0/sound/core/seq/seq_midi_emul.c
--- linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-20 22:13:06.805167508 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+deferred_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_event.c linux-4.0/sound/core/seq/seq_midi_event.c
--- linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-20 22:13:06.807167508 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+deferred_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_virmidi.c linux-4.0/sound/core/seq/seq_virmidi.c
--- linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-20 22:13:06.811167508 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+deferred_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/timer.c linux-4.0/sound/core/timer.c
--- linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/timer.c	2015-04-26 00:38:59.527024524 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+deferred_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/aloop.c linux-4.0/sound/drivers/aloop.c
--- linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/aloop.c	2015-04-20 22:13:06.820167508 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+deferred_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/dummy.c linux-4.0/sound/drivers/dummy.c
--- linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/dummy.c	2015-04-20 22:13:06.823167508 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+deferred_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401.c linux-4.0/sound/drivers/mpu401/mpu401.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-20 22:13:06.828167508 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+deferred_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.0/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-20 22:13:06.826167508 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+deferred_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/virmidi.c linux-4.0/sound/drivers/virmidi.c
--- linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/virmidi.c	2015-04-20 22:13:06.830167508 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+deferred_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/soundcard.c linux-4.0/sound/oss/soundcard.c
--- linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/soundcard.c	2015-04-20 22:13:06.833167508 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+deferred_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/hda_intel.c linux-4.0/sound/pci/hda/hda_intel.c
--- linux-4.0.orig/sound/pci/hda/hda_intel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/hda_intel.c	2015-04-24 18:38:21.477953059 +0100
@@ -2183,4 +2183,4 @@ static struct pci_driver azx_driver = {
 	},
 };
 
-module_pci_driver(azx_driver);
+async_module_pci_driver(azx_driver);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_analog.c linux-4.0/sound/pci/hda/patch_analog.c
--- linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_analog.c	2015-04-26 00:38:59.531024524 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-module_init(patch_analog_init)
+deferred_module_init(patch_analog_init,alsa_hwdep_init)
 module_exit(patch_analog_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0110.c linux-4.0/sound/pci/hda/patch_ca0110.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-26 00:38:59.533024524 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-module_init(patch_ca0110_init)
+deferred_module_init(patch_ca0110_init,alsa_hwdep_init)
 module_exit(patch_ca0110_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0132.c linux-4.0/sound/pci/hda/patch_ca0132.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-26 00:38:59.540024524 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-module_init(patch_ca0132_init)
+deferred_module_init(patch_ca0132_init,alsa_hwdep_init)
 module_exit(patch_ca0132_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cirrus.c linux-4.0/sound/pci/hda/patch_cirrus.c
--- linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-26 00:38:59.543024524 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-module_init(patch_cirrus_init)
+deferred_module_init(patch_cirrus_init,alsa_hwdep_init)
 module_exit(patch_cirrus_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cmedia.c linux-4.0/sound/pci/hda/patch_cmedia.c
--- linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-26 00:38:59.545024524 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-module_init(patch_cmedia_init)
+deferred_module_init(patch_cmedia_init,alsa_hwdep_init)
 module_exit(patch_cmedia_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_conexant.c linux-4.0/sound/pci/hda/patch_conexant.c
--- linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-26 00:38:59.548024524 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-module_init(patch_conexant_init)
+deferred_module_init(patch_conexant_init,alsa_hwdep_init)
 module_exit(patch_conexant_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_hdmi.c linux-4.0/sound/pci/hda/patch_hdmi.c
--- linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-26 00:38:59.553024524 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-module_init(patch_hdmi_init)
+deferred_module_init(patch_hdmi_init,alsa_hwdep_init)
 module_exit(patch_hdmi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_realtek.c linux-4.0/sound/pci/hda/patch_realtek.c
--- linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-26 00:38:59.572024524 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-module_init(patch_realtek_init)
+deferred_module_init(patch_realtek_init,alsa_hwdep_init)
 module_exit(patch_realtek_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_si3054.c linux-4.0/sound/pci/hda/patch_si3054.c
--- linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-26 00:38:59.575024524 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-module_init(patch_si3054_init)
+deferred_module_init(patch_si3054_init,alsa_hwdep_init)
 module_exit(patch_si3054_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_sigmatel.c linux-4.0/sound/pci/hda/patch_sigmatel.c
--- linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-26 00:38:59.582024524 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-module_init(patch_sigmatel_init)
+deferred_module_init(patch_sigmatel_init,alsa_hwdep_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_via.c linux-4.0/sound/pci/hda/patch_via.c
--- linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_via.c	2015-04-26 00:38:59.586024524 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-module_init(patch_via_init)
+deferred_module_init(patch_via_init,alsa_hwdep_init)
 module_exit(patch_via_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/powermac.c linux-4.0/sound/ppc/powermac.c
--- linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/powermac.c	2015-04-20 22:13:06.887167509 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+deferred_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/snd_ps3.c linux-4.0/sound/ppc/snd_ps3.c
--- linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/snd_ps3.c	2015-04-20 22:13:06.892167509 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+deferred_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/emux/emux.c linux-4.0/sound/synth/emux/emux.c
--- linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/emux/emux.c	2015-04-20 22:13:06.894167509 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+deferred_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/util_mem.c linux-4.0/sound/synth/util_mem.c
--- linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/util_mem.c	2015-04-20 22:13:06.896167509 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+deferred_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/aes_generic.c linux-4.0/crypto/aes_generic.c
--- linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/aes_generic.c	2015-04-26 00:56:07.796036683 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+async_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/af_alg.c linux-4.0/crypto/af_alg.c
--- linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/af_alg.c	2015-04-26 00:56:07.798036683 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+async_module_init(af_alg_init);
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_hash.c linux-4.0/crypto/algif_hash.c
--- linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_hash.c	2015-04-26 00:56:07.803036683 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+async_module_init(algif_hash_init);
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_skcipher.c linux-4.0/crypto/algif_skcipher.c
--- linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_skcipher.c	2015-04-26 00:56:07.805036683 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+async_module_init(algif_skcipher_init);
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ansi_cprng.c linux-4.0/crypto/ansi_cprng.c
--- linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ansi_cprng.c	2015-04-26 00:56:07.807036684 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+async_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.0/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-26 00:56:07.837036684 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+async_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-26 00:56:07.838036684 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+async_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.0/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-26 00:56:07.840036684 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+async_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/authenc.c linux-4.0/crypto/authenc.c
--- linux-4.0.orig/crypto/authenc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/authenc.c	2015-04-26 00:56:07.843036684 +0100
@@ -716,7 +716,7 @@ static void __exit crypto_authenc_module
 	crypto_unregister_template(&crypto_authenc_tmpl);
 }
 
-module_init(crypto_authenc_module_init);
+async_module_init(crypto_authenc_module_init);
 module_exit(crypto_authenc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/authencesn.c linux-4.0/crypto/authencesn.c
--- linux-4.0.orig/crypto/authencesn.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/authencesn.c	2015-04-26 00:56:07.845036684 +0100
@@ -808,7 +808,7 @@ static void __exit crypto_authenc_esn_mo
 	crypto_unregister_template(&crypto_authenc_esn_tmpl);
 }
 
-module_init(crypto_authenc_esn_module_init);
+async_module_init(crypto_authenc_esn_module_init);
 module_exit(crypto_authenc_esn_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/blowfish_generic.c linux-4.0/crypto/blowfish_generic.c
--- linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/blowfish_generic.c	2015-04-26 00:56:07.846036684 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+async_module_init(blowfish_mod_init);
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cast5_generic.c linux-4.0/crypto/cast5_generic.c
--- linux-4.0.orig/crypto/cast5_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cast5_generic.c	2015-04-26 00:56:07.848036684 +0100
@@ -544,7 +544,7 @@ static void __exit cast5_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast5_mod_init);
+async_module_init(cast5_mod_init);
 module_exit(cast5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cast6_generic.c linux-4.0/crypto/cast6_generic.c
--- linux-4.0.orig/crypto/cast6_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cast6_generic.c	2015-04-26 00:56:07.850036684 +0100
@@ -286,7 +286,7 @@ static void __exit cast6_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast6_mod_init);
+async_module_init(cast6_mod_init);
 module_exit(cast6_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cbc.c linux-4.0/crypto/cbc.c
--- linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cbc.c	2015-04-26 00:56:07.851036684 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+async_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32.c linux-4.0/crypto/crc32.c
--- linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32.c	2015-04-26 00:56:07.853036684 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+async_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32c_generic.c linux-4.0/crypto/crc32c_generic.c
--- linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32c_generic.c	2015-04-26 00:56:07.854036684 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+async_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crct10dif_generic.c linux-4.0/crypto/crct10dif_generic.c
--- linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crct10dif_generic.c	2015-04-26 00:56:07.855036684 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+async_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_null.c linux-4.0/crypto/crypto_null.c
--- linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_null.c	2015-04-26 00:56:07.856036684 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+async_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_user.c linux-4.0/crypto/crypto_user.c
--- linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_user.c	2015-04-26 00:56:07.857036684 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+async_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ecb.c linux-4.0/crypto/ecb.c
--- linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ecb.c	2015-04-26 00:56:07.859036684 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+async_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lrw.c linux-4.0/crypto/lrw.c
--- linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lrw.c	2015-04-26 00:56:07.860036684 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+async_module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4.c linux-4.0/crypto/lz4.c
--- linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4.c	2015-04-26 00:56:07.861036684 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+async_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4hc.c linux-4.0/crypto/lz4hc.c
--- linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4hc.c	2015-04-26 00:56:07.862036684 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+async_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lzo.c linux-4.0/crypto/lzo.c
--- linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lzo.c	2015-04-26 00:56:07.864036684 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+async_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md4.c linux-4.0/crypto/md4.c
--- linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md4.c	2015-04-26 00:56:07.866036684 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+async_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md5.c linux-4.0/crypto/md5.c
--- linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md5.c	2015-04-26 00:56:07.867036684 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+async_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd128.c linux-4.0/crypto/rmd128.c
--- linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd128.c	2015-04-26 00:56:07.868036684 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+async_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd160.c linux-4.0/crypto/rmd160.c
--- linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd160.c	2015-04-26 00:56:07.870036684 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+async_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd256.c linux-4.0/crypto/rmd256.c
--- linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd256.c	2015-04-26 00:56:07.871036684 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+async_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd320.c linux-4.0/crypto/rmd320.c
--- linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd320.c	2015-04-26 00:56:07.873036684 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+async_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha1_generic.c linux-4.0/crypto/sha1_generic.c
--- linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha1_generic.c	2015-04-26 00:56:07.874036684 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+async_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha256_generic.c linux-4.0/crypto/sha256_generic.c
--- linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha256_generic.c	2015-04-26 00:56:07.875036684 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+async_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha512_generic.c linux-4.0/crypto/sha512_generic.c
--- linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha512_generic.c	2015-04-26 00:56:07.877036684 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+async_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tcrypt.c linux-4.0/crypto/tcrypt.c
--- linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tcrypt.c	2015-04-26 00:56:07.886036684 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+async_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tea.c linux-4.0/crypto/tea.c
--- linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tea.c	2015-04-26 00:56:07.888036684 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+async_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tgr192.c linux-4.0/crypto/tgr192.c
--- linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tgr192.c	2015-04-26 00:56:07.890036684 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+async_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/twofish_generic.c linux-4.0/crypto/twofish_generic.c
--- linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/twofish_generic.c	2015-04-26 00:56:07.892036685 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+async_module_init(twofish_mod_init);
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/wp512.c linux-4.0/crypto/wp512.c
--- linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/wp512.c	2015-04-26 00:56:07.896036685 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+async_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xcbc.c linux-4.0/crypto/xcbc.c
--- linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xcbc.c	2015-04-26 00:56:07.897036685 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+async_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xts.c linux-4.0/crypto/xts.c
--- linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xts.c	2015-04-26 00:56:07.899036685 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+async_module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/zlib.c linux-4.0/crypto/zlib.c
--- linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/zlib.c	2015-04-26 00:56:07.900036685 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+async_module_init(zlib_mod_init);
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/ac.c linux-4.0/drivers/acpi/ac.c
--- linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/ac.c	2015-04-26 00:56:07.902036685 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+async_module_init(acpi_ac_init);
 module_exit(acpi_ac_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_ipmi.c linux-4.0/drivers/acpi/acpi_ipmi.c
--- linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-26 00:56:07.904036685 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+async_module_init(acpi_ipmi_init);
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_pad.c linux-4.0/drivers/acpi/acpi_pad.c
--- linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_pad.c	2015-04-26 00:56:07.906036685 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+async_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/battery.c linux-4.0/drivers/acpi/battery.c
--- linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/battery.c	2015-04-26 00:56:07.909036685 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+async_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/processor_driver.c linux-4.0/drivers/acpi/processor_driver.c
--- linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/processor_driver.c	2015-04-26 00:56:07.910036685 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+async_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/sbs.c linux-4.0/drivers/acpi/sbs.c
--- linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/sbs.c	2015-04-26 00:56:07.912036685 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+async_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/thermal.c linux-4.0/drivers/acpi/thermal.c
--- linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/thermal.c	2015-04-26 00:56:07.915036685 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+async_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/video.c linux-4.0/drivers/acpi/video.c
--- linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/video.c	2015-04-26 00:56:07.919036685 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+async_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
Only in linux-4.0/drivers: async.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-19 23:24:31.701009415 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/backend.c linux-4.0/drivers/char/agp/backend.c
--- linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/backend.c	2015-04-26 00:56:07.920036685 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+async_module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/nvidia-agp.c linux-4.0/drivers/char/agp/nvidia-agp.c
--- linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-26 00:56:07.922036685 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+async_module_init(agp_nvidia_init,agp_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hpet.c linux-4.0/drivers/char/hpet.c
--- linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hpet.c	2015-04-26 00:56:07.924036685 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+async_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/core.c linux-4.0/drivers/char/hw_random/core.c
--- linux-4.0.orig/drivers/char/hw_random/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/core.c	2015-04-26 00:56:07.927036685 +0100
@@ -552,7 +552,7 @@ static void __exit hwrng_modexit(void)
 	unregister_miscdev();
 }
 
-module_init(hwrng_modinit);
+async_module_init(hwrng_modinit);
 module_exit(hwrng_modexit);
 
 MODULE_DESCRIPTION("H/W Random Number Generator (RNG) driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/intel-rng.c linux-4.0/drivers/char/hw_random/intel-rng.c
--- linux-4.0.orig/drivers/char/hw_random/intel-rng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/intel-rng.c	2015-04-26 00:56:07.928036685 +0100
@@ -325,7 +325,7 @@ PFX "RNG, try using the 'no_fwh_detect'
 }
 
 
-static int __init mod_init(void)
+static int __init intel_rng_mod_init(void)
 {
 	int err = -ENODEV;
 	int i;
@@ -411,7 +411,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-module_init(mod_init);
+async_module_init(intel_rng_mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for Intel chipsets");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.0/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-26 00:56:07.930036685 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+async_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.0/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-26 00:56:07.932036685 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+async_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.0/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-26 00:56:07.933036685 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+async_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c linux-4.0/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-26 00:56:07.957036685 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+async_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.0/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-26 00:56:07.958036685 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+async_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/speedstep-ich.c linux-4.0/drivers/cpufreq/speedstep-ich.c
--- linux-4.0.orig/drivers/cpufreq/speedstep-ich.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/speedstep-ich.c	2015-04-26 00:56:07.960036685 +0100
@@ -383,5 +383,5 @@ MODULE_DESCRIPTION("Speedstep driver for
 		"with ICH-M southbridges.");
 MODULE_LICENSE("GPL");
 
-module_init(speedstep_init);
+async_module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/dma/ioat/pci.c linux-4.0/drivers/dma/ioat/pci.c
--- linux-4.0.orig/drivers/dma/ioat/pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/dma/ioat/pci.c	2015-04-26 00:56:07.961036685 +0100
@@ -252,7 +252,7 @@ static int __init ioat_init_module(void)
 
 	return err;
 }
-module_init(ioat_init_module);
+async_module_init(ioat_init_module);
 
 static void __exit ioat_exit_module(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/drm_drv.c linux-4.0/drivers/gpu/drm/drm_drv.c
--- linux-4.0.orig/drivers/gpu/drm/drm_drv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/drm_drv.c	2015-04-26 00:56:07.963036685 +0100
@@ -908,5 +908,5 @@ static void __exit drm_core_exit(void)
 	idr_destroy(&drm_minors_idr);
 }
 
-module_init(drm_core_init);
+async_module_init(drm_core_init,agp_init);
 module_exit(drm_core_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-13 23:52:11.415705252 +0100
@@ -77,10 +77,13 @@ config DRM_KMS_CMA_HELPER
 	help
 	  Choose this if you need the KMS CMA helper functions
 
+
 source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-13 23:49:11.367703122 +0100
@@ -34,6 +34,7 @@ CFLAGS_drm_trace_points.o := -I$(src)
 
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-core.c linux-4.0/drivers/hid/hid-core.c
--- linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-core.c	2015-04-26 00:56:07.972036685 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+async_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-elo.c linux-4.0/drivers/hid/hid-elo.c
--- linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-elo.c	2015-04-26 00:56:07.973036685 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+async_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/uhid.c linux-4.0/drivers/hid/uhid.c
--- linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/uhid.c	2015-04-26 00:56:07.976036686 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+async_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/usbhid/hid-core.c linux-4.0/drivers/hid/usbhid/hid-core.c
--- linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-26 00:56:07.992036686 +0100
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+async_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hwmon/acpi_power_meter.c linux-4.0/drivers/hwmon/acpi_power_meter.c
--- linux-4.0.orig/drivers/hwmon/acpi_power_meter.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hwmon/acpi_power_meter.c	2015-04-26 00:56:07.995036686 +0100
@@ -1011,5 +1011,5 @@ MODULE_LICENSE("GPL");
 module_param(force_cap_on, bool, 0644);
 MODULE_PARM_DESC(force_cap_on, "Enable power cap even it is unsafe to do so.");
 
-module_init(acpi_power_meter_init);
+async_module_init(acpi_power_meter_init);
 module_exit(acpi_power_meter_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/keyboard/atkbd.c linux-4.0/drivers/input/keyboard/atkbd.c
--- linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-26 00:56:08.017036686 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+async_module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/misc/uinput.c linux-4.0/drivers/input/misc/uinput.c
--- linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/misc/uinput.c	2015-04-26 00:56:08.020036686 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+async_module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mouse/psmouse-base.c linux-4.0/drivers/input/mouse/psmouse-base.c
--- linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-26 00:56:08.083036687 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+async_module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mousedev.c linux-4.0/drivers/input/mousedev.c
--- linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mousedev.c	2015-04-26 00:56:08.087036687 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+async_module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/i8042.c linux-4.0/drivers/input/serio/i8042.c
--- linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/i8042.c	2015-04-26 00:56:08.091036687 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+async_module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/serport.c linux-4.0/drivers/input/serio/serport.c
--- linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/serport.c	2015-04-26 00:56:08.093036687 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+async_module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-26 13:27:00.931339793 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-26 19:19:45.103180931 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mmc/card/block.c linux-4.0/drivers/mmc/card/block.c
--- linux-4.0.orig/drivers/mmc/card/block.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mmc/card/block.c	2015-04-26 00:56:08.097036687 +0100
@@ -2579,7 +2579,7 @@ static void __exit mmc_blk_exit(void)
 	unregister_blkdev(MMC_BLOCK_MAJOR, "mmc");
 }
 
-module_init(mmc_blk_init);
+async_module_init(mmc_blk_init);
 module_exit(mmc_blk_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/mtdcore.c linux-4.0/drivers/mtd/mtdcore.c
--- linux-4.0.orig/drivers/mtd/mtdcore.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/mtdcore.c	2015-04-26 00:56:08.100036687 +0100
@@ -1275,7 +1275,7 @@ static void __exit cleanup_mtd(void)
 	bdi_destroy(&mtd_bdi);
 }
 
-module_init(init_mtd);
+async_module_init(init_mtd);
 module_exit(cleanup_mtd);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/ubi/build.c linux-4.0/drivers/mtd/ubi/build.c
--- linux-4.0.orig/drivers/mtd/ubi/build.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/ubi/build.c	2015-04-26 00:56:08.104036687 +0100
@@ -1336,7 +1336,7 @@ out:
 	pr_err("UBI error: cannot initialize UBI, error %d", err);
 	return err;
 }
-late_initcall(ubi_init);
+async_module_init(ubi_init);
 
 static void __exit ubi_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43/main.c linux-4.0/drivers/net/wireless/b43/main.c
--- linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43/main.c	2015-04-26 00:56:08.114036687 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+async_module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43legacy/main.c linux-4.0/drivers/net/wireless/b43legacy/main.c
--- linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-26 00:56:08.122036687 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+async_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-26 00:56:08.134036687 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+async_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/libipw_module.c	2015-04-26 00:56:08.136036687 +0100
@@ -318,4 +318,4 @@ MODULE_PARM_DESC(debug, "debug output ma
 #endif				/* CONFIG_LIBIPW_DEBUG */
 
 module_exit(libipw_exit);
-module_init(libipw_init);
+async_module_init(libipw_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c linux-4.0/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-26 00:56:08.140036687 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+async_module_init(pcied_init,pci_hotplug_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-26 00:56:08.138036687 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+async_module_init(pci_hotplug_init,pcie_portdrv_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c linux-4.0/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-26 00:56:08.142036687 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+async_module_init(shpcd_init,pcied_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c linux-4.0/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-26 00:56:08.144036688 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+async_module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/platform/x86/mxm-wmi.c linux-4.0/drivers/platform/x86/mxm-wmi.c
--- linux-4.0.orig/drivers/platform/x86/mxm-wmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/platform/x86/mxm-wmi.c	2015-04-26 00:56:08.145036688 +0100
@@ -107,5 +107,5 @@ static void __exit mxm_wmi_exit(void)
 {
 }
 
-module_init(mxm_wmi_init);
+async_module_init(mxm_wmi_init);
 module_exit(mxm_wmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio.c linux-4.0/drivers/uio/uio.c
--- linux-4.0.orig/drivers/uio/uio.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio.c	2015-04-26 00:56:08.147036688 +0100
@@ -887,6 +887,6 @@ static void __exit uio_exit(void)
 	release_uio_class();
 }
 
-module_init(uio_init)
+async_module_init(uio_init)
 module_exit(uio_exit)
 MODULE_LICENSE("GPL v2");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio_cif.c linux-4.0/drivers/uio/uio_cif.c
--- linux-4.0.orig/drivers/uio/uio_cif.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio_cif.c	2015-04-25 00:22:42.880197388 +0100
@@ -134,7 +134,7 @@ static struct pci_driver hilscher_pci_dr
 	.remove = hilscher_pci_remove,
 };
 
-module_pci_driver(hilscher_pci_driver);
+async_module_pci_driver(hilscher_pci_driver);
 MODULE_DEVICE_TABLE(pci, hilscher_pci_ids);
 MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Hans J. Koch, Benedikt Spranger");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-26 00:56:08.150036688 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+async_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-26 00:56:08.152036688 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+async_module_init(ehci_pci_init,ehci_hcd_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-26 00:56:08.153036688 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+async_module_init(ehci_platform_init,ehci_hcd_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-26 00:56:08.156036688 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+async_module_init(ohci_hcd_mod_init,ehci_platform_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-26 00:56:08.158036688 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+async_module_init(ohci_pci_init,ohci_hcd_mod_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-26 00:56:08.159036688 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+async_module_init(ohci_platform_init,ohci_hcd_mod_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ssb-hcd.c linux-4.0/drivers/usb/host/ssb-hcd.c
--- linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-26 00:56:08.161036688 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+async_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/uhci-hcd.c linux-4.0/drivers/usb/host/uhci-hcd.c
--- linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-26 00:56:08.163036688 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+async_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-23 23:19:45.719851229 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+module_init(init_cifs);
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ext3/super.c linux-4.0/fs/ext3/super.c
--- linux-4.0.orig/fs/ext3/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ext3/super.c	2015-04-26 00:56:08.168036688 +0100
@@ -3161,5 +3161,5 @@ static void __exit exit_ext3_fs(void)
 MODULE_AUTHOR("Remy Card, Stephen Tweedie, Andrew Morton, Andreas Dilger, Theodore Ts'o and others");
 MODULE_DESCRIPTION("Second Extended Filesystem with journaling extensions");
 MODULE_LICENSE("GPL");
-module_init(init_ext3_fs)
+async_module_init(init_ext3_fs)
 module_exit(exit_ext3_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/inode.c linux-4.0/fs/fat/inode.c
--- linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/inode.c	2015-04-26 00:56:08.172036688 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+async_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_msdos.c linux-4.0/fs/fat/namei_msdos.c
--- linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_msdos.c	2015-04-26 00:56:08.174036688 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+async_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_vfat.c linux-4.0/fs/fat/namei_vfat.c
--- linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_vfat.c	2015-04-26 00:56:08.176036688 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+async_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fuse/cuse.c linux-4.0/fs/fuse/cuse.c
--- linux-4.0.orig/fs/fuse/cuse.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fuse/cuse.c	2015-04-26 00:56:08.178036688 +0100
@@ -637,7 +637,7 @@ static void __exit cuse_exit(void)
 	class_destroy(cuse_class);
 }
 
-module_init(cuse_init);
+async_module_init(cuse_init);
 module_exit(cuse_exit);
 
 MODULE_AUTHOR("Tejun Heo <tj@kernel.org>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fuse/inode.c linux-4.0/fs/fuse/inode.c
--- linux-4.0.orig/fs/fuse/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fuse/inode.c	2015-04-26 00:56:08.181036688 +0100
@@ -1319,5 +1319,5 @@ static void __exit fuse_exit(void)
 	fuse_dev_cleanup();
 }
 
-module_init(fuse_init);
+async_module_init(fuse_init);
 module_exit(fuse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/isofs/inode.c linux-4.0/fs/isofs/inode.c
--- linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/isofs/inode.c	2015-04-26 00:56:08.184036688 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+async_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/jbd/journal.c linux-4.0/fs/jbd/journal.c
--- linux-4.0.orig/fs/jbd/journal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/jbd/journal.c	2015-04-26 00:56:08.188036688 +0100
@@ -2140,6 +2140,6 @@ static void __exit journal_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(journal_init);
+async_module_init(journal_init);
 module_exit(journal_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ntfs/super.c linux-4.0/fs/ntfs/super.c
--- linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ntfs/super.c	2015-04-26 00:56:08.194036688 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+async_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-18 22:19:31.372041768 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/bluetooth/rfcomm/core.c linux-4.0/net/bluetooth/rfcomm/core.c
--- linux-4.0.orig/net/bluetooth/rfcomm/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/bluetooth/rfcomm/core.c	2015-04-26 00:56:08.198036688 +0100
@@ -2255,7 +2255,7 @@ static void __exit rfcomm_exit(void)
 	rfcomm_cleanup_sockets();
 }
 
-module_init(rfcomm_init);
+async_module_init(rfcomm_init);
 module_exit(rfcomm_exit);
 
 module_param(disable_cfc, bool, 0644);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211.c linux-4.0/net/wireless/lib80211.c
--- linux-4.0.orig/net/wireless/lib80211.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211.c	2015-04-26 00:56:08.206036688 +0100
@@ -253,5 +253,5 @@ static void __exit lib80211_exit(void)
 	BUG_ON(!list_empty(&lib80211_crypto_algs));
 }
 
-module_init(lib80211_init);
+async_module_init(lib80211_init);
 module_exit(lib80211_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c linux-4.0/net/wireless/lib80211_crypt_ccmp.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_ccmp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_ccmp.c	2015-04-26 00:56:08.200036688 +0100
@@ -475,5 +475,5 @@ static void __exit lib80211_crypto_ccmp_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_ccmp);
 }
 
-module_init(lib80211_crypto_ccmp_init);
+async_module_init(lib80211_crypto_ccmp_init);
 module_exit(lib80211_crypto_ccmp_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c linux-4.0/net/wireless/lib80211_crypt_tkip.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_tkip.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_tkip.c	2015-04-26 00:56:08.203036688 +0100
@@ -758,5 +758,5 @@ static void __exit lib80211_crypto_tkip_
 	lib80211_unregister_crypto_ops(&lib80211_crypt_tkip);
 }
 
-module_init(lib80211_crypto_tkip_init);
+async_module_init(lib80211_crypto_tkip_init);
 module_exit(lib80211_crypto_tkip_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/wireless/lib80211_crypt_wep.c linux-4.0/net/wireless/lib80211_crypt_wep.c
--- linux-4.0.orig/net/wireless/lib80211_crypt_wep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/wireless/lib80211_crypt_wep.c	2015-04-26 00:56:08.205036688 +0100
@@ -285,5 +285,5 @@ static void __exit lib80211_crypto_wep_e
 	lib80211_unregister_crypto_ops(&lib80211_crypt_wep);
 }
 
-module_init(lib80211_crypto_wep_init);
+async_module_init(lib80211_crypto_wep_init);
 module_exit(lib80211_crypto_wep_exit);
Only in linux-4.0: .project
Only in linux-4.0: .settings
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/compress_offload.c linux-4.0/sound/core/compress_offload.c
--- linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/compress_offload.c	2015-04-26 00:56:08.209036688 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+async_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hrtimer.c linux-4.0/sound/core/hrtimer.c
--- linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hrtimer.c	2015-04-26 00:56:08.211036688 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+async_module_init(snd_hrtimer_init,alsa_timer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-26 00:56:08.213036688 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+async_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/mixer_oss.c linux-4.0/sound/core/oss/mixer_oss.c
--- linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/mixer_oss.c	2015-04-26 00:56:08.216036688 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+async_module_init(alsa_mixer_oss_init,alsa_timer_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/pcm_oss.c linux-4.0/sound/core/oss/pcm_oss.c
--- linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/pcm_oss.c	2015-04-26 00:56:08.221036688 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+async_module_init(alsa_pcm_oss_init,alsa_pcm_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/pcm.c linux-4.0/sound/core/pcm.c
--- linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/pcm.c	2015-04-26 00:56:08.225036688 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+async_module_init(alsa_pcm_init,alsa_mixer_oss_init)
 module_exit(alsa_pcm_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rawmidi.c linux-4.0/sound/core/rawmidi.c
--- linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rawmidi.c	2015-04-26 00:56:08.228036688 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+async_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rtctimer.c linux-4.0/sound/core/rtctimer.c
--- linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rtctimer.c	2015-04-26 00:56:08.230036689 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+async_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/oss/seq_oss.c linux-4.0/sound/core/seq/oss/seq_oss.c
--- linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-26 00:56:08.277036689 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+async_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq.c linux-4.0/sound/core/seq/seq.c
--- linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq.c	2015-04-26 00:56:08.292036689 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+async_module_init(alsa_seq_init,alsa_seq_device_init)
 module_exit(alsa_seq_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_device.c linux-4.0/sound/core/seq/seq_device.c
--- linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_device.c	2015-04-26 00:56:08.279036689 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-module_init(alsa_seq_device_init)
+async_module_init(alsa_seq_device_init,alsa_timer_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_dummy.c linux-4.0/sound/core/seq/seq_dummy.c
--- linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_dummy.c	2015-04-26 00:56:08.281036689 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+async_module_init(alsa_seq_dummy_init,alsa_seq_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-26 00:56:08.288036689 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+async_module_init(alsa_seq_midi_init,alsa_seq_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_emul.c linux-4.0/sound/core/seq/seq_midi_emul.c
--- linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-26 00:56:08.285036689 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+async_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_event.c linux-4.0/sound/core/seq/seq_midi_event.c
--- linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-26 00:56:08.287036689 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+async_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_virmidi.c linux-4.0/sound/core/seq/seq_virmidi.c
--- linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-26 00:56:08.290036689 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+async_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/timer.c linux-4.0/sound/core/timer.c
--- linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/timer.c	2015-04-26 00:56:08.295036689 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+async_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/aloop.c linux-4.0/sound/drivers/aloop.c
--- linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/aloop.c	2015-04-26 00:56:08.373036690 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+async_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/dummy.c linux-4.0/sound/drivers/dummy.c
--- linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/dummy.c	2015-04-26 00:56:08.390036690 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+async_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401.c linux-4.0/sound/drivers/mpu401/mpu401.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-26 00:56:08.416036691 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+async_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.0/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-26 00:56:08.414036691 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+async_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/virmidi.c linux-4.0/sound/drivers/virmidi.c
--- linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/virmidi.c	2015-04-26 00:56:08.418036691 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+async_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/soundcard.c linux-4.0/sound/oss/soundcard.c
--- linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/soundcard.c	2015-04-26 00:56:08.420036691 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+async_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/hda_intel.c linux-4.0/sound/pci/hda/hda_intel.c
--- linux-4.0.orig/sound/pci/hda/hda_intel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/hda_intel.c	2015-04-24 18:38:21.477953059 +0100
@@ -2183,4 +2183,4 @@ static struct pci_driver azx_driver = {
 	},
 };
 
-module_pci_driver(azx_driver);
+async_module_pci_driver(azx_driver);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_analog.c linux-4.0/sound/pci/hda/patch_analog.c
--- linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_analog.c	2015-04-26 00:56:08.423036691 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-module_init(patch_analog_init)
+async_module_init(patch_analog_init,alsa_hwdep_init)
 module_exit(patch_analog_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0110.c linux-4.0/sound/pci/hda/patch_ca0110.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-26 00:56:08.425036691 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-module_init(patch_ca0110_init)
+async_module_init(patch_ca0110_init,alsa_hwdep_init)
 module_exit(patch_ca0110_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0132.c linux-4.0/sound/pci/hda/patch_ca0132.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-26 00:56:08.431036691 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-module_init(patch_ca0132_init)
+async_module_init(patch_ca0132_init,alsa_hwdep_init)
 module_exit(patch_ca0132_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cirrus.c linux-4.0/sound/pci/hda/patch_cirrus.c
--- linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-26 00:56:08.434036691 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-module_init(patch_cirrus_init)
+async_module_init(patch_cirrus_init,alsa_hwdep_init)
 module_exit(patch_cirrus_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cmedia.c linux-4.0/sound/pci/hda/patch_cmedia.c
--- linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-26 00:56:08.436036691 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-module_init(patch_cmedia_init)
+async_module_init(patch_cmedia_init,alsa_hwdep_init)
 module_exit(patch_cmedia_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_conexant.c linux-4.0/sound/pci/hda/patch_conexant.c
--- linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-26 00:56:08.439036691 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-module_init(patch_conexant_init)
+async_module_init(patch_conexant_init,alsa_hwdep_init)
 module_exit(patch_conexant_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_hdmi.c linux-4.0/sound/pci/hda/patch_hdmi.c
--- linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-26 00:56:08.445036691 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-module_init(patch_hdmi_init)
+async_module_init(patch_hdmi_init,alsa_hwdep_init)
 module_exit(patch_hdmi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_realtek.c linux-4.0/sound/pci/hda/patch_realtek.c
--- linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-26 00:56:08.454036691 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-module_init(patch_realtek_init)
+async_module_init(patch_realtek_init,alsa_hwdep_init)
 module_exit(patch_realtek_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_si3054.c linux-4.0/sound/pci/hda/patch_si3054.c
--- linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-26 00:56:08.456036691 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-module_init(patch_si3054_init)
+async_module_init(patch_si3054_init,alsa_hwdep_init)
 module_exit(patch_si3054_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_sigmatel.c linux-4.0/sound/pci/hda/patch_sigmatel.c
--- linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-26 00:56:08.463036691 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-module_init(patch_sigmatel_init)
+async_module_init(patch_sigmatel_init,alsa_hwdep_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_via.c linux-4.0/sound/pci/hda/patch_via.c
--- linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_via.c	2015-04-26 00:56:08.467036691 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-module_init(patch_via_init)
+async_module_init(patch_via_init,alsa_hwdep_init)
 module_exit(patch_via_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/powermac.c linux-4.0/sound/ppc/powermac.c
--- linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/powermac.c	2015-04-26 00:56:08.510036692 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+async_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/snd_ps3.c linux-4.0/sound/ppc/snd_ps3.c
--- linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/snd_ps3.c	2015-04-26 00:56:08.513036692 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+async_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/emux/emux.c linux-4.0/sound/synth/emux/emux.c
--- linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/emux/emux.c	2015-04-26 00:56:08.515036692 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+async_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/util_mem.c linux-4.0/sound/synth/util_mem.c
--- linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/util_mem.c	2015-04-26 00:56:08.518036692 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+async_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
Only in linux-4.0/drivers: async.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-19 23:24:31.701009415 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/intel-rng.c linux-4.0/drivers/char/hw_random/intel-rng.c
--- linux-4.0.orig/drivers/char/hw_random/intel-rng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/intel-rng.c	2015-04-26 20:57:08.776250035 +0100
@@ -325,7 +325,7 @@ PFX "RNG, try using the 'no_fwh_detect'
 }
 
 
-static int __init mod_init(void)
+static int __init intel_rng_mod_init(void)
 {
 	int err = -ENODEV;
 	int i;
@@ -411,7 +411,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-module_init(mod_init);
+module_init(intel_rng_mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for Intel chipsets");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-13 23:52:11.415705252 +0100
@@ -77,10 +77,13 @@ config DRM_KMS_CMA_HELPER
 	help
 	  Choose this if you need the KMS CMA helper functions
 
+
 source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-13 23:49:11.367703122 +0100
@@ -34,6 +34,7 @@ CFLAGS_drm_trace_points.o := -I$(src)
 
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-26 13:27:00.931339793 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-26 19:19:45.103180931 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/ubi/build.c linux-4.0/drivers/mtd/ubi/build.c
--- linux-4.0.orig/drivers/mtd/ubi/build.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/ubi/build.c	2015-04-26 20:57:08.927250037 +0100
@@ -1336,7 +1336,7 @@ out:
 	pr_err("UBI error: cannot initialize UBI, error %d", err);
 	return err;
 }
-late_initcall(ubi_init);
+module_init(ubi_init);
 
 static void __exit ubi_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio_cif.c linux-4.0/drivers/uio/uio_cif.c
--- linux-4.0.orig/drivers/uio/uio_cif.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio_cif.c	2015-04-25 00:22:42.880197388 +0100
@@ -134,7 +134,7 @@ static struct pci_driver hilscher_pci_dr
 	.remove = hilscher_pci_remove,
 };
 
-module_pci_driver(hilscher_pci_driver);
+async_module_pci_driver(hilscher_pci_driver);
 MODULE_DEVICE_TABLE(pci, hilscher_pci_ids);
 MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Hans J. Koch, Benedikt Spranger");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-26 00:56:08.150036688 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+async_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-26 21:13:53.230261913 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+async_module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-26 21:16:16.350263605 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+async_module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-26 21:18:21.790265089 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+async_module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-26 21:20:03.919266296 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+async_module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-26 21:19:00.678265549 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+async_module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-23 23:19:45.719851229 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+module_init(init_cifs);
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-18 22:19:31.372041768 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/bluetooth/rfcomm/core.c linux-4.0/net/bluetooth/rfcomm/core.c
--- linux-4.0.orig/net/bluetooth/rfcomm/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/bluetooth/rfcomm/core.c	2015-04-26 00:56:08.198036688 +0100
@@ -2255,7 +2255,7 @@ static void __exit rfcomm_exit(void)
 	rfcomm_cleanup_sockets();
 }
 
-module_init(rfcomm_init);
+async_module_init(rfcomm_init);
 module_exit(rfcomm_exit);
 
 module_param(disable_cfc, bool, 0644);
Only in linux-4.0: .project
Only in linux-4.0: .settings
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-26 20:57:09.139250039 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-26 20:57:09.194250040 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+module_init(alsa_seq_midi_init,alsa_seq_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/hda_intel.c linux-4.0/sound/pci/hda/hda_intel.c
--- linux-4.0.orig/sound/pci/hda/hda_intel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/hda_intel.c	2015-04-24 18:38:21.477953059 +0100
@@ -2183,4 +2183,4 @@ static struct pci_driver azx_driver = {
 	},
 };
 
-module_pci_driver(azx_driver);
+async_module_pci_driver(azx_driver);
Only in linux-4.0/arch/x86/vdso: vdso-image-32-int80.c
Only in linux-4.0/arch/x86/vdso: vdso-image-32-sysenter.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/aes_generic.c linux-4.0/crypto/aes_generic.c
--- linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/aes_generic.c	2015-04-27 16:45:54.010395857 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+deferred_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/af_alg.c linux-4.0/crypto/af_alg.c
--- linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/af_alg.c	2015-04-21 15:20:04.819998117 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+module_init(af_alg_init);	// allow algif_hash algif_skcipher
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_hash.c linux-4.0/crypto/algif_hash.c
--- linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_hash.c	2015-04-21 09:50:43.257680224 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+module_init(algif_hash_init);	//af_alg_init
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_skcipher.c linux-4.0/crypto/algif_skcipher.c
--- linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_skcipher.c	2015-04-21 09:51:35.845678339 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+module_init(algif_skcipher_init);		//af_alg_init
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ansi_cprng.c linux-4.0/crypto/ansi_cprng.c
--- linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ansi_cprng.c	2015-04-27 16:45:54.022395944 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+deferred_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.0/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-27 16:45:54.022395944 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+deferred_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-27 16:45:54.034395979 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+deferred_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.0/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-27 16:45:54.046396052 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+deferred_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/async_tx/async_pq.c linux-4.0/crypto/async_tx/async_pq.c
--- linux-4.0.orig/crypto/async_tx/async_pq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/async_tx/async_pq.c	2015-04-21 14:27:40.688727838 +0100
@@ -434,7 +434,7 @@ static void __exit async_pq_exit(void)
 	put_page(pq_scribble_page);
 }
 
-module_init(async_pq_init);
+module_init(async_pq_init);	//raid6_pq.ko async_xor.ko async_tx.ko
 module_exit(async_pq_exit);
 
 MODULE_DESCRIPTION("asynchronous raid6 syndrome generation/validation");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/blowfish_generic.c linux-4.0/crypto/blowfish_generic.c
--- linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/blowfish_generic.c	2015-04-27 16:45:54.046396052 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+deferred_module_init(blowfish_mod_init);	//blowfish_common.ko
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cbc.c linux-4.0/crypto/cbc.c
--- linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cbc.c	2015-04-27 16:45:54.046396052 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+deferred_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32.c linux-4.0/crypto/crc32.c
--- linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32.c	2015-04-27 16:45:54.062396127 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+deferred_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32c_generic.c linux-4.0/crypto/crc32c_generic.c
--- linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32c_generic.c	2015-04-27 16:45:54.062396127 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+deferred_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crct10dif_generic.c linux-4.0/crypto/crct10dif_generic.c
--- linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crct10dif_generic.c	2015-04-27 16:45:54.062396127 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+deferred_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_null.c linux-4.0/crypto/crypto_null.c
--- linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_null.c	2015-04-27 16:45:54.062396127 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+deferred_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_user.c linux-4.0/crypto/crypto_user.c
--- linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_user.c	2015-04-27 16:45:54.066396144 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+deferred_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/deflate.c linux-4.0/crypto/deflate.c
--- linux-4.0.orig/crypto/deflate.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/deflate.c	2015-04-21 14:28:17.399075375 +0100
@@ -216,7 +216,7 @@ static void __exit deflate_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(deflate_mod_init);
+module_init(deflate_mod_init);	//zlib_deflate
 module_exit(deflate_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ecb.c linux-4.0/crypto/ecb.c
--- linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ecb.c	2015-04-27 16:45:54.070396164 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+deferred_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ghash-generic.c linux-4.0/crypto/ghash-generic.c
--- linux-4.0.orig/crypto/ghash-generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ghash-generic.c	2015-04-21 14:28:17.387069373 +0100
@@ -167,7 +167,7 @@ static void __exit ghash_mod_exit(void)
 	crypto_unregister_shash(&ghash_alg);
 }
 
-module_init(ghash_mod_init);
+module_init(ghash_mod_init);	//gf128mul
 module_exit(ghash_mod_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lrw.c linux-4.0/crypto/lrw.c
--- linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lrw.c	2015-04-27 16:45:54.070396164 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4.c linux-4.0/crypto/lz4.c
--- linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4.c	2015-04-27 16:45:54.074396192 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+deferred_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4hc.c linux-4.0/crypto/lz4hc.c
--- linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4hc.c	2015-04-27 16:45:54.078396203 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+deferred_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lzo.c linux-4.0/crypto/lzo.c
--- linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lzo.c	2015-04-27 16:45:54.078396203 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+deferred_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md4.c linux-4.0/crypto/md4.c
--- linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md4.c	2015-04-27 16:45:54.082396214 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+deferred_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md5.c linux-4.0/crypto/md5.c
--- linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md5.c	2015-04-27 16:45:54.086396237 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+deferred_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd128.c linux-4.0/crypto/rmd128.c
--- linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd128.c	2015-04-27 16:45:54.106396335 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+deferred_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd160.c linux-4.0/crypto/rmd160.c
--- linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd160.c	2015-04-27 16:45:54.106396335 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+deferred_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd256.c linux-4.0/crypto/rmd256.c
--- linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd256.c	2015-04-27 16:45:54.118396404 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+deferred_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd320.c linux-4.0/crypto/rmd320.c
--- linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd320.c	2015-04-27 16:45:54.118396404 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+deferred_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha1_generic.c linux-4.0/crypto/sha1_generic.c
--- linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha1_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+deferred_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha256_generic.c linux-4.0/crypto/sha256_generic.c
--- linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha256_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+deferred_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha512_generic.c linux-4.0/crypto/sha512_generic.c
--- linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha512_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+deferred_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tcrypt.c linux-4.0/crypto/tcrypt.c
--- linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tcrypt.c	2015-04-27 16:45:54.134396472 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+deferred_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tea.c linux-4.0/crypto/tea.c
--- linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tea.c	2015-04-27 16:45:54.138396495 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+deferred_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tgr192.c linux-4.0/crypto/tgr192.c
--- linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tgr192.c	2015-04-27 16:45:54.142396535 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+deferred_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/twofish_generic.c linux-4.0/crypto/twofish_generic.c
--- linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/twofish_generic.c	2015-04-27 16:45:54.142396535 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+deferred_module_init(twofish_mod_init);	//twofish_common
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/vmac.c linux-4.0/crypto/vmac.c
--- linux-4.0.orig/crypto/vmac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/vmac.c	2015-04-27 16:45:54.146396546 +0100
@@ -708,7 +708,7 @@ static void __exit vmac_module_exit(void
 	crypto_unregister_template(&vmac_tmpl);
 }
 
-module_init(vmac_module_init);
+deferred_module_init(vmac_module_init);
 module_exit(vmac_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/wp512.c linux-4.0/crypto/wp512.c
--- linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/wp512.c	2015-04-27 16:45:54.150396554 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+deferred_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xcbc.c linux-4.0/crypto/xcbc.c
--- linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xcbc.c	2015-04-27 16:45:54.154396572 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+deferred_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xts.c linux-4.0/crypto/xts.c
--- linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xts.c	2015-04-27 16:45:54.158396596 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/zlib.c linux-4.0/crypto/zlib.c
--- linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/zlib.c	2015-04-27 16:45:54.162396635 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+deferred_module_init(zlib_mod_init);	//zlib_deflate
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/ac.c linux-4.0/drivers/acpi/ac.c
--- linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/ac.c	2015-04-27 11:25:03.831152609 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+async_module_init(acpi_ac_init);	//power_supply (subinit)
 module_exit(acpi_ac_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_ipmi.c linux-4.0/drivers/acpi/acpi_ipmi.c
--- linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-27 16:45:54.166396643 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+deferred_module_init(acpi_ipmi_init);	//ipmi_msghandler
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_pad.c linux-4.0/drivers/acpi/acpi_pad.c
--- linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_pad.c	2015-04-27 16:45:54.166396643 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+deferred_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/battery.c linux-4.0/drivers/acpi/battery.c
--- linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/battery.c	2015-04-27 16:45:54.170396652 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+deferred_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/processor_driver.c linux-4.0/drivers/acpi/processor_driver.c
--- linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/processor_driver.c	2015-04-27 16:45:54.186396740 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+deferred_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/sbs.c linux-4.0/drivers/acpi/sbs.c
--- linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/sbs.c	2015-04-27 16:45:54.186396740 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+deferred_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/thermal.c linux-4.0/drivers/acpi/thermal.c
--- linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/thermal.c	2015-04-27 16:45:54.190396760 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+deferred_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/video.c linux-4.0/drivers/acpi/video.c
--- linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/video.c	2015-04-27 16:45:54.194396788 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+deferred_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/acard-ahci.c linux-4.0/drivers/ata/acard-ahci.c
--- linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/acard-ahci.c	2015-04-21 09:30:19.953724003 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-module_pci_driver(acard_ahci_pci_driver);
+async_module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-21 09:30:19.953724003 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/backend.c linux-4.0/drivers/char/agp/backend.c
--- linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/backend.c	2015-04-27 16:45:54.198396799 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+deferred_module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/nvidia-agp.c linux-4.0/drivers/char/agp/nvidia-agp.c
--- linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-27 16:45:54.206396833 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+deferred_module_init(agp_nvidia_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hpet.c linux-4.0/drivers/char/hpet.c
--- linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hpet.c	2015-04-27 16:45:54.210396872 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+deferred_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c linux-4.0/drivers/char/ipmi/ipmi_msghandler.c
--- linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/ipmi/ipmi_msghandler.c	2015-04-21 15:29:15.043971829 +0100
@@ -4607,7 +4607,7 @@ static void __exit cleanup_ipmi(void)
 }
 module_exit(cleanup_ipmi);
 
-module_init(ipmi_init_msghandler_mod);
+module_init(ipmi_init_msghandler_mod);  //release acpi_ipmi, 
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("Incoming and outgoing message routing for an IPMI"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.0/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-27 16:45:54.210396872 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.0/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-27 16:45:54.222396909 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.0/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-27 16:45:54.226396942 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+deferred_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c linux-4.0/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-27 16:45:54.226396942 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+deferred_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.0/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-27 16:45:54.230396968 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+deferred_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-14 10:12:41.516068679 +0100
@@ -81,6 +81,8 @@ source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-21 09:30:19.957724009 +0100
@@ -32,8 +32,10 @@ obj-$(CONFIG_DRM_KMS_HELPER) += drm_kms_
 
 CFLAGS_drm_trace_points.o := -I$(src)
 
+obj-$(CONFIG_NVIDIA_ION) += nvidia-ion/
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-core.c linux-4.0/drivers/hid/hid-core.c
--- linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-core.c	2015-04-28 13:51:29.354337719 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+async_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-elo.c linux-4.0/drivers/hid/hid-elo.c
--- linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-elo.c	2015-04-28 13:54:47.502331633 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+deferred_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-hyperv.c linux-4.0/drivers/hid/hid-hyperv.c
--- linux-4.0.orig/drivers/hid/hid-hyperv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-hyperv.c	2015-04-28 13:54:43.994331743 +0100
@@ -611,5 +611,5 @@ static void __exit mousevsc_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(mousevsc_init);
+deferred_module_init(mousevsc_init);
 module_exit(mousevsc_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-arvo.c linux-4.0/drivers/hid/hid-roccat-arvo.c
--- linux-4.0.orig/drivers/hid/hid-roccat-arvo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-arvo.c	2015-04-28 13:54:44.010331737 +0100
@@ -452,7 +452,7 @@ static void __exit arvo_exit(void)
 	class_destroy(arvo_class);
 }
 
-module_init(arvo_init);
+deferred_module_init(arvo_init);
 module_exit(arvo_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat.c linux-4.0/drivers/hid/hid-roccat.c
--- linux-4.0.orig/drivers/hid/hid-roccat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat.c	2015-04-28 13:54:44.098331735 +0100
@@ -453,7 +453,7 @@ static void __exit roccat_exit(void)
 	unregister_chrdev_region(dev_id, ROCCAT_MAX_DEVICES);
 }
 
-module_init(roccat_init);
+deferred_module_init(roccat_init);
 module_exit(roccat_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-isku.c linux-4.0/drivers/hid/hid-roccat-isku.c
--- linux-4.0.orig/drivers/hid/hid-roccat-isku.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-isku.c	2015-04-28 13:54:44.014331735 +0100
@@ -454,7 +454,7 @@ static void __exit isku_exit(void)
 	class_destroy(isku_class);
 }
 
-module_init(isku_init);
+deferred_module_init(isku_init);
 module_exit(isku_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kone.c linux-4.0/drivers/hid/hid-roccat-kone.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kone.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kone.c	2015-04-28 13:54:44.022331735 +0100
@@ -901,7 +901,7 @@ static void __exit kone_exit(void)
 	class_destroy(kone_class);
 }
 
-module_init(kone_init);
+deferred_module_init(kone_init);
 module_exit(kone_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c linux-4.0/drivers/hid/hid-roccat-koneplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-koneplus.c	2015-04-28 13:54:44.030331740 +0100
@@ -570,7 +570,7 @@ static void __exit koneplus_exit(void)
 	class_destroy(koneplus_class);
 }
 
-module_init(koneplus_init);
+deferred_module_init(koneplus_init);
 module_exit(koneplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-konepure.c linux-4.0/drivers/hid/hid-roccat-konepure.c
--- linux-4.0.orig/drivers/hid/hid-roccat-konepure.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-konepure.c	2015-04-28 13:54:44.046331736 +0100
@@ -224,7 +224,7 @@ static void __exit konepure_exit(void)
 	class_destroy(konepure_class);
 }
 
-module_init(konepure_init);
+deferred_module_init(konepure_init);
 module_exit(konepure_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c linux-4.0/drivers/hid/hid-roccat-kovaplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kovaplus.c	2015-04-28 13:54:44.054331735 +0100
@@ -657,7 +657,7 @@ static void __exit kovaplus_exit(void)
 	class_destroy(kovaplus_class);
 }
 
-module_init(kovaplus_init);
+deferred_module_init(kovaplus_init);
 module_exit(kovaplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-pyra.c linux-4.0/drivers/hid/hid-roccat-pyra.c
--- linux-4.0.orig/drivers/hid/hid-roccat-pyra.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-pyra.c	2015-04-28 13:54:44.074331735 +0100
@@ -607,7 +607,7 @@ static void __exit pyra_exit(void)
 	class_destroy(pyra_class);
 }
 
-module_init(pyra_init);
+deferred_module_init(pyra_init);
 module_exit(pyra_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-ryos.c linux-4.0/drivers/hid/hid-roccat-ryos.c
--- linux-4.0.orig/drivers/hid/hid-roccat-ryos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-ryos.c	2015-04-28 13:54:44.082331735 +0100
@@ -233,7 +233,7 @@ static void __exit ryos_exit(void)
 	class_destroy(ryos_class);
 }
 
-module_init(ryos_init);
+deferred_module_init(ryos_init);
 module_exit(ryos_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-savu.c linux-4.0/drivers/hid/hid-roccat-savu.c
--- linux-4.0.orig/drivers/hid/hid-roccat-savu.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-savu.c	2015-04-28 13:54:44.098331735 +0100
@@ -221,7 +221,7 @@ static void __exit savu_exit(void)
 	class_destroy(savu_class);
 }
 
-module_init(savu_init);
+deferred_module_init(savu_init);
 module_exit(savu_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-sony.c linux-4.0/drivers/hid/hid-sony.c
--- linux-4.0.orig/drivers/hid/hid-sony.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-sony.c	2015-04-28 13:54:44.122331733 +0100
@@ -2152,7 +2152,7 @@ static void __exit sony_exit(void)
 	hid_unregister_driver(&sony_driver);
 	ida_destroy(&sony_device_id_allocator);
 }
-module_init(sony_init);
+deferred_module_init(sony_init);
 module_exit(sony_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/uhid.c linux-4.0/drivers/hid/uhid.c
--- linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/uhid.c	2015-04-28 13:54:44.126331734 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+deferred_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/usbhid/hid-core.c linux-4.0/drivers/hid/usbhid/hid-core.c
--- linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-28 13:51:27.326337782 +0100
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+deferred_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c linux-4.0/drivers/i2c/busses/i2c-nforce2.c
--- linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/i2c/busses/i2c-nforce2.c	2015-04-28 12:51:49.012492495 +0100
@@ -448,4 +448,4 @@ static struct pci_driver nforce2_driver
 	.remove		= nforce2_remove,
 };
 
-module_pci_driver(nforce2_driver);
+deferred_module_pci_driver(nforce2_driver);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/keyboard/atkbd.c linux-4.0/drivers/input/keyboard/atkbd.c
--- linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-28 10:26:02.197065352 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+deferred_module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/misc/uinput.c linux-4.0/drivers/input/misc/uinput.c
--- linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/misc/uinput.c	2015-04-27 16:45:54.270397155 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+deferred_module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mouse/psmouse-base.c linux-4.0/drivers/input/mouse/psmouse-base.c
--- linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-27 16:45:54.278397193 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+deferred_module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mousedev.c linux-4.0/drivers/input/mousedev.c
--- linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mousedev.c	2015-04-27 16:45:54.282397223 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+deferred_module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/i8042.c linux-4.0/drivers/input/serio/i8042.c
--- linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/i8042.c	2015-04-27 16:45:54.286397239 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+deferred_module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/serport.c linux-4.0/drivers/input/serio/serport.c
--- linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/serport.c	2015-04-27 16:45:54.290397255 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+deferred_module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-21 14:19:27.380902248 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-21 09:30:19.981724024 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43/main.c linux-4.0/drivers/net/wireless/b43/main.c
--- linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43/main.c	2015-04-27 16:45:54.302397323 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+deferred_module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43legacy/main.c linux-4.0/drivers/net/wireless/b43legacy/main.c
--- linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-27 16:45:54.310397355 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+deferred_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-27 16:45:54.326397426 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+deferred_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c linux-4.0/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-27 16:45:54.334397478 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+deferred_module_init(pcied_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-27 16:45:54.330397445 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+deferred_module_init(pci_hotplug_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c linux-4.0/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-27 16:45:54.338397504 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+deferred_module_init(shpcd_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c linux-4.0/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-27 16:45:54.342397509 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+deferred_module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-27 16:45:54.350397545 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+deferred_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-27 16:45:54.354397586 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+deferred_module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-27 16:45:54.358397599 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+deferred_module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-27 16:45:54.362397610 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+deferred_module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-27 16:45:54.362397610 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+deferred_module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-27 16:45:54.366397621 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+deferred_module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ssb-hcd.c linux-4.0/drivers/usb/host/ssb-hcd.c
--- linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-27 16:45:54.366397621 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+deferred_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/uhci-hcd.c linux-4.0/drivers/usb/host/uhci-hcd.c
--- linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-27 16:45:54.370397644 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+deferred_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.0/firmware: b43
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-27 16:45:54.374397684 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+deferred_module_init(init_cifs)
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/inode.c linux-4.0/fs/fat/inode.c
--- linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/inode.c	2015-04-27 16:45:54.382397704 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+deferred_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_msdos.c linux-4.0/fs/fat/namei_msdos.c
--- linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_msdos.c	2015-04-27 16:45:54.382397704 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+deferred_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_vfat.c linux-4.0/fs/fat/namei_vfat.c
--- linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_vfat.c	2015-04-27 16:46:24.546547281 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+deferred_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/isofs/inode.c linux-4.0/fs/isofs/inode.c
--- linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/isofs/inode.c	2015-04-27 16:45:54.386397726 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+deferred_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ntfs/super.c linux-4.0/fs/ntfs/super.c
--- linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ntfs/super.c	2015-04-27 16:45:54.398397787 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+deferred_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-21 09:30:20.001724017 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/.project linux-4.0/.project
--- linux-4.0.orig/.project	2015-04-21 13:50:56.451057744 +0100
+++ linux-4.0/.project	2015-04-14 11:28:19.357432096 +0100
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <projectDescription>
-	<name>linux-4.0.orig</name>
+	<name>linux-4.0</name>
 	<comment></comment>
 	<projects>
 	</projects>
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/compress_offload.c linux-4.0/sound/core/compress_offload.c
--- linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/compress_offload.c	2015-04-27 16:45:54.402397798 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+deferred_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hrtimer.c linux-4.0/sound/core/hrtimer.c
--- linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hrtimer.c	2015-04-27 16:45:54.402397798 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+deferred_module_init(snd_hrtimer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-27 16:45:54.406397820 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+deferred_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/mixer_oss.c linux-4.0/sound/core/oss/mixer_oss.c
--- linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/mixer_oss.c	2015-04-27 16:45:54.410397862 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+deferred_module_init(alsa_mixer_oss_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/pcm_oss.c linux-4.0/sound/core/oss/pcm_oss.c
--- linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/pcm_oss.c	2015-04-27 16:45:54.418397888 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+deferred_module_init(alsa_pcm_oss_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/pcm.c linux-4.0/sound/core/pcm.c
--- linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/pcm.c	2015-04-27 16:45:54.422397904 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+deferred_module_init(alsa_pcm_init)
 module_exit(alsa_pcm_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rawmidi.c linux-4.0/sound/core/rawmidi.c
--- linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rawmidi.c	2015-04-27 16:45:54.426397925 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+deferred_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rtctimer.c linux-4.0/sound/core/rtctimer.c
--- linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rtctimer.c	2015-04-27 16:45:54.430397956 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+deferred_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/oss/seq_oss.c linux-4.0/sound/core/seq/oss/seq_oss.c
--- linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-27 16:45:54.430397956 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+deferred_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq.c linux-4.0/sound/core/seq/seq.c
--- linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq.c	2015-04-27 16:45:54.462398102 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+deferred_module_init(alsa_seq_init)
 module_exit(alsa_seq_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_device.c linux-4.0/sound/core/seq/seq_device.c
--- linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_device.c	2015-04-27 16:45:54.442398007 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-module_init(alsa_seq_device_init)
+deferred_module_init(alsa_seq_device_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_dummy.c linux-4.0/sound/core/seq/seq_dummy.c
--- linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_dummy.c	2015-04-27 16:45:54.442398007 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+deferred_module_init(alsa_seq_dummy_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-27 16:45:54.454398071 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+deferred_module_init(alsa_seq_midi_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_emul.c linux-4.0/sound/core/seq/seq_midi_emul.c
--- linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-27 16:45:54.450398057 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+deferred_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_event.c linux-4.0/sound/core/seq/seq_midi_event.c
--- linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-27 16:45:54.454398071 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+deferred_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_virmidi.c linux-4.0/sound/core/seq/seq_virmidi.c
--- linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-27 16:45:54.458398085 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+deferred_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/timer.c linux-4.0/sound/core/timer.c
--- linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/timer.c	2015-04-27 16:45:54.466398133 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+deferred_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/aloop.c linux-4.0/sound/drivers/aloop.c
--- linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/aloop.c	2015-04-27 16:45:54.470398149 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+deferred_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/dummy.c linux-4.0/sound/drivers/dummy.c
--- linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/dummy.c	2015-04-27 16:45:54.486398234 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+deferred_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401.c linux-4.0/sound/drivers/mpu401/mpu401.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-27 16:45:54.494398263 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+deferred_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.0/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-27 16:45:54.486398234 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+deferred_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/virmidi.c linux-4.0/sound/drivers/virmidi.c
--- linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/virmidi.c	2015-04-27 16:45:54.494398263 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+deferred_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/soundcard.c linux-4.0/sound/oss/soundcard.c
--- linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/soundcard.c	2015-04-27 16:45:54.494398263 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+deferred_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_analog.c linux-4.0/sound/pci/hda/patch_analog.c
--- linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_analog.c	2015-04-27 16:45:54.498398285 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-module_init(patch_analog_init)
+deferred_module_init(patch_analog_init)
 module_exit(patch_analog_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0110.c linux-4.0/sound/pci/hda/patch_ca0110.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-27 16:45:54.502398315 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-module_init(patch_ca0110_init)
+deferred_module_init(patch_ca0110_init)
 module_exit(patch_ca0110_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0132.c linux-4.0/sound/pci/hda/patch_ca0132.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-27 16:45:54.510398347 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-module_init(patch_ca0132_init)
+deferred_module_init(patch_ca0132_init)
 module_exit(patch_ca0132_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cirrus.c linux-4.0/sound/pci/hda/patch_cirrus.c
--- linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-27 16:45:54.514398364 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-module_init(patch_cirrus_init)
+deferred_module_init(patch_cirrus_init)
 module_exit(patch_cirrus_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cmedia.c linux-4.0/sound/pci/hda/patch_cmedia.c
--- linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-27 16:45:54.514398364 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-module_init(patch_cmedia_init)
+deferred_module_init(patch_cmedia_init)
 module_exit(patch_cmedia_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_conexant.c linux-4.0/sound/pci/hda/patch_conexant.c
--- linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-27 16:45:54.518398383 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-module_init(patch_conexant_init)
+deferred_module_init(patch_conexant_init)
 module_exit(patch_conexant_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_hdmi.c linux-4.0/sound/pci/hda/patch_hdmi.c
--- linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-27 16:45:54.534398463 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-module_init(patch_hdmi_init)
+deferred_module_init(patch_hdmi_init)
 module_exit(patch_hdmi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_realtek.c linux-4.0/sound/pci/hda/patch_realtek.c
--- linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-27 16:45:54.554398566 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-module_init(patch_realtek_init)
+deferred_module_init(patch_realtek_init)
 module_exit(patch_realtek_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_si3054.c linux-4.0/sound/pci/hda/patch_si3054.c
--- linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-27 16:45:54.558398575 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-module_init(patch_si3054_init)
+deferred_module_init(patch_si3054_init)
 module_exit(patch_si3054_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_sigmatel.c linux-4.0/sound/pci/hda/patch_sigmatel.c
--- linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-27 16:45:54.566398620 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-module_init(patch_sigmatel_init)
+deferred_module_init(patch_sigmatel_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_via.c linux-4.0/sound/pci/hda/patch_via.c
--- linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_via.c	2015-04-27 16:45:54.570398659 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-module_init(patch_via_init)
+deferred_module_init(patch_via_init)
 module_exit(patch_via_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/powermac.c linux-4.0/sound/ppc/powermac.c
--- linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/powermac.c	2015-04-27 16:45:54.574398670 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+deferred_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/snd_ps3.c linux-4.0/sound/ppc/snd_ps3.c
--- linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/snd_ps3.c	2015-04-27 16:45:54.578398677 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+deferred_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/emux/emux.c linux-4.0/sound/synth/emux/emux.c
--- linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/emux/emux.c	2015-04-27 16:45:54.582398695 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+deferred_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/util_mem.c linux-4.0/sound/synth/util_mem.c
--- linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/util_mem.c	2015-04-27 16:45:54.582398695 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+deferred_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
Only in linux-4.0/arch/x86/vdso: vdso-image-32-int80.c
Only in linux-4.0/arch/x86/vdso: vdso-image-32-sysenter.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/aes_generic.c linux-4.0.orig/crypto/aes_generic.c
--- linux-4.0/crypto/aes_generic.c	2015-04-27 16:45:54.010395857 +0100
+++ linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-deferred_module_init(aes_init);
+module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/af_alg.c linux-4.0.orig/crypto/af_alg.c
--- linux-4.0/crypto/af_alg.c	2015-04-21 15:20:04.819998117 +0100
+++ linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);	// allow algif_hash algif_skcipher
+module_init(af_alg_init);
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/algif_hash.c linux-4.0.orig/crypto/algif_hash.c
--- linux-4.0/crypto/algif_hash.c	2015-04-21 09:50:43.257680224 +0100
+++ linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);	//af_alg_init
+module_init(algif_hash_init);
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/algif_skcipher.c linux-4.0.orig/crypto/algif_skcipher.c
--- linux-4.0/crypto/algif_skcipher.c	2015-04-21 09:51:35.845678339 +0100
+++ linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);		//af_alg_init
+module_init(algif_skcipher_init);
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/ansi_cprng.c linux-4.0.orig/crypto/ansi_cprng.c
--- linux-4.0/crypto/ansi_cprng.c	2015-04-27 16:45:54.022395944 +0100
+++ linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-deferred_module_init(prng_mod_init);
+module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/asymmetric_keys/asymmetric_type.c linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-27 16:45:54.022395944 +0100
+++ linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-deferred_module_init(asymmetric_key_init);
+module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-27 16:45:54.034395979 +0100
+++ linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-deferred_module_init(pkcs7_key_init);
+module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/asymmetric_keys/x509_public_key.c linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-27 16:45:54.046396052 +0100
+++ linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-deferred_module_init(x509_key_init);
+module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/async_tx/async_pq.c linux-4.0.orig/crypto/async_tx/async_pq.c
--- linux-4.0/crypto/async_tx/async_pq.c	2015-04-21 14:27:40.688727838 +0100
+++ linux-4.0.orig/crypto/async_tx/async_pq.c	2015-04-12 23:12:50.000000000 +0100
@@ -434,7 +434,7 @@ static void __exit async_pq_exit(void)
 	put_page(pq_scribble_page);
 }
 
-module_init(async_pq_init);	//raid6_pq.ko async_xor.ko async_tx.ko
+module_init(async_pq_init);
 module_exit(async_pq_exit);
 
 MODULE_DESCRIPTION("asynchronous raid6 syndrome generation/validation");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/blowfish_generic.c linux-4.0.orig/crypto/blowfish_generic.c
--- linux-4.0/crypto/blowfish_generic.c	2015-04-27 16:45:54.046396052 +0100
+++ linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-deferred_module_init(blowfish_mod_init);	//blowfish_common.ko
+module_init(blowfish_mod_init);
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/cbc.c linux-4.0.orig/crypto/cbc.c
--- linux-4.0/crypto/cbc.c	2015-04-27 16:45:54.046396052 +0100
+++ linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-deferred_module_init(crypto_cbc_module_init);
+module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crc32.c linux-4.0.orig/crypto/crc32.c
--- linux-4.0/crypto/crc32.c	2015-04-27 16:45:54.062396127 +0100
+++ linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(crc32_mod_init);
+module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crc32c_generic.c linux-4.0.orig/crypto/crc32c_generic.c
--- linux-4.0/crypto/crc32c_generic.c	2015-04-27 16:45:54.062396127 +0100
+++ linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(crc32c_mod_init);
+module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crct10dif_generic.c linux-4.0.orig/crypto/crct10dif_generic.c
--- linux-4.0/crypto/crct10dif_generic.c	2015-04-27 16:45:54.062396127 +0100
+++ linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(crct10dif_mod_init);
+module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crypto_null.c linux-4.0.orig/crypto/crypto_null.c
--- linux-4.0/crypto/crypto_null.c	2015-04-27 16:45:54.062396127 +0100
+++ linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-deferred_module_init(crypto_null_mod_init);
+module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/crypto_user.c linux-4.0.orig/crypto/crypto_user.c
--- linux-4.0/crypto/crypto_user.c	2015-04-27 16:45:54.066396144 +0100
+++ linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-deferred_module_init(crypto_user_init);
+module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/deflate.c linux-4.0.orig/crypto/deflate.c
--- linux-4.0/crypto/deflate.c	2015-04-21 14:28:17.399075375 +0100
+++ linux-4.0.orig/crypto/deflate.c	2015-04-12 23:12:50.000000000 +0100
@@ -216,7 +216,7 @@ static void __exit deflate_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(deflate_mod_init);	//zlib_deflate
+module_init(deflate_mod_init);
 module_exit(deflate_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/ecb.c linux-4.0.orig/crypto/ecb.c
--- linux-4.0/crypto/ecb.c	2015-04-27 16:45:54.070396164 +0100
+++ linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-deferred_module_init(crypto_ecb_module_init);
+module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/ghash-generic.c linux-4.0.orig/crypto/ghash-generic.c
--- linux-4.0/crypto/ghash-generic.c	2015-04-21 14:28:17.387069373 +0100
+++ linux-4.0.orig/crypto/ghash-generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -167,7 +167,7 @@ static void __exit ghash_mod_exit(void)
 	crypto_unregister_shash(&ghash_alg);
 }
 
-module_init(ghash_mod_init);	//gf128mul
+module_init(ghash_mod_init);
 module_exit(ghash_mod_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lrw.c linux-4.0.orig/crypto/lrw.c
--- linux-4.0/crypto/lrw.c	2015-04-27 16:45:54.070396164 +0100
+++ linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-deferred_module_init(crypto_module_init);	//gf128mul
+module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lz4.c linux-4.0.orig/crypto/lz4.c
--- linux-4.0/crypto/lz4.c	2015-04-27 16:45:54.074396192 +0100
+++ linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-deferred_module_init(lz4_mod_init);
+module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lz4hc.c linux-4.0.orig/crypto/lz4hc.c
--- linux-4.0/crypto/lz4hc.c	2015-04-27 16:45:54.078396203 +0100
+++ linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-deferred_module_init(lz4hc_mod_init);
+module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/lzo.c linux-4.0.orig/crypto/lzo.c
--- linux-4.0/crypto/lzo.c	2015-04-27 16:45:54.078396203 +0100
+++ linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-deferred_module_init(lzo_mod_init);
+module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/md4.c linux-4.0.orig/crypto/md4.c
--- linux-4.0/crypto/md4.c	2015-04-27 16:45:54.082396214 +0100
+++ linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(md4_mod_init);
+module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/md5.c linux-4.0.orig/crypto/md5.c
--- linux-4.0/crypto/md5.c	2015-04-27 16:45:54.086396237 +0100
+++ linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(md5_mod_init);
+module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd128.c linux-4.0.orig/crypto/rmd128.c
--- linux-4.0/crypto/rmd128.c	2015-04-27 16:45:54.106396335 +0100
+++ linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd128_mod_init);
+module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd160.c linux-4.0.orig/crypto/rmd160.c
--- linux-4.0/crypto/rmd160.c	2015-04-27 16:45:54.106396335 +0100
+++ linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd160_mod_init);
+module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd256.c linux-4.0.orig/crypto/rmd256.c
--- linux-4.0/crypto/rmd256.c	2015-04-27 16:45:54.118396404 +0100
+++ linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd256_mod_init);
+module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/rmd320.c linux-4.0.orig/crypto/rmd320.c
--- linux-4.0/crypto/rmd320.c	2015-04-27 16:45:54.118396404 +0100
+++ linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(rmd320_mod_init);
+module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/sha1_generic.c linux-4.0.orig/crypto/sha1_generic.c
--- linux-4.0/crypto/sha1_generic.c	2015-04-27 16:45:54.130396461 +0100
+++ linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-deferred_module_init(sha1_generic_mod_init);
+module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/sha256_generic.c linux-4.0.orig/crypto/sha256_generic.c
--- linux-4.0/crypto/sha256_generic.c	2015-04-27 16:45:54.130396461 +0100
+++ linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-deferred_module_init(sha256_generic_mod_init);
+module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/sha512_generic.c linux-4.0.orig/crypto/sha512_generic.c
--- linux-4.0/crypto/sha512_generic.c	2015-04-27 16:45:54.130396461 +0100
+++ linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-deferred_module_init(sha512_generic_mod_init);
+module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/tcrypt.c linux-4.0.orig/crypto/tcrypt.c
--- linux-4.0/crypto/tcrypt.c	2015-04-27 16:45:54.134396472 +0100
+++ linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-deferred_module_init(tcrypt_mod_init);
+module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/tea.c linux-4.0.orig/crypto/tea.c
--- linux-4.0/crypto/tea.c	2015-04-27 16:45:54.138396495 +0100
+++ linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-deferred_module_init(tea_mod_init);
+module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/tgr192.c linux-4.0.orig/crypto/tgr192.c
--- linux-4.0/crypto/tgr192.c	2015-04-27 16:45:54.142396535 +0100
+++ linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-deferred_module_init(tgr192_mod_init);
+module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/twofish_generic.c linux-4.0.orig/crypto/twofish_generic.c
--- linux-4.0/crypto/twofish_generic.c	2015-04-27 16:45:54.142396535 +0100
+++ linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-deferred_module_init(twofish_mod_init);	//twofish_common
+module_init(twofish_mod_init);
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/vmac.c linux-4.0.orig/crypto/vmac.c
--- linux-4.0/crypto/vmac.c	2015-04-27 16:45:54.146396546 +0100
+++ linux-4.0.orig/crypto/vmac.c	2015-04-12 23:12:50.000000000 +0100
@@ -708,7 +708,7 @@ static void __exit vmac_module_exit(void
 	crypto_unregister_template(&vmac_tmpl);
 }
 
-deferred_module_init(vmac_module_init);
+module_init(vmac_module_init);
 module_exit(vmac_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/wp512.c linux-4.0.orig/crypto/wp512.c
--- linux-4.0/crypto/wp512.c	2015-04-27 16:45:54.150396554 +0100
+++ linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-deferred_module_init(wp512_mod_init);
+module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/xcbc.c linux-4.0.orig/crypto/xcbc.c
--- linux-4.0/crypto/xcbc.c	2015-04-27 16:45:54.154396572 +0100
+++ linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-deferred_module_init(crypto_xcbc_module_init);
+module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/xts.c linux-4.0.orig/crypto/xts.c
--- linux-4.0/crypto/xts.c	2015-04-27 16:45:54.158396596 +0100
+++ linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-deferred_module_init(crypto_module_init);	//gf128mul
+module_init(crypto_module_init);
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/crypto/zlib.c linux-4.0.orig/crypto/zlib.c
--- linux-4.0/crypto/zlib.c	2015-04-27 16:45:54.162396635 +0100
+++ linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-deferred_module_init(zlib_mod_init);	//zlib_deflate
+module_init(zlib_mod_init);
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/ac.c linux-4.0.orig/drivers/acpi/ac.c
--- linux-4.0/drivers/acpi/ac.c	2015-04-27 11:25:03.831152609 +0100
+++ linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-async_module_init(acpi_ac_init);	//power_supply (subinit)
+module_init(acpi_ac_init);
 module_exit(acpi_ac_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/acpi_ipmi.c linux-4.0.orig/drivers/acpi/acpi_ipmi.c
--- linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-27 16:45:54.166396643 +0100
+++ linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-deferred_module_init(acpi_ipmi_init);	//ipmi_msghandler
+module_init(acpi_ipmi_init);
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/acpi_pad.c linux-4.0.orig/drivers/acpi/acpi_pad.c
--- linux-4.0/drivers/acpi/acpi_pad.c	2015-04-27 16:45:54.166396643 +0100
+++ linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-deferred_module_init(acpi_pad_init);
+module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/battery.c linux-4.0.orig/drivers/acpi/battery.c
--- linux-4.0/drivers/acpi/battery.c	2015-04-27 16:45:54.170396652 +0100
+++ linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-deferred_module_init(acpi_battery_init);
+module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/processor_driver.c linux-4.0.orig/drivers/acpi/processor_driver.c
--- linux-4.0/drivers/acpi/processor_driver.c	2015-04-27 16:45:54.186396740 +0100
+++ linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-deferred_module_init(acpi_processor_driver_init);
+module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/sbs.c linux-4.0.orig/drivers/acpi/sbs.c
--- linux-4.0/drivers/acpi/sbs.c	2015-04-27 16:45:54.186396740 +0100
+++ linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-deferred_module_init(acpi_sbs_init);
+module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/thermal.c linux-4.0.orig/drivers/acpi/thermal.c
--- linux-4.0/drivers/acpi/thermal.c	2015-04-27 16:45:54.190396760 +0100
+++ linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-deferred_module_init(acpi_thermal_init);
+module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/acpi/video.c linux-4.0.orig/drivers/acpi/video.c
--- linux-4.0/drivers/acpi/video.c	2015-04-27 16:45:54.194396788 +0100
+++ linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-deferred_module_init(acpi_video_init);
+module_init(acpi_video_init);
 module_exit(acpi_video_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/ata/acard-ahci.c linux-4.0.orig/drivers/ata/acard-ahci.c
--- linux-4.0/drivers/ata/acard-ahci.c	2015-04-21 09:30:19.953724003 +0100
+++ linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-async_module_pci_driver(acard_ahci_pci_driver);
+module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/ata/ahci.c linux-4.0.orig/drivers/ata/ahci.c
--- linux-4.0/drivers/ata/ahci.c	2015-04-21 09:30:19.953724003 +0100
+++ linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-async_module_pci_driver(ahci_pci_driver);
+module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/agp/backend.c linux-4.0.orig/drivers/char/agp/backend.c
--- linux-4.0/drivers/char/agp/backend.c	2015-04-27 16:45:54.198396799 +0100
+++ linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-deferred_module_init(agp_init);
+module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/agp/nvidia-agp.c linux-4.0.orig/drivers/char/agp/nvidia-agp.c
--- linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-27 16:45:54.206396833 +0100
+++ linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-deferred_module_init(agp_nvidia_init);
+module_init(agp_nvidia_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/hpet.c linux-4.0.orig/drivers/char/hpet.c
--- linux-4.0/drivers/char/hpet.c	2015-04-27 16:45:54.210396872 +0100
+++ linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-deferred_module_init(hpet_init);
+module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/char/ipmi/ipmi_msghandler.c linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c
--- linux-4.0/drivers/char/ipmi/ipmi_msghandler.c	2015-04-21 15:29:15.043971829 +0100
+++ linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c	2015-04-12 23:12:50.000000000 +0100
@@ -4607,7 +4607,7 @@ static void __exit cleanup_ipmi(void)
 }
 module_exit(cleanup_ipmi);
 
-module_init(ipmi_init_msghandler_mod);  //release acpi_ipmi, 
+module_init(ipmi_init_msghandler_mod);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("Incoming and outgoing message routing for an IPMI"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_conservative.c linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-27 16:45:54.210396872 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-deferred_module_init(cpufreq_gov_dbs_init);
+module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_ondemand.c linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-27 16:45:54.222396909 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-deferred_module_init(cpufreq_gov_dbs_init);
+module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_powersave.c linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-27 16:45:54.226396942 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-deferred_module_init(cpufreq_gov_powersave_init);
+module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_stats.c linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-27 16:45:54.226396942 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-deferred_module_init(cpufreq_stats_init);
+module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/cpufreq/cpufreq_userspace.c linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-27 16:45:54.230396968 +0100
+++ linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-deferred_module_init(cpufreq_gov_userspace_init);
+module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/gpu/drm/Kconfig linux-4.0.orig/drivers/gpu/drm/Kconfig
--- linux-4.0/drivers/gpu/drm/Kconfig	2015-04-14 10:12:41.516068679 +0100
+++ linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
@@ -81,8 +81,6 @@ source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
-source "drivers/gpu/drm/nvidia-ion/Kconfig"
-
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/gpu/drm/Makefile linux-4.0.orig/drivers/gpu/drm/Makefile
--- linux-4.0/drivers/gpu/drm/Makefile	2015-04-21 09:30:19.957724009 +0100
+++ linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
@@ -32,10 +32,8 @@ obj-$(CONFIG_DRM_KMS_HELPER) += drm_kms_
 
 CFLAGS_drm_trace_points.o := -I$(src)
 
-obj-$(CONFIG_NVIDIA_ION) += nvidia-ion/
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
-obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-core.c linux-4.0.orig/drivers/hid/hid-core.c
--- linux-4.0/drivers/hid/hid-core.c	2015-04-28 13:51:29.354337719 +0100
+++ linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-async_module_init(hid_init);
+module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-elo.c linux-4.0.orig/drivers/hid/hid-elo.c
--- linux-4.0/drivers/hid/hid-elo.c	2015-04-28 13:54:47.502331633 +0100
+++ linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-deferred_module_init(elo_driver_init);
+module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-hyperv.c linux-4.0.orig/drivers/hid/hid-hyperv.c
--- linux-4.0/drivers/hid/hid-hyperv.c	2015-04-28 13:54:43.994331743 +0100
+++ linux-4.0.orig/drivers/hid/hid-hyperv.c	2015-04-12 23:12:50.000000000 +0100
@@ -611,5 +611,5 @@ static void __exit mousevsc_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-deferred_module_init(mousevsc_init);
+module_init(mousevsc_init);
 module_exit(mousevsc_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-arvo.c linux-4.0.orig/drivers/hid/hid-roccat-arvo.c
--- linux-4.0/drivers/hid/hid-roccat-arvo.c	2015-04-28 13:54:44.010331737 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-arvo.c	2015-04-12 23:12:50.000000000 +0100
@@ -452,7 +452,7 @@ static void __exit arvo_exit(void)
 	class_destroy(arvo_class);
 }
 
-deferred_module_init(arvo_init);
+module_init(arvo_init);
 module_exit(arvo_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat.c linux-4.0.orig/drivers/hid/hid-roccat.c
--- linux-4.0/drivers/hid/hid-roccat.c	2015-04-28 13:54:44.098331735 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat.c	2015-04-12 23:12:50.000000000 +0100
@@ -453,7 +453,7 @@ static void __exit roccat_exit(void)
 	unregister_chrdev_region(dev_id, ROCCAT_MAX_DEVICES);
 }
 
-deferred_module_init(roccat_init);
+module_init(roccat_init);
 module_exit(roccat_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-isku.c linux-4.0.orig/drivers/hid/hid-roccat-isku.c
--- linux-4.0/drivers/hid/hid-roccat-isku.c	2015-04-28 13:54:44.014331735 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-isku.c	2015-04-12 23:12:50.000000000 +0100
@@ -454,7 +454,7 @@ static void __exit isku_exit(void)
 	class_destroy(isku_class);
 }
 
-deferred_module_init(isku_init);
+module_init(isku_init);
 module_exit(isku_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-kone.c linux-4.0.orig/drivers/hid/hid-roccat-kone.c
--- linux-4.0/drivers/hid/hid-roccat-kone.c	2015-04-28 13:54:44.022331735 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-kone.c	2015-04-12 23:12:50.000000000 +0100
@@ -901,7 +901,7 @@ static void __exit kone_exit(void)
 	class_destroy(kone_class);
 }
 
-deferred_module_init(kone_init);
+module_init(kone_init);
 module_exit(kone_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-koneplus.c linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c
--- linux-4.0/drivers/hid/hid-roccat-koneplus.c	2015-04-28 13:54:44.030331740 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c	2015-04-12 23:12:50.000000000 +0100
@@ -570,7 +570,7 @@ static void __exit koneplus_exit(void)
 	class_destroy(koneplus_class);
 }
 
-deferred_module_init(koneplus_init);
+module_init(koneplus_init);
 module_exit(koneplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-konepure.c linux-4.0.orig/drivers/hid/hid-roccat-konepure.c
--- linux-4.0/drivers/hid/hid-roccat-konepure.c	2015-04-28 13:54:44.046331736 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-konepure.c	2015-04-12 23:12:50.000000000 +0100
@@ -224,7 +224,7 @@ static void __exit konepure_exit(void)
 	class_destroy(konepure_class);
 }
 
-deferred_module_init(konepure_init);
+module_init(konepure_init);
 module_exit(konepure_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-kovaplus.c linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c
--- linux-4.0/drivers/hid/hid-roccat-kovaplus.c	2015-04-28 13:54:44.054331735 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c	2015-04-12 23:12:50.000000000 +0100
@@ -657,7 +657,7 @@ static void __exit kovaplus_exit(void)
 	class_destroy(kovaplus_class);
 }
 
-deferred_module_init(kovaplus_init);
+module_init(kovaplus_init);
 module_exit(kovaplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-pyra.c linux-4.0.orig/drivers/hid/hid-roccat-pyra.c
--- linux-4.0/drivers/hid/hid-roccat-pyra.c	2015-04-28 13:54:44.074331735 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-pyra.c	2015-04-12 23:12:50.000000000 +0100
@@ -607,7 +607,7 @@ static void __exit pyra_exit(void)
 	class_destroy(pyra_class);
 }
 
-deferred_module_init(pyra_init);
+module_init(pyra_init);
 module_exit(pyra_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-ryos.c linux-4.0.orig/drivers/hid/hid-roccat-ryos.c
--- linux-4.0/drivers/hid/hid-roccat-ryos.c	2015-04-28 13:54:44.082331735 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-ryos.c	2015-04-12 23:12:50.000000000 +0100
@@ -233,7 +233,7 @@ static void __exit ryos_exit(void)
 	class_destroy(ryos_class);
 }
 
-deferred_module_init(ryos_init);
+module_init(ryos_init);
 module_exit(ryos_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-roccat-savu.c linux-4.0.orig/drivers/hid/hid-roccat-savu.c
--- linux-4.0/drivers/hid/hid-roccat-savu.c	2015-04-28 13:54:44.098331735 +0100
+++ linux-4.0.orig/drivers/hid/hid-roccat-savu.c	2015-04-12 23:12:50.000000000 +0100
@@ -221,7 +221,7 @@ static void __exit savu_exit(void)
 	class_destroy(savu_class);
 }
 
-deferred_module_init(savu_init);
+module_init(savu_init);
 module_exit(savu_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/hid-sony.c linux-4.0.orig/drivers/hid/hid-sony.c
--- linux-4.0/drivers/hid/hid-sony.c	2015-04-28 13:54:44.122331733 +0100
+++ linux-4.0.orig/drivers/hid/hid-sony.c	2015-04-12 23:12:50.000000000 +0100
@@ -2152,7 +2152,7 @@ static void __exit sony_exit(void)
 	hid_unregister_driver(&sony_driver);
 	ida_destroy(&sony_device_id_allocator);
 }
-deferred_module_init(sony_init);
+module_init(sony_init);
 module_exit(sony_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/uhid.c linux-4.0.orig/drivers/hid/uhid.c
--- linux-4.0/drivers/hid/uhid.c	2015-04-28 13:54:44.126331734 +0100
+++ linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-deferred_module_init(uhid_init);
+module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/hid/usbhid/hid-core.c linux-4.0.orig/drivers/hid/usbhid/hid-core.c
--- linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-28 13:51:27.326337782 +0100
+++ linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-deferred_module_init(hid_init);
+module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/i2c/busses/i2c-nforce2.c linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c
--- linux-4.0/drivers/i2c/busses/i2c-nforce2.c	2015-04-28 12:51:49.012492495 +0100
+++ linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c	2015-04-12 23:12:50.000000000 +0100
@@ -448,4 +448,4 @@ static struct pci_driver nforce2_driver
 	.remove		= nforce2_remove,
 };
 
-deferred_module_pci_driver(nforce2_driver);
+module_pci_driver(nforce2_driver);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/keyboard/atkbd.c linux-4.0.orig/drivers/input/keyboard/atkbd.c
--- linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-28 10:26:02.197065352 +0100
+++ linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-deferred_module_init(atkbd_init);
+module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/misc/uinput.c linux-4.0.orig/drivers/input/misc/uinput.c
--- linux-4.0/drivers/input/misc/uinput.c	2015-04-27 16:45:54.270397155 +0100
+++ linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-deferred_module_init(uinput_init);
+module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/mouse/psmouse-base.c linux-4.0.orig/drivers/input/mouse/psmouse-base.c
--- linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-27 16:45:54.278397193 +0100
+++ linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-deferred_module_init(psmouse_init);
+module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/mousedev.c linux-4.0.orig/drivers/input/mousedev.c
--- linux-4.0/drivers/input/mousedev.c	2015-04-27 16:45:54.282397223 +0100
+++ linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-deferred_module_init(mousedev_init);
+module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/serio/i8042.c linux-4.0.orig/drivers/input/serio/i8042.c
--- linux-4.0/drivers/input/serio/i8042.c	2015-04-27 16:45:54.286397239 +0100
+++ linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-deferred_module_init(i8042_init);
+module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/input/serio/serport.c linux-4.0.orig/drivers/input/serio/serport.c
--- linux-4.0/drivers/input/serio/serport.c	2015-04-27 16:45:54.290397255 +0100
+++ linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-deferred_module_init(serport_init);
+module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/Kconfig linux-4.0.orig/drivers/Kconfig
--- linux-4.0/drivers/Kconfig	2015-04-21 14:19:27.380902248 +0100
+++ linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
@@ -1,20 +1,5 @@
 menu "Device Drivers"
 
-config ASYNCHRO_MODULE_INIT
-	bool "Initialize module in Asynchronize way using single module dependencies"
-	---help---
-	Asynchrone drivers initialization routine 
-	
-if ASYNCHRO_MODULE_INIT
-	config ASYNCHRO_MODULE_INIT_DEBUG
-	bool "Debug mode"
-	
-	config ASYNCHRO_MODULE_INIT_THREADS	
-	int "Maximum number of threads"
-	range 0 4
-	default "2" 
-endif
-	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/Makefile linux-4.0.orig/drivers/Makefile
--- linux-4.0/drivers/Makefile	2015-04-21 09:30:19.981724024 +0100
+++ linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
@@ -33,9 +33,6 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
-#ready for asyncronized initialization
-obj-y += async.o
-
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -168,5 +165,3 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
-
-
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/net/wireless/b43/main.c linux-4.0.orig/drivers/net/wireless/b43/main.c
--- linux-4.0/drivers/net/wireless/b43/main.c	2015-04-27 16:45:54.302397323 +0100
+++ linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-deferred_module_init(b43_init)
+module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/net/wireless/b43legacy/main.c linux-4.0.orig/drivers/net/wireless/b43legacy/main.c
--- linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-27 16:45:54.310397355 +0100
+++ linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-deferred_module_init(b43legacy_init)
+module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-27 16:45:54.326397426 +0100
+++ linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-deferred_module_init(ipw2100_init);
+module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/hotplug/pciehp_core.c linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-27 16:45:54.334397478 +0100
+++ linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-deferred_module_init(pcied_init);
+module_init(pcied_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-27 16:45:54.330397445 +0100
+++ linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-deferred_module_init(pci_hotplug_init);
+module_init(pci_hotplug_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/hotplug/shpchp_core.c linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-27 16:45:54.338397504 +0100
+++ linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-deferred_module_init(shpcd_init);
+module_init(shpcd_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/pci/pcie/portdrv_pci.c linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-27 16:45:54.342397509 +0100
+++ linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-deferred_module_init(pcie_portdrv_init);
+module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ehci-hcd.c linux-4.0.orig/drivers/usb/host/ehci-hcd.c
--- linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-27 16:45:54.350397545 +0100
+++ linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-deferred_module_init(ehci_hcd_init);
+module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ehci-pci.c linux-4.0.orig/drivers/usb/host/ehci-pci.c
--- linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-27 16:45:54.354397586 +0100
+++ linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-deferred_module_init(ehci_pci_init);
+module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ehci-platform.c linux-4.0.orig/drivers/usb/host/ehci-platform.c
--- linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-27 16:45:54.358397599 +0100
+++ linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-deferred_module_init(ehci_platform_init);
+module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ohci-hcd.c linux-4.0.orig/drivers/usb/host/ohci-hcd.c
--- linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-27 16:45:54.362397610 +0100
+++ linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-deferred_module_init(ohci_hcd_mod_init);
+module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ohci-pci.c linux-4.0.orig/drivers/usb/host/ohci-pci.c
--- linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-27 16:45:54.362397610 +0100
+++ linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-deferred_module_init(ohci_pci_init);
+module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ohci-platform.c linux-4.0.orig/drivers/usb/host/ohci-platform.c
--- linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-27 16:45:54.366397621 +0100
+++ linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-deferred_module_init(ohci_platform_init);
+module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/ssb-hcd.c linux-4.0.orig/drivers/usb/host/ssb-hcd.c
--- linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-27 16:45:54.366397621 +0100
+++ linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-deferred_module_init(ssb_hcd_init);
+module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/drivers/usb/host/uhci-hcd.c linux-4.0.orig/drivers/usb/host/uhci-hcd.c
--- linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-27 16:45:54.370397644 +0100
+++ linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-deferred_module_init(uhci_hcd_init);
+module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.0/firmware: b43
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/cifs/cifsfs.c linux-4.0.orig/fs/cifs/cifsfs.c
--- linux-4.0/fs/cifs/cifsfs.c	2015-04-27 16:45:54.374397684 +0100
+++ linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-deferred_module_init(init_cifs)
+module_init(init_cifs)
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fat/inode.c linux-4.0.orig/fs/fat/inode.c
--- linux-4.0/fs/fat/inode.c	2015-04-27 16:45:54.382397704 +0100
+++ linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-deferred_module_init(init_fat_fs)
+module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fat/namei_msdos.c linux-4.0.orig/fs/fat/namei_msdos.c
--- linux-4.0/fs/fat/namei_msdos.c	2015-04-27 16:45:54.382397704 +0100
+++ linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-deferred_module_init(init_msdos_fs)
+module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/fat/namei_vfat.c linux-4.0.orig/fs/fat/namei_vfat.c
--- linux-4.0/fs/fat/namei_vfat.c	2015-04-27 16:46:24.546547281 +0100
+++ linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-deferred_module_init(init_vfat_fs)
+module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/isofs/inode.c linux-4.0.orig/fs/isofs/inode.c
--- linux-4.0/fs/isofs/inode.c	2015-04-27 16:45:54.386397726 +0100
+++ linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-deferred_module_init(init_iso9660_fs)
+module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/fs/ntfs/super.c linux-4.0.orig/fs/ntfs/super.c
--- linux-4.0/fs/ntfs/super.c	2015-04-27 16:45:54.398397787 +0100
+++ linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-deferred_module_init(init_ntfs_fs)
+module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/init/main.c linux-4.0.orig/init/main.c
--- linux-4.0/init/main.c	2015-04-21 09:30:20.001724017 +0100
+++ linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	//free_initmem();
+	free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/.project linux-4.0.orig/.project
--- linux-4.0/.project	2015-04-14 11:28:19.357432096 +0100
+++ linux-4.0.orig/.project	2015-04-21 13:50:56.451057744 +0100
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <projectDescription>
-	<name>linux-4.0</name>
+	<name>linux-4.0.orig</name>
 	<comment></comment>
 	<projects>
 	</projects>
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/compress_offload.c linux-4.0.orig/sound/core/compress_offload.c
--- linux-4.0/sound/core/compress_offload.c	2015-04-27 16:45:54.402397798 +0100
+++ linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-deferred_module_init(snd_compress_init);
+module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/hrtimer.c linux-4.0.orig/sound/core/hrtimer.c
--- linux-4.0/sound/core/hrtimer.c	2015-04-27 16:45:54.402397798 +0100
+++ linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-deferred_module_init(snd_hrtimer_init);
+module_init(snd_hrtimer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/hwdep.c linux-4.0.orig/sound/core/hwdep.c
--- linux-4.0/sound/core/hwdep.c	2015-04-27 16:45:54.406397820 +0100
+++ linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-deferred_module_init(alsa_hwdep_init);
+module_init(alsa_hwdep_init)
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/oss/mixer_oss.c linux-4.0.orig/sound/core/oss/mixer_oss.c
--- linux-4.0/sound/core/oss/mixer_oss.c	2015-04-27 16:45:54.410397862 +0100
+++ linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-deferred_module_init(alsa_mixer_oss_init)
+module_init(alsa_mixer_oss_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/oss/pcm_oss.c linux-4.0.orig/sound/core/oss/pcm_oss.c
--- linux-4.0/sound/core/oss/pcm_oss.c	2015-04-27 16:45:54.418397888 +0100
+++ linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-deferred_module_init(alsa_pcm_oss_init)
+module_init(alsa_pcm_oss_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/pcm.c linux-4.0.orig/sound/core/pcm.c
--- linux-4.0/sound/core/pcm.c	2015-04-27 16:45:54.422397904 +0100
+++ linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-deferred_module_init(alsa_pcm_init)
+module_init(alsa_pcm_init)
 module_exit(alsa_pcm_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/rawmidi.c linux-4.0.orig/sound/core/rawmidi.c
--- linux-4.0/sound/core/rawmidi.c	2015-04-27 16:45:54.426397925 +0100
+++ linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-deferred_module_init(alsa_rawmidi_init)
+module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/rtctimer.c linux-4.0.orig/sound/core/rtctimer.c
--- linux-4.0/sound/core/rtctimer.c	2015-04-27 16:45:54.430397956 +0100
+++ linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-deferred_module_init(rtctimer_init)
+module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/oss/seq_oss.c linux-4.0.orig/sound/core/seq/oss/seq_oss.c
--- linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-27 16:45:54.430397956 +0100
+++ linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-deferred_module_init(alsa_seq_oss_init)
+module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq.c linux-4.0.orig/sound/core/seq/seq.c
--- linux-4.0/sound/core/seq/seq.c	2015-04-27 16:45:54.462398102 +0100
+++ linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-deferred_module_init(alsa_seq_init)
+module_init(alsa_seq_init)
 module_exit(alsa_seq_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_device.c linux-4.0.orig/sound/core/seq/seq_device.c
--- linux-4.0/sound/core/seq/seq_device.c	2015-04-27 16:45:54.442398007 +0100
+++ linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-deferred_module_init(alsa_seq_device_init)
+module_init(alsa_seq_device_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_dummy.c linux-4.0.orig/sound/core/seq/seq_dummy.c
--- linux-4.0/sound/core/seq/seq_dummy.c	2015-04-27 16:45:54.442398007 +0100
+++ linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-deferred_module_init(alsa_seq_dummy_init)
+module_init(alsa_seq_dummy_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_midi.c linux-4.0.orig/sound/core/seq/seq_midi.c
--- linux-4.0/sound/core/seq/seq_midi.c	2015-04-27 16:45:54.454398071 +0100
+++ linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-deferred_module_init(alsa_seq_midi_init)
+module_init(alsa_seq_midi_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_midi_emul.c linux-4.0.orig/sound/core/seq/seq_midi_emul.c
--- linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-27 16:45:54.450398057 +0100
+++ linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-deferred_module_init(alsa_seq_midi_emul_init)
+module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_midi_event.c linux-4.0.orig/sound/core/seq/seq_midi_event.c
--- linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-27 16:45:54.454398071 +0100
+++ linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-deferred_module_init(alsa_seq_midi_event_init)
+module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/seq/seq_virmidi.c linux-4.0.orig/sound/core/seq/seq_virmidi.c
--- linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-27 16:45:54.458398085 +0100
+++ linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-deferred_module_init(alsa_virmidi_init)
+module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/core/timer.c linux-4.0.orig/sound/core/timer.c
--- linux-4.0/sound/core/timer.c	2015-04-27 16:45:54.466398133 +0100
+++ linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-deferred_module_init(alsa_timer_init)
+module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/aloop.c linux-4.0.orig/sound/drivers/aloop.c
--- linux-4.0/sound/drivers/aloop.c	2015-04-27 16:45:54.470398149 +0100
+++ linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-deferred_module_init(alsa_card_loopback_init)
+module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/dummy.c linux-4.0.orig/sound/drivers/dummy.c
--- linux-4.0/sound/drivers/dummy.c	2015-04-27 16:45:54.486398234 +0100
+++ linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-deferred_module_init(alsa_card_dummy_init)
+module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/mpu401/mpu401.c linux-4.0.orig/sound/drivers/mpu401/mpu401.c
--- linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-27 16:45:54.494398263 +0100
+++ linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-deferred_module_init(alsa_card_mpu401_init)
+module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/mpu401/mpu401_uart.c linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-27 16:45:54.486398234 +0100
+++ linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-deferred_module_init(alsa_mpu401_uart_init)
+module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/drivers/virmidi.c linux-4.0.orig/sound/drivers/virmidi.c
--- linux-4.0/sound/drivers/virmidi.c	2015-04-27 16:45:54.494398263 +0100
+++ linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-deferred_module_init(alsa_card_virmidi_init)
+module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/oss/soundcard.c linux-4.0.orig/sound/oss/soundcard.c
--- linux-4.0/sound/oss/soundcard.c	2015-04-27 16:45:54.494398263 +0100
+++ linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-deferred_module_init(oss_init);
+module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_analog.c linux-4.0.orig/sound/pci/hda/patch_analog.c
--- linux-4.0/sound/pci/hda/patch_analog.c	2015-04-27 16:45:54.498398285 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-deferred_module_init(patch_analog_init)
+module_init(patch_analog_init)
 module_exit(patch_analog_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_ca0110.c linux-4.0.orig/sound/pci/hda/patch_ca0110.c
--- linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-27 16:45:54.502398315 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-deferred_module_init(patch_ca0110_init)
+module_init(patch_ca0110_init)
 module_exit(patch_ca0110_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_ca0132.c linux-4.0.orig/sound/pci/hda/patch_ca0132.c
--- linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-27 16:45:54.510398347 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-deferred_module_init(patch_ca0132_init)
+module_init(patch_ca0132_init)
 module_exit(patch_ca0132_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_cirrus.c linux-4.0.orig/sound/pci/hda/patch_cirrus.c
--- linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-27 16:45:54.514398364 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-deferred_module_init(patch_cirrus_init)
+module_init(patch_cirrus_init)
 module_exit(patch_cirrus_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_cmedia.c linux-4.0.orig/sound/pci/hda/patch_cmedia.c
--- linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-27 16:45:54.514398364 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-deferred_module_init(patch_cmedia_init)
+module_init(patch_cmedia_init)
 module_exit(patch_cmedia_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_conexant.c linux-4.0.orig/sound/pci/hda/patch_conexant.c
--- linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-27 16:45:54.518398383 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-deferred_module_init(patch_conexant_init)
+module_init(patch_conexant_init)
 module_exit(patch_conexant_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_hdmi.c linux-4.0.orig/sound/pci/hda/patch_hdmi.c
--- linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-27 16:45:54.534398463 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-deferred_module_init(patch_hdmi_init)
+module_init(patch_hdmi_init)
 module_exit(patch_hdmi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_realtek.c linux-4.0.orig/sound/pci/hda/patch_realtek.c
--- linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-27 16:45:54.554398566 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-deferred_module_init(patch_realtek_init)
+module_init(patch_realtek_init)
 module_exit(patch_realtek_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_si3054.c linux-4.0.orig/sound/pci/hda/patch_si3054.c
--- linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-27 16:45:54.558398575 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-deferred_module_init(patch_si3054_init)
+module_init(patch_si3054_init)
 module_exit(patch_si3054_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_sigmatel.c linux-4.0.orig/sound/pci/hda/patch_sigmatel.c
--- linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-27 16:45:54.566398620 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-deferred_module_init(patch_sigmatel_init)
+module_init(patch_sigmatel_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/pci/hda/patch_via.c linux-4.0.orig/sound/pci/hda/patch_via.c
--- linux-4.0/sound/pci/hda/patch_via.c	2015-04-27 16:45:54.570398659 +0100
+++ linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-deferred_module_init(patch_via_init)
+module_init(patch_via_init)
 module_exit(patch_via_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/ppc/powermac.c linux-4.0.orig/sound/ppc/powermac.c
--- linux-4.0/sound/ppc/powermac.c	2015-04-27 16:45:54.574398670 +0100
+++ linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-deferred_module_init(alsa_card_pmac_init)
+module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/ppc/snd_ps3.c linux-4.0.orig/sound/ppc/snd_ps3.c
--- linux-4.0/sound/ppc/snd_ps3.c	2015-04-27 16:45:54.578398677 +0100
+++ linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-deferred_module_init(snd_ps3_init);
+module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/synth/emux/emux.c linux-4.0.orig/sound/synth/emux/emux.c
--- linux-4.0/sound/synth/emux/emux.c	2015-04-27 16:45:54.582398695 +0100
+++ linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-deferred_module_init(alsa_emux_init)
+module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0/sound/synth/util_mem.c linux-4.0.orig/sound/synth/util_mem.c
--- linux-4.0/sound/synth/util_mem.c	2015-04-27 16:45:54.582398695 +0100
+++ linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-deferred_module_init(alsa_util_mem_init)
+module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
Only in linux-4.0/arch/x86/vdso: vdso-image-32-int80.c
Only in linux-4.0/arch/x86/vdso: vdso-image-32-sysenter.c
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/aes_generic.c linux-4.0/crypto/aes_generic.c
--- linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/aes_generic.c	2015-04-27 16:45:54.010395857 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+deferred_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/af_alg.c linux-4.0/crypto/af_alg.c
--- linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/af_alg.c	2015-04-21 15:20:04.819998117 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+module_init(af_alg_init);	// allow algif_hash algif_skcipher
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_hash.c linux-4.0/crypto/algif_hash.c
--- linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_hash.c	2015-04-21 09:50:43.257680224 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+module_init(algif_hash_init);	//af_alg_init
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_skcipher.c linux-4.0/crypto/algif_skcipher.c
--- linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_skcipher.c	2015-04-21 09:51:35.845678339 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+module_init(algif_skcipher_init);		//af_alg_init
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ansi_cprng.c linux-4.0/crypto/ansi_cprng.c
--- linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ansi_cprng.c	2015-04-27 16:45:54.022395944 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+deferred_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.0/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-27 16:45:54.022395944 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+deferred_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-27 16:45:54.034395979 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+deferred_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.0/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-27 16:45:54.046396052 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+deferred_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/async_tx/async_pq.c linux-4.0/crypto/async_tx/async_pq.c
--- linux-4.0.orig/crypto/async_tx/async_pq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/async_tx/async_pq.c	2015-04-21 14:27:40.688727838 +0100
@@ -434,7 +434,7 @@ static void __exit async_pq_exit(void)
 	put_page(pq_scribble_page);
 }
 
-module_init(async_pq_init);
+module_init(async_pq_init);	//raid6_pq.ko async_xor.ko async_tx.ko
 module_exit(async_pq_exit);
 
 MODULE_DESCRIPTION("asynchronous raid6 syndrome generation/validation");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/blowfish_generic.c linux-4.0/crypto/blowfish_generic.c
--- linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/blowfish_generic.c	2015-04-27 16:45:54.046396052 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+deferred_module_init(blowfish_mod_init);	//blowfish_common.ko
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cbc.c linux-4.0/crypto/cbc.c
--- linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cbc.c	2015-04-27 16:45:54.046396052 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+deferred_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32.c linux-4.0/crypto/crc32.c
--- linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32.c	2015-04-27 16:45:54.062396127 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+deferred_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32c_generic.c linux-4.0/crypto/crc32c_generic.c
--- linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32c_generic.c	2015-04-27 16:45:54.062396127 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+deferred_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crct10dif_generic.c linux-4.0/crypto/crct10dif_generic.c
--- linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crct10dif_generic.c	2015-04-27 16:45:54.062396127 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+deferred_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_null.c linux-4.0/crypto/crypto_null.c
--- linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_null.c	2015-04-27 16:45:54.062396127 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+deferred_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_user.c linux-4.0/crypto/crypto_user.c
--- linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_user.c	2015-04-27 16:45:54.066396144 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+deferred_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/deflate.c linux-4.0/crypto/deflate.c
--- linux-4.0.orig/crypto/deflate.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/deflate.c	2015-04-21 14:28:17.399075375 +0100
@@ -216,7 +216,7 @@ static void __exit deflate_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(deflate_mod_init);
+module_init(deflate_mod_init);	//zlib_deflate
 module_exit(deflate_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ecb.c linux-4.0/crypto/ecb.c
--- linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ecb.c	2015-04-27 16:45:54.070396164 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+deferred_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ghash-generic.c linux-4.0/crypto/ghash-generic.c
--- linux-4.0.orig/crypto/ghash-generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ghash-generic.c	2015-04-21 14:28:17.387069373 +0100
@@ -167,7 +167,7 @@ static void __exit ghash_mod_exit(void)
 	crypto_unregister_shash(&ghash_alg);
 }
 
-module_init(ghash_mod_init);
+module_init(ghash_mod_init);	//gf128mul
 module_exit(ghash_mod_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lrw.c linux-4.0/crypto/lrw.c
--- linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lrw.c	2015-04-27 16:45:54.070396164 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4.c linux-4.0/crypto/lz4.c
--- linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4.c	2015-04-27 16:45:54.074396192 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+deferred_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4hc.c linux-4.0/crypto/lz4hc.c
--- linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4hc.c	2015-04-27 16:45:54.078396203 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+deferred_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lzo.c linux-4.0/crypto/lzo.c
--- linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lzo.c	2015-04-27 16:45:54.078396203 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+deferred_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md4.c linux-4.0/crypto/md4.c
--- linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md4.c	2015-04-27 16:45:54.082396214 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+deferred_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md5.c linux-4.0/crypto/md5.c
--- linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md5.c	2015-04-27 16:45:54.086396237 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+deferred_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd128.c linux-4.0/crypto/rmd128.c
--- linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd128.c	2015-04-27 16:45:54.106396335 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+deferred_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd160.c linux-4.0/crypto/rmd160.c
--- linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd160.c	2015-04-27 16:45:54.106396335 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+deferred_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd256.c linux-4.0/crypto/rmd256.c
--- linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd256.c	2015-04-27 16:45:54.118396404 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+deferred_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd320.c linux-4.0/crypto/rmd320.c
--- linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd320.c	2015-04-27 16:45:54.118396404 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+deferred_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha1_generic.c linux-4.0/crypto/sha1_generic.c
--- linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha1_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+deferred_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha256_generic.c linux-4.0/crypto/sha256_generic.c
--- linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha256_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+deferred_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha512_generic.c linux-4.0/crypto/sha512_generic.c
--- linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha512_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+deferred_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tcrypt.c linux-4.0/crypto/tcrypt.c
--- linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tcrypt.c	2015-04-27 16:45:54.134396472 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+deferred_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tea.c linux-4.0/crypto/tea.c
--- linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tea.c	2015-04-27 16:45:54.138396495 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+deferred_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tgr192.c linux-4.0/crypto/tgr192.c
--- linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tgr192.c	2015-04-27 16:45:54.142396535 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+deferred_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/twofish_generic.c linux-4.0/crypto/twofish_generic.c
--- linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/twofish_generic.c	2015-04-27 16:45:54.142396535 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+deferred_module_init(twofish_mod_init);	//twofish_common
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/vmac.c linux-4.0/crypto/vmac.c
--- linux-4.0.orig/crypto/vmac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/vmac.c	2015-04-27 16:45:54.146396546 +0100
@@ -708,7 +708,7 @@ static void __exit vmac_module_exit(void
 	crypto_unregister_template(&vmac_tmpl);
 }
 
-module_init(vmac_module_init);
+deferred_module_init(vmac_module_init);
 module_exit(vmac_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/wp512.c linux-4.0/crypto/wp512.c
--- linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/wp512.c	2015-04-27 16:45:54.150396554 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+deferred_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xcbc.c linux-4.0/crypto/xcbc.c
--- linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xcbc.c	2015-04-27 16:45:54.154396572 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+deferred_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xts.c linux-4.0/crypto/xts.c
--- linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xts.c	2015-04-27 16:45:54.158396596 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/zlib.c linux-4.0/crypto/zlib.c
--- linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/zlib.c	2015-04-27 16:45:54.162396635 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+deferred_module_init(zlib_mod_init);	//zlib_deflate
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/ac.c linux-4.0/drivers/acpi/ac.c
--- linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/ac.c	2015-04-27 11:25:03.831152609 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+async_module_init(acpi_ac_init);	//power_supply (subinit)
 module_exit(acpi_ac_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_ipmi.c linux-4.0/drivers/acpi/acpi_ipmi.c
--- linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-27 16:45:54.166396643 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+deferred_module_init(acpi_ipmi_init);	//ipmi_msghandler
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_pad.c linux-4.0/drivers/acpi/acpi_pad.c
--- linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_pad.c	2015-04-27 16:45:54.166396643 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+deferred_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/battery.c linux-4.0/drivers/acpi/battery.c
--- linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/battery.c	2015-04-27 16:45:54.170396652 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+deferred_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/processor_driver.c linux-4.0/drivers/acpi/processor_driver.c
--- linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/processor_driver.c	2015-04-27 16:45:54.186396740 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+deferred_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/sbs.c linux-4.0/drivers/acpi/sbs.c
--- linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/sbs.c	2015-04-27 16:45:54.186396740 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+deferred_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/thermal.c linux-4.0/drivers/acpi/thermal.c
--- linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/thermal.c	2015-04-27 16:45:54.190396760 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+deferred_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/video.c linux-4.0/drivers/acpi/video.c
--- linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/video.c	2015-04-27 16:45:54.194396788 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+deferred_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/acard-ahci.c linux-4.0/drivers/ata/acard-ahci.c
--- linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/acard-ahci.c	2015-04-21 09:30:19.953724003 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-module_pci_driver(acard_ahci_pci_driver);
+async_module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-21 09:30:19.953724003 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/backend.c linux-4.0/drivers/char/agp/backend.c
--- linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/backend.c	2015-04-27 16:45:54.198396799 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+deferred_module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/nvidia-agp.c linux-4.0/drivers/char/agp/nvidia-agp.c
--- linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-27 16:45:54.206396833 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+deferred_module_init(agp_nvidia_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hpet.c linux-4.0/drivers/char/hpet.c
--- linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hpet.c	2015-04-27 16:45:54.210396872 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+deferred_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c linux-4.0/drivers/char/ipmi/ipmi_msghandler.c
--- linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/ipmi/ipmi_msghandler.c	2015-04-21 15:29:15.043971829 +0100
@@ -4607,7 +4607,7 @@ static void __exit cleanup_ipmi(void)
 }
 module_exit(cleanup_ipmi);
 
-module_init(ipmi_init_msghandler_mod);
+module_init(ipmi_init_msghandler_mod);  //release acpi_ipmi, 
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("Incoming and outgoing message routing for an IPMI"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.0/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-27 16:45:54.210396872 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.0/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-27 16:45:54.222396909 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.0/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-27 16:45:54.226396942 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+deferred_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c linux-4.0/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-27 16:45:54.226396942 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+deferred_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.0/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-27 16:45:54.230396968 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+deferred_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-14 10:12:41.516068679 +0100
@@ -81,6 +81,8 @@ source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-21 09:30:19.957724009 +0100
@@ -32,8 +32,10 @@ obj-$(CONFIG_DRM_KMS_HELPER) += drm_kms_
 
 CFLAGS_drm_trace_points.o := -I$(src)
 
+obj-$(CONFIG_NVIDIA_ION) += nvidia-ion/
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-core.c linux-4.0/drivers/hid/hid-core.c
--- linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-core.c	2015-04-28 13:51:29.354337719 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+async_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-elo.c linux-4.0/drivers/hid/hid-elo.c
--- linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-elo.c	2015-04-28 13:54:47.502331633 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+deferred_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-hyperv.c linux-4.0/drivers/hid/hid-hyperv.c
--- linux-4.0.orig/drivers/hid/hid-hyperv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-hyperv.c	2015-04-28 13:54:43.994331743 +0100
@@ -611,5 +611,5 @@ static void __exit mousevsc_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(mousevsc_init);
+deferred_module_init(mousevsc_init);
 module_exit(mousevsc_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-arvo.c linux-4.0/drivers/hid/hid-roccat-arvo.c
--- linux-4.0.orig/drivers/hid/hid-roccat-arvo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-arvo.c	2015-04-28 13:54:44.010331737 +0100
@@ -452,7 +452,7 @@ static void __exit arvo_exit(void)
 	class_destroy(arvo_class);
 }
 
-module_init(arvo_init);
+deferred_module_init(arvo_init);
 module_exit(arvo_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat.c linux-4.0/drivers/hid/hid-roccat.c
--- linux-4.0.orig/drivers/hid/hid-roccat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat.c	2015-04-28 13:54:44.098331735 +0100
@@ -453,7 +453,7 @@ static void __exit roccat_exit(void)
 	unregister_chrdev_region(dev_id, ROCCAT_MAX_DEVICES);
 }
 
-module_init(roccat_init);
+deferred_module_init(roccat_init);
 module_exit(roccat_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-isku.c linux-4.0/drivers/hid/hid-roccat-isku.c
--- linux-4.0.orig/drivers/hid/hid-roccat-isku.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-isku.c	2015-04-28 13:54:44.014331735 +0100
@@ -454,7 +454,7 @@ static void __exit isku_exit(void)
 	class_destroy(isku_class);
 }
 
-module_init(isku_init);
+deferred_module_init(isku_init);
 module_exit(isku_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kone.c linux-4.0/drivers/hid/hid-roccat-kone.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kone.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kone.c	2015-04-28 13:54:44.022331735 +0100
@@ -901,7 +901,7 @@ static void __exit kone_exit(void)
 	class_destroy(kone_class);
 }
 
-module_init(kone_init);
+deferred_module_init(kone_init);
 module_exit(kone_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c linux-4.0/drivers/hid/hid-roccat-koneplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-koneplus.c	2015-04-28 13:54:44.030331740 +0100
@@ -570,7 +570,7 @@ static void __exit koneplus_exit(void)
 	class_destroy(koneplus_class);
 }
 
-module_init(koneplus_init);
+deferred_module_init(koneplus_init);
 module_exit(koneplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-konepure.c linux-4.0/drivers/hid/hid-roccat-konepure.c
--- linux-4.0.orig/drivers/hid/hid-roccat-konepure.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-konepure.c	2015-04-28 13:54:44.046331736 +0100
@@ -224,7 +224,7 @@ static void __exit konepure_exit(void)
 	class_destroy(konepure_class);
 }
 
-module_init(konepure_init);
+deferred_module_init(konepure_init);
 module_exit(konepure_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c linux-4.0/drivers/hid/hid-roccat-kovaplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kovaplus.c	2015-04-28 13:54:44.054331735 +0100
@@ -657,7 +657,7 @@ static void __exit kovaplus_exit(void)
 	class_destroy(kovaplus_class);
 }
 
-module_init(kovaplus_init);
+deferred_module_init(kovaplus_init);
 module_exit(kovaplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-pyra.c linux-4.0/drivers/hid/hid-roccat-pyra.c
--- linux-4.0.orig/drivers/hid/hid-roccat-pyra.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-pyra.c	2015-04-28 13:54:44.074331735 +0100
@@ -607,7 +607,7 @@ static void __exit pyra_exit(void)
 	class_destroy(pyra_class);
 }
 
-module_init(pyra_init);
+deferred_module_init(pyra_init);
 module_exit(pyra_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-ryos.c linux-4.0/drivers/hid/hid-roccat-ryos.c
--- linux-4.0.orig/drivers/hid/hid-roccat-ryos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-ryos.c	2015-04-28 13:54:44.082331735 +0100
@@ -233,7 +233,7 @@ static void __exit ryos_exit(void)
 	class_destroy(ryos_class);
 }
 
-module_init(ryos_init);
+deferred_module_init(ryos_init);
 module_exit(ryos_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-savu.c linux-4.0/drivers/hid/hid-roccat-savu.c
--- linux-4.0.orig/drivers/hid/hid-roccat-savu.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-savu.c	2015-04-28 13:54:44.098331735 +0100
@@ -221,7 +221,7 @@ static void __exit savu_exit(void)
 	class_destroy(savu_class);
 }
 
-module_init(savu_init);
+deferred_module_init(savu_init);
 module_exit(savu_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-sony.c linux-4.0/drivers/hid/hid-sony.c
--- linux-4.0.orig/drivers/hid/hid-sony.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-sony.c	2015-04-28 13:54:44.122331733 +0100
@@ -2152,7 +2152,7 @@ static void __exit sony_exit(void)
 	hid_unregister_driver(&sony_driver);
 	ida_destroy(&sony_device_id_allocator);
 }
-module_init(sony_init);
+deferred_module_init(sony_init);
 module_exit(sony_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/uhid.c linux-4.0/drivers/hid/uhid.c
--- linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/uhid.c	2015-04-28 13:54:44.126331734 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+deferred_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/usbhid/hid-core.c linux-4.0/drivers/hid/usbhid/hid-core.c
--- linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-28 13:51:27.326337782 +0100
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+deferred_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c linux-4.0/drivers/i2c/busses/i2c-nforce2.c
--- linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/i2c/busses/i2c-nforce2.c	2015-04-28 12:51:49.012492495 +0100
@@ -448,4 +448,4 @@ static struct pci_driver nforce2_driver
 	.remove		= nforce2_remove,
 };
 
-module_pci_driver(nforce2_driver);
+deferred_module_pci_driver(nforce2_driver);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/keyboard/atkbd.c linux-4.0/drivers/input/keyboard/atkbd.c
--- linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-28 10:26:02.197065352 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+deferred_module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/misc/uinput.c linux-4.0/drivers/input/misc/uinput.c
--- linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/misc/uinput.c	2015-04-27 16:45:54.270397155 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+deferred_module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mouse/psmouse-base.c linux-4.0/drivers/input/mouse/psmouse-base.c
--- linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-27 16:45:54.278397193 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+deferred_module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mousedev.c linux-4.0/drivers/input/mousedev.c
--- linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mousedev.c	2015-04-27 16:45:54.282397223 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+deferred_module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/i8042.c linux-4.0/drivers/input/serio/i8042.c
--- linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/i8042.c	2015-04-27 16:45:54.286397239 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+deferred_module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/serport.c linux-4.0/drivers/input/serio/serport.c
--- linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/serport.c	2015-04-27 16:45:54.290397255 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+deferred_module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-21 14:19:27.380902248 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-21 09:30:19.981724024 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43/main.c linux-4.0/drivers/net/wireless/b43/main.c
--- linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43/main.c	2015-04-27 16:45:54.302397323 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+deferred_module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43legacy/main.c linux-4.0/drivers/net/wireless/b43legacy/main.c
--- linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-27 16:45:54.310397355 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+deferred_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-27 16:45:54.326397426 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+deferred_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c linux-4.0/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-27 16:45:54.334397478 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+deferred_module_init(pcied_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-27 16:45:54.330397445 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+deferred_module_init(pci_hotplug_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c linux-4.0/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-27 16:45:54.338397504 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+deferred_module_init(shpcd_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c linux-4.0/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-27 16:45:54.342397509 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+deferred_module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-27 16:45:54.350397545 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+deferred_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-27 16:45:54.354397586 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+deferred_module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-27 16:45:54.358397599 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+deferred_module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-27 16:45:54.362397610 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+deferred_module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-27 16:45:54.362397610 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+deferred_module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-27 16:45:54.366397621 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+deferred_module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ssb-hcd.c linux-4.0/drivers/usb/host/ssb-hcd.c
--- linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-27 16:45:54.366397621 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+deferred_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/uhci-hcd.c linux-4.0/drivers/usb/host/uhci-hcd.c
--- linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-27 16:45:54.370397644 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+deferred_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.0/firmware: b43
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-27 16:45:54.374397684 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+deferred_module_init(init_cifs)
 module_exit(exit_cifs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/inode.c linux-4.0/fs/fat/inode.c
--- linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/inode.c	2015-04-27 16:45:54.382397704 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+deferred_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_msdos.c linux-4.0/fs/fat/namei_msdos.c
--- linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_msdos.c	2015-04-27 16:45:54.382397704 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+deferred_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_vfat.c linux-4.0/fs/fat/namei_vfat.c
--- linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_vfat.c	2015-04-27 16:46:24.546547281 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+deferred_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/isofs/inode.c linux-4.0/fs/isofs/inode.c
--- linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/isofs/inode.c	2015-04-27 16:45:54.386397726 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+deferred_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ntfs/super.c linux-4.0/fs/ntfs/super.c
--- linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ntfs/super.c	2015-04-27 16:45:54.398397787 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+deferred_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-21 09:30:20.001724017 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/.project linux-4.0/.project
--- linux-4.0.orig/.project	2015-04-21 13:50:56.451057744 +0100
+++ linux-4.0/.project	2015-04-14 11:28:19.357432096 +0100
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <projectDescription>
-	<name>linux-4.0.orig</name>
+	<name>linux-4.0</name>
 	<comment></comment>
 	<projects>
 	</projects>
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/compress_offload.c linux-4.0/sound/core/compress_offload.c
--- linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/compress_offload.c	2015-04-27 16:45:54.402397798 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+deferred_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hrtimer.c linux-4.0/sound/core/hrtimer.c
--- linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hrtimer.c	2015-04-27 16:45:54.402397798 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+deferred_module_init(snd_hrtimer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-27 16:45:54.406397820 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+deferred_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/mixer_oss.c linux-4.0/sound/core/oss/mixer_oss.c
--- linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/mixer_oss.c	2015-04-27 16:45:54.410397862 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+deferred_module_init(alsa_mixer_oss_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/pcm_oss.c linux-4.0/sound/core/oss/pcm_oss.c
--- linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/pcm_oss.c	2015-04-27 16:45:54.418397888 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+deferred_module_init(alsa_pcm_oss_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/pcm.c linux-4.0/sound/core/pcm.c
--- linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/pcm.c	2015-04-27 16:45:54.422397904 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+deferred_module_init(alsa_pcm_init)
 module_exit(alsa_pcm_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rawmidi.c linux-4.0/sound/core/rawmidi.c
--- linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rawmidi.c	2015-04-27 16:45:54.426397925 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+deferred_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rtctimer.c linux-4.0/sound/core/rtctimer.c
--- linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rtctimer.c	2015-04-27 16:45:54.430397956 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+deferred_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/oss/seq_oss.c linux-4.0/sound/core/seq/oss/seq_oss.c
--- linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-27 16:45:54.430397956 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+deferred_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq.c linux-4.0/sound/core/seq/seq.c
--- linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq.c	2015-04-27 16:45:54.462398102 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+deferred_module_init(alsa_seq_init)
 module_exit(alsa_seq_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_device.c linux-4.0/sound/core/seq/seq_device.c
--- linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_device.c	2015-04-27 16:45:54.442398007 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-module_init(alsa_seq_device_init)
+deferred_module_init(alsa_seq_device_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_dummy.c linux-4.0/sound/core/seq/seq_dummy.c
--- linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_dummy.c	2015-04-27 16:45:54.442398007 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+deferred_module_init(alsa_seq_dummy_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-27 16:45:54.454398071 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+deferred_module_init(alsa_seq_midi_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_emul.c linux-4.0/sound/core/seq/seq_midi_emul.c
--- linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-27 16:45:54.450398057 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+deferred_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_event.c linux-4.0/sound/core/seq/seq_midi_event.c
--- linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-27 16:45:54.454398071 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+deferred_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_virmidi.c linux-4.0/sound/core/seq/seq_virmidi.c
--- linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-27 16:45:54.458398085 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+deferred_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/timer.c linux-4.0/sound/core/timer.c
--- linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/timer.c	2015-04-27 16:45:54.466398133 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+deferred_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/aloop.c linux-4.0/sound/drivers/aloop.c
--- linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/aloop.c	2015-04-27 16:45:54.470398149 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+deferred_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/dummy.c linux-4.0/sound/drivers/dummy.c
--- linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/dummy.c	2015-04-27 16:45:54.486398234 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+deferred_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401.c linux-4.0/sound/drivers/mpu401/mpu401.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-27 16:45:54.494398263 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+deferred_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.0/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-27 16:45:54.486398234 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+deferred_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/virmidi.c linux-4.0/sound/drivers/virmidi.c
--- linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/virmidi.c	2015-04-27 16:45:54.494398263 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+deferred_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/soundcard.c linux-4.0/sound/oss/soundcard.c
--- linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/soundcard.c	2015-04-27 16:45:54.494398263 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+deferred_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_analog.c linux-4.0/sound/pci/hda/patch_analog.c
--- linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_analog.c	2015-04-27 16:45:54.498398285 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-module_init(patch_analog_init)
+deferred_module_init(patch_analog_init)
 module_exit(patch_analog_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0110.c linux-4.0/sound/pci/hda/patch_ca0110.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-27 16:45:54.502398315 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-module_init(patch_ca0110_init)
+deferred_module_init(patch_ca0110_init)
 module_exit(patch_ca0110_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0132.c linux-4.0/sound/pci/hda/patch_ca0132.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-27 16:45:54.510398347 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-module_init(patch_ca0132_init)
+deferred_module_init(patch_ca0132_init)
 module_exit(patch_ca0132_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cirrus.c linux-4.0/sound/pci/hda/patch_cirrus.c
--- linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-27 16:45:54.514398364 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-module_init(patch_cirrus_init)
+deferred_module_init(patch_cirrus_init)
 module_exit(patch_cirrus_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cmedia.c linux-4.0/sound/pci/hda/patch_cmedia.c
--- linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-27 16:45:54.514398364 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-module_init(patch_cmedia_init)
+deferred_module_init(patch_cmedia_init)
 module_exit(patch_cmedia_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_conexant.c linux-4.0/sound/pci/hda/patch_conexant.c
--- linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-27 16:45:54.518398383 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-module_init(patch_conexant_init)
+deferred_module_init(patch_conexant_init)
 module_exit(patch_conexant_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_hdmi.c linux-4.0/sound/pci/hda/patch_hdmi.c
--- linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-27 16:45:54.534398463 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-module_init(patch_hdmi_init)
+deferred_module_init(patch_hdmi_init)
 module_exit(patch_hdmi_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_realtek.c linux-4.0/sound/pci/hda/patch_realtek.c
--- linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-27 16:45:54.554398566 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-module_init(patch_realtek_init)
+deferred_module_init(patch_realtek_init)
 module_exit(patch_realtek_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_si3054.c linux-4.0/sound/pci/hda/patch_si3054.c
--- linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-27 16:45:54.558398575 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-module_init(patch_si3054_init)
+deferred_module_init(patch_si3054_init)
 module_exit(patch_si3054_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_sigmatel.c linux-4.0/sound/pci/hda/patch_sigmatel.c
--- linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-27 16:45:54.566398620 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-module_init(patch_sigmatel_init)
+deferred_module_init(patch_sigmatel_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_via.c linux-4.0/sound/pci/hda/patch_via.c
--- linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_via.c	2015-04-27 16:45:54.570398659 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-module_init(patch_via_init)
+deferred_module_init(patch_via_init)
 module_exit(patch_via_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/powermac.c linux-4.0/sound/ppc/powermac.c
--- linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/powermac.c	2015-04-27 16:45:54.574398670 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+deferred_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/snd_ps3.c linux-4.0/sound/ppc/snd_ps3.c
--- linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/snd_ps3.c	2015-04-27 16:45:54.578398677 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+deferred_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/emux/emux.c linux-4.0/sound/synth/emux/emux.c
--- linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/emux/emux.c	2015-04-27 16:45:54.582398695 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+deferred_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x '*.h' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/util_mem.c linux-4.0/sound/synth/util_mem.c
--- linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/util_mem.c	2015-04-27 16:45:54.582398695 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+deferred_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
