Only in linux-4.0/arch/x86/vdso: vdso-image-32-int80.c
Only in linux-4.0/arch/x86/vdso: vdso-image-32-sysenter.c
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/aes_generic.c linux-4.0/crypto/aes_generic.c
--- linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/aes_generic.c	2015-04-27 16:45:54.010395857 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+deferred_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/af_alg.c linux-4.0/crypto/af_alg.c
--- linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/af_alg.c	2015-04-21 15:20:04.819998117 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+module_init(af_alg_init);	// allow algif_hash algif_skcipher
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_hash.c linux-4.0/crypto/algif_hash.c
--- linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_hash.c	2015-04-21 09:50:43.257680224 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+module_init(algif_hash_init);	//af_alg_init
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_skcipher.c linux-4.0/crypto/algif_skcipher.c
--- linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_skcipher.c	2015-04-21 09:51:35.845678339 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+module_init(algif_skcipher_init);		//af_alg_init
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ansi_cprng.c linux-4.0/crypto/ansi_cprng.c
--- linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ansi_cprng.c	2015-04-27 16:45:54.022395944 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+deferred_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.0/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-27 16:45:54.022395944 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+deferred_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-27 16:45:54.034395979 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+deferred_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.0/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-27 16:45:54.046396052 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+deferred_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/async_tx/async_pq.c linux-4.0/crypto/async_tx/async_pq.c
--- linux-4.0.orig/crypto/async_tx/async_pq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/async_tx/async_pq.c	2015-04-21 14:27:40.688727838 +0100
@@ -434,7 +434,7 @@ static void __exit async_pq_exit(void)
 	put_page(pq_scribble_page);
 }
 
-module_init(async_pq_init);
+module_init(async_pq_init);	//raid6_pq.ko async_xor.ko async_tx.ko
 module_exit(async_pq_exit);
 
 MODULE_DESCRIPTION("asynchronous raid6 syndrome generation/validation");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/blowfish_generic.c linux-4.0/crypto/blowfish_generic.c
--- linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/blowfish_generic.c	2015-04-27 16:45:54.046396052 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+deferred_module_init(blowfish_mod_init);	//blowfish_common.ko
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cbc.c linux-4.0/crypto/cbc.c
--- linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cbc.c	2015-04-27 16:45:54.046396052 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+deferred_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32.c linux-4.0/crypto/crc32.c
--- linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32.c	2015-04-27 16:45:54.062396127 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+deferred_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32c_generic.c linux-4.0/crypto/crc32c_generic.c
--- linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32c_generic.c	2015-04-27 16:45:54.062396127 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+deferred_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crct10dif_generic.c linux-4.0/crypto/crct10dif_generic.c
--- linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crct10dif_generic.c	2015-04-27 16:45:54.062396127 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+deferred_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_null.c linux-4.0/crypto/crypto_null.c
--- linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_null.c	2015-04-27 16:45:54.062396127 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+deferred_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_user.c linux-4.0/crypto/crypto_user.c
--- linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_user.c	2015-04-27 16:45:54.066396144 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+deferred_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/deflate.c linux-4.0/crypto/deflate.c
--- linux-4.0.orig/crypto/deflate.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/deflate.c	2015-04-21 14:28:17.399075375 +0100
@@ -216,7 +216,7 @@ static void __exit deflate_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(deflate_mod_init);
+module_init(deflate_mod_init);	//zlib_deflate
 module_exit(deflate_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ecb.c linux-4.0/crypto/ecb.c
--- linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ecb.c	2015-04-27 16:45:54.070396164 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+deferred_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ghash-generic.c linux-4.0/crypto/ghash-generic.c
--- linux-4.0.orig/crypto/ghash-generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ghash-generic.c	2015-04-21 14:28:17.387069373 +0100
@@ -167,7 +167,7 @@ static void __exit ghash_mod_exit(void)
 	crypto_unregister_shash(&ghash_alg);
 }
 
-module_init(ghash_mod_init);
+module_init(ghash_mod_init);	//gf128mul
 module_exit(ghash_mod_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lrw.c linux-4.0/crypto/lrw.c
--- linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lrw.c	2015-04-27 16:45:54.070396164 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4.c linux-4.0/crypto/lz4.c
--- linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4.c	2015-04-27 16:45:54.074396192 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+deferred_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4hc.c linux-4.0/crypto/lz4hc.c
--- linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4hc.c	2015-04-27 16:45:54.078396203 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+deferred_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lzo.c linux-4.0/crypto/lzo.c
--- linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lzo.c	2015-04-27 16:45:54.078396203 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+deferred_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md4.c linux-4.0/crypto/md4.c
--- linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md4.c	2015-04-27 16:45:54.082396214 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+deferred_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md5.c linux-4.0/crypto/md5.c
--- linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md5.c	2015-04-27 16:45:54.086396237 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+deferred_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd128.c linux-4.0/crypto/rmd128.c
--- linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd128.c	2015-04-27 16:45:54.106396335 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+deferred_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd160.c linux-4.0/crypto/rmd160.c
--- linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd160.c	2015-04-27 16:45:54.106396335 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+deferred_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd256.c linux-4.0/crypto/rmd256.c
--- linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd256.c	2015-04-27 16:45:54.118396404 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+deferred_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd320.c linux-4.0/crypto/rmd320.c
--- linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd320.c	2015-04-27 16:45:54.118396404 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+deferred_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha1_generic.c linux-4.0/crypto/sha1_generic.c
--- linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha1_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+deferred_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha256_generic.c linux-4.0/crypto/sha256_generic.c
--- linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha256_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+deferred_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha512_generic.c linux-4.0/crypto/sha512_generic.c
--- linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha512_generic.c	2015-04-27 16:45:54.130396461 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+deferred_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tcrypt.c linux-4.0/crypto/tcrypt.c
--- linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tcrypt.c	2015-04-27 16:45:54.134396472 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+deferred_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tea.c linux-4.0/crypto/tea.c
--- linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tea.c	2015-04-27 16:45:54.138396495 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+deferred_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tgr192.c linux-4.0/crypto/tgr192.c
--- linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tgr192.c	2015-04-27 16:45:54.142396535 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+deferred_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/twofish_generic.c linux-4.0/crypto/twofish_generic.c
--- linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/twofish_generic.c	2015-04-27 16:45:54.142396535 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+deferred_module_init(twofish_mod_init);	//twofish_common
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/vmac.c linux-4.0/crypto/vmac.c
--- linux-4.0.orig/crypto/vmac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/vmac.c	2015-04-27 16:45:54.146396546 +0100
@@ -708,7 +708,7 @@ static void __exit vmac_module_exit(void
 	crypto_unregister_template(&vmac_tmpl);
 }
 
-module_init(vmac_module_init);
+deferred_module_init(vmac_module_init);
 module_exit(vmac_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/wp512.c linux-4.0/crypto/wp512.c
--- linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/wp512.c	2015-04-27 16:45:54.150396554 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+deferred_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xcbc.c linux-4.0/crypto/xcbc.c
--- linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xcbc.c	2015-04-27 16:45:54.154396572 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+deferred_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xts.c linux-4.0/crypto/xts.c
--- linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xts.c	2015-04-27 16:45:54.158396596 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/zlib.c linux-4.0/crypto/zlib.c
--- linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/zlib.c	2015-04-27 16:45:54.162396635 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+deferred_module_init(zlib_mod_init);	//zlib_deflate
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/ac.c linux-4.0/drivers/acpi/ac.c
--- linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/ac.c	2015-04-27 11:25:03.831152609 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+async_module_init(acpi_ac_init);	//power_supply (subinit)
 module_exit(acpi_ac_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_ipmi.c linux-4.0/drivers/acpi/acpi_ipmi.c
--- linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-27 16:45:54.166396643 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+deferred_module_init(acpi_ipmi_init);	//ipmi_msghandler
 module_exit(acpi_ipmi_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_pad.c linux-4.0/drivers/acpi/acpi_pad.c
--- linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_pad.c	2015-04-27 16:45:54.166396643 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+deferred_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/battery.c linux-4.0/drivers/acpi/battery.c
--- linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/battery.c	2015-04-27 16:45:54.170396652 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+deferred_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/processor_driver.c linux-4.0/drivers/acpi/processor_driver.c
--- linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/processor_driver.c	2015-04-27 16:45:54.186396740 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+deferred_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/sbs.c linux-4.0/drivers/acpi/sbs.c
--- linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/sbs.c	2015-04-27 16:45:54.186396740 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+deferred_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/thermal.c linux-4.0/drivers/acpi/thermal.c
--- linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/thermal.c	2015-04-27 16:45:54.190396760 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+deferred_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/video.c linux-4.0/drivers/acpi/video.c
--- linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/video.c	2015-04-27 16:45:54.194396788 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+deferred_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/acard-ahci.c linux-4.0/drivers/ata/acard-ahci.c
--- linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/acard-ahci.c	2015-04-21 09:30:19.953724003 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-module_pci_driver(acard_ahci_pci_driver);
+async_module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-21 09:30:19.953724003 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/backend.c linux-4.0/drivers/char/agp/backend.c
--- linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/backend.c	2015-04-27 16:45:54.198396799 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+deferred_module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/nvidia-agp.c linux-4.0/drivers/char/agp/nvidia-agp.c
--- linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-27 16:45:54.206396833 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+deferred_module_init(agp_nvidia_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hpet.c linux-4.0/drivers/char/hpet.c
--- linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hpet.c	2015-04-27 16:45:54.210396872 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+deferred_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c linux-4.0/drivers/char/ipmi/ipmi_msghandler.c
--- linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/ipmi/ipmi_msghandler.c	2015-04-21 15:29:15.043971829 +0100
@@ -4607,7 +4607,7 @@ static void __exit cleanup_ipmi(void)
 }
 module_exit(cleanup_ipmi);
 
-module_init(ipmi_init_msghandler_mod);
+module_init(ipmi_init_msghandler_mod);  //release acpi_ipmi, 
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("Incoming and outgoing message routing for an IPMI"
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.0/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-27 16:45:54.210396872 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.0/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-27 16:45:54.222396909 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.0/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-27 16:45:54.226396942 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+deferred_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c linux-4.0/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-27 16:45:54.226396942 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+deferred_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.0/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-27 16:45:54.230396968 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+deferred_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-14 10:12:41.516068679 +0100
@@ -81,6 +81,8 @@ source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-21 09:30:19.957724009 +0100
@@ -32,8 +32,10 @@ obj-$(CONFIG_DRM_KMS_HELPER) += drm_kms_
 
 CFLAGS_drm_trace_points.o := -I$(src)
 
+obj-$(CONFIG_NVIDIA_ION) += nvidia-ion/
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-cherry.c linux-4.0/drivers/hid/hid-cherry.c
--- linux-4.0.orig/drivers/hid/hid-cherry.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-cherry.c	2015-04-28 15:48:40.885009119 +0100
@@ -63,12 +63,12 @@ static const struct hid_device_id ch_dev
 };
 MODULE_DEVICE_TABLE(hid, ch_devices);
 
-static struct hid_driver ch_driver = {
+static struct hid_driver cherry_driver = {
 	.name = "cherry",
 	.id_table = ch_devices,
 	.report_fixup = ch_report_fixup,
 	.input_mapping = ch_input_mapping,
 };
-module_hid_driver(ch_driver);
+module_hid_driver(cherry_driver);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-chicony.c linux-4.0/drivers/hid/hid-chicony.c
--- linux-4.0.orig/drivers/hid/hid-chicony.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-chicony.c	2015-04-28 15:49:43.677007112 +0100
@@ -65,11 +65,11 @@ static const struct hid_device_id ch_dev
 };
 MODULE_DEVICE_TABLE(hid, ch_devices);
 
-static struct hid_driver ch_driver = {
+static struct hid_driver chicony_driver = {
 	.name = "chicony",
 	.id_table = ch_devices,
 	.input_mapping = ch_input_mapping,
 };
-module_hid_driver(ch_driver);
+module_hid_driver(chicony_driver);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-core.c linux-4.0/drivers/hid/hid-core.c
--- linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-core.c	2015-04-28 15:18:36.994548035 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+deferred_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-elo.c linux-4.0/drivers/hid/hid-elo.c
--- linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-elo.c	2015-04-28 13:54:47.502331633 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+deferred_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-hyperv.c linux-4.0/drivers/hid/hid-hyperv.c
--- linux-4.0.orig/drivers/hid/hid-hyperv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-hyperv.c	2015-04-28 13:54:43.994331743 +0100
@@ -611,5 +611,5 @@ static void __exit mousevsc_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(mousevsc_init);
+deferred_module_init(mousevsc_init);
 module_exit(mousevsc_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-arvo.c linux-4.0/drivers/hid/hid-roccat-arvo.c
--- linux-4.0.orig/drivers/hid/hid-roccat-arvo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-arvo.c	2015-04-28 13:54:44.010331737 +0100
@@ -452,7 +452,7 @@ static void __exit arvo_exit(void)
 	class_destroy(arvo_class);
 }
 
-module_init(arvo_init);
+deferred_module_init(arvo_init);
 module_exit(arvo_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat.c linux-4.0/drivers/hid/hid-roccat.c
--- linux-4.0.orig/drivers/hid/hid-roccat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat.c	2015-04-28 13:54:44.098331735 +0100
@@ -453,7 +453,7 @@ static void __exit roccat_exit(void)
 	unregister_chrdev_region(dev_id, ROCCAT_MAX_DEVICES);
 }
 
-module_init(roccat_init);
+deferred_module_init(roccat_init);
 module_exit(roccat_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-isku.c linux-4.0/drivers/hid/hid-roccat-isku.c
--- linux-4.0.orig/drivers/hid/hid-roccat-isku.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-isku.c	2015-04-28 13:54:44.014331735 +0100
@@ -454,7 +454,7 @@ static void __exit isku_exit(void)
 	class_destroy(isku_class);
 }
 
-module_init(isku_init);
+deferred_module_init(isku_init);
 module_exit(isku_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kone.c linux-4.0/drivers/hid/hid-roccat-kone.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kone.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kone.c	2015-04-28 13:54:44.022331735 +0100
@@ -901,7 +901,7 @@ static void __exit kone_exit(void)
 	class_destroy(kone_class);
 }
 
-module_init(kone_init);
+deferred_module_init(kone_init);
 module_exit(kone_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c linux-4.0/drivers/hid/hid-roccat-koneplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-koneplus.c	2015-04-28 13:54:44.030331740 +0100
@@ -570,7 +570,7 @@ static void __exit koneplus_exit(void)
 	class_destroy(koneplus_class);
 }
 
-module_init(koneplus_init);
+deferred_module_init(koneplus_init);
 module_exit(koneplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-konepure.c linux-4.0/drivers/hid/hid-roccat-konepure.c
--- linux-4.0.orig/drivers/hid/hid-roccat-konepure.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-konepure.c	2015-04-28 13:54:44.046331736 +0100
@@ -224,7 +224,7 @@ static void __exit konepure_exit(void)
 	class_destroy(konepure_class);
 }
 
-module_init(konepure_init);
+deferred_module_init(konepure_init);
 module_exit(konepure_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c linux-4.0/drivers/hid/hid-roccat-kovaplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kovaplus.c	2015-04-28 13:54:44.054331735 +0100
@@ -657,7 +657,7 @@ static void __exit kovaplus_exit(void)
 	class_destroy(kovaplus_class);
 }
 
-module_init(kovaplus_init);
+deferred_module_init(kovaplus_init);
 module_exit(kovaplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-pyra.c linux-4.0/drivers/hid/hid-roccat-pyra.c
--- linux-4.0.orig/drivers/hid/hid-roccat-pyra.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-pyra.c	2015-04-28 13:54:44.074331735 +0100
@@ -607,7 +607,7 @@ static void __exit pyra_exit(void)
 	class_destroy(pyra_class);
 }
 
-module_init(pyra_init);
+deferred_module_init(pyra_init);
 module_exit(pyra_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-ryos.c linux-4.0/drivers/hid/hid-roccat-ryos.c
--- linux-4.0.orig/drivers/hid/hid-roccat-ryos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-ryos.c	2015-04-28 13:54:44.082331735 +0100
@@ -233,7 +233,7 @@ static void __exit ryos_exit(void)
 	class_destroy(ryos_class);
 }
 
-module_init(ryos_init);
+deferred_module_init(ryos_init);
 module_exit(ryos_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-savu.c linux-4.0/drivers/hid/hid-roccat-savu.c
--- linux-4.0.orig/drivers/hid/hid-roccat-savu.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-savu.c	2015-04-28 13:54:44.098331735 +0100
@@ -221,7 +221,7 @@ static void __exit savu_exit(void)
 	class_destroy(savu_class);
 }
 
-module_init(savu_init);
+deferred_module_init(savu_init);
 module_exit(savu_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-sony.c linux-4.0/drivers/hid/hid-sony.c
--- linux-4.0.orig/drivers/hid/hid-sony.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-sony.c	2015-04-28 13:54:44.122331733 +0100
@@ -2152,7 +2152,7 @@ static void __exit sony_exit(void)
 	hid_unregister_driver(&sony_driver);
 	ida_destroy(&sony_device_id_allocator);
 }
-module_init(sony_init);
+deferred_module_init(sony_init);
 module_exit(sony_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/uhid.c linux-4.0/drivers/hid/uhid.c
--- linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/uhid.c	2015-04-28 13:54:44.126331734 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+deferred_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/usbhid/hid-core.c linux-4.0/drivers/hid/usbhid/hid-core.c
--- linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-28 15:26:31.458533434 +0100
@@ -1626,7 +1626,7 @@ struct usb_interface *usbhid_find_interf
 	return usb_find_interface(&hid_driver, minor);
 }
 
-static int __init hid_init(void)
+static int __init usb_hid_init(void)
 {
 	int retval = -ENOMEM;
 
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+deferred_module_init(usb_hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c linux-4.0/drivers/i2c/busses/i2c-nforce2.c
--- linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/i2c/busses/i2c-nforce2.c	2015-04-28 12:51:49.012492495 +0100
@@ -448,4 +448,4 @@ static struct pci_driver nforce2_driver
 	.remove		= nforce2_remove,
 };
 
-module_pci_driver(nforce2_driver);
+deferred_module_pci_driver(nforce2_driver);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/keyboard/atkbd.c linux-4.0/drivers/input/keyboard/atkbd.c
--- linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-28 10:26:02.197065352 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+deferred_module_init(atkbd_init);
 module_exit(atkbd_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/misc/uinput.c linux-4.0/drivers/input/misc/uinput.c
--- linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/misc/uinput.c	2015-04-27 16:45:54.270397155 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+deferred_module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mouse/psmouse-base.c linux-4.0/drivers/input/mouse/psmouse-base.c
--- linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-27 16:45:54.278397193 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+deferred_module_init(psmouse_init);
 module_exit(psmouse_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mousedev.c linux-4.0/drivers/input/mousedev.c
--- linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mousedev.c	2015-04-27 16:45:54.282397223 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+deferred_module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/i8042.c linux-4.0/drivers/input/serio/i8042.c
--- linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/i8042.c	2015-04-27 16:45:54.286397239 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+deferred_module_init(i8042_init);
 module_exit(i8042_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/serport.c linux-4.0/drivers/input/serio/serport.c
--- linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/serport.c	2015-04-27 16:45:54.290397255 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+deferred_module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-21 14:19:27.380902248 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-21 09:30:19.981724024 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43/main.c linux-4.0/drivers/net/wireless/b43/main.c
--- linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43/main.c	2015-04-27 16:45:54.302397323 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+deferred_module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43legacy/main.c linux-4.0/drivers/net/wireless/b43legacy/main.c
--- linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-27 16:45:54.310397355 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+deferred_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-27 16:45:54.326397426 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+deferred_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c linux-4.0/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-27 16:45:54.334397478 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+deferred_module_init(pcied_init);
 module_exit(pcied_cleanup);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-27 16:45:54.330397445 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+deferred_module_init(pci_hotplug_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c linux-4.0/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-27 16:45:54.338397504 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+deferred_module_init(shpcd_init);
 module_exit(shpcd_cleanup);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c linux-4.0/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-27 16:45:54.342397509 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+deferred_module_init(pcie_portdrv_init);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-27 16:45:54.350397545 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+deferred_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-27 16:45:54.354397586 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+deferred_module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-27 16:45:54.358397599 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+deferred_module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-27 16:45:54.362397610 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+deferred_module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-27 16:45:54.362397610 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+deferred_module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-27 16:45:54.366397621 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+deferred_module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ssb-hcd.c linux-4.0/drivers/usb/host/ssb-hcd.c
--- linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-27 16:45:54.366397621 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+deferred_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/uhci-hcd.c linux-4.0/drivers/usb/host/uhci-hcd.c
--- linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-27 16:45:54.370397644 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+deferred_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.0/firmware: b43
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-27 16:45:54.374397684 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+deferred_module_init(init_cifs)
 module_exit(exit_cifs)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/inode.c linux-4.0/fs/fat/inode.c
--- linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/inode.c	2015-04-27 16:45:54.382397704 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+deferred_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_msdos.c linux-4.0/fs/fat/namei_msdos.c
--- linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_msdos.c	2015-04-27 16:45:54.382397704 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+deferred_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_vfat.c linux-4.0/fs/fat/namei_vfat.c
--- linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_vfat.c	2015-04-27 16:46:24.546547281 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+deferred_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/isofs/inode.c linux-4.0/fs/isofs/inode.c
--- linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/isofs/inode.c	2015-04-27 16:45:54.386397726 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+deferred_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ntfs/super.c linux-4.0/fs/ntfs/super.c
--- linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ntfs/super.c	2015-04-27 16:45:54.398397787 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+deferred_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/acpi/acpi_bus.h linux-4.0/include/acpi/acpi_bus.h
--- linux-4.0.orig/include/acpi/acpi_bus.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/acpi/acpi_bus.h	2015-04-28 16:16:22.006930694 +0100
@@ -501,8 +501,9 @@ static inline bool acpi_device_enumerate
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_acpi_driver(__acpi_driver) \
-	module_driver(__acpi_driver, acpi_bus_register_driver, \
-		      acpi_bus_unregister_driver)
+	async_module_driver(__acpi_driver, acpi_bus_register_driver, \
+		      acpi_bus_unregister_driver)  \
+    ADD_MODULE_DEPENDENCY(__acpi_driver##_init, acpi_ac_init);
 
 /*
  * Bind physical devices with ACPI devices
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/asm-generic/vmlinux.lds.h linux-4.0/include/asm-generic/vmlinux.lds.h
--- linux-4.0.orig/include/asm-generic/vmlinux.lds.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/asm-generic/vmlinux.lds.h	2015-04-24 14:48:17.696301594 +0100
@@ -632,6 +632,16 @@
 		*(.initcall##level##.init)				\
 		*(.initcall##level##s.init)				\
 
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
 #define INIT_CALLS							\
 		VMLINUX_SYMBOL(__initcall_start) = .;			\
 		*(.initcallearly.init)					\
@@ -802,9 +812,11 @@
 		INIT_DATA						\
 		INIT_SETUP(initsetup_align)				\
 		INIT_CALLS						\
+		ASYNC_INITCALLS   \
 		CON_INITCALL						\
 		SECURITY_INITCALL					\
 		INIT_RAM_FS						\
+		MODULES_DEPENDENCIES \
 	}
 
 #define BSS_SECTION(sbss_align, bss_align, stop_align)			\
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/device.h linux-4.0/include/linux/device.h
--- linux-4.0.orig/include/linux/device.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/device.h	2015-04-21 09:30:19.997724016 +0100
@@ -13,6 +13,7 @@
 #ifndef _DEVICE_H_
 #define _DEVICE_H_
 
+#include <linux/async_minit.h>
 #include <linux/ioport.h>
 #include <linux/kobject.h>
 #include <linux/klist.h>
@@ -1266,4 +1267,5 @@ static void __exit __driver##_exit(void)
 } \
 module_exit(__driver##_exit);
 
+
 #endif /* _DEVICE_H_ */
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/hid.h linux-4.0/include/linux/hid.h
--- linux-4.0.orig/include/linux/hid.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/hid.h	2015-04-28 14:27:49.681238722 +0100
@@ -782,8 +782,10 @@ extern void hid_unregister_driver(struct
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_hid_driver(__hid_driver) \
-	module_driver(__hid_driver, hid_register_driver, \
-		      hid_unregister_driver)
+	deferred_module_driver(__hid_driver, hid_register_driver, \
+		      hid_unregister_driver); \
+     ADD_MODULE_DEPENDENCY(__hid_driver##_init, hid_init);		\
+     ADD_MODULE_DEPENDENCY(__hid_driver##_init, uhid_init);
 
 extern void hidinput_hid_event(struct hid_device *, struct hid_field *, struct hid_usage *, __s32);
 extern void hidinput_report_event(struct hid_device *hid, struct hid_report *report);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/module.h linux-4.0/include/linux/module.h
--- linux-4.0.orig/include/linux/module.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/module.h	2015-04-21 09:30:19.997724016 +0100
@@ -6,6 +6,7 @@
  * Rewritten by Richard Henderson <rth@tamu.edu> Dec 1996
  * Rewritten again by Rusty Russell, 2002
  */
+#include "linux/async_minit.h"
 #include <linux/list.h>
 #include <linux/stat.h>
 #include <linux/compiler.h>
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/usb.h linux-4.0/include/linux/usb.h
--- linux-4.0.orig/include/linux/usb.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/usb.h	2015-04-27 10:52:19.143074780 +0100
@@ -1158,7 +1158,7 @@ extern void usb_deregister(struct usb_dr
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_usb_driver(__usb_driver) \
-	module_driver(__usb_driver, usb_register, \
+	async_module_driver(__usb_driver, usb_register, \
 		       usb_deregister)
 
 extern int usb_register_device_driver(struct usb_device_driver *,
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-21 09:30:20.001724017 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/.project linux-4.0/.project
--- linux-4.0.orig/.project	2015-04-21 13:50:56.451057744 +0100
+++ linux-4.0/.project	2015-04-14 11:28:19.357432096 +0100
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <projectDescription>
-	<name>linux-4.0.orig</name>
+	<name>linux-4.0</name>
 	<comment></comment>
 	<projects>
 	</projects>
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/compress_offload.c linux-4.0/sound/core/compress_offload.c
--- linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/compress_offload.c	2015-04-27 16:45:54.402397798 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+deferred_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hrtimer.c linux-4.0/sound/core/hrtimer.c
--- linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hrtimer.c	2015-04-27 16:45:54.402397798 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+deferred_module_init(snd_hrtimer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-27 16:45:54.406397820 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+deferred_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/mixer_oss.c linux-4.0/sound/core/oss/mixer_oss.c
--- linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/mixer_oss.c	2015-04-27 16:45:54.410397862 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+deferred_module_init(alsa_mixer_oss_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/pcm_oss.c linux-4.0/sound/core/oss/pcm_oss.c
--- linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/pcm_oss.c	2015-04-27 16:45:54.418397888 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+deferred_module_init(alsa_pcm_oss_init)
 module_exit(alsa_pcm_oss_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/pcm.c linux-4.0/sound/core/pcm.c
--- linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/pcm.c	2015-04-27 16:45:54.422397904 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+deferred_module_init(alsa_pcm_init)
 module_exit(alsa_pcm_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rawmidi.c linux-4.0/sound/core/rawmidi.c
--- linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rawmidi.c	2015-04-27 16:45:54.426397925 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+deferred_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rtctimer.c linux-4.0/sound/core/rtctimer.c
--- linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rtctimer.c	2015-04-27 16:45:54.430397956 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+deferred_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/oss/seq_oss.c linux-4.0/sound/core/seq/oss/seq_oss.c
--- linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-27 16:45:54.430397956 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+deferred_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq.c linux-4.0/sound/core/seq/seq.c
--- linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq.c	2015-04-27 16:45:54.462398102 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+deferred_module_init(alsa_seq_init)
 module_exit(alsa_seq_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_device.c linux-4.0/sound/core/seq/seq_device.c
--- linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_device.c	2015-04-27 16:45:54.442398007 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-module_init(alsa_seq_device_init)
+deferred_module_init(alsa_seq_device_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_dummy.c linux-4.0/sound/core/seq/seq_dummy.c
--- linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_dummy.c	2015-04-27 16:45:54.442398007 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+deferred_module_init(alsa_seq_dummy_init)
 module_exit(alsa_seq_dummy_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-27 16:45:54.454398071 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+deferred_module_init(alsa_seq_midi_init)
 module_exit(alsa_seq_midi_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_emul.c linux-4.0/sound/core/seq/seq_midi_emul.c
--- linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-27 16:45:54.450398057 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+deferred_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_event.c linux-4.0/sound/core/seq/seq_midi_event.c
--- linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-27 16:45:54.454398071 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+deferred_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_virmidi.c linux-4.0/sound/core/seq/seq_virmidi.c
--- linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-27 16:45:54.458398085 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+deferred_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/timer.c linux-4.0/sound/core/timer.c
--- linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/timer.c	2015-04-27 16:45:54.466398133 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+deferred_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/aloop.c linux-4.0/sound/drivers/aloop.c
--- linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/aloop.c	2015-04-27 16:45:54.470398149 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+deferred_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/dummy.c linux-4.0/sound/drivers/dummy.c
--- linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/dummy.c	2015-04-27 16:45:54.486398234 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+deferred_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401.c linux-4.0/sound/drivers/mpu401/mpu401.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-27 16:45:54.494398263 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+deferred_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.0/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-27 16:45:54.486398234 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+deferred_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/virmidi.c linux-4.0/sound/drivers/virmidi.c
--- linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/virmidi.c	2015-04-27 16:45:54.494398263 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+deferred_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/soundcard.c linux-4.0/sound/oss/soundcard.c
--- linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/soundcard.c	2015-04-27 16:45:54.494398263 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+deferred_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_analog.c linux-4.0/sound/pci/hda/patch_analog.c
--- linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_analog.c	2015-04-27 16:45:54.498398285 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-module_init(patch_analog_init)
+deferred_module_init(patch_analog_init)
 module_exit(patch_analog_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0110.c linux-4.0/sound/pci/hda/patch_ca0110.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-27 16:45:54.502398315 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-module_init(patch_ca0110_init)
+deferred_module_init(patch_ca0110_init)
 module_exit(patch_ca0110_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0132.c linux-4.0/sound/pci/hda/patch_ca0132.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-27 16:45:54.510398347 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-module_init(patch_ca0132_init)
+deferred_module_init(patch_ca0132_init)
 module_exit(patch_ca0132_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cirrus.c linux-4.0/sound/pci/hda/patch_cirrus.c
--- linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-27 16:45:54.514398364 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-module_init(patch_cirrus_init)
+deferred_module_init(patch_cirrus_init)
 module_exit(patch_cirrus_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cmedia.c linux-4.0/sound/pci/hda/patch_cmedia.c
--- linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-27 16:45:54.514398364 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-module_init(patch_cmedia_init)
+deferred_module_init(patch_cmedia_init)
 module_exit(patch_cmedia_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_conexant.c linux-4.0/sound/pci/hda/patch_conexant.c
--- linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-27 16:45:54.518398383 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-module_init(patch_conexant_init)
+deferred_module_init(patch_conexant_init)
 module_exit(patch_conexant_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_hdmi.c linux-4.0/sound/pci/hda/patch_hdmi.c
--- linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-27 16:45:54.534398463 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-module_init(patch_hdmi_init)
+deferred_module_init(patch_hdmi_init)
 module_exit(patch_hdmi_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_realtek.c linux-4.0/sound/pci/hda/patch_realtek.c
--- linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-27 16:45:54.554398566 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-module_init(patch_realtek_init)
+deferred_module_init(patch_realtek_init)
 module_exit(patch_realtek_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_si3054.c linux-4.0/sound/pci/hda/patch_si3054.c
--- linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-27 16:45:54.558398575 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-module_init(patch_si3054_init)
+deferred_module_init(patch_si3054_init)
 module_exit(patch_si3054_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_sigmatel.c linux-4.0/sound/pci/hda/patch_sigmatel.c
--- linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-27 16:45:54.566398620 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-module_init(patch_sigmatel_init)
+deferred_module_init(patch_sigmatel_init)
 module_exit(patch_sigmatel_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_via.c linux-4.0/sound/pci/hda/patch_via.c
--- linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_via.c	2015-04-27 16:45:54.570398659 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-module_init(patch_via_init)
+deferred_module_init(patch_via_init)
 module_exit(patch_via_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/powermac.c linux-4.0/sound/ppc/powermac.c
--- linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/powermac.c	2015-04-27 16:45:54.574398670 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+deferred_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/snd_ps3.c linux-4.0/sound/ppc/snd_ps3.c
--- linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/snd_ps3.c	2015-04-27 16:45:54.578398677 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+deferred_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/emux/emux.c linux-4.0/sound/synth/emux/emux.c
--- linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/emux/emux.c	2015-04-27 16:45:54.582398695 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+deferred_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x Documentation -x '*.o' -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/util_mem.c linux-4.0/sound/synth/util_mem.c
--- linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/util_mem.c	2015-04-27 16:45:54.582398695 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+deferred_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/aes_generic.c linux-4.0/crypto/aes_generic.c
--- linux-4.0.orig/crypto/aes_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/aes_generic.c	2015-04-28 19:05:51.348339430 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+deferred_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
Only in linux-4.0/crypto: aes_generic.c.orig
Only in linux-4.0/crypto: aes_generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/af_alg.c linux-4.0/crypto/af_alg.c
--- linux-4.0.orig/crypto/af_alg.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/af_alg.c	2015-04-28 19:05:51.349339430 +0100
@@ -477,7 +477,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+module_init(af_alg_init);	// allow algif_hash algif_skcipher
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
Only in linux-4.0/crypto: af_alg.c.orig
Only in linux-4.0/crypto: af_alg.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_hash.c linux-4.0/crypto/algif_hash.c
--- linux-4.0.orig/crypto/algif_hash.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_hash.c	2015-04-28 19:05:51.352339430 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+module_init(algif_hash_init);	//af_alg_init
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: algif_hash.c.orig
Only in linux-4.0/crypto: algif_hash.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/algif_skcipher.c linux-4.0/crypto/algif_skcipher.c
--- linux-4.0.orig/crypto/algif_skcipher.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/algif_skcipher.c	2015-04-28 19:05:51.352339430 +0100
@@ -626,6 +626,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+module_init(algif_skcipher_init);		//af_alg_init
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: algif_skcipher.c.orig
Only in linux-4.0/crypto: algif_skcipher.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ansi_cprng.c linux-4.0/crypto/ansi_cprng.c
--- linux-4.0.orig/crypto/ansi_cprng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ansi_cprng.c	2015-04-28 19:05:51.353339430 +0100
@@ -474,7 +474,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+deferred_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
Only in linux-4.0/crypto: ansi_cprng.c.orig
Only in linux-4.0/crypto: ansi_cprng.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.0/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/asymmetric_type.c	2015-04-28 19:05:51.353339430 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+deferred_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
Only in linux-4.0/crypto/asymmetric_keys: asymmetric_type.c.orig
Only in linux-4.0/crypto/asymmetric_keys: asymmetric_type.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.0.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/pkcs7_key_type.c	2015-04-28 19:05:51.354339431 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+deferred_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
Only in linux-4.0/crypto/asymmetric_keys: pkcs7_key_type.c.orig
Only in linux-4.0/crypto/asymmetric_keys: pkcs7_key_type.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.0/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.0.orig/crypto/asymmetric_keys/x509_public_key.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/asymmetric_keys/x509_public_key.c	2015-04-28 19:05:51.354339431 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+deferred_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
Only in linux-4.0/crypto/asymmetric_keys: x509_public_key.c.orig
Only in linux-4.0/crypto/asymmetric_keys: x509_public_key.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/async_tx/async_pq.c linux-4.0/crypto/async_tx/async_pq.c
--- linux-4.0.orig/crypto/async_tx/async_pq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/async_tx/async_pq.c	2015-04-28 19:05:51.355339431 +0100
@@ -434,7 +434,7 @@ static void __exit async_pq_exit(void)
 	put_page(pq_scribble_page);
 }
 
-module_init(async_pq_init);
+module_init(async_pq_init);	//raid6_pq.ko async_xor.ko async_tx.ko
 module_exit(async_pq_exit);
 
 MODULE_DESCRIPTION("asynchronous raid6 syndrome generation/validation");
Only in linux-4.0/crypto/async_tx: async_pq.c.orig
Only in linux-4.0/crypto/async_tx: async_pq.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/blowfish_generic.c linux-4.0/crypto/blowfish_generic.c
--- linux-4.0.orig/crypto/blowfish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/blowfish_generic.c	2015-04-28 19:05:51.355339431 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+deferred_module_init(blowfish_mod_init);	//blowfish_common.ko
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: blowfish_generic.c.orig
Only in linux-4.0/crypto: blowfish_generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/cbc.c linux-4.0/crypto/cbc.c
--- linux-4.0.orig/crypto/cbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/cbc.c	2015-04-28 19:05:51.366339431 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+deferred_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: cbc.c.orig
Only in linux-4.0/crypto: cbc.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32.c linux-4.0/crypto/crc32.c
--- linux-4.0.orig/crypto/crc32.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32.c	2015-04-28 19:05:51.366339431 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+deferred_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crc32c_generic.c linux-4.0/crypto/crc32c_generic.c
--- linux-4.0.orig/crypto/crc32c_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crc32c_generic.c	2015-04-28 19:05:51.367339431 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+deferred_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
Only in linux-4.0/crypto: crc32c_generic.c.orig
Only in linux-4.0/crypto: crc32c_generic.c.rej
Only in linux-4.0/crypto: crc32.c.orig
Only in linux-4.0/crypto: crc32.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crct10dif_generic.c linux-4.0/crypto/crct10dif_generic.c
--- linux-4.0.orig/crypto/crct10dif_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crct10dif_generic.c	2015-04-28 19:05:51.367339431 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+deferred_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
Only in linux-4.0/crypto: crct10dif_generic.c.orig
Only in linux-4.0/crypto: crct10dif_generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_null.c linux-4.0/crypto/crypto_null.c
--- linux-4.0.orig/crypto/crypto_null.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_null.c	2015-04-28 19:05:51.367339431 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+deferred_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: crypto_null.c.orig
Only in linux-4.0/crypto: crypto_null.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/crypto_user.c linux-4.0/crypto/crypto_user.c
--- linux-4.0.orig/crypto/crypto_user.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/crypto_user.c	2015-04-28 19:05:51.368339431 +0100
@@ -529,7 +529,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+deferred_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
Only in linux-4.0/crypto: crypto_user.c.orig
Only in linux-4.0/crypto: crypto_user.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/deflate.c linux-4.0/crypto/deflate.c
--- linux-4.0.orig/crypto/deflate.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/deflate.c	2015-04-28 19:05:51.368339431 +0100
@@ -216,7 +216,7 @@ static void __exit deflate_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(deflate_mod_init);
+module_init(deflate_mod_init);	//zlib_deflate
 module_exit(deflate_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: deflate.c.orig
Only in linux-4.0/crypto: deflate.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ecb.c linux-4.0/crypto/ecb.c
--- linux-4.0.orig/crypto/ecb.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ecb.c	2015-04-28 19:05:51.374339431 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+deferred_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: ecb.c.orig
Only in linux-4.0/crypto: ecb.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/ghash-generic.c linux-4.0/crypto/ghash-generic.c
--- linux-4.0.orig/crypto/ghash-generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/ghash-generic.c	2015-04-28 19:05:51.374339431 +0100
@@ -167,7 +167,7 @@ static void __exit ghash_mod_exit(void)
 	crypto_unregister_shash(&ghash_alg);
 }
 
-module_init(ghash_mod_init);
+module_init(ghash_mod_init);	//gf128mul
 module_exit(ghash_mod_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: ghash-generic.c.orig
Only in linux-4.0/crypto: ghash-generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lrw.c linux-4.0/crypto/lrw.c
--- linux-4.0.orig/crypto/lrw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lrw.c	2015-04-28 19:05:51.375339431 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: lrw.c.orig
Only in linux-4.0/crypto: lrw.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4.c linux-4.0/crypto/lz4.c
--- linux-4.0.orig/crypto/lz4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4.c	2015-04-28 19:05:51.375339431 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+deferred_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: lz4.c.orig
Only in linux-4.0/crypto: lz4.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lz4hc.c linux-4.0/crypto/lz4hc.c
--- linux-4.0.orig/crypto/lz4hc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lz4hc.c	2015-04-28 19:05:51.375339431 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+deferred_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: lz4hc.c.orig
Only in linux-4.0/crypto: lz4hc.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/lzo.c linux-4.0/crypto/lzo.c
--- linux-4.0.orig/crypto/lzo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/lzo.c	2015-04-28 19:05:51.376339431 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+deferred_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: lzo.c.orig
Only in linux-4.0/crypto: lzo.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md4.c linux-4.0/crypto/md4.c
--- linux-4.0.orig/crypto/md4.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md4.c	2015-04-28 19:05:51.376339431 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+deferred_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: md4.c.orig
Only in linux-4.0/crypto: md4.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/md5.c linux-4.0/crypto/md5.c
--- linux-4.0.orig/crypto/md5.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/md5.c	2015-04-28 19:05:51.376339431 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+deferred_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: md5.c.orig
Only in linux-4.0/crypto: md5.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd128.c linux-4.0/crypto/rmd128.c
--- linux-4.0.orig/crypto/rmd128.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd128.c	2015-04-28 19:05:51.377339431 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+deferred_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: rmd128.c.orig
Only in linux-4.0/crypto: rmd128.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd160.c linux-4.0/crypto/rmd160.c
--- linux-4.0.orig/crypto/rmd160.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd160.c	2015-04-28 19:05:51.377339431 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+deferred_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: rmd160.c.orig
Only in linux-4.0/crypto: rmd160.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd256.c linux-4.0/crypto/rmd256.c
--- linux-4.0.orig/crypto/rmd256.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd256.c	2015-04-28 19:05:51.378339431 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+deferred_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: rmd256.c.orig
Only in linux-4.0/crypto: rmd256.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/rmd320.c linux-4.0/crypto/rmd320.c
--- linux-4.0.orig/crypto/rmd320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/rmd320.c	2015-04-28 19:05:51.378339431 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+deferred_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: rmd320.c.orig
Only in linux-4.0/crypto: rmd320.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha1_generic.c linux-4.0/crypto/sha1_generic.c
--- linux-4.0.orig/crypto/sha1_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha1_generic.c	2015-04-28 19:05:51.379339431 +0100
@@ -147,7 +147,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+deferred_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: sha1_generic.c.orig
Only in linux-4.0/crypto: sha1_generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha256_generic.c linux-4.0/crypto/sha256_generic.c
--- linux-4.0.orig/crypto/sha256_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha256_generic.c	2015-04-28 19:05:51.379339431 +0100
@@ -378,7 +378,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+deferred_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: sha256_generic.c.orig
Only in linux-4.0/crypto: sha256_generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/sha512_generic.c linux-4.0/crypto/sha512_generic.c
--- linux-4.0.orig/crypto/sha512_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/sha512_generic.c	2015-04-28 19:05:51.379339431 +0100
@@ -282,7 +282,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+deferred_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: sha512_generic.c.orig
Only in linux-4.0/crypto: sha512_generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tcrypt.c linux-4.0/crypto/tcrypt.c
--- linux-4.0.orig/crypto/tcrypt.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tcrypt.c	2015-04-28 19:05:51.380339432 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+deferred_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
Only in linux-4.0/crypto: tcrypt.c.orig
Only in linux-4.0/crypto: tcrypt.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tea.c linux-4.0/crypto/tea.c
--- linux-4.0.orig/crypto/tea.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tea.c	2015-04-28 19:05:51.381339432 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+deferred_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: tea.c.orig
Only in linux-4.0/crypto: tea.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/tgr192.c linux-4.0/crypto/tgr192.c
--- linux-4.0.orig/crypto/tgr192.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/tgr192.c	2015-04-28 19:05:51.381339432 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+deferred_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: tgr192.c.orig
Only in linux-4.0/crypto: tgr192.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/twofish_generic.c linux-4.0/crypto/twofish_generic.c
--- linux-4.0.orig/crypto/twofish_generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/twofish_generic.c	2015-04-28 19:05:51.382339432 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+deferred_module_init(twofish_mod_init);	//twofish_common
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: twofish_generic.c.orig
Only in linux-4.0/crypto: twofish_generic.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/vmac.c linux-4.0/crypto/vmac.c
--- linux-4.0.orig/crypto/vmac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/vmac.c	2015-04-28 19:05:51.383339432 +0100
@@ -708,7 +708,7 @@ static void __exit vmac_module_exit(void
 	crypto_unregister_template(&vmac_tmpl);
 }
 
-module_init(vmac_module_init);
+deferred_module_init(vmac_module_init);
 module_exit(vmac_module_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: vmac.c.orig
Only in linux-4.0/crypto: vmac.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/wp512.c linux-4.0/crypto/wp512.c
--- linux-4.0.orig/crypto/wp512.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/wp512.c	2015-04-28 19:05:51.383339432 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+deferred_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: wp512.c.orig
Only in linux-4.0/crypto: wp512.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xcbc.c linux-4.0/crypto/xcbc.c
--- linux-4.0.orig/crypto/xcbc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xcbc.c	2015-04-28 19:05:51.384339432 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+deferred_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: xcbc.c.orig
Only in linux-4.0/crypto: xcbc.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/xts.c linux-4.0/crypto/xts.c
--- linux-4.0.orig/crypto/xts.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/xts.c	2015-04-28 19:05:51.384339432 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: xts.c.orig
Only in linux-4.0/crypto: xts.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/crypto/zlib.c linux-4.0/crypto/zlib.c
--- linux-4.0.orig/crypto/zlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/crypto/zlib.c	2015-04-28 19:05:51.385339432 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+deferred_module_init(zlib_mod_init);	//zlib_deflate
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/crypto: zlib.c.orig
Only in linux-4.0/crypto: zlib.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/ac.c linux-4.0/drivers/acpi/ac.c
--- linux-4.0.orig/drivers/acpi/ac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/ac.c	2015-04-28 19:05:51.385339432 +0100
@@ -452,5 +452,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+async_module_init(acpi_ac_init);	//power_supply (subinit)
 module_exit(acpi_ac_exit);
Only in linux-4.0/drivers/acpi: ac.c.orig
Only in linux-4.0/drivers/acpi: ac.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_ipmi.c linux-4.0/drivers/acpi/acpi_ipmi.c
--- linux-4.0.orig/drivers/acpi/acpi_ipmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_ipmi.c	2015-04-28 19:05:51.386339432 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+deferred_module_init(acpi_ipmi_init);	//ipmi_msghandler
 module_exit(acpi_ipmi_exit);
Only in linux-4.0/drivers/acpi: acpi_ipmi.c.orig
Only in linux-4.0/drivers/acpi: acpi_ipmi.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/acpi_pad.c linux-4.0/drivers/acpi/acpi_pad.c
--- linux-4.0.orig/drivers/acpi/acpi_pad.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/acpi_pad.c	2015-04-28 19:05:51.386339432 +0100
@@ -514,7 +514,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+deferred_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
Only in linux-4.0/drivers/acpi: acpi_pad.c.orig
Only in linux-4.0/drivers/acpi: acpi_pad.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/battery.c linux-4.0/drivers/acpi/battery.c
--- linux-4.0.orig/drivers/acpi/battery.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/battery.c	2015-04-28 19:05:51.387339432 +0100
@@ -1319,5 +1319,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+deferred_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
Only in linux-4.0/drivers/acpi: battery.c.orig
Only in linux-4.0/drivers/acpi: battery.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/processor_driver.c linux-4.0/drivers/acpi/processor_driver.c
--- linux-4.0.orig/drivers/acpi/processor_driver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/processor_driver.c	2015-04-28 19:05:51.388339432 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+deferred_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
Only in linux-4.0/drivers/acpi: processor_driver.c.orig
Only in linux-4.0/drivers/acpi: processor_driver.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/sbs.c linux-4.0/drivers/acpi/sbs.c
--- linux-4.0.orig/drivers/acpi/sbs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/sbs.c	2015-04-28 19:05:51.388339432 +0100
@@ -755,5 +755,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+deferred_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
Only in linux-4.0/drivers/acpi: sbs.c.orig
Only in linux-4.0/drivers/acpi: sbs.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/thermal.c linux-4.0/drivers/acpi/thermal.c
--- linux-4.0.orig/drivers/acpi/thermal.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/thermal.c	2015-04-28 19:05:51.389339432 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+deferred_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
Only in linux-4.0/drivers/acpi: thermal.c.orig
Only in linux-4.0/drivers/acpi: thermal.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/acpi/video.c linux-4.0/drivers/acpi/video.c
--- linux-4.0.orig/drivers/acpi/video.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/acpi/video.c	2015-04-28 19:05:51.390339432 +0100
@@ -2203,5 +2203,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+deferred_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
Only in linux-4.0/drivers/acpi: video.c.orig
Only in linux-4.0/drivers/acpi: video.c.rej
Only in linux-4.0/drivers: async.c
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/acard-ahci.c linux-4.0/drivers/ata/acard-ahci.c
--- linux-4.0.orig/drivers/ata/acard-ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/acard-ahci.c	2015-04-28 19:05:51.391339432 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-module_pci_driver(acard_ahci_pci_driver);
+async_module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
Only in linux-4.0/drivers/ata: acard-ahci.c.orig
Only in linux-4.0/drivers/ata: acard-ahci.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/ata/ahci.c linux-4.0/drivers/ata/ahci.c
--- linux-4.0.orig/drivers/ata/ahci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/ata/ahci.c	2015-04-28 19:05:51.392339432 +0100
@@ -1465,7 +1465,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
Only in linux-4.0/drivers/ata: ahci.c.orig
Only in linux-4.0/drivers/ata: ahci.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/backend.c linux-4.0/drivers/char/agp/backend.c
--- linux-4.0.orig/drivers/char/agp/backend.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/backend.c	2015-04-27 00:46:11.692412550 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+async_module_init(agp_init);
 module_exit(agp_exit);
 
Only in linux-4.0/drivers/char/agp: backend.c.orig
Only in linux-4.0/drivers/char/agp: backend.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/agp/nvidia-agp.c linux-4.0/drivers/char/agp/nvidia-agp.c
--- linux-4.0.orig/drivers/char/agp/nvidia-agp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/agp/nvidia-agp.c	2015-04-28 19:05:51.394339432 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+deferred_module_init(agp_nvidia_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
Only in linux-4.0/drivers/char/agp: nvidia-agp.c.orig
Only in linux-4.0/drivers/char/agp: nvidia-agp.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hpet.c linux-4.0/drivers/char/hpet.c
--- linux-4.0.orig/drivers/char/hpet.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hpet.c	2015-04-28 19:05:51.396339432 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+deferred_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
Only in linux-4.0/drivers/char: hpet.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/hw_random/intel-rng.c linux-4.0/drivers/char/hw_random/intel-rng.c
--- linux-4.0.orig/drivers/char/hw_random/intel-rng.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/hw_random/intel-rng.c	2015-04-26 20:57:08.776250035 +0100
@@ -325,7 +325,7 @@ PFX "RNG, try using the 'no_fwh_detect'
 }
 
 
-static int __init mod_init(void)
+static int __init intel_rng_mod_init(void)
 {
 	int err = -ENODEV;
 	int i;
@@ -411,7 +411,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-module_init(mod_init);
+module_init(intel_rng_mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for Intel chipsets");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c linux-4.0/drivers/char/ipmi/ipmi_msghandler.c
--- linux-4.0.orig/drivers/char/ipmi/ipmi_msghandler.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/char/ipmi/ipmi_msghandler.c	2015-04-28 19:05:51.397339432 +0100
@@ -4607,7 +4607,7 @@ static void __exit cleanup_ipmi(void)
 }
 module_exit(cleanup_ipmi);
 
-module_init(ipmi_init_msghandler_mod);
+module_init(ipmi_init_msghandler_mod);  //release acpi_ipmi, 
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("Incoming and outgoing message routing for an IPMI"
Only in linux-4.0/drivers/char/ipmi: ipmi_msghandler.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/blackfin-cpufreq.c linux-4.0/drivers/cpufreq/blackfin-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/blackfin-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/blackfin-cpufreq.c	2015-04-27 23:56:11.843337620 +0100
@@ -213,5 +213,5 @@ MODULE_AUTHOR("Michael Hennerich <henner
 MODULE_DESCRIPTION("cpufreq driver for Blackfin");
 MODULE_LICENSE("GPL");
 
-module_init(bfin_cpu_init);
+deferred_module_init(bfin_cpu_init);
 module_exit(bfin_cpu_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.0/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_conservative.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_conservative.c	2015-04-28 19:05:51.399339432 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
Only in linux-4.0/drivers/cpufreq: cpufreq_conservative.c.orig
Only in linux-4.0/drivers/cpufreq: cpufreq_conservative.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq-nforce2.c linux-4.0/drivers/cpufreq/cpufreq-nforce2.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq-nforce2.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq-nforce2.c	2015-04-27 23:56:11.888337620 +0100
@@ -440,6 +440,6 @@ static void __exit nforce2_exit(void)
 	cpufreq_unregister_driver(&nforce2_driver);
 }
 
-module_init(nforce2_init);
+deferred_module_init(nforce2_init);
 module_exit(nforce2_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.0/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_ondemand.c	2015-04-28 19:05:51.399339432 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
Only in linux-4.0/drivers/cpufreq: cpufreq_ondemand.c.orig
Only in linux-4.0/drivers/cpufreq: cpufreq_ondemand.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.0/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_powersave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_powersave.c	2015-04-28 19:05:51.400339432 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+deferred_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
Only in linux-4.0/drivers/cpufreq: cpufreq_powersave.c.orig
Only in linux-4.0/drivers/cpufreq: cpufreq_powersave.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c linux-4.0/drivers/cpufreq/cpufreq_stats.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_stats.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_stats.c	2015-04-28 19:05:51.400339432 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+deferred_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
Only in linux-4.0/drivers/cpufreq: cpufreq_stats.c.orig
Only in linux-4.0/drivers/cpufreq: cpufreq_stats.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.0/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.0.orig/drivers/cpufreq/cpufreq_userspace.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cpufreq_userspace.c	2015-04-28 19:05:51.400339432 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+deferred_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
Only in linux-4.0/drivers/cpufreq: cpufreq_userspace.c.orig
Only in linux-4.0/drivers/cpufreq: cpufreq_userspace.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cris-artpec3-cpufreq.c linux-4.0/drivers/cpufreq/cris-artpec3-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/cris-artpec3-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cris-artpec3-cpufreq.c	2015-04-27 23:56:11.890337620 +0100
@@ -89,4 +89,4 @@ cris_sdram_freq_notifier(struct notifier
 }
 
 
-module_init(cris_freq_init);
+deferred_module_init(cris_freq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/cris-etraxfs-cpufreq.c linux-4.0/drivers/cpufreq/cris-etraxfs-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/cris-etraxfs-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/cris-etraxfs-cpufreq.c	2015-04-27 23:56:11.892337620 +0100
@@ -88,4 +88,4 @@ cris_sdram_freq_notifier(struct notifier
 	return 0;
 }
 
-module_init(cris_freq_init);
+deferred_module_init(cris_freq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/elanfreq.c linux-4.0/drivers/cpufreq/elanfreq.c
--- linux-4.0.orig/drivers/cpufreq/elanfreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/elanfreq.c	2015-04-27 23:56:11.896337620 +0100
@@ -228,5 +228,5 @@ MODULE_AUTHOR("Robert Schwebel <r.schweb
 		"Sven Geggus <sven@geggus.net>");
 MODULE_DESCRIPTION("cpufreq driver for AMD's Elan CPUs");
 
-module_init(elanfreq_init);
+deferred_module_init(elanfreq_init);
 module_exit(elanfreq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/e_powersaver.c linux-4.0/drivers/cpufreq/e_powersaver.c
--- linux-4.0.orig/drivers/cpufreq/e_powersaver.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/e_powersaver.c	2015-04-27 23:56:11.894337620 +0100
@@ -437,5 +437,5 @@ MODULE_AUTHOR("Rafal Bilski <rafalbilski
 MODULE_DESCRIPTION("Enhanced PowerSaver driver for VIA C7 CPU's.");
 MODULE_LICENSE("GPL");
 
-module_init(eps_init);
+deferred_module_init(eps_init);
 module_exit(eps_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/gx-suspmod.c linux-4.0/drivers/cpufreq/gx-suspmod.c
--- linux-4.0.orig/drivers/cpufreq/gx-suspmod.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/gx-suspmod.c	2015-04-27 23:56:11.899337620 +0100
@@ -497,6 +497,6 @@ MODULE_AUTHOR("Hiroshi Miura <miura@da-c
 MODULE_DESCRIPTION("Cpufreq driver for Cyrix MediaGX and NatSemi Geode");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_gx_init);
+deferred_module_init(cpufreq_gx_init);
 module_exit(cpufreq_gx_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/highbank-cpufreq.c linux-4.0/drivers/cpufreq/highbank-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/highbank-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/highbank-cpufreq.c	2015-04-27 23:56:11.915337621 +0100
@@ -102,7 +102,7 @@ out_put_node:
 	of_node_put(np);
 	return ret;
 }
-module_init(hb_cpufreq_driver_init);
+deferred_module_init(hb_cpufreq_driver_init);
 
 MODULE_AUTHOR("Mark Langsdorf <mark.langsdorf@calxeda.com>");
 MODULE_DESCRIPTION("Calxeda Highbank cpufreq driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/longrun.c linux-4.0/drivers/cpufreq/longrun.c
--- linux-4.0.orig/drivers/cpufreq/longrun.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/longrun.c	2015-04-27 23:56:11.924337621 +0100
@@ -320,5 +320,5 @@ MODULE_DESCRIPTION("LongRun driver for T
 		"Efficeon processors.");
 MODULE_LICENSE("GPL");
 
-module_init(longrun_init);
+deferred_module_init(longrun_init);
 module_exit(longrun_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/loongson2_cpufreq.c linux-4.0/drivers/cpufreq/loongson2_cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/loongson2_cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/loongson2_cpufreq.c	2015-04-27 23:56:11.931337621 +0100
@@ -189,7 +189,7 @@ static void __exit cpufreq_exit(void)
 	platform_driver_unregister(&platform_driver);
 }
 
-module_init(cpufreq_init);
+deferred_module_init(cpufreq_init);
 module_exit(cpufreq_exit);
 
 module_param(nowait, uint, 0644);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/maple-cpufreq.c linux-4.0/drivers/cpufreq/maple-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/maple-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/maple-cpufreq.c	2015-04-27 23:56:11.934337621 +0100
@@ -240,7 +240,7 @@ bail_noprops:
 	return rc;
 }
 
-module_init(maple_cpufreq_init);
+deferred_module_init(maple_cpufreq_init);
 
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/pasemi-cpufreq.c linux-4.0/drivers/cpufreq/pasemi-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/pasemi-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/pasemi-cpufreq.c	2015-04-27 23:56:11.937337621 +0100
@@ -284,7 +284,7 @@ static void __exit pas_cpufreq_exit(void
 	cpufreq_unregister_driver(&pas_cpufreq_driver);
 }
 
-module_init(pas_cpufreq_init);
+deferred_module_init(pas_cpufreq_init);
 module_exit(pas_cpufreq_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/pmac32-cpufreq.c linux-4.0/drivers/cpufreq/pmac32-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/pmac32-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/pmac32-cpufreq.c	2015-04-27 23:56:11.939337621 +0100
@@ -682,5 +682,5 @@ out:
 	return cpufreq_register_driver(&pmac_cpufreq_driver);
 }
 
-module_init(pmac_cpufreq_setup);
+deferred_module_init(pmac_cpufreq_setup);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/pmac64-cpufreq.c linux-4.0/drivers/cpufreq/pmac64-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/pmac64-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/pmac64-cpufreq.c	2015-04-27 23:56:11.952337621 +0100
@@ -670,7 +670,7 @@ static int __init g5_cpufreq_init(void)
 	return rc;
 }
 
-module_init(g5_cpufreq_init);
+deferred_module_init(g5_cpufreq_init);
 
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/powernow-k6.c linux-4.0/drivers/cpufreq/powernow-k6.c
--- linux-4.0.orig/drivers/cpufreq/powernow-k6.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/powernow-k6.c	2015-04-27 23:56:11.955337621 +0100
@@ -305,5 +305,5 @@ MODULE_AUTHOR("Arjan van de Ven, Dave Jo
 MODULE_DESCRIPTION("PowerNow! driver for AMD K6-2+ / K6-3+ processors.");
 MODULE_LICENSE("GPL");
 
-module_init(powernow_k6_init);
+deferred_module_init(powernow_k6_init);
 module_exit(powernow_k6_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/powernv-cpufreq.c linux-4.0/drivers/cpufreq/powernv-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/powernv-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/powernv-cpufreq.c	2015-04-27 23:56:11.957337621 +0100
@@ -387,7 +387,7 @@ static int __init powernv_cpufreq_init(v
 	register_reboot_notifier(&powernv_cpufreq_reboot_nb);
 	return cpufreq_register_driver(&powernv_cpufreq_driver);
 }
-module_init(powernv_cpufreq_init);
+deferred_module_init(powernv_cpufreq_init);
 
 static void __exit powernv_cpufreq_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/ppc_cbe_cpufreq.c linux-4.0/drivers/cpufreq/ppc_cbe_cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/ppc_cbe_cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/ppc_cbe_cpufreq.c	2015-04-27 23:56:11.961337621 +0100
@@ -163,7 +163,7 @@ static void __exit cbe_cpufreq_exit(void
 	cpufreq_unregister_driver(&cbe_cpufreq_driver);
 }
 
-module_init(cbe_cpufreq_init);
+deferred_module_init(cbe_cpufreq_init);
 module_exit(cbe_cpufreq_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c linux-4.0/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c
--- linux-4.0.orig/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c	2015-04-27 23:56:11.959337621 +0100
@@ -149,7 +149,7 @@ static void __exit cbe_cpufreq_pmi_exit(
 	pmi_unregister_handler(&cbe_pmi_handler);
 }
 
-module_init(cbe_cpufreq_pmi_init);
+deferred_module_init(cbe_cpufreq_pmi_init);
 module_exit(cbe_cpufreq_pmi_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/ppc-corenet-cpufreq.c linux-4.0/drivers/cpufreq/ppc-corenet-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/ppc-corenet-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/ppc-corenet-cpufreq.c	2015-04-27 23:56:11.963337621 +0100
@@ -317,7 +317,7 @@ err_mask:
 
 	return -ENOMEM;
 }
-module_init(ppc_corenet_cpufreq_init);
+deferred_module_init(ppc_corenet_cpufreq_init);
 
 static void __exit ppc_corenet_cpufreq_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/pxa2xx-cpufreq.c linux-4.0/drivers/cpufreq/pxa2xx-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/pxa2xx-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/pxa2xx-cpufreq.c	2015-04-27 23:56:11.965337621 +0100
@@ -448,5 +448,5 @@ static void __exit pxa_cpu_exit(void)
 MODULE_AUTHOR("Intrinsyc Software Inc.");
 MODULE_DESCRIPTION("CPU frequency changing driver for the PXA architecture");
 MODULE_LICENSE("GPL");
-module_init(pxa_cpu_init);
+deferred_module_init(pxa_cpu_init);
 module_exit(pxa_cpu_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/pxa3xx-cpufreq.c linux-4.0/drivers/cpufreq/pxa3xx-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/pxa3xx-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/pxa3xx-cpufreq.c	2015-04-27 23:56:11.968337621 +0100
@@ -216,7 +216,7 @@ static int __init cpufreq_init(void)
 
 	return 0;
 }
-module_init(cpufreq_init);
+deferred_module_init(cpufreq_init);
 
 static void __exit cpufreq_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/s3c2416-cpufreq.c linux-4.0/drivers/cpufreq/s3c2416-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/s3c2416-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/s3c2416-cpufreq.c	2015-04-27 23:56:11.979337621 +0100
@@ -488,4 +488,4 @@ static int __init s3c2416_cpufreq_init(v
 {
 	return cpufreq_register_driver(&s3c2416_cpufreq_driver);
 }
-module_init(s3c2416_cpufreq_init);
+deferred_module_init(s3c2416_cpufreq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/s3c64xx-cpufreq.c linux-4.0/drivers/cpufreq/s3c64xx-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/s3c64xx-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/s3c64xx-cpufreq.c	2015-04-27 23:56:11.981337621 +0100
@@ -224,4 +224,4 @@ static int __init s3c64xx_cpufreq_init(v
 {
 	return cpufreq_register_driver(&s3c64xx_cpufreq_driver);
 }
-module_init(s3c64xx_cpufreq_init);
+deferred_module_init(s3c64xx_cpufreq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/sc520_freq.c linux-4.0/drivers/cpufreq/sc520_freq.c
--- linux-4.0.orig/drivers/cpufreq/sc520_freq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/sc520_freq.c	2015-04-27 23:56:11.983337621 +0100
@@ -135,6 +135,6 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Sean Young <sean@mess.org>");
 MODULE_DESCRIPTION("cpufreq driver for AMD's Elan sc520 CPU");
 
-module_init(sc520_freq_init);
+deferred_module_init(sc520_freq_init);
 module_exit(sc520_freq_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/sh-cpufreq.c linux-4.0/drivers/cpufreq/sh-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/sh-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/sh-cpufreq.c	2015-04-27 23:56:11.985337621 +0100
@@ -158,7 +158,7 @@ static struct cpufreq_driver sh_cpufreq_
 	.attr		= cpufreq_generic_attr,
 };
 
-static int __init sh_cpufreq_module_init(void)
+static int __init sh_cpufreq_deferred_module_init(void)
 {
 	pr_notice("SuperH CPU frequency driver.\n");
 	return cpufreq_register_driver(&sh_cpufreq_driver);
@@ -169,7 +169,7 @@ static void __exit sh_cpufreq_module_exi
 	cpufreq_unregister_driver(&sh_cpufreq_driver);
 }
 
-module_init(sh_cpufreq_module_init);
+deferred_module_init(sh_cpufreq_module_init);
 module_exit(sh_cpufreq_module_exit);
 
 MODULE_AUTHOR("Paul Mundt <lethal@linux-sh.org>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/sparc-us2e-cpufreq.c linux-4.0/drivers/cpufreq/sparc-us2e-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/sparc-us2e-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/sparc-us2e-cpufreq.c	2015-04-27 23:56:11.988337621 +0100
@@ -374,5 +374,5 @@ MODULE_AUTHOR("David S. Miller <davem@re
 MODULE_DESCRIPTION("cpufreq driver for UltraSPARC-IIe");
 MODULE_LICENSE("GPL");
 
-module_init(us2e_freq_init);
+deferred_module_init(us2e_freq_init);
 module_exit(us2e_freq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/sparc-us3-cpufreq.c linux-4.0/drivers/cpufreq/sparc-us3-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/sparc-us3-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/sparc-us3-cpufreq.c	2015-04-27 23:56:11.990337621 +0100
@@ -233,5 +233,5 @@ MODULE_AUTHOR("David S. Miller <davem@re
 MODULE_DESCRIPTION("cpufreq driver for UltraSPARC-III");
 MODULE_LICENSE("GPL");
 
-module_init(us3_freq_init);
+deferred_module_init(us3_freq_init);
 module_exit(us3_freq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/speedstep-ich.c linux-4.0/drivers/cpufreq/speedstep-ich.c
--- linux-4.0.orig/drivers/cpufreq/speedstep-ich.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/speedstep-ich.c	2015-04-27 23:56:11.992337621 +0100
@@ -383,5 +383,5 @@ MODULE_DESCRIPTION("Speedstep driver for
 		"with ICH-M southbridges.");
 MODULE_LICENSE("GPL");
 
-module_init(speedstep_init);
+deferred_module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/speedstep-smi.c linux-4.0/drivers/cpufreq/speedstep-smi.c
--- linux-4.0.orig/drivers/cpufreq/speedstep-smi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/speedstep-smi.c	2015-04-27 23:56:11.994337621 +0100
@@ -392,5 +392,5 @@ MODULE_AUTHOR("Hiroshi Miura");
 MODULE_DESCRIPTION("Speedstep driver for IST applet SMI interface.");
 MODULE_LICENSE("GPL");
 
-module_init(speedstep_init);
+deferred_module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/cpufreq/tegra-cpufreq.c linux-4.0/drivers/cpufreq/tegra-cpufreq.c
--- linux-4.0.orig/drivers/cpufreq/tegra-cpufreq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/cpufreq/tegra-cpufreq.c	2015-04-27 23:56:11.996337622 +0100
@@ -214,5 +214,5 @@ static void __exit tegra_cpufreq_exit(vo
 MODULE_AUTHOR("Colin Cross <ccross@android.com>");
 MODULE_DESCRIPTION("cpufreq driver for Nvidia Tegra2");
 MODULE_LICENSE("GPL");
-module_init(tegra_cpufreq_init);
+deferred_module_init(tegra_cpufreq_init);
 module_exit(tegra_cpufreq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/drm_drv.c linux-4.0/drivers/gpu/drm/drm_drv.c
--- linux-4.0.orig/drivers/gpu/drm/drm_drv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/drm_drv.c	2015-04-27 00:41:58.997409562 +0100
@@ -908,5 +908,5 @@ static void __exit drm_core_exit(void)
 	idr_destroy(&drm_minors_idr);
 }
 
-module_init(drm_core_init);
+deferred_module_init(drm_core_init);
 module_exit(drm_core_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Kconfig linux-4.0/drivers/gpu/drm/Kconfig
--- linux-4.0.orig/drivers/gpu/drm/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Kconfig	2015-04-28 19:05:51.401339432 +0100
@@ -77,10 +77,13 @@ config DRM_KMS_CMA_HELPER
 	help
 	  Choose this if you need the KMS CMA helper functions
 
+
 source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
Only in linux-4.0/drivers/gpu/drm: Kconfig.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/gpu/drm/Makefile linux-4.0/drivers/gpu/drm/Makefile
--- linux-4.0.orig/drivers/gpu/drm/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/gpu/drm/Makefile	2015-04-13 23:49:11.367703122 +0100
@@ -34,6 +34,7 @@ CFLAGS_drm_trace_points.o := -I$(src)
 
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
Only in linux-4.0/drivers/gpu/drm: Makefile.orig
Only in linux-4.0/drivers/gpu/drm: Makefile.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-cherry.c linux-4.0/drivers/hid/hid-cherry.c
--- linux-4.0.orig/drivers/hid/hid-cherry.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-cherry.c	2015-04-28 19:05:51.402339432 +0100
@@ -63,12 +63,12 @@ static const struct hid_device_id ch_dev
 };
 MODULE_DEVICE_TABLE(hid, ch_devices);
 
-static struct hid_driver ch_driver = {
+static struct hid_driver cherry_driver = {
 	.name = "cherry",
 	.id_table = ch_devices,
 	.report_fixup = ch_report_fixup,
 	.input_mapping = ch_input_mapping,
 };
-module_hid_driver(ch_driver);
+module_hid_driver(cherry_driver);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/drivers/hid: hid-cherry.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-chicony.c linux-4.0/drivers/hid/hid-chicony.c
--- linux-4.0.orig/drivers/hid/hid-chicony.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-chicony.c	2015-04-28 19:05:51.402339432 +0100
@@ -65,11 +65,11 @@ static const struct hid_device_id ch_dev
 };
 MODULE_DEVICE_TABLE(hid, ch_devices);
 
-static struct hid_driver ch_driver = {
+static struct hid_driver chicony_driver = {
 	.name = "chicony",
 	.id_table = ch_devices,
 	.input_mapping = ch_input_mapping,
 };
-module_hid_driver(ch_driver);
+module_hid_driver(chicony_driver);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/drivers/hid: hid-chicony.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-core.c linux-4.0/drivers/hid/hid-core.c
--- linux-4.0.orig/drivers/hid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-core.c	2015-04-28 19:05:51.403339432 +0100
@@ -2734,7 +2734,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+deferred_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
Only in linux-4.0/drivers/hid: hid-core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-elo.c linux-4.0/drivers/hid/hid-elo.c
--- linux-4.0.orig/drivers/hid/hid-elo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-elo.c	2015-04-28 19:05:51.404339432 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+deferred_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
Only in linux-4.0/drivers/hid: hid-elo.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-hyperv.c linux-4.0/drivers/hid/hid-hyperv.c
--- linux-4.0.orig/drivers/hid/hid-hyperv.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-hyperv.c	2015-04-28 19:05:51.405339432 +0100
@@ -611,5 +611,5 @@ static void __exit mousevsc_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(mousevsc_init);
+deferred_module_init(mousevsc_init);
 module_exit(mousevsc_exit);
Only in linux-4.0/drivers/hid: hid-hyperv.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-arvo.c linux-4.0/drivers/hid/hid-roccat-arvo.c
--- linux-4.0.orig/drivers/hid/hid-roccat-arvo.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-arvo.c	2015-04-28 19:05:51.405339432 +0100
@@ -452,7 +452,7 @@ static void __exit arvo_exit(void)
 	class_destroy(arvo_class);
 }
 
-module_init(arvo_init);
+deferred_module_init(arvo_init);
 module_exit(arvo_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-arvo.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat.c linux-4.0/drivers/hid/hid-roccat.c
--- linux-4.0.orig/drivers/hid/hid-roccat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat.c	2015-04-28 19:05:51.406339432 +0100
@@ -453,7 +453,7 @@ static void __exit roccat_exit(void)
 	unregister_chrdev_region(dev_id, ROCCAT_MAX_DEVICES);
 }
 
-module_init(roccat_init);
+deferred_module_init(roccat_init);
 module_exit(roccat_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-isku.c linux-4.0/drivers/hid/hid-roccat-isku.c
--- linux-4.0.orig/drivers/hid/hid-roccat-isku.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-isku.c	2015-04-28 19:05:51.406339432 +0100
@@ -454,7 +454,7 @@ static void __exit isku_exit(void)
 	class_destroy(isku_class);
 }
 
-module_init(isku_init);
+deferred_module_init(isku_init);
 module_exit(isku_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-isku.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kone.c linux-4.0/drivers/hid/hid-roccat-kone.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kone.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kone.c	2015-04-28 19:05:51.407339433 +0100
@@ -901,7 +901,7 @@ static void __exit kone_exit(void)
 	class_destroy(kone_class);
 }
 
-module_init(kone_init);
+deferred_module_init(kone_init);
 module_exit(kone_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-kone.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c linux-4.0/drivers/hid/hid-roccat-koneplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-koneplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-koneplus.c	2015-04-28 19:05:51.407339433 +0100
@@ -570,7 +570,7 @@ static void __exit koneplus_exit(void)
 	class_destroy(koneplus_class);
 }
 
-module_init(koneplus_init);
+deferred_module_init(koneplus_init);
 module_exit(koneplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-koneplus.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-konepure.c linux-4.0/drivers/hid/hid-roccat-konepure.c
--- linux-4.0.orig/drivers/hid/hid-roccat-konepure.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-konepure.c	2015-04-28 19:05:51.408339433 +0100
@@ -224,7 +224,7 @@ static void __exit konepure_exit(void)
 	class_destroy(konepure_class);
 }
 
-module_init(konepure_init);
+deferred_module_init(konepure_init);
 module_exit(konepure_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-konepure.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c linux-4.0/drivers/hid/hid-roccat-kovaplus.c
--- linux-4.0.orig/drivers/hid/hid-roccat-kovaplus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-kovaplus.c	2015-04-28 19:05:51.408339433 +0100
@@ -657,7 +657,7 @@ static void __exit kovaplus_exit(void)
 	class_destroy(kovaplus_class);
 }
 
-module_init(kovaplus_init);
+deferred_module_init(kovaplus_init);
 module_exit(kovaplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-kovaplus.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-pyra.c linux-4.0/drivers/hid/hid-roccat-pyra.c
--- linux-4.0.orig/drivers/hid/hid-roccat-pyra.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-pyra.c	2015-04-28 19:05:51.409339433 +0100
@@ -607,7 +607,7 @@ static void __exit pyra_exit(void)
 	class_destroy(pyra_class);
 }
 
-module_init(pyra_init);
+deferred_module_init(pyra_init);
 module_exit(pyra_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-pyra.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-ryos.c linux-4.0/drivers/hid/hid-roccat-ryos.c
--- linux-4.0.orig/drivers/hid/hid-roccat-ryos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-ryos.c	2015-04-28 19:05:51.414339433 +0100
@@ -233,7 +233,7 @@ static void __exit ryos_exit(void)
 	class_destroy(ryos_class);
 }
 
-module_init(ryos_init);
+deferred_module_init(ryos_init);
 module_exit(ryos_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-ryos.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-roccat-savu.c linux-4.0/drivers/hid/hid-roccat-savu.c
--- linux-4.0.orig/drivers/hid/hid-roccat-savu.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-roccat-savu.c	2015-04-28 19:05:51.414339433 +0100
@@ -221,7 +221,7 @@ static void __exit savu_exit(void)
 	class_destroy(savu_class);
 }
 
-module_init(savu_init);
+deferred_module_init(savu_init);
 module_exit(savu_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
Only in linux-4.0/drivers/hid: hid-roccat-savu.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/hid-sony.c linux-4.0/drivers/hid/hid-sony.c
--- linux-4.0.orig/drivers/hid/hid-sony.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/hid-sony.c	2015-04-28 19:05:51.526339437 +0100
@@ -2152,7 +2152,7 @@ static void __exit sony_exit(void)
 	hid_unregister_driver(&sony_driver);
 	ida_destroy(&sony_device_id_allocator);
 }
-module_init(sony_init);
+deferred_module_init(sony_init);
 module_exit(sony_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/drivers/hid: hid-sony.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/uhid.c linux-4.0/drivers/hid/uhid.c
--- linux-4.0.orig/drivers/hid/uhid.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/uhid.c	2015-04-28 19:05:51.584339439 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+deferred_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
Only in linux-4.0/drivers/hid: uhid.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/hid/usbhid/hid-core.c linux-4.0/drivers/hid/usbhid/hid-core.c
--- linux-4.0.orig/drivers/hid/usbhid/hid-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/hid/usbhid/hid-core.c	2015-04-28 19:05:51.585339439 +0100
@@ -1626,7 +1626,7 @@ struct usb_interface *usbhid_find_interf
 	return usb_find_interface(&hid_driver, minor);
 }
 
-static int __init hid_init(void)
+static int __init usb_hid_init(void)
 {
 	int retval = -ENOMEM;
 
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+deferred_module_init(usb_hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
Only in linux-4.0/drivers/hid/usbhid: hid-core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c linux-4.0/drivers/i2c/busses/i2c-nforce2.c
--- linux-4.0.orig/drivers/i2c/busses/i2c-nforce2.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/i2c/busses/i2c-nforce2.c	2015-04-28 19:05:51.586339439 +0100
@@ -448,4 +448,4 @@ static struct pci_driver nforce2_driver
 	.remove		= nforce2_remove,
 };
 
-module_pci_driver(nforce2_driver);
+deferred_module_pci_driver(nforce2_driver);
Only in linux-4.0/drivers/i2c/busses: i2c-nforce2.c.orig
Only in linux-4.0/drivers/i2c/busses: i2c-nforce2.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/keyboard/atkbd.c linux-4.0/drivers/input/keyboard/atkbd.c
--- linux-4.0.orig/drivers/input/keyboard/atkbd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/keyboard/atkbd.c	2015-04-28 19:05:51.587339439 +0100
@@ -1811,5 +1811,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+deferred_module_init(atkbd_init);
 module_exit(atkbd_exit);
Only in linux-4.0/drivers/input/keyboard: atkbd.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/misc/uinput.c linux-4.0/drivers/input/misc/uinput.c
--- linux-4.0.orig/drivers/input/misc/uinput.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/misc/uinput.c	2015-04-28 19:05:51.588339439 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+deferred_module_init(uinput_init);
 module_exit(uinput_exit);
Only in linux-4.0/drivers/input/misc: uinput.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mouse/psmouse-base.c linux-4.0/drivers/input/mouse/psmouse-base.c
--- linux-4.0.orig/drivers/input/mouse/psmouse-base.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mouse/psmouse-base.c	2015-04-28 19:05:51.588339439 +0100
@@ -1894,5 +1894,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+deferred_module_init(psmouse_init);
 module_exit(psmouse_exit);
Only in linux-4.0/drivers/input/mouse: psmouse-base.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/mousedev.c linux-4.0/drivers/input/mousedev.c
--- linux-4.0.orig/drivers/input/mousedev.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/mousedev.c	2015-04-28 19:05:51.589339439 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+deferred_module_init(mousedev_init);
 module_exit(mousedev_exit);
Only in linux-4.0/drivers/input: mousedev.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/i8042.c linux-4.0/drivers/input/serio/i8042.c
--- linux-4.0.orig/drivers/input/serio/i8042.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/i8042.c	2015-04-28 19:05:51.590339439 +0100
@@ -1524,5 +1524,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+deferred_module_init(i8042_init);
 module_exit(i8042_exit);
Only in linux-4.0/drivers/input/serio: i8042.c.orig
Only in linux-4.0/drivers/input/serio: i8042.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/input/serio/serport.c linux-4.0/drivers/input/serio/serport.c
--- linux-4.0.orig/drivers/input/serio/serport.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/input/serio/serport.c	2015-04-28 19:05:51.591339439 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+deferred_module_init(serport_init);
 module_exit(serport_exit);
Only in linux-4.0/drivers/input/serio: serport.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Kconfig linux-4.0/drivers/Kconfig
--- linux-4.0.orig/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Kconfig	2015-04-28 19:05:51.591339439 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
Only in linux-4.0/drivers: Kconfig.orig
Only in linux-4.0/drivers: Kconfig.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/Makefile linux-4.0/drivers/Makefile
--- linux-4.0.orig/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/Makefile	2015-04-28 19:05:51.592339439 +0100
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +168,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
Only in linux-4.0/drivers: Makefile.orig
Only in linux-4.0/drivers: Makefile.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/mtd/ubi/build.c linux-4.0/drivers/mtd/ubi/build.c
--- linux-4.0.orig/drivers/mtd/ubi/build.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/mtd/ubi/build.c	2015-04-26 20:57:08.927250037 +0100
@@ -1336,7 +1336,7 @@ out:
 	pr_err("UBI error: cannot initialize UBI, error %d", err);
 	return err;
 }
-late_initcall(ubi_init);
+module_init(ubi_init);
 
 static void __exit ubi_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/ethernet/nvidia/forcedeth.c linux-4.0/drivers/net/ethernet/nvidia/forcedeth.c
--- linux-4.0.orig/drivers/net/ethernet/nvidia/forcedeth.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/ethernet/nvidia/forcedeth.c	2015-04-28 00:14:59.963350960 +0100
@@ -6378,7 +6378,7 @@ module_param(debug_tx_timeout, bool, 0);
 MODULE_PARM_DESC(debug_tx_timeout,
 		 "Dump tx related registers and ring when tx_timeout happens");
 
-module_pci_driver(forcedeth_pci_driver);
+deferred_module_pci_driver(forcedeth_pci_driver);
 MODULE_AUTHOR("Manfred Spraul <manfred@colorfullife.com>");
 MODULE_DESCRIPTION("Reverse Engineered nForce ethernet driver");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43/main.c linux-4.0/drivers/net/wireless/b43/main.c
--- linux-4.0.orig/drivers/net/wireless/b43/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43/main.c	2015-04-28 19:05:51.594339439 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+deferred_module_init(b43_init)
 module_exit(b43_exit)
Only in linux-4.0/drivers/net/wireless/b43: main.c.orig
Only in linux-4.0/drivers/net/wireless/b43: main.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/b43legacy/main.c linux-4.0/drivers/net/wireless/b43legacy/main.c
--- linux-4.0.orig/drivers/net/wireless/b43legacy/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/b43legacy/main.c	2015-04-28 19:05:51.596339440 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+deferred_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
Only in linux-4.0/drivers/net/wireless/b43legacy: main.c.orig
Only in linux-4.0/drivers/net/wireless/b43legacy: main.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.0.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/net/wireless/ipw2x00/ipw2100.c	2015-04-28 19:05:51.600339440 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+deferred_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
Only in linux-4.0/drivers/net/wireless/ipw2x00: ipw2100.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c linux-4.0/drivers/pci/hotplug/pciehp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pciehp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pciehp_core.c	2015-04-28 19:05:51.602339440 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+deferred_module_init(pcied_init);
 module_exit(pcied_cleanup);
Only in linux-4.0/drivers/pci/hotplug: pciehp_core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.0.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/pci_hotplug_core.c	2015-04-28 19:05:51.603339440 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+deferred_module_init(pci_hotplug_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.0/drivers/pci/hotplug: pci_hotplug_core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c linux-4.0/drivers/pci/hotplug/shpchp_core.c
--- linux-4.0.orig/drivers/pci/hotplug/shpchp_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/hotplug/shpchp_core.c	2015-04-28 19:05:51.603339440 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+deferred_module_init(shpcd_init);
 module_exit(shpcd_cleanup);
Only in linux-4.0/drivers/pci/hotplug: shpchp_core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c linux-4.0/drivers/pci/pcie/portdrv_pci.c
--- linux-4.0.orig/drivers/pci/pcie/portdrv_pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/pci/pcie/portdrv_pci.c	2015-04-28 19:05:51.604339440 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+deferred_module_init(pcie_portdrv_init);
Only in linux-4.0/drivers/pci/pcie: portdrv_pci.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/tty/serial/8250/8250_core.c linux-4.0/drivers/tty/serial/8250/8250_core.c
--- linux-4.0.orig/drivers/tty/serial/8250/8250_core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/tty/serial/8250/8250_core.c	2015-04-27 00:44:32.087411372 +0100
@@ -3836,7 +3836,7 @@ static void __exit serial8250_exit(void)
 #endif
 }
 
-module_init(serial8250_init);
+deferred_module_init(serial8250_init);
 module_exit(serial8250_exit);
 
 EXPORT_SYMBOL(serial8250_suspend_port);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio.c linux-4.0/drivers/uio/uio.c
--- linux-4.0.orig/drivers/uio/uio.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio.c	2015-04-27 21:42:04.272242454 +0100
@@ -887,6 +887,6 @@ static void __exit uio_exit(void)
 	release_uio_class();
 }
 
-module_init(uio_init)
+deferred_module_init(uio_init)
 module_exit(uio_exit)
 MODULE_LICENSE("GPL v2");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/uio/uio_cif.c linux-4.0/drivers/uio/uio_cif.c
--- linux-4.0.orig/drivers/uio/uio_cif.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/uio/uio_cif.c	2015-04-27 22:52:10.276292192 +0100
@@ -134,7 +134,7 @@ static struct pci_driver hilscher_pci_dr
 	.remove = hilscher_pci_remove,
 };
 
-module_pci_driver(hilscher_pci_driver);
+deferred_module_pci_driver(hilscher_pci_driver);
 MODULE_DEVICE_TABLE(pci, hilscher_pci_ids);
 MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Hans J. Koch, Benedikt Spranger");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-hcd.c linux-4.0/drivers/usb/host/ehci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ehci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-hcd.c	2015-04-28 19:05:51.604339440 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+deferred_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
Only in linux-4.0/drivers/usb/host: ehci-hcd.c.orig
Only in linux-4.0/drivers/usb/host: ehci-hcd.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-pci.c linux-4.0/drivers/usb/host/ehci-pci.c
--- linux-4.0.orig/drivers/usb/host/ehci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-pci.c	2015-04-28 19:05:51.605339440 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+deferred_module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
Only in linux-4.0/drivers/usb/host: ehci-pci.c.orig
Only in linux-4.0/drivers/usb/host: ehci-pci.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ehci-platform.c linux-4.0/drivers/usb/host/ehci-platform.c
--- linux-4.0.orig/drivers/usb/host/ehci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ehci-platform.c	2015-04-28 19:05:51.606339440 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+deferred_module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
Only in linux-4.0/drivers/usb/host: ehci-platform.c.orig
Only in linux-4.0/drivers/usb/host: ehci-platform.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-hcd.c linux-4.0/drivers/usb/host/ohci-hcd.c
--- linux-4.0.orig/drivers/usb/host/ohci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-hcd.c	2015-04-28 19:05:51.606339440 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+deferred_module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
Only in linux-4.0/drivers/usb/host: ohci-hcd.c.orig
Only in linux-4.0/drivers/usb/host: ohci-hcd.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-pci.c linux-4.0/drivers/usb/host/ohci-pci.c
--- linux-4.0.orig/drivers/usb/host/ohci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-pci.c	2015-04-28 19:05:51.607339440 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+deferred_module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
Only in linux-4.0/drivers/usb/host: ohci-pci.c.orig
Only in linux-4.0/drivers/usb/host: ohci-pci.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ohci-platform.c linux-4.0/drivers/usb/host/ohci-platform.c
--- linux-4.0.orig/drivers/usb/host/ohci-platform.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ohci-platform.c	2015-04-28 19:05:51.608339440 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+deferred_module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
Only in linux-4.0/drivers/usb/host: ohci-platform.c.orig
Only in linux-4.0/drivers/usb/host: ohci-platform.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/ssb-hcd.c linux-4.0/drivers/usb/host/ssb-hcd.c
--- linux-4.0.orig/drivers/usb/host/ssb-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/ssb-hcd.c	2015-04-28 19:05:51.608339440 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+deferred_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
Only in linux-4.0/drivers/usb/host: ssb-hcd.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/uhci-hcd.c linux-4.0/drivers/usb/host/uhci-hcd.c
--- linux-4.0.orig/drivers/usb/host/uhci-hcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/uhci-hcd.c	2015-04-28 19:05:51.609339440 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+deferred_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.0/drivers/usb/host: uhci-hcd.c.orig
Only in linux-4.0/drivers/usb/host: uhci-hcd.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/xhci.c linux-4.0/drivers/usb/host/xhci.c
--- linux-4.0.orig/drivers/usb/host/xhci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/xhci.c	2015-04-27 22:36:45.830281260 +0100
@@ -5011,4 +5011,4 @@ static int __init xhci_hcd_init(void)
 	BUILD_BUG_ON(sizeof(struct xhci_run_regs) != (8+8*128)*32/8);
 	return 0;
 }
-module_init(xhci_hcd_init);
+deferred_module_init(xhci_hcd_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/xhci-pci.c linux-4.0/drivers/usb/host/xhci-pci.c
--- linux-4.0.orig/drivers/usb/host/xhci-pci.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/xhci-pci.c	2015-04-27 22:36:48.371281290 +0100
@@ -386,7 +386,7 @@ static int __init xhci_pci_init(void)
 #endif
 	return pci_register_driver(&xhci_pci_driver);
 }
-module_init(xhci_pci_init);
+deferred_module_init(xhci_pci_init);
 
 static void __exit xhci_pci_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/drivers/usb/host/xhci-plat.c linux-4.0/drivers/usb/host/xhci-plat.c
--- linux-4.0.orig/drivers/usb/host/xhci-plat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/drivers/usb/host/xhci-plat.c	2015-04-27 22:36:48.358281290 +0100
@@ -258,7 +258,7 @@ static int __init xhci_plat_init(void)
 	xhci_plat_hc_driver.start = xhci_plat_start;
 	return platform_driver_register(&usb_xhci_driver);
 }
-module_init(xhci_plat_init);
+deferred_module_init(xhci_plat_init);
 
 static void __exit xhci_plat_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/cifs/cifsfs.c linux-4.0/fs/cifs/cifsfs.c
--- linux-4.0.orig/fs/cifs/cifsfs.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/cifs/cifsfs.c	2015-04-23 23:19:45.719851229 +0100
@@ -1314,5 +1314,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+module_init(init_cifs);
 module_exit(exit_cifs)
Only in linux-4.0/fs/cifs: cifsfs.c.orig
Only in linux-4.0/fs/cifs: cifsfs.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/inode.c linux-4.0/fs/fat/inode.c
--- linux-4.0.orig/fs/fat/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/inode.c	2015-04-28 19:05:51.612339440 +0100
@@ -1855,7 +1855,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+deferred_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
Only in linux-4.0/fs/fat: inode.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_msdos.c linux-4.0/fs/fat/namei_msdos.c
--- linux-4.0.orig/fs/fat/namei_msdos.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_msdos.c	2015-04-28 19:05:51.613339440 +0100
@@ -682,5 +682,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+deferred_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
Only in linux-4.0/fs/fat: namei_msdos.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/fat/namei_vfat.c linux-4.0/fs/fat/namei_vfat.c
--- linux-4.0.orig/fs/fat/namei_vfat.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/fat/namei_vfat.c	2015-04-28 19:05:51.614339440 +0100
@@ -1087,5 +1087,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+deferred_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
Only in linux-4.0/fs/fat: namei_vfat.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/isofs/inode.c linux-4.0/fs/isofs/inode.c
--- linux-4.0.orig/fs/isofs/inode.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/isofs/inode.c	2015-04-28 19:05:51.615339440 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+deferred_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
Only in linux-4.0/fs/isofs: inode.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/fs/ntfs/super.c linux-4.0/fs/ntfs/super.c
--- linux-4.0.orig/fs/ntfs/super.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/fs/ntfs/super.c	2015-04-28 19:05:51.616339440 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+deferred_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
Only in linux-4.0/fs/ntfs: super.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/acpi/acpi_bus.h linux-4.0/include/acpi/acpi_bus.h
--- linux-4.0.orig/include/acpi/acpi_bus.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/acpi/acpi_bus.h	2015-04-27 00:15:43.326390929 +0100
@@ -501,7 +501,7 @@ static inline bool acpi_device_enumerate
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_acpi_driver(__acpi_driver) \
-	module_driver(__acpi_driver, acpi_bus_register_driver, \
+	deferred_module_driver(__acpi_driver, acpi_bus_register_driver, \
 		      acpi_bus_unregister_driver)
 
 /*
Only in linux-4.0/include/acpi: acpi_bus.h.orig
Only in linux-4.0/include/acpi: acpi_bus.h.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/asm-generic/vmlinux.lds.h linux-4.0/include/asm-generic/vmlinux.lds.h
--- linux-4.0.orig/include/asm-generic/vmlinux.lds.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/asm-generic/vmlinux.lds.h	2015-04-28 19:05:51.619339440 +0100
@@ -632,6 +632,16 @@
 		*(.initcall##level##.init)				\
 		*(.initcall##level##s.init)				\
 
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
 #define INIT_CALLS							\
 		VMLINUX_SYMBOL(__initcall_start) = .;			\
 		*(.initcallearly.init)					\
@@ -802,6 +812,8 @@
 		INIT_DATA						\
 		INIT_SETUP(initsetup_align)				\
 		INIT_CALLS						\
+		ASYNC_INITCALLS   \
+		MODULES_DEPENDENCIES    \
 		CON_INITCALL						\
 		SECURITY_INITCALL					\
 		INIT_RAM_FS						\
Only in linux-4.0/include/asm-generic: vmlinux.lds.h.orig
Only in linux-4.0/include/asm-generic: vmlinux.lds.h.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/device.h linux-4.0/include/linux/device.h
--- linux-4.0.orig/include/linux/device.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/device.h	2015-04-28 19:05:51.621339440 +0100
@@ -13,6 +13,7 @@
 #ifndef _DEVICE_H_
 #define _DEVICE_H_
 
+#include <linux/async_minit.h>
 #include <linux/ioport.h>
 #include <linux/kobject.h>
 #include <linux/klist.h>
@@ -1266,4 +1267,5 @@ static void __exit __driver##_exit(void)
 } \
 module_exit(__driver##_exit);
 
+
 #endif /* _DEVICE_H_ */
Only in linux-4.0/include/linux: device.h.orig
Only in linux-4.0/include/linux: device.h.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/hid.h linux-4.0/include/linux/hid.h
--- linux-4.0.orig/include/linux/hid.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/hid.h	2015-04-28 19:05:51.622339441 +0100
@@ -782,8 +782,10 @@ extern void hid_unregister_driver(struct
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_hid_driver(__hid_driver) \
-	module_driver(__hid_driver, hid_register_driver, \
-		      hid_unregister_driver)
+	deferred_module_driver(__hid_driver, hid_register_driver, \
+		      hid_unregister_driver); \
+     ADD_MODULE_DEPENDENCY(__hid_driver##_init, hid_init);		\
+     ADD_MODULE_DEPENDENCY(__hid_driver##_init, uhid_init);
 
 extern void hidinput_hid_event(struct hid_device *, struct hid_field *, struct hid_usage *, __s32);
 extern void hidinput_report_event(struct hid_device *hid, struct hid_report *report);
Only in linux-4.0/include/linux: hid.h.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/module.h linux-4.0/include/linux/module.h
--- linux-4.0.orig/include/linux/module.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/module.h	2015-04-28 19:05:51.622339441 +0100
@@ -6,6 +6,7 @@
  * Rewritten by Richard Henderson <rth@tamu.edu> Dec 1996
  * Rewritten again by Rusty Russell, 2002
  */
+#include "linux/async_minit.h"
 #include <linux/list.h>
 #include <linux/stat.h>
 #include <linux/compiler.h>
Only in linux-4.0/include/linux: module.h.orig
Only in linux-4.0/include/linux: module.h.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/pci.h linux-4.0/include/linux/pci.h
--- linux-4.0.orig/include/linux/pci.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/pci.h	2015-04-20 22:17:20.506170508 +0100
@@ -16,7 +16,7 @@
 #ifndef LINUX_PCI_H
 #define LINUX_PCI_H
 
-
+#include <linux/async_minit.h>
 #include <linux/mod_devicetable.h>
 
 #include <linux/types.h>
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/include/linux/usb.h linux-4.0/include/linux/usb.h
--- linux-4.0.orig/include/linux/usb.h	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/include/linux/usb.h	2015-04-25 00:24:16.042198490 +0100
@@ -1,6 +1,7 @@
 #ifndef __LINUX_USB_H
 #define __LINUX_USB_H
 
+#include <linux/async_minit.h>
 #include <linux/mod_devicetable.h>
 #include <linux/usb/ch9.h>
 
@@ -1158,7 +1159,7 @@ extern void usb_deregister(struct usb_dr
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_usb_driver(__usb_driver) \
-	module_driver(__usb_driver, usb_register, \
+	deferred_module_driver(__usb_driver, usb_register, \
 		       usb_deregister)
 
 extern int usb_register_device_driver(struct usb_device_driver *,
Only in linux-4.0/include/linux: usb.h.orig
Only in linux-4.0/include/linux: usb.h.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/init/main.c linux-4.0/init/main.c
--- linux-4.0.orig/init/main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/init/main.c	2015-04-28 19:05:51.626339441 +0100
@@ -928,7 +928,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
Only in linux-4.0/init: main.c.orig
Only in linux-4.0/init: main.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/net/bluetooth/rfcomm/core.c linux-4.0/net/bluetooth/rfcomm/core.c
--- linux-4.0.orig/net/bluetooth/rfcomm/core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/net/bluetooth/rfcomm/core.c	2015-04-27 22:14:59.805265816 +0100
@@ -2255,7 +2255,7 @@ static void __exit rfcomm_exit(void)
 	rfcomm_cleanup_sockets();
 }
 
-module_init(rfcomm_init);
+deferred_module_init(rfcomm_init);
 module_exit(rfcomm_exit);
 
 module_param(disable_cfc, bool, 0644);
Only in linux-4.0: out
Only in linux-4.0: .project
Only in linux-4.0: .project.orig
Only in linux-4.0: .project.rej
Only in linux-4.0: .settings
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/compress_offload.c linux-4.0/sound/core/compress_offload.c
--- linux-4.0.orig/sound/core/compress_offload.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/compress_offload.c	2015-04-28 19:05:51.627339441 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+deferred_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
Only in linux-4.0/sound/core: compress_offload.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hrtimer.c linux-4.0/sound/core/hrtimer.c
--- linux-4.0.orig/sound/core/hrtimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hrtimer.c	2015-04-28 19:05:51.627339441 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+deferred_module_init(snd_hrtimer_init);
 module_exit(snd_hrtimer_exit);
Only in linux-4.0/sound/core: hrtimer.c.orig
Only in linux-4.0/sound/core: hrtimer.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/hwdep.c linux-4.0/sound/core/hwdep.c
--- linux-4.0.orig/sound/core/hwdep.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/hwdep.c	2015-04-28 19:05:51.628339441 +0100
@@ -548,5 +548,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+deferred_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
Only in linux-4.0/sound/core: hwdep.c.orig
Only in linux-4.0/sound/core: hwdep.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/mixer_oss.c linux-4.0/sound/core/oss/mixer_oss.c
--- linux-4.0.orig/sound/core/oss/mixer_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/mixer_oss.c	2015-04-28 19:05:51.629339441 +0100
@@ -1418,7 +1418,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+deferred_module_init(alsa_mixer_oss_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
Only in linux-4.0/sound/core/oss: mixer_oss.c.orig
Only in linux-4.0/sound/core/oss: mixer_oss.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/oss/pcm_oss.c linux-4.0/sound/core/oss/pcm_oss.c
--- linux-4.0.orig/sound/core/oss/pcm_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/oss/pcm_oss.c	2015-04-28 19:05:51.630339441 +0100
@@ -3108,5 +3108,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+deferred_module_init(alsa_pcm_oss_init)
 module_exit(alsa_pcm_oss_exit)
Only in linux-4.0/sound/core/oss: pcm_oss.c.orig
Only in linux-4.0/sound/core/oss: pcm_oss.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/pcm.c linux-4.0/sound/core/pcm.c
--- linux-4.0.orig/sound/core/pcm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/pcm.c	2015-04-28 19:05:51.632339441 +0100
@@ -1269,5 +1269,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+deferred_module_init(alsa_pcm_init)
 module_exit(alsa_pcm_exit)
Only in linux-4.0/sound/core: pcm.c.orig
Only in linux-4.0/sound/core: pcm.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rawmidi.c linux-4.0/sound/core/rawmidi.c
--- linux-4.0.orig/sound/core/rawmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rawmidi.c	2015-04-28 19:05:51.633339441 +0100
@@ -1739,5 +1739,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+deferred_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
Only in linux-4.0/sound/core: rawmidi.c.orig
Only in linux-4.0/sound/core: rawmidi.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/rtctimer.c linux-4.0/sound/core/rtctimer.c
--- linux-4.0.orig/sound/core/rtctimer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/rtctimer.c	2015-04-28 19:05:51.634339441 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+deferred_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
Only in linux-4.0/sound/core: rtctimer.c.orig
Only in linux-4.0/sound/core: rtctimer.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/oss/seq_oss.c linux-4.0/sound/core/seq/oss/seq_oss.c
--- linux-4.0.orig/sound/core/seq/oss/seq_oss.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/oss/seq_oss.c	2015-04-28 19:05:51.634339441 +0100
@@ -110,7 +110,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+deferred_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
Only in linux-4.0/sound/core/seq/oss: seq_oss.c.orig
Only in linux-4.0/sound/core/seq/oss: seq_oss.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq.c linux-4.0/sound/core/seq/seq.c
--- linux-4.0.orig/sound/core/seq/seq.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq.c	2015-04-28 19:05:51.634339441 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+deferred_module_init(alsa_seq_init)
 module_exit(alsa_seq_exit)
Only in linux-4.0/sound/core/seq: seq.c.orig
Only in linux-4.0/sound/core/seq: seq.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_device.c linux-4.0/sound/core/seq/seq_device.c
--- linux-4.0.orig/sound/core/seq/seq_device.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_device.c	2015-04-28 19:05:51.635339441 +0100
@@ -602,7 +602,7 @@ static void __exit alsa_seq_device_exit(
 		pr_err("ALSA: seq: drivers not released (%d)\n", num_ops);
 }
 
-module_init(alsa_seq_device_init)
+deferred_module_init(alsa_seq_device_init)
 module_exit(alsa_seq_device_exit)
 
 EXPORT_SYMBOL(snd_seq_device_load_drivers);
Only in linux-4.0/sound/core/seq: seq_device.c.orig
Only in linux-4.0/sound/core/seq: seq_device.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_dummy.c linux-4.0/sound/core/seq/seq_dummy.c
--- linux-4.0.orig/sound/core/seq/seq_dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_dummy.c	2015-04-28 19:05:51.635339441 +0100
@@ -226,5 +226,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+deferred_module_init(alsa_seq_dummy_init)
 module_exit(alsa_seq_dummy_exit)
Only in linux-4.0/sound/core/seq: seq_dummy.c.orig
Only in linux-4.0/sound/core/seq: seq_dummy.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi.c linux-4.0/sound/core/seq/seq_midi.c
--- linux-4.0.orig/sound/core/seq/seq_midi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi.c	2015-04-27 00:21:34.702395084 +0100
@@ -476,5 +476,5 @@ static void __exit alsa_seq_midi_exit(vo
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_MIDISYNTH);
 }
 
-module_init(alsa_seq_midi_init)
+deferred_module_init(alsa_seq_midi_init,alsa_seq_init)
 module_exit(alsa_seq_midi_exit)
Only in linux-4.0/sound/core/seq: seq_midi.c.orig
Only in linux-4.0/sound/core/seq: seq_midi.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_emul.c linux-4.0/sound/core/seq/seq_midi_emul.c
--- linux-4.0.orig/sound/core/seq/seq_midi_emul.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_emul.c	2015-04-28 19:05:51.637339441 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+deferred_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
Only in linux-4.0/sound/core/seq: seq_midi_emul.c.orig
Only in linux-4.0/sound/core/seq: seq_midi_emul.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_midi_event.c linux-4.0/sound/core/seq/seq_midi_event.c
--- linux-4.0.orig/sound/core/seq/seq_midi_event.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_midi_event.c	2015-04-28 19:05:51.638339441 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+deferred_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
Only in linux-4.0/sound/core/seq: seq_midi_event.c.orig
Only in linux-4.0/sound/core/seq: seq_midi_event.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/seq/seq_virmidi.c linux-4.0/sound/core/seq/seq_virmidi.c
--- linux-4.0.orig/sound/core/seq/seq_virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/seq/seq_virmidi.c	2015-04-28 19:05:51.638339441 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+deferred_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
Only in linux-4.0/sound/core/seq: seq_virmidi.c.orig
Only in linux-4.0/sound/core/seq: seq_virmidi.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/core/timer.c linux-4.0/sound/core/timer.c
--- linux-4.0.orig/sound/core/timer.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/core/timer.c	2015-04-28 19:05:51.640339441 +0100
@@ -1998,7 +1998,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+deferred_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
Only in linux-4.0/sound/core: timer.c.orig
Only in linux-4.0/sound/core: timer.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/aloop.c linux-4.0/sound/drivers/aloop.c
--- linux-4.0.orig/sound/drivers/aloop.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/aloop.c	2015-04-28 19:05:51.641339441 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+deferred_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
Only in linux-4.0/sound/drivers: aloop.c.orig
Only in linux-4.0/sound/drivers: aloop.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/dummy.c linux-4.0/sound/drivers/dummy.c
--- linux-4.0.orig/sound/drivers/dummy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/dummy.c	2015-04-28 19:05:51.642339441 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+deferred_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
Only in linux-4.0/sound/drivers: dummy.c.orig
Only in linux-4.0/sound/drivers: dummy.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401.c linux-4.0/sound/drivers/mpu401/mpu401.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401.c	2015-04-28 19:05:51.643339441 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+deferred_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
Only in linux-4.0/sound/drivers/mpu401: mpu401.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.0/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.0.orig/sound/drivers/mpu401/mpu401_uart.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/mpu401/mpu401_uart.c	2015-04-28 19:05:51.643339441 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+deferred_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
Only in linux-4.0/sound/drivers/mpu401: mpu401_uart.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/drivers/virmidi.c linux-4.0/sound/drivers/virmidi.c
--- linux-4.0.orig/sound/drivers/virmidi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/drivers/virmidi.c	2015-04-28 19:05:51.644339441 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+deferred_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
Only in linux-4.0/sound/drivers: virmidi.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/firewire/dice/dice.c linux-4.0/sound/firewire/dice/dice.c
--- linux-4.0.orig/sound/firewire/dice/dice.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/firewire/dice/dice.c	2015-04-27 00:21:34.739395084 +0100
@@ -363,5 +363,5 @@ static void __exit alsa_dice_exit(void)
 	driver_unregister(&dice_driver.driver);
 }
 
-module_init(alsa_dice_init);
+deferred_module_init(alsa_dice_init);
 module_exit(alsa_dice_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/firewire/fcp.c linux-4.0/sound/firewire/fcp.c
--- linux-4.0.orig/sound/firewire/fcp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/firewire/fcp.c	2015-04-27 00:21:34.742395085 +0100
@@ -374,7 +374,7 @@ static struct fw_address_handler respons
 	.address_callback = fcp_response,
 };
 
-static int __init fcp_module_init(void)
+static int __init fcp_deferred_module_init(void)
 {
 	static const struct fw_address_region response_register_region = {
 		.start = CSR_REGISTER_BASE + CSR_FCP_RESPONSE,
@@ -393,5 +393,5 @@ static void __exit fcp_module_exit(void)
 	fw_core_remove_address_handler(&response_register_handler);
 }
 
-module_init(fcp_module_init);
+deferred_module_init(fcp_deferred_module_init);
 module_exit(fcp_module_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/firewire/fireworks/fireworks.c linux-4.0/sound/firewire/fireworks/fireworks.c
--- linux-4.0.orig/sound/firewire/fireworks/fireworks.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/firewire/fireworks/fireworks.c	2015-04-27 00:21:34.744395085 +0100
@@ -356,5 +356,5 @@ static void __exit snd_efw_exit(void)
 	driver_unregister(&efw_driver.driver);
 }
 
-module_init(snd_efw_init);
+deferred_module_init(snd_efw_init);
 module_exit(snd_efw_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/firewire/isight.c linux-4.0/sound/firewire/isight.c
--- linux-4.0.orig/sound/firewire/isight.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/firewire/isight.c	2015-04-27 00:21:34.747395085 +0100
@@ -738,5 +738,5 @@ static void __exit alsa_isight_exit(void
 	driver_unregister(&isight_driver.driver);
 }
 
-module_init(alsa_isight_init);
+deferred_module_init(alsa_isight_init);
 module_exit(alsa_isight_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/firewire/oxfw/oxfw.c linux-4.0/sound/firewire/oxfw/oxfw.c
--- linux-4.0.orig/sound/firewire/oxfw/oxfw.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/firewire/oxfw/oxfw.c	2015-04-27 00:21:34.755395085 +0100
@@ -320,5 +320,5 @@ static void __exit snd_oxfw_exit(void)
 	driver_unregister(&oxfw_driver.driver);
 }
 
-module_init(snd_oxfw_init);
+deferred_module_init(snd_oxfw_init);
 module_exit(snd_oxfw_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/firewire/scs1x.c linux-4.0/sound/firewire/scs1x.c
--- linux-4.0.orig/sound/firewire/scs1x.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/firewire/scs1x.c	2015-04-27 00:21:34.758395085 +0100
@@ -526,5 +526,5 @@ static void __exit alsa_scs1x_exit(void)
 	driver_unregister(&scs_driver.driver);
 }
 
-module_init(alsa_scs1x_init);
+deferred_module_init(alsa_scs1x_init);
 module_exit(alsa_scs1x_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/i2c/cs8427.c linux-4.0/sound/i2c/cs8427.c
--- linux-4.0.orig/sound/i2c/cs8427.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/i2c/cs8427.c	2015-04-27 00:21:34.765395085 +0100
@@ -622,7 +622,7 @@ int snd_cs8427_iec958_pcm(struct snd_i2c
 
 EXPORT_SYMBOL(snd_cs8427_iec958_pcm);
 
-static int __init alsa_cs8427_module_init(void)
+static int __init alsa_cs8427_deferred_module_init(void)
 {
 	return 0;
 }
@@ -631,5 +631,5 @@ static void __exit alsa_cs8427_module_ex
 {
 }
 
-module_init(alsa_cs8427_module_init)
+deferred_module_init(alsa_cs8427_deferred_module_init)
 module_exit(alsa_cs8427_module_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/i2c/i2c.c linux-4.0/sound/i2c/i2c.c
--- linux-4.0.orig/sound/i2c/i2c.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/i2c/i2c.c	2015-04-27 00:21:34.767395085 +0100
@@ -349,5 +349,5 @@ static void __exit alsa_i2c_exit(void)
 {
 }
 
-module_init(alsa_i2c_init)
+deferred_module_init(alsa_i2c_init)
 module_exit(alsa_i2c_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/i2c/other/ak4xxx-adda.c linux-4.0/sound/i2c/other/ak4xxx-adda.c
--- linux-4.0.orig/sound/i2c/other/ak4xxx-adda.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/i2c/other/ak4xxx-adda.c	2015-04-27 00:21:34.770395085 +0100
@@ -916,7 +916,7 @@ int snd_akm4xxx_build_controls(struct sn
 }
 EXPORT_SYMBOL(snd_akm4xxx_build_controls);
 
-static int __init alsa_akm4xxx_module_init(void)
+static int __init alsa_akm4xxx_deferred_module_init(void)
 {
 	return 0;
 }
@@ -925,5 +925,5 @@ static void __exit alsa_akm4xxx_module_e
 {
 }
         
-module_init(alsa_akm4xxx_module_init)
+deferred_module_init(alsa_akm4xxx_deferred_module_init)
 module_exit(alsa_akm4xxx_module_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/i2c/tea6330t.c linux-4.0/sound/i2c/tea6330t.c
--- linux-4.0.orig/sound/i2c/tea6330t.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/i2c/tea6330t.c	2015-04-27 00:21:34.772395085 +0100
@@ -382,5 +382,5 @@ static void __exit alsa_tea6330t_exit(vo
 {
 }
 
-module_init(alsa_tea6330t_init)
+deferred_module_init(alsa_tea6330t_init)
 module_exit(alsa_tea6330t_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/ad1816a/ad1816a.c linux-4.0/sound/isa/ad1816a/ad1816a.c
--- linux-4.0.orig/sound/isa/ad1816a/ad1816a.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/ad1816a/ad1816a.c	2015-04-27 00:21:34.830395086 +0100
@@ -299,5 +299,5 @@ static void __exit alsa_card_ad1816a_exi
 	pnp_unregister_card_driver(&ad1816a_pnpc_driver);
 }
 
-module_init(alsa_card_ad1816a_init)
+deferred_module_init(alsa_card_ad1816a_init)
 module_exit(alsa_card_ad1816a_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/ad1848/ad1848.c linux-4.0/sound/isa/ad1848/ad1848.c
--- linux-4.0.orig/sound/isa/ad1848/ad1848.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/ad1848/ad1848.c	2015-04-27 00:21:34.832395086 +0100
@@ -180,5 +180,5 @@ static void __exit alsa_card_ad1848_exit
 	isa_unregister_driver(&snd_ad1848_driver);
 }
 
-module_init(alsa_card_ad1848_init);
+deferred_module_init(alsa_card_ad1848_init);
 module_exit(alsa_card_ad1848_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/adlib.c linux-4.0/sound/isa/adlib.c
--- linux-4.0.orig/sound/isa/adlib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/adlib.c	2015-04-27 00:21:34.834395086 +0100
@@ -122,5 +122,5 @@ static void __exit alsa_card_adlib_exit(
 	isa_unregister_driver(&snd_adlib_driver);
 }
 
-module_init(alsa_card_adlib_init);
+deferred_module_init(alsa_card_adlib_init);
 module_exit(alsa_card_adlib_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/als100.c linux-4.0/sound/isa/als100.c
--- linux-4.0.orig/sound/isa/als100.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/als100.c	2015-04-27 00:21:34.835395086 +0100
@@ -374,5 +374,5 @@ static void __exit alsa_card_als100_exit
 	pnp_unregister_card_driver(&als100_pnpc_driver);
 }
 
-module_init(alsa_card_als100_init)
+deferred_module_init(alsa_card_als100_init)
 module_exit(alsa_card_als100_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/azt2320.c linux-4.0/sound/isa/azt2320.c
--- linux-4.0.orig/sound/isa/azt2320.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/azt2320.c	2015-04-27 00:21:34.837395086 +0100
@@ -350,5 +350,5 @@ static void __exit alsa_card_azt2320_exi
 	pnp_unregister_card_driver(&azt2320_pnpc_driver);
 }
 
-module_init(alsa_card_azt2320_init)
+deferred_module_init(alsa_card_azt2320_init)
 module_exit(alsa_card_azt2320_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/cmi8328.c linux-4.0/sound/isa/cmi8328.c
--- linux-4.0.orig/sound/isa/cmi8328.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/cmi8328.c	2015-04-27 00:21:34.839395086 +0100
@@ -479,5 +479,5 @@ static void __exit alsa_card_cmi8328_exi
 	isa_unregister_driver(&snd_cmi8328_driver);
 }
 
-module_init(alsa_card_cmi8328_init)
+deferred_module_init(alsa_card_cmi8328_init)
 module_exit(alsa_card_cmi8328_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/cmi8330.c linux-4.0/sound/isa/cmi8330.c
--- linux-4.0.orig/sound/isa/cmi8330.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/cmi8330.c	2015-04-27 00:21:34.842395086 +0100
@@ -776,5 +776,5 @@ static void __exit alsa_card_cmi8330_exi
 		isa_unregister_driver(&snd_cmi8330_driver);
 }
 
-module_init(alsa_card_cmi8330_init)
+deferred_module_init(alsa_card_cmi8330_init)
 module_exit(alsa_card_cmi8330_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/cs423x/cs4231.c linux-4.0/sound/isa/cs423x/cs4231.c
--- linux-4.0.orig/sound/isa/cs423x/cs4231.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/cs423x/cs4231.c	2015-04-27 00:21:34.844395086 +0100
@@ -196,5 +196,5 @@ static void __exit alsa_card_cs4231_exit
 	isa_unregister_driver(&snd_cs4231_driver);
 }
 
-module_init(alsa_card_cs4231_init);
+deferred_module_init(alsa_card_cs4231_init);
 module_exit(alsa_card_cs4231_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/cs423x/cs4236.c linux-4.0/sound/isa/cs423x/cs4236.c
--- linux-4.0.orig/sound/isa/cs423x/cs4236.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/cs423x/cs4236.c	2015-04-27 00:21:34.846395086 +0100
@@ -719,5 +719,5 @@ static void __exit alsa_card_cs423x_exit
 		isa_unregister_driver(&cs423x_isa_driver);
 }
 
-module_init(alsa_card_cs423x_init)
+deferred_module_init(alsa_card_cs423x_init)
 module_exit(alsa_card_cs423x_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/es1688/es1688.c linux-4.0/sound/isa/es1688/es1688.c
--- linux-4.0.orig/sound/isa/es1688/es1688.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/es1688/es1688.c	2015-04-27 00:21:34.851395086 +0100
@@ -364,5 +364,5 @@ static void __exit alsa_card_es1688_exit
 #endif
 }
 
-module_init(alsa_card_es1688_init);
+deferred_module_init(alsa_card_es1688_init);
 module_exit(alsa_card_es1688_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/es1688/es1688_lib.c linux-4.0/sound/isa/es1688/es1688_lib.c
--- linux-4.0.orig/sound/isa/es1688/es1688_lib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/es1688/es1688_lib.c	2015-04-27 00:21:34.849395086 +0100
@@ -1043,5 +1043,5 @@ static void __exit alsa_es1688_exit(void
 {
 }
 
-module_init(alsa_es1688_init)
+deferred_module_init(alsa_es1688_init)
 module_exit(alsa_es1688_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/es18xx.c linux-4.0/sound/isa/es18xx.c
--- linux-4.0.orig/sound/isa/es18xx.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/es18xx.c	2015-04-27 00:21:34.855395086 +0100
@@ -2436,5 +2436,5 @@ static void __exit alsa_card_es18xx_exit
 		isa_unregister_driver(&snd_es18xx_isa_driver);
 }
 
-module_init(alsa_card_es18xx_init)
+deferred_module_init(alsa_card_es18xx_init)
 module_exit(alsa_card_es18xx_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/galaxy/galaxy.c linux-4.0/sound/isa/galaxy/galaxy.c
--- linux-4.0.orig/sound/isa/galaxy/galaxy.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/galaxy/galaxy.c	2015-04-27 00:21:34.857395086 +0100
@@ -644,5 +644,5 @@ static void __exit alsa_card_galaxy_exit
 	isa_unregister_driver(&snd_galaxy_driver);
 }
 
-module_init(alsa_card_galaxy_init);
+deferred_module_init(alsa_card_galaxy_init);
 module_exit(alsa_card_galaxy_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/gus/gusclassic.c linux-4.0/sound/isa/gus/gusclassic.c
--- linux-4.0.orig/sound/isa/gus/gusclassic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/gus/gusclassic.c	2015-04-27 00:21:34.861395086 +0100
@@ -239,5 +239,5 @@ static void __exit alsa_card_gusclassic_
 	isa_unregister_driver(&snd_gusclassic_driver);
 }
 
-module_init(alsa_card_gusclassic_init);
+deferred_module_init(alsa_card_gusclassic_init);
 module_exit(alsa_card_gusclassic_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/gus/gusextreme.c linux-4.0/sound/isa/gus/gusextreme.c
--- linux-4.0.orig/sound/isa/gus/gusextreme.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/gus/gusextreme.c	2015-04-27 00:21:34.863395086 +0100
@@ -368,5 +368,5 @@ static void __exit alsa_card_gusextreme_
 	isa_unregister_driver(&snd_gusextreme_driver);
 }
 
-module_init(alsa_card_gusextreme_init);
+deferred_module_init(alsa_card_gusextreme_init);
 module_exit(alsa_card_gusextreme_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/gus/gus_main.c linux-4.0/sound/isa/gus/gus_main.c
--- linux-4.0.orig/sound/isa/gus/gus_main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/gus/gus_main.c	2015-04-27 00:21:34.860395086 +0100
@@ -479,5 +479,5 @@ static void __exit alsa_gus_exit(void)
 {
 }
 
-module_init(alsa_gus_init)
+deferred_module_init(alsa_gus_init)
 module_exit(alsa_gus_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/gus/gusmax.c linux-4.0/sound/isa/gus/gusmax.c
--- linux-4.0.orig/sound/isa/gus/gusmax.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/gus/gusmax.c	2015-04-27 00:21:34.865395086 +0100
@@ -380,5 +380,5 @@ static void __exit alsa_card_gusmax_exit
 	isa_unregister_driver(&snd_gusmax_driver);
 }
 
-module_init(alsa_card_gusmax_init)
+deferred_module_init(alsa_card_gusmax_init)
 module_exit(alsa_card_gusmax_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/gus/interwave.c linux-4.0/sound/isa/gus/interwave.c
--- linux-4.0.orig/sound/isa/gus/interwave.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/gus/interwave.c	2015-04-27 00:21:34.868395086 +0100
@@ -933,5 +933,5 @@ static void __exit alsa_card_interwave_e
 		isa_unregister_driver(&snd_interwave_driver);
 }
 
-module_init(alsa_card_interwave_init)
+deferred_module_init(alsa_card_interwave_init)
 module_exit(alsa_card_interwave_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/msnd/msnd_pinnacle.c linux-4.0/sound/isa/msnd/msnd_pinnacle.c
--- linux-4.0.orig/sound/isa/msnd/msnd_pinnacle.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/msnd/msnd_pinnacle.c	2015-04-27 00:21:34.871395086 +0100
@@ -1237,6 +1237,6 @@ static void __exit snd_msnd_exit(void)
 		isa_unregister_driver(&snd_msnd_driver);
 }
 
-module_init(snd_msnd_init);
+deferred_module_init(snd_msnd_init);
 module_exit(snd_msnd_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/opl3sa2.c linux-4.0/sound/isa/opl3sa2.c
--- linux-4.0.orig/sound/isa/opl3sa2.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/opl3sa2.c	2015-04-27 00:21:34.874395086 +0100
@@ -962,5 +962,5 @@ static void __exit alsa_card_opl3sa2_exi
 		isa_unregister_driver(&snd_opl3sa2_isa_driver);
 }
 
-module_init(alsa_card_opl3sa2_init)
+deferred_module_init(alsa_card_opl3sa2_init)
 module_exit(alsa_card_opl3sa2_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/opti9xx/miro.c linux-4.0/sound/isa/opti9xx/miro.c
--- linux-4.0.orig/sound/isa/opti9xx/miro.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/opti9xx/miro.c	2015-04-27 00:21:34.879395086 +0100
@@ -1656,5 +1656,5 @@ static void __exit alsa_card_miro_exit(v
 #endif
 }
 
-module_init(alsa_card_miro_init)
+deferred_module_init(alsa_card_miro_init)
 module_exit(alsa_card_miro_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/opti9xx/opti92x-ad1848.c linux-4.0/sound/isa/opti9xx/opti92x-ad1848.c
--- linux-4.0.orig/sound/isa/opti9xx/opti92x-ad1848.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/opti9xx/opti92x-ad1848.c	2015-04-27 00:21:34.882395086 +0100
@@ -1197,5 +1197,5 @@ static void __exit alsa_card_opti9xx_exi
 #endif
 }
 
-module_init(alsa_card_opti9xx_init)
+deferred_module_init(alsa_card_opti9xx_init)
 module_exit(alsa_card_opti9xx_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/emu8000_synth.c linux-4.0/sound/isa/sb/emu8000_synth.c
--- linux-4.0.orig/sound/isa/sb/emu8000_synth.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/emu8000_synth.c	2015-04-27 00:21:34.884395086 +0100
@@ -130,5 +130,5 @@ static void __exit alsa_emu8000_exit(voi
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_EMU8000);
 }
 
-module_init(alsa_emu8000_init)
+deferred_module_init(alsa_emu8000_init)
 module_exit(alsa_emu8000_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/jazz16.c linux-4.0/sound/isa/sb/jazz16.c
--- linux-4.0.orig/sound/isa/sb/jazz16.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/jazz16.c	2015-04-27 00:21:34.887395086 +0100
@@ -397,5 +397,5 @@ static void __exit alsa_card_jazz16_exit
 	isa_unregister_driver(&snd_jazz16_driver);
 }
 
-module_init(alsa_card_jazz16_init)
+deferred_module_init(alsa_card_jazz16_init)
 module_exit(alsa_card_jazz16_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/sb16.c linux-4.0/sound/isa/sb/sb16.c
--- linux-4.0.orig/sound/isa/sb/sb16.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/sb16.c	2015-04-27 00:21:34.897395086 +0100
@@ -693,5 +693,5 @@ static void __exit alsa_card_sb16_exit(v
 		isa_unregister_driver(&snd_sb16_isa_driver);
 }
 
-module_init(alsa_card_sb16_init)
+deferred_module_init(alsa_card_sb16_init)
 module_exit(alsa_card_sb16_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/sb16_csp.c linux-4.0/sound/isa/sb/sb16_csp.c
--- linux-4.0.orig/sound/isa/sb/sb16_csp.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/sb16_csp.c	2015-04-27 00:21:34.892395086 +0100
@@ -1199,5 +1199,5 @@ static void __exit alsa_sb_csp_exit(void
 {
 }
 
-module_init(alsa_sb_csp_init)
+deferred_module_init(alsa_sb_csp_init)
 module_exit(alsa_sb_csp_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/sb16_main.c linux-4.0/sound/isa/sb/sb16_main.c
--- linux-4.0.orig/sound/isa/sb/sb16_main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/sb16_main.c	2015-04-27 00:21:34.894395086 +0100
@@ -911,5 +911,5 @@ static void __exit alsa_sb16_exit(void)
 {
 }
 
-module_init(alsa_sb16_init)
+deferred_module_init(alsa_sb16_init)
 module_exit(alsa_sb16_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/sb8.c linux-4.0/sound/isa/sb/sb8.c
--- linux-4.0.orig/sound/isa/sb/sb8.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/sb8.c	2015-04-27 00:21:34.902395086 +0100
@@ -261,5 +261,5 @@ static void __exit alsa_card_sb8_exit(vo
 	isa_unregister_driver(&snd_sb8_driver);
 }
 
-module_init(alsa_card_sb8_init)
+deferred_module_init(alsa_card_sb8_init)
 module_exit(alsa_card_sb8_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/sb8_main.c linux-4.0/sound/isa/sb/sb8_main.c
--- linux-4.0.orig/sound/isa/sb/sb8_main.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/sb8_main.c	2015-04-27 00:21:34.900395086 +0100
@@ -638,5 +638,5 @@ static void __exit alsa_sb8_exit(void)
 {
 }
 
-module_init(alsa_sb8_init)
+deferred_module_init(alsa_sb8_init)
 module_exit(alsa_sb8_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sb/sb_common.c linux-4.0/sound/isa/sb/sb_common.c
--- linux-4.0.orig/sound/isa/sb/sb_common.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sb/sb_common.c	2015-04-27 00:21:34.888395086 +0100
@@ -319,5 +319,5 @@ static void __exit alsa_sb_common_exit(v
 {
 }
 
-module_init(alsa_sb_common_init)
+deferred_module_init(alsa_sb_common_init)
 module_exit(alsa_sb_common_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sc6000.c linux-4.0/sound/isa/sc6000.c
--- linux-4.0.orig/sound/isa/sc6000.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sc6000.c	2015-04-27 00:21:34.904395086 +0100
@@ -721,5 +721,5 @@ static void __exit alsa_card_sc6000_exit
 	isa_unregister_driver(&snd_sc6000_driver);
 }
 
-module_init(alsa_card_sc6000_init)
+deferred_module_init(alsa_card_sc6000_init)
 module_exit(alsa_card_sc6000_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/sscape.c linux-4.0/sound/isa/sscape.c
--- linux-4.0.orig/sound/isa/sscape.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/sscape.c	2015-04-27 00:21:34.907395086 +0100
@@ -1353,5 +1353,5 @@ static void __exit sscape_exit(void)
 		isa_unregister_driver(&snd_sscape_driver);
 }
 
-module_init(sscape_init);
+deferred_module_init(sscape_init);
 module_exit(sscape_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/wavefront/wavefront.c linux-4.0/sound/isa/wavefront/wavefront.c
--- linux-4.0.orig/sound/isa/wavefront/wavefront.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/wavefront/wavefront.c	2015-04-27 00:21:34.910395087 +0100
@@ -678,5 +678,5 @@ static void __exit alsa_card_wavefront_e
 		isa_unregister_driver(&snd_wavefront_driver);
 }
 
-module_init(alsa_card_wavefront_init)
+deferred_module_init(alsa_card_wavefront_init)
 module_exit(alsa_card_wavefront_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/isa/wss/wss_lib.c linux-4.0/sound/isa/wss/wss_lib.c
--- linux-4.0.orig/sound/isa/wss/wss_lib.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/isa/wss/wss_lib.c	2015-04-27 00:21:34.914395087 +0100
@@ -2293,5 +2293,5 @@ static void __exit alsa_wss_exit(void)
 {
 }
 
-module_init(alsa_wss_init);
+deferred_module_init(alsa_wss_init);
 module_exit(alsa_wss_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/ad1848.c linux-4.0/sound/oss/ad1848.c
--- linux-4.0.orig/sound/oss/ad1848.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/ad1848.c	2015-04-27 00:21:34.919395087 +0100
@@ -26,7 +26,7 @@
  *			  general sleep/wakeup clean up.
  * Alan Cox		: reformatted. Fixed SMP bugs. Moved to kernel alloc/free
  *		          of irqs. Use dev_id.
- * Christoph Hellwig	: adapted to module_init/module_exit
+ * Christoph Hellwig	: adapted to deferred_module_init/module_exit
  * Aki Laukkanen	: added power management support
  * Arnaldo C. de Melo	: added missing restore_flags in ad1848_resume
  * Miguel Freitas       : added ISA PnP support
@@ -3040,7 +3040,7 @@ static void __exit cleanup_ad1848(void)
 #endif
 }
 
-module_init(init_ad1848);
+deferred_module_init(init_ad1848);
 module_exit(cleanup_ad1848);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/aedsp16.c linux-4.0/sound/oss/aedsp16.c
--- linux-4.0.orig/sound/oss/aedsp16.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/aedsp16.c	2015-04-27 00:21:34.922395087 +0100
@@ -1349,7 +1349,7 @@ static void __exit cleanup_aedsp16(void)
 	uninit_aedsp16();
 }
 
-module_init(do_init_aedsp16);
+deferred_module_init(do_init_aedsp16);
 module_exit(cleanup_aedsp16);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/dmasound/dmasound_atari.c linux-4.0/sound/oss/dmasound/dmasound_atari.c
--- linux-4.0.orig/sound/oss/dmasound/dmasound_atari.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/dmasound/dmasound_atari.c	2015-04-27 00:21:34.926395087 +0100
@@ -1615,6 +1615,6 @@ static void __exit dmasound_atari_cleanu
 	dmasound_deinit();
 }
 
-module_init(dmasound_atari_init);
+deferred_module_init(dmasound_atari_init);
 module_exit(dmasound_atari_cleanup);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/dmasound/dmasound_q40.c linux-4.0/sound/oss/dmasound/dmasound_q40.c
--- linux-4.0.orig/sound/oss/dmasound/dmasound_q40.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/dmasound/dmasound_q40.c	2015-04-27 00:21:34.928395087 +0100
@@ -631,7 +631,7 @@ static void __exit dmasound_q40_cleanup(
 	dmasound_deinit();
 }
 
-module_init(dmasound_q40_init);
+deferred_module_init(dmasound_q40_init);
 module_exit(dmasound_q40_cleanup);
 
 MODULE_DESCRIPTION("Q40/Q60 sound driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/kahlua.c linux-4.0/sound/oss/kahlua.c
--- linux-4.0.orig/sound/oss/kahlua.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/kahlua.c	2015-04-27 00:21:34.930395087 +0100
@@ -224,6 +224,6 @@ static void kahlua_cleanup_module(void)
 }
 
 
-module_init(kahlua_init_module);
+deferred_module_init(kahlua_init_module);
 module_exit(kahlua_cleanup_module);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/mpu401.c linux-4.0/sound/oss/mpu401.c
--- linux-4.0.orig/sound/oss/mpu401.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/mpu401.c	2015-04-27 00:21:34.933395087 +0100
@@ -1782,7 +1782,7 @@ static void __exit cleanup_mpu401(void)
 	}
 }
 
-module_init(init_mpu401);
+deferred_module_init(init_mpu401);
 module_exit(cleanup_mpu401);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/msnd_pinnacle.c linux-4.0/sound/oss/msnd_pinnacle.c
--- linux-4.0.orig/sound/oss/msnd_pinnacle.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/msnd_pinnacle.c	2015-04-27 00:21:34.937395087 +0100
@@ -1936,5 +1936,5 @@ static void __exit msdn_cleanup(void)
 	msnd_fifo_free(&dev.DARF);
 }
 
-module_init(msnd_init);
+deferred_module_init(msnd_init);
 module_exit(msdn_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/pas2_card.c linux-4.0/sound/oss/pas2_card.c
--- linux-4.0.orig/sound/oss/pas2_card.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/pas2_card.c	2015-04-27 00:21:34.939395087 +0100
@@ -430,7 +430,7 @@ static void __exit cleanup_pas2(void)
 	unload_pas(&cfg);
 }
 
-module_init(init_pas2);
+deferred_module_init(init_pas2);
 module_exit(cleanup_pas2);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/sb_card.c linux-4.0/sound/oss/sb_card.c
--- linux-4.0.orig/sound/oss/sb_card.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/sb_card.c	2015-04-27 00:21:34.941395087 +0100
@@ -350,5 +350,5 @@ static void __exit sb_exit(void)
 	smw_free = NULL;
 }
 
-module_init(sb_init);
+deferred_module_init(sb_init);
 module_exit(sb_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/soundcard.c linux-4.0/sound/oss/soundcard.c
--- linux-4.0.orig/sound/oss/soundcard.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/soundcard.c	2015-04-28 19:05:51.645339441 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+deferred_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
Only in linux-4.0/sound/oss: soundcard.c.orig
Only in linux-4.0/sound/oss: soundcard.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/swarm_cs4297a.c linux-4.0/sound/oss/swarm_cs4297a.c
--- linux-4.0.orig/sound/oss/swarm_cs4297a.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/swarm_cs4297a.c	2015-04-27 00:21:34.949395087 +0100
@@ -2777,5 +2777,5 @@ MODULE_DESCRIPTION("Cirrus Logic CS4297a
 
 // --------------------------------------------------------------------- 
 
-module_init(cs4297a_init);
+deferred_module_init(cs4297a_init);
 module_exit(cs4297a_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/vidc.c linux-4.0/sound/oss/vidc.c
--- linux-4.0.orig/sound/oss/vidc.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/vidc.c	2015-04-27 00:21:34.951395087 +0100
@@ -549,7 +549,7 @@ static void __exit cleanup_vidc(void)
 	unload_vidc(&cfg);
 }
 
-module_init(init_vidc);
+deferred_module_init(init_vidc);
 module_exit(cleanup_vidc);
 
 MODULE_AUTHOR("Russell King");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/oss/waveartist.c linux-4.0/sound/oss/waveartist.c
--- linux-4.0.orig/sound/oss/waveartist.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/oss/waveartist.c	2015-04-27 00:21:34.954395087 +0100
@@ -2016,7 +2016,7 @@ static void __exit cleanup_waveartist(vo
 		unload_waveartist(&cfg);
 }
 
-module_init(init_waveartist);
+deferred_module_init(init_waveartist);
 module_exit(cleanup_waveartist);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/parisc/harmony.c linux-4.0/sound/parisc/harmony.c
--- linux-4.0.orig/sound/parisc/harmony.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/parisc/harmony.c	2015-04-27 00:21:34.957395087 +0100
@@ -1030,5 +1030,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Kyle McMartin <kyle@parisc-linux.org>");
 MODULE_DESCRIPTION("Harmony sound driver");
 
-module_init(alsa_harmony_init);
+deferred_module_init(alsa_harmony_init);
 module_exit(alsa_harmony_fini);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/ac97/ac97_codec.c linux-4.0/sound/pci/ac97/ac97_codec.c
--- linux-4.0.orig/sound/pci/ac97/ac97_codec.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/ac97/ac97_codec.c	2015-04-27 00:21:34.962395087 +0100
@@ -2953,5 +2953,5 @@ static void __exit alsa_ac97_exit(void)
 {
 }
 
-module_init(alsa_ac97_init)
+deferred_module_init(alsa_ac97_init)
 module_exit(alsa_ac97_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/asihpi/asihpi.c linux-4.0/sound/pci/asihpi/asihpi.c
--- linux-4.0.orig/sound/pci/asihpi/asihpi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/asihpi/asihpi.c	2015-04-27 00:21:34.968395087 +0100
@@ -3055,6 +3055,6 @@ static void __exit snd_asihpi_exit(void)
 	asihpi_exit();
 }
 
-module_init(snd_asihpi_init)
+deferred_module_init(snd_asihpi_init)
 module_exit(snd_asihpi_exit)
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/bt87x.c linux-4.0/sound/pci/bt87x.c
--- linux-4.0.orig/sound/pci/bt87x.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/bt87x.c	2015-04-27 00:21:34.971395087 +0100
@@ -990,5 +990,5 @@ static void __exit alsa_card_bt87x_exit(
 	pci_unregister_driver(&driver);
 }
 
-module_init(alsa_card_bt87x_init)
+deferred_module_init(alsa_card_bt87x_init)
 module_exit(alsa_card_bt87x_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/emu10k1/emu10k1_synth.c linux-4.0/sound/pci/emu10k1/emu10k1_synth.c
--- linux-4.0.orig/sound/pci/emu10k1/emu10k1_synth.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/emu10k1/emu10k1_synth.c	2015-04-27 00:21:34.973395087 +0100
@@ -120,5 +120,5 @@ static void __exit alsa_emu10k1_synth_ex
 	snd_seq_device_unregister_driver(SNDRV_SEQ_DEV_ID_EMU10K1_SYNTH);
 }
 
-module_init(alsa_emu10k1_synth_init)
+deferred_module_init(alsa_emu10k1_synth_init)
 module_exit(alsa_emu10k1_synth_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/hda_intel.c linux-4.0/sound/pci/hda/hda_intel.c
--- linux-4.0.orig/sound/pci/hda/hda_intel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/hda_intel.c	2015-04-27 00:23:26.863396410 +0100
@@ -2183,4 +2183,4 @@ static struct pci_driver azx_driver = {
 	},
 };
 
-module_pci_driver(azx_driver);
+deferred_module_pci_driver(azx_driver);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_analog.c linux-4.0/sound/pci/hda/patch_analog.c
--- linux-4.0.orig/sound/pci/hda/patch_analog.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_analog.c	2015-04-28 19:05:51.646339441 +0100
@@ -1209,5 +1209,5 @@ static void __exit patch_analog_exit(voi
 	snd_hda_delete_codec_preset(&analog_list);
 }
 
-module_init(patch_analog_init)
+deferred_module_init(patch_analog_init)
 module_exit(patch_analog_exit)
Only in linux-4.0/sound/pci/hda: patch_analog.c.orig
Only in linux-4.0/sound/pci/hda: patch_analog.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0110.c linux-4.0/sound/pci/hda/patch_ca0110.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0110.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0110.c	2015-04-28 19:05:51.647339441 +0100
@@ -113,5 +113,5 @@ static void __exit patch_ca0110_exit(voi
 	snd_hda_delete_codec_preset(&ca0110_list);
 }
 
-module_init(patch_ca0110_init)
+deferred_module_init(patch_ca0110_init)
 module_exit(patch_ca0110_exit)
Only in linux-4.0/sound/pci/hda: patch_ca0110.c.orig
Only in linux-4.0/sound/pci/hda: patch_ca0110.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_ca0132.c linux-4.0/sound/pci/hda/patch_ca0132.c
--- linux-4.0.orig/sound/pci/hda/patch_ca0132.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_ca0132.c	2015-04-28 19:05:51.649339442 +0100
@@ -4717,5 +4717,5 @@ static void __exit patch_ca0132_exit(voi
 	snd_hda_delete_codec_preset(&ca0132_list);
 }
 
-module_init(patch_ca0132_init)
+deferred_module_init(patch_ca0132_init)
 module_exit(patch_ca0132_exit)
Only in linux-4.0/sound/pci/hda: patch_ca0132.c.orig
Only in linux-4.0/sound/pci/hda: patch_ca0132.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cirrus.c linux-4.0/sound/pci/hda/patch_cirrus.c
--- linux-4.0.orig/sound/pci/hda/patch_cirrus.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cirrus.c	2015-04-28 19:05:51.650339442 +0100
@@ -1236,5 +1236,5 @@ static void __exit patch_cirrus_exit(voi
 	snd_hda_delete_codec_preset(&cirrus_list);
 }
 
-module_init(patch_cirrus_init)
+deferred_module_init(patch_cirrus_init)
 module_exit(patch_cirrus_exit)
Only in linux-4.0/sound/pci/hda: patch_cirrus.c.orig
Only in linux-4.0/sound/pci/hda: patch_cirrus.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_cmedia.c linux-4.0/sound/pci/hda/patch_cmedia.c
--- linux-4.0.orig/sound/pci/hda/patch_cmedia.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_cmedia.c	2015-04-28 19:05:51.651339442 +0100
@@ -152,5 +152,5 @@ static void __exit patch_cmedia_exit(voi
 	snd_hda_delete_codec_preset(&cmedia_list);
 }
 
-module_init(patch_cmedia_init)
+deferred_module_init(patch_cmedia_init)
 module_exit(patch_cmedia_exit)
Only in linux-4.0/sound/pci/hda: patch_cmedia.c.orig
Only in linux-4.0/sound/pci/hda: patch_cmedia.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_conexant.c linux-4.0/sound/pci/hda/patch_conexant.c
--- linux-4.0.orig/sound/pci/hda/patch_conexant.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_conexant.c	2015-04-28 19:05:51.651339442 +0100
@@ -1033,5 +1033,5 @@ static void __exit patch_conexant_exit(v
 	snd_hda_delete_codec_preset(&conexant_list);
 }
 
-module_init(patch_conexant_init)
+deferred_module_init(patch_conexant_init)
 module_exit(patch_conexant_exit)
Only in linux-4.0/sound/pci/hda: patch_conexant.c.orig
Only in linux-4.0/sound/pci/hda: patch_conexant.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_hdmi.c linux-4.0/sound/pci/hda/patch_hdmi.c
--- linux-4.0.orig/sound/pci/hda/patch_hdmi.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_hdmi.c	2015-04-28 19:05:51.653339442 +0100
@@ -3457,5 +3457,5 @@ static void __exit patch_hdmi_exit(void)
 	snd_hda_delete_codec_preset(&intel_list);
 }
 
-module_init(patch_hdmi_init)
+deferred_module_init(patch_hdmi_init)
 module_exit(patch_hdmi_exit)
Only in linux-4.0/sound/pci/hda: patch_hdmi.c.orig
Only in linux-4.0/sound/pci/hda: patch_hdmi.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_realtek.c linux-4.0/sound/pci/hda/patch_realtek.c
--- linux-4.0.orig/sound/pci/hda/patch_realtek.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_realtek.c	2015-04-28 19:05:51.656339442 +0100
@@ -6564,5 +6564,5 @@ static void __exit patch_realtek_exit(vo
 	snd_hda_delete_codec_preset(&realtek_list);
 }
 
-module_init(patch_realtek_init)
+deferred_module_init(patch_realtek_init)
 module_exit(patch_realtek_exit)
Only in linux-4.0/sound/pci/hda: patch_realtek.c.orig
Only in linux-4.0/sound/pci/hda: patch_realtek.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_si3054.c linux-4.0/sound/pci/hda/patch_si3054.c
--- linux-4.0.orig/sound/pci/hda/patch_si3054.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_si3054.c	2015-04-28 19:05:51.658339442 +0100
@@ -334,5 +334,5 @@ static void __exit patch_si3054_exit(voi
 	snd_hda_delete_codec_preset(&si3054_list);
 }
 
-module_init(patch_si3054_init)
+deferred_module_init(patch_si3054_init)
 module_exit(patch_si3054_exit)
Only in linux-4.0/sound/pci/hda: patch_si3054.c.orig
Only in linux-4.0/sound/pci/hda: patch_si3054.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_sigmatel.c linux-4.0/sound/pci/hda/patch_sigmatel.c
--- linux-4.0.orig/sound/pci/hda/patch_sigmatel.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_sigmatel.c	2015-04-28 19:05:51.660339442 +0100
@@ -5106,5 +5106,5 @@ static void __exit patch_sigmatel_exit(v
 	snd_hda_delete_codec_preset(&sigmatel_list);
 }
 
-module_init(patch_sigmatel_init)
+deferred_module_init(patch_sigmatel_init)
 module_exit(patch_sigmatel_exit)
Only in linux-4.0/sound/pci/hda: patch_sigmatel.c.orig
Only in linux-4.0/sound/pci/hda: patch_sigmatel.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/hda/patch_via.c linux-4.0/sound/pci/hda/patch_via.c
--- linux-4.0.orig/sound/pci/hda/patch_via.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/hda/patch_via.c	2015-04-28 19:05:51.662339442 +0100
@@ -1902,5 +1902,5 @@ static void __exit patch_via_exit(void)
 	snd_hda_delete_codec_preset(&via_list);
 }
 
-module_init(patch_via_init)
+deferred_module_init(patch_via_init)
 module_exit(patch_via_exit)
Only in linux-4.0/sound/pci/hda: patch_via.c.orig
Only in linux-4.0/sound/pci/hda: patch_via.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/pci/riptide/riptide.c linux-4.0/sound/pci/riptide/riptide.c
--- linux-4.0.orig/sound/pci/riptide/riptide.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/pci/riptide/riptide.c	2015-04-27 00:21:35.040395088 +0100
@@ -2213,5 +2213,5 @@ static void __exit alsa_card_riptide_exi
 #endif
 }
 
-module_init(alsa_card_riptide_init);
+deferred_module_init(alsa_card_riptide_init);
 module_exit(alsa_card_riptide_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/powermac.c linux-4.0/sound/ppc/powermac.c
--- linux-4.0.orig/sound/ppc/powermac.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/powermac.c	2015-04-28 19:05:51.663339442 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+deferred_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
Only in linux-4.0/sound/ppc: powermac.c.orig
Only in linux-4.0/sound/ppc: powermac.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/ppc/snd_ps3.c linux-4.0/sound/ppc/snd_ps3.c
--- linux-4.0.orig/sound/ppc/snd_ps3.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/ppc/snd_ps3.c	2015-04-28 19:05:51.664339442 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+deferred_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
Only in linux-4.0/sound/ppc: snd_ps3.c.orig
Only in linux-4.0/sound/ppc: snd_ps3.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/sh/aica.c linux-4.0/sound/sh/aica.c
--- linux-4.0.orig/sound/sh/aica.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/sh/aica.c	2015-04-27 00:21:35.047395088 +0100
@@ -681,5 +681,5 @@ static void __exit aica_exit(void)
 	spu_reset();
 }
 
-module_init(aica_init);
+deferred_module_init(aica_init);
 module_exit(aica_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/blackfin/bf5xx-ad193x.c linux-4.0/sound/soc/blackfin/bf5xx-ad193x.c
--- linux-4.0.orig/sound/soc/blackfin/bf5xx-ad193x.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/blackfin/bf5xx-ad193x.c	2015-04-27 00:21:35.049395088 +0100
@@ -121,7 +121,7 @@ static void __exit bf5xx_ad193x_exit(voi
 	platform_device_unregister(bfxx_ad193x_snd_device);
 }
 
-module_init(bf5xx_ad193x_init);
+deferred_module_init(bf5xx_ad193x_init);
 module_exit(bf5xx_ad193x_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/blackfin/bf5xx-ad1980.c linux-4.0/sound/soc/blackfin/bf5xx-ad1980.c
--- linux-4.0.orig/sound/soc/blackfin/bf5xx-ad1980.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/blackfin/bf5xx-ad1980.c	2015-04-27 00:21:35.050395088 +0100
@@ -100,7 +100,7 @@ static void __exit bf5xx_board_exit(void
 	platform_device_unregister(bf5xx_board_snd_device);
 }
 
-module_init(bf5xx_board_init);
+deferred_module_init(bf5xx_board_init);
 module_exit(bf5xx_board_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/blackfin/bf5xx-ad73311.c linux-4.0/sound/soc/blackfin/bf5xx-ad73311.c
--- linux-4.0.orig/sound/soc/blackfin/bf5xx-ad73311.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/blackfin/bf5xx-ad73311.c	2015-04-27 00:21:35.052395088 +0100
@@ -202,7 +202,7 @@ static void __exit bf5xx_ad73311_exit(vo
 	platform_device_unregister(bf5xx_ad73311_snd_device);
 }
 
-module_init(bf5xx_ad73311_init);
+deferred_module_init(bf5xx_ad73311_init);
 module_exit(bf5xx_ad73311_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/blackfin/bf5xx-ssm2602.c linux-4.0/sound/soc/blackfin/bf5xx-ssm2602.c
--- linux-4.0.orig/sound/soc/blackfin/bf5xx-ssm2602.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/blackfin/bf5xx-ssm2602.c	2015-04-27 00:21:35.054395088 +0100
@@ -116,7 +116,7 @@ static void __exit bf5xx_ssm2602_exit(vo
 	platform_device_unregister(bf5xx_ssm2602_snd_device);
 }
 
-module_init(bf5xx_ssm2602_init);
+deferred_module_init(bf5xx_ssm2602_init);
 module_exit(bf5xx_ssm2602_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/da7210.c linux-4.0/sound/soc/codecs/da7210.c
--- linux-4.0.orig/sound/soc/codecs/da7210.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/da7210.c	2015-04-27 00:21:35.058395088 +0100
@@ -1366,7 +1366,7 @@ static int __init da7210_modinit(void)
 #endif
 	return ret;
 }
-module_init(da7210_modinit);
+deferred_module_init(da7210_modinit);
 
 static void __exit da7210_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/uda1380.c linux-4.0/sound/soc/codecs/uda1380.c
--- linux-4.0.orig/sound/soc/codecs/uda1380.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/uda1380.c	2015-04-27 00:21:35.060395088 +0100
@@ -832,7 +832,7 @@ static int __init uda1380_modinit(void)
 #endif
 	return ret;
 }
-module_init(uda1380_modinit);
+deferred_module_init(uda1380_modinit);
 
 static void __exit uda1380_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8510.c linux-4.0/sound/soc/codecs/wm8510.c
--- linux-4.0.orig/sound/soc/codecs/wm8510.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8510.c	2015-04-27 00:21:35.062395088 +0100
@@ -719,7 +719,7 @@ static int __init wm8510_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8510_modinit);
+deferred_module_init(wm8510_modinit);
 
 static void __exit wm8510_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8523.c linux-4.0/sound/soc/codecs/wm8523.c
--- linux-4.0.orig/sound/soc/codecs/wm8523.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8523.c	2015-04-27 00:21:35.064395088 +0100
@@ -530,7 +530,7 @@ static int __init wm8523_modinit(void)
 #endif
 	return 0;
 }
-module_init(wm8523_modinit);
+deferred_module_init(wm8523_modinit);
 
 static void __exit wm8523_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8580.c linux-4.0/sound/soc/codecs/wm8580.c
--- linux-4.0.orig/sound/soc/codecs/wm8580.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8580.c	2015-04-27 00:21:35.067395088 +0100
@@ -1001,7 +1001,7 @@ static int __init wm8580_modinit(void)
 
 	return ret;
 }
-module_init(wm8580_modinit);
+deferred_module_init(wm8580_modinit);
 
 static void __exit wm8580_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8711.c linux-4.0/sound/soc/codecs/wm8711.c
--- linux-4.0.orig/sound/soc/codecs/wm8711.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8711.c	2015-04-27 00:21:35.069395088 +0100
@@ -507,7 +507,7 @@ static int __init wm8711_modinit(void)
 #endif
 	return 0;
 }
-module_init(wm8711_modinit);
+deferred_module_init(wm8711_modinit);
 
 static void __exit wm8711_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8728.c linux-4.0/sound/soc/codecs/wm8728.c
--- linux-4.0.orig/sound/soc/codecs/wm8728.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8728.c	2015-04-27 00:21:35.071395088 +0100
@@ -348,7 +348,7 @@ static int __init wm8728_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8728_modinit);
+deferred_module_init(wm8728_modinit);
 
 static void __exit wm8728_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8731.c linux-4.0/sound/soc/codecs/wm8731.c
--- linux-4.0.orig/sound/soc/codecs/wm8731.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8731.c	2015-04-27 00:21:35.074395088 +0100
@@ -783,7 +783,7 @@ static int __init wm8731_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8731_modinit);
+deferred_module_init(wm8731_modinit);
 
 static void __exit wm8731_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8737.c linux-4.0/sound/soc/codecs/wm8737.c
--- linux-4.0.orig/sound/soc/codecs/wm8737.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8737.c	2015-04-27 00:21:35.077395088 +0100
@@ -735,7 +735,7 @@ static int __init wm8737_modinit(void)
 #endif
 	return 0;
 }
-module_init(wm8737_modinit);
+deferred_module_init(wm8737_modinit);
 
 static void __exit wm8737_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8741.c linux-4.0/sound/soc/codecs/wm8741.c
--- linux-4.0.orig/sound/soc/codecs/wm8741.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8741.c	2015-04-27 00:21:35.079395089 +0100
@@ -625,7 +625,7 @@ static int __init wm8741_modinit(void)
 
 	return ret;
 }
-module_init(wm8741_modinit);
+deferred_module_init(wm8741_modinit);
 
 static void __exit wm8741_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8750.c linux-4.0/sound/soc/codecs/wm8750.c
--- linux-4.0.orig/sound/soc/codecs/wm8750.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8750.c	2015-04-27 00:21:35.081395089 +0100
@@ -855,7 +855,7 @@ static int __init wm8750_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8750_modinit);
+deferred_module_init(wm8750_modinit);
 
 static void __exit wm8750_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8753.c linux-4.0/sound/soc/codecs/wm8753.c
--- linux-4.0.orig/sound/soc/codecs/wm8753.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8753.c	2015-04-27 00:21:35.085395089 +0100
@@ -1661,7 +1661,7 @@ static int __init wm8753_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8753_modinit);
+deferred_module_init(wm8753_modinit);
 
 static void __exit wm8753_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8776.c linux-4.0/sound/soc/codecs/wm8776.c
--- linux-4.0.orig/sound/soc/codecs/wm8776.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8776.c	2015-04-27 00:21:35.087395089 +0100
@@ -565,7 +565,7 @@ static int __init wm8776_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8776_modinit);
+deferred_module_init(wm8776_modinit);
 
 static void __exit wm8776_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8804.c linux-4.0/sound/soc/codecs/wm8804.c
--- linux-4.0.orig/sound/soc/codecs/wm8804.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8804.c	2015-04-27 00:21:35.089395089 +0100
@@ -785,7 +785,7 @@ static int __init wm8804_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8804_modinit);
+deferred_module_init(wm8804_modinit);
 
 static void __exit wm8804_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8900.c linux-4.0/sound/soc/codecs/wm8900.c
--- linux-4.0.orig/sound/soc/codecs/wm8900.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8900.c	2015-04-27 00:21:35.092395089 +0100
@@ -1340,7 +1340,7 @@ static int __init wm8900_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8900_modinit);
+deferred_module_init(wm8900_modinit);
 
 static void __exit wm8900_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8983.c linux-4.0/sound/soc/codecs/wm8983.c
--- linux-4.0.orig/sound/soc/codecs/wm8983.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8983.c	2015-04-27 00:21:35.096395089 +0100
@@ -1162,7 +1162,7 @@ static int __init wm8983_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8983_modinit);
+deferred_module_init(wm8983_modinit);
 
 static void __exit wm8983_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8985.c linux-4.0/sound/soc/codecs/wm8985.c
--- linux-4.0.orig/sound/soc/codecs/wm8985.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8985.c	2015-04-27 00:21:35.099395089 +0100
@@ -1173,7 +1173,7 @@ static int __init wm8985_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8985_modinit);
+deferred_module_init(wm8985_modinit);
 
 static void __exit wm8985_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8988.c linux-4.0/sound/soc/codecs/wm8988.c
--- linux-4.0.orig/sound/soc/codecs/wm8988.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8988.c	2015-04-27 00:21:35.101395089 +0100
@@ -947,7 +947,7 @@ static int __init wm8988_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8988_modinit);
+deferred_module_init(wm8988_modinit);
 
 static void __exit wm8988_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/codecs/wm8995.c linux-4.0/sound/soc/codecs/wm8995.c
--- linux-4.0.orig/sound/soc/codecs/wm8995.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/codecs/wm8995.c	2015-04-27 00:21:35.105395089 +0100
@@ -2327,7 +2327,7 @@ static int __init wm8995_modinit(void)
 	return ret;
 }
 
-module_init(wm8995_modinit);
+deferred_module_init(wm8995_modinit);
 
 static void __exit wm8995_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/davinci/davinci-evm.c linux-4.0/sound/soc/davinci/davinci-evm.c
--- linux-4.0.orig/sound/soc/davinci/davinci-evm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/davinci/davinci-evm.c	2015-04-27 00:21:35.107395089 +0100
@@ -507,7 +507,7 @@ static void __exit evm_exit(void)
 	platform_device_unregister(evm_snd_device);
 }
 
-module_init(evm_init);
+deferred_module_init(evm_init);
 module_exit(evm_exit);
 
 MODULE_AUTHOR("Vladimir Barinov");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/fsl/efika-audio-fabric.c linux-4.0/sound/soc/fsl/efika-audio-fabric.c
--- linux-4.0.orig/sound/soc/fsl/efika-audio-fabric.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/fsl/efika-audio-fabric.c	2015-04-27 00:21:35.109395089 +0100
@@ -82,7 +82,7 @@ static __init int efika_fabric_init(void
 	return 0;
 }
 
-module_init(efika_fabric_init);
+deferred_module_init(efika_fabric_init);
 
 
 MODULE_AUTHOR("Jon Smirl <jonsmirl@gmail.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/fsl/mpc8610_hpcd.c linux-4.0/sound/soc/fsl/mpc8610_hpcd.c
--- linux-4.0.orig/sound/soc/fsl/mpc8610_hpcd.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/fsl/mpc8610_hpcd.c	2015-04-27 00:21:35.111395089 +0100
@@ -425,7 +425,7 @@ static void __exit mpc8610_hpcd_exit(voi
 	platform_driver_unregister(&mpc8610_hpcd_driver);
 }
 
-module_init(mpc8610_hpcd_init);
+deferred_module_init(mpc8610_hpcd_init);
 module_exit(mpc8610_hpcd_exit);
 
 MODULE_AUTHOR("Timur Tabi <timur@freescale.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/fsl/p1022_ds.c linux-4.0/sound/soc/fsl/p1022_ds.c
--- linux-4.0.orig/sound/soc/fsl/p1022_ds.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/fsl/p1022_ds.c	2015-04-27 00:21:35.113395089 +0100
@@ -434,7 +434,7 @@ static void __exit p1022_ds_exit(void)
 	platform_driver_unregister(&p1022_ds_driver);
 }
 
-module_init(p1022_ds_init);
+deferred_module_init(p1022_ds_init);
 module_exit(p1022_ds_exit);
 
 MODULE_AUTHOR("Timur Tabi <timur@freescale.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/fsl/wm1133-ev1.c linux-4.0/sound/soc/fsl/wm1133-ev1.c
--- linux-4.0.orig/sound/soc/fsl/wm1133-ev1.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/fsl/wm1133-ev1.c	2015-04-27 00:21:35.115395089 +0100
@@ -282,7 +282,7 @@ static int __init wm1133_ev1_audio_init(
 
 	return ret;
 }
-module_init(wm1133_ev1_audio_init);
+deferred_module_init(wm1133_ev1_audio_init);
 
 static void __exit wm1133_ev1_audio_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/nuc900/nuc900-audio.c linux-4.0/sound/soc/nuc900/nuc900-audio.c
--- linux-4.0.orig/sound/soc/nuc900/nuc900-audio.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/nuc900/nuc900-audio.c	2015-04-27 00:21:35.117395089 +0100
@@ -67,7 +67,7 @@ static void __exit nuc900evb_audio_exit(
 	platform_device_unregister(nuc900evb_asoc_dev);
 }
 
-module_init(nuc900evb_audio_init);
+deferred_module_init(nuc900evb_audio_init);
 module_exit(nuc900evb_audio_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/omap/am3517evm.c linux-4.0/sound/soc/omap/am3517evm.c
--- linux-4.0.orig/sound/soc/omap/am3517evm.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/omap/am3517evm.c	2015-04-27 00:21:35.119395089 +0100
@@ -133,7 +133,7 @@ static void __exit am3517evm_soc_exit(vo
 	platform_device_unregister(am3517evm_snd_device);
 }
 
-module_init(am3517evm_soc_init);
+deferred_module_init(am3517evm_soc_init);
 module_exit(am3517evm_soc_exit);
 
 MODULE_AUTHOR("Anuj Aggarwal <anuj.aggarwal@ti.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/omap/n810.c linux-4.0/sound/soc/omap/n810.c
--- linux-4.0.orig/sound/soc/omap/n810.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/omap/n810.c	2015-04-27 00:21:35.122395089 +0100
@@ -383,7 +383,7 @@ static void __exit n810_soc_exit(void)
 	platform_device_unregister(n810_snd_device);
 }
 
-module_init(n810_soc_init);
+deferred_module_init(n810_soc_init);
 module_exit(n810_soc_exit);
 
 MODULE_AUTHOR("Jarkko Nikula <jarkko.nikula@bitmer.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/omap/omap3pandora.c linux-4.0/sound/soc/omap/omap3pandora.c
--- linux-4.0.orig/sound/soc/omap/omap3pandora.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/omap/omap3pandora.c	2015-04-27 00:21:35.124395089 +0100
@@ -301,7 +301,7 @@ fail0:
 	gpio_free(OMAP3_PANDORA_DAC_POWER_GPIO);
 	return ret;
 }
-module_init(omap3pandora_soc_init);
+deferred_module_init(omap3pandora_soc_init);
 
 static void __exit omap3pandora_soc_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/omap/osk5912.c linux-4.0/sound/soc/omap/osk5912.c
--- linux-4.0.orig/sound/soc/omap/osk5912.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/omap/osk5912.c	2015-04-27 00:21:35.126395089 +0100
@@ -179,7 +179,7 @@ static void __exit osk_soc_exit(void)
 	platform_device_unregister(osk_snd_device);
 }
 
-module_init(osk_soc_init);
+deferred_module_init(osk_soc_init);
 module_exit(osk_soc_exit);
 
 MODULE_AUTHOR("Arun KS <arunks@mistralsolutions.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/pxa/em-x270.c linux-4.0/sound/soc/pxa/em-x270.c
--- linux-4.0.orig/sound/soc/pxa/em-x270.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/pxa/em-x270.c	2015-04-27 00:21:35.129395089 +0100
@@ -87,7 +87,7 @@ static void __exit em_x270_exit(void)
 	platform_device_unregister(em_x270_snd_device);
 }
 
-module_init(em_x270_init);
+deferred_module_init(em_x270_init);
 module_exit(em_x270_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/pxa/magician.c linux-4.0/sound/soc/pxa/magician.c
--- linux-4.0.orig/sound/soc/pxa/magician.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/pxa/magician.c	2015-04-27 00:21:35.131395089 +0100
@@ -526,7 +526,7 @@ static void __exit magician_exit(void)
 	gpio_free(EGPIO_MAGICIAN_SPK_POWER);
 }
 
-module_init(magician_init);
+deferred_module_init(magician_init);
 module_exit(magician_exit);
 
 MODULE_AUTHOR("Philipp Zabel");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/pxa/pxa2xx-i2s.c linux-4.0/sound/soc/pxa/pxa2xx-i2s.c
--- linux-4.0.orig/sound/soc/pxa/pxa2xx-i2s.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/pxa/pxa2xx-i2s.c	2015-04-27 00:21:35.133395089 +0100
@@ -397,7 +397,7 @@ static void __exit pxa2xx_i2s_exit(void)
 	platform_driver_unregister(&pxa2xx_i2s_driver);
 }
 
-module_init(pxa2xx_i2s_init);
+deferred_module_init(pxa2xx_i2s_init);
 module_exit(pxa2xx_i2s_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/pxa/raumfeld.c linux-4.0/sound/soc/pxa/raumfeld.c
--- linux-4.0.orig/sound/soc/pxa/raumfeld.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/pxa/raumfeld.c	2015-04-27 00:21:35.134395089 +0100
@@ -311,7 +311,7 @@ static void __exit raumfeld_audio_exit(v
 	gpio_free(GPIO_SPDIF_RESET);
 }
 
-module_init(raumfeld_audio_init);
+deferred_module_init(raumfeld_audio_init);
 module_exit(raumfeld_audio_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/pxa/z2.c linux-4.0/sound/soc/pxa/z2.c
--- linux-4.0.orig/sound/soc/pxa/z2.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/pxa/z2.c	2015-04-27 00:21:35.136395089 +0100
@@ -222,7 +222,7 @@ static void __exit z2_exit(void)
 	platform_device_unregister(z2_snd_device);
 }
 
-module_init(z2_init);
+deferred_module_init(z2_init);
 module_exit(z2_exit);
 
 MODULE_AUTHOR("Ken McGuire <kenm@desertweyr.com>, "
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/pxa/zylonite.c linux-4.0/sound/soc/pxa/zylonite.c
--- linux-4.0.orig/sound/soc/pxa/zylonite.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/pxa/zylonite.c	2015-04-27 00:21:35.137395089 +0100
@@ -267,7 +267,7 @@ static void __exit zylonite_exit(void)
 	platform_device_unregister(zylonite_snd_ac97_device);
 }
 
-module_init(zylonite_init);
+deferred_module_init(zylonite_init);
 module_exit(zylonite_exit);
 
 MODULE_AUTHOR("Mark Brown <broonie@opensource.wolfsonmicro.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/h1940_uda1380.c linux-4.0/sound/soc/samsung/h1940_uda1380.c
--- linux-4.0.orig/sound/soc/samsung/h1940_uda1380.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/h1940_uda1380.c	2015-04-27 00:21:35.140395089 +0100
@@ -258,7 +258,7 @@ static void __exit h1940_exit(void)
 	gpio_free(S3C_GPIO_END + 9);
 }
 
-module_init(h1940_init);
+deferred_module_init(h1940_init);
 module_exit(h1940_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/jive_wm8750.c linux-4.0/sound/soc/samsung/jive_wm8750.c
--- linux-4.0.orig/sound/soc/samsung/jive_wm8750.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/jive_wm8750.c	2015-04-27 00:21:35.141395089 +0100
@@ -138,7 +138,7 @@ static void __exit jive_exit(void)
 	platform_device_unregister(jive_snd_device);
 }
 
-module_init(jive_init);
+deferred_module_init(jive_init);
 module_exit(jive_exit);
 
 MODULE_AUTHOR("Ben Dooks <ben@simtec.co.uk>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/ln2440sbc_alc650.c linux-4.0/sound/soc/samsung/ln2440sbc_alc650.c
--- linux-4.0.orig/sound/soc/samsung/ln2440sbc_alc650.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/ln2440sbc_alc650.c	2015-04-27 00:21:35.143395089 +0100
@@ -63,7 +63,7 @@ static void __exit ln2440sbc_exit(void)
 	platform_device_unregister(ln2440sbc_snd_ac97_device);
 }
 
-module_init(ln2440sbc_init);
+deferred_module_init(ln2440sbc_init);
 module_exit(ln2440sbc_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/neo1973_wm8753.c linux-4.0/sound/soc/samsung/neo1973_wm8753.c
--- linux-4.0.orig/sound/soc/samsung/neo1973_wm8753.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/neo1973_wm8753.c	2015-04-27 00:21:35.145395089 +0100
@@ -376,7 +376,7 @@ err_gpio_free:
 	}
 	return ret;
 }
-module_init(neo1973_init);
+deferred_module_init(neo1973_init);
 
 static void __exit neo1973_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/rx1950_uda1380.c linux-4.0/sound/soc/samsung/rx1950_uda1380.c
--- linux-4.0.orig/sound/soc/samsung/rx1950_uda1380.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/rx1950_uda1380.c	2015-04-27 00:21:35.146395089 +0100
@@ -280,7 +280,7 @@ static void __exit rx1950_exit(void)
 	gpio_free(S3C2410_GPA(1));
 }
 
-module_init(rx1950_init);
+deferred_module_init(rx1950_init);
 module_exit(rx1950_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/smartq_wm8987.c linux-4.0/sound/soc/samsung/smartq_wm8987.c
--- linux-4.0.orig/sound/soc/samsung/smartq_wm8987.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/smartq_wm8987.c	2015-04-27 00:21:35.148395089 +0100
@@ -260,7 +260,7 @@ static void __exit smartq_exit(void)
 	platform_device_unregister(smartq_snd_device);
 }
 
-module_init(smartq_init);
+deferred_module_init(smartq_init);
 module_exit(smartq_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/smdk2443_wm9710.c linux-4.0/sound/soc/samsung/smdk2443_wm9710.c
--- linux-4.0.orig/sound/soc/samsung/smdk2443_wm9710.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/smdk2443_wm9710.c	2015-04-27 00:21:35.154395089 +0100
@@ -59,7 +59,7 @@ static void __exit smdk2443_exit(void)
 	platform_device_unregister(smdk2443_snd_ac97_device);
 }
 
-module_init(smdk2443_init);
+deferred_module_init(smdk2443_init);
 module_exit(smdk2443_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/smdk_spdif.c linux-4.0/sound/soc/samsung/smdk_spdif.c
--- linux-4.0.orig/sound/soc/samsung/smdk_spdif.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/smdk_spdif.c	2015-04-27 00:21:35.150395089 +0100
@@ -215,7 +215,7 @@ static void __exit smdk_exit(void)
 	platform_device_unregister(smdk_snd_spdif_dit_device);
 }
 
-module_init(smdk_init);
+deferred_module_init(smdk_init);
 module_exit(smdk_exit);
 
 MODULE_AUTHOR("Seungwhan Youn, <sw.youn@samsung.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/smdk_wm8580.c linux-4.0/sound/soc/samsung/smdk_wm8580.c
--- linux-4.0.orig/sound/soc/samsung/smdk_wm8580.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/smdk_wm8580.c	2015-04-27 00:21:35.151395089 +0100
@@ -228,7 +228,7 @@ static int __init smdk_audio_init(void)
 
 	return ret;
 }
-module_init(smdk_audio_init);
+deferred_module_init(smdk_audio_init);
 
 static void __exit smdk_audio_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/samsung/smdk_wm9713.c linux-4.0/sound/soc/samsung/smdk_wm9713.c
--- linux-4.0.orig/sound/soc/samsung/smdk_wm9713.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/samsung/smdk_wm9713.c	2015-04-27 00:21:35.153395089 +0100
@@ -99,7 +99,7 @@ static void __exit smdk_exit(void)
 	platform_device_unregister(smdk_snd_wm9713_device);
 }
 
-module_init(smdk_init);
+deferred_module_init(smdk_init);
 module_exit(smdk_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/sh/migor.c linux-4.0/sound/soc/sh/migor.c
--- linux-4.0.orig/sound/soc/sh/migor.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/sh/migor.c	2015-04-27 00:21:35.155395089 +0100
@@ -200,7 +200,7 @@ static void __exit migor_exit(void)
 	platform_device_unregister(migor_snd_device);
 }
 
-module_init(migor_init);
+deferred_module_init(migor_init);
 module_exit(migor_exit);
 
 MODULE_AUTHOR("Guennadi Liakhovetski <g.liakhovetski@gmx.de>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/sh/sh7760-ac97.c linux-4.0/sound/soc/sh/sh7760-ac97.c
--- linux-4.0.orig/sound/soc/sh/sh7760-ac97.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/sh/sh7760-ac97.c	2015-04-27 00:21:35.157395089 +0100
@@ -65,7 +65,7 @@ static void __exit sh7760_ac97_exit(void
 	platform_device_unregister(sh7760_ac97_snd_device);
 }
 
-module_init(sh7760_ac97_init);
+deferred_module_init(sh7760_ac97_init);
 module_exit(sh7760_ac97_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/soc-core.c linux-4.0/sound/soc/soc-core.c
--- linux-4.0.orig/sound/soc/soc-core.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/soc-core.c	2015-04-27 00:21:35.162395089 +0100
@@ -3611,7 +3611,7 @@ static int __init snd_soc_init(void)
 
 	return platform_driver_register(&soc_driver);
 }
-module_init(snd_soc_init);
+deferred_module_init(snd_soc_init);
 
 static void __exit snd_soc_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/soc/txx9/txx9aclc-generic.c linux-4.0/sound/soc/txx9/txx9aclc-generic.c
--- linux-4.0.orig/sound/soc/txx9/txx9aclc-generic.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/soc/txx9/txx9aclc-generic.c	2015-04-27 00:21:35.164395090 +0100
@@ -80,7 +80,7 @@ static void __exit txx9aclc_generic_exit
 	platform_driver_unregister(&txx9aclc_generic_driver);
 }
 
-module_init(txx9aclc_generic_init);
+deferred_module_init(txx9aclc_generic_init);
 module_exit(txx9aclc_generic_exit);
 
 MODULE_AUTHOR("Atsushi Nemoto <anemo@mba.ocn.ne.jp>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/sparc/amd7930.c linux-4.0/sound/sparc/amd7930.c
--- linux-4.0.orig/sound/sparc/amd7930.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/sparc/amd7930.c	2015-04-27 00:21:35.167395090 +0100
@@ -1094,5 +1094,5 @@ static void __exit amd7930_exit(void)
 	platform_driver_unregister(&amd7930_sbus_driver);
 }
 
-module_init(amd7930_init);
+deferred_module_init(amd7930_init);
 module_exit(amd7930_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/emux/emux.c linux-4.0/sound/synth/emux/emux.c
--- linux-4.0.orig/sound/synth/emux/emux.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/emux/emux.c	2015-04-28 19:05:51.665339442 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+deferred_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
Only in linux-4.0/sound/synth/emux: emux.c.orig
Only in linux-4.0/sound/synth/emux: emux.c.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=drivers/gpu/drm/nvidia-ion' linux-4.0.orig/sound/synth/util_mem.c linux-4.0/sound/synth/util_mem.c
--- linux-4.0.orig/sound/synth/util_mem.c	2015-04-12 23:12:50.000000000 +0100
+++ linux-4.0/sound/synth/util_mem.c	2015-04-28 19:05:51.665339442 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+deferred_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
Only in linux-4.0/sound/synth: util_mem.c.orig
Only in linux-4.0/sound/synth: util_mem.c.rej
