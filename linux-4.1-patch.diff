diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/arch/x86/kernel/pcspeaker.c linux-4.1/arch/x86/kernel/pcspeaker.c
--- linux-4.1.orig/arch/x86/kernel/pcspeaker.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/arch/x86/kernel/pcspeaker.c	2015-06-25 22:51:17.691402307 +0100
@@ -10,4 +10,4 @@ static __init int add_pcspkr(void)
 
 	return IS_ERR(pd) ? PTR_ERR(pd) : 0;
 }
-device_initcall(add_pcspkr);
+async_module_init(add_pcspkr);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/842.c linux-4.1/crypto/842.c
--- linux-4.1.orig/crypto/842.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/842.c	2015-06-25 22:51:15.743630009 +0100
@@ -175,7 +175,7 @@ static void __exit nx842_mod_exit(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(nx842_mod_init);
+deferred_module_init(nx842_mod_init);
 module_exit(nx842_mod_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/aes_generic.c linux-4.1/crypto/aes_generic.c
--- linux-4.1.orig/crypto/aes_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/aes_generic.c	2015-06-25 22:51:15.285683545 +0100
@@ -1469,7 +1469,7 @@ static void __exit aes_fini(void)
 	crypto_unregister_alg(&aes_alg);
 }
 
-module_init(aes_init);
+deferred_module_init(aes_init);
 module_exit(aes_fini);
 
 MODULE_DESCRIPTION("Rijndael (AES) Cipher Algorithm");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/af_alg.c linux-4.1/crypto/af_alg.c
--- linux-4.1.orig/crypto/af_alg.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/af_alg.c	2015-06-25 22:51:15.285683545 +0100
@@ -485,7 +485,7 @@ static void __exit af_alg_exit(void)
 	proto_unregister(&alg_proto);
 }
 
-module_init(af_alg_init);
+module_init(af_alg_init);	// allow algif_hash algif_skcipher
 module_exit(af_alg_exit);
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_NETPROTO(AF_ALG);
Only in linux-4.1/crypto: af_alg.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/algapi.c linux-4.1/crypto/algapi.c
--- linux-4.1.orig/crypto/algapi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/algapi.c	2015-06-25 22:51:15.746629658 +0100
@@ -975,7 +975,7 @@ static void __exit crypto_algapi_exit(vo
 	crypto_exit_proc();
 }
 
-module_init(crypto_algapi_init);
+deferred_module_init(crypto_algapi_init);
 module_exit(crypto_algapi_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/crypto: algapi.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/algif_hash.c linux-4.1/crypto/algif_hash.c
--- linux-4.1.orig/crypto/algif_hash.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/algif_hash.c	2015-06-25 22:51:15.299681908 +0100
@@ -308,6 +308,6 @@ static void __exit algif_hash_exit(void)
 	BUG_ON(err);
 }
 
-module_init(algif_hash_init);
+module_init(algif_hash_init);	//af_alg_init
 module_exit(algif_hash_exit);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/algif_rng.c linux-4.1/crypto/algif_rng.c
--- linux-4.1.orig/crypto/algif_rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/algif_rng.c	2015-06-25 22:51:15.747629541 +0100
@@ -188,5 +188,5 @@ static void __exit rng_exit(void)
 	BUG_ON(err);
 }
 
-module_init(rng_init);
+deferred_module_init(rng_init);
 module_exit(rng_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/algif_skcipher.c linux-4.1/crypto/algif_skcipher.c
--- linux-4.1.orig/crypto/algif_skcipher.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/algif_skcipher.c	2015-06-25 22:51:15.317679804 +0100
@@ -849,6 +849,6 @@ static void __exit algif_skcipher_exit(v
 	BUG_ON(err);
 }
 
-module_init(algif_skcipher_init);
+module_init(algif_skcipher_init);		//af_alg_init
 module_exit(algif_skcipher_exit);
 MODULE_LICENSE("GPL");
Only in linux-4.1/crypto: algif_skcipher.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/ansi_cprng.c linux-4.1/crypto/ansi_cprng.c
--- linux-4.1.orig/crypto/ansi_cprng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/ansi_cprng.c	2015-06-25 22:51:15.317679804 +0100
@@ -478,7 +478,7 @@ MODULE_DESCRIPTION("Software Pseudo Rand
 MODULE_AUTHOR("Neil Horman <nhorman@tuxdriver.com>");
 module_param(dbg, int, 0);
 MODULE_PARM_DESC(dbg, "Boolean to enable debugging (0/1 == off/on)");
-module_init(prng_mod_init);
+deferred_module_init(prng_mod_init);
 module_exit(prng_mod_fini);
 MODULE_ALIAS_CRYPTO("stdrng");
 MODULE_ALIAS_CRYPTO("ansi_cprng");
Only in linux-4.1/crypto: ansi_cprng.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/anubis.c linux-4.1/crypto/anubis.c
--- linux-4.1.orig/crypto/anubis.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/anubis.c	2015-06-25 22:51:15.750629191 +0100
@@ -699,7 +699,7 @@ static void __exit anubis_mod_fini(void)
 	crypto_unregister_alg(&anubis_alg);
 }
 
-module_init(anubis_mod_init);
+deferred_module_init(anubis_mod_init);
 module_exit(anubis_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/arc4.c linux-4.1/crypto/arc4.c
--- linux-4.1.orig/crypto/arc4.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/arc4.c	2015-06-25 22:51:15.751629074 +0100
@@ -160,7 +160,7 @@ static void __exit arc4_exit(void)
 	crypto_unregister_algs(arc4_algs, ARRAY_SIZE(arc4_algs));
 }
 
-module_init(arc4_init);
+deferred_module_init(arc4_init);
 module_exit(arc4_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/asymmetric_keys/asymmetric_type.c linux-4.1/crypto/asymmetric_keys/asymmetric_type.c
--- linux-4.1.orig/crypto/asymmetric_keys/asymmetric_type.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/asymmetric_keys/asymmetric_type.c	2015-06-25 22:51:15.318679687 +0100
@@ -402,5 +402,5 @@ static void __exit asymmetric_key_cleanu
 	unregister_key_type(&key_type_asymmetric);
 }
 
-module_init(asymmetric_key_init);
+deferred_module_init(asymmetric_key_init);
 module_exit(asymmetric_key_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/asymmetric_keys/pkcs7_key_type.c linux-4.1/crypto/asymmetric_keys/pkcs7_key_type.c
--- linux-4.1.orig/crypto/asymmetric_keys/pkcs7_key_type.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/asymmetric_keys/pkcs7_key_type.c	2015-06-25 22:51:15.318679687 +0100
@@ -94,5 +94,5 @@ static void __exit pkcs7_key_cleanup(voi
 	unregister_key_type(&key_type_pkcs7);
 }
 
-module_init(pkcs7_key_init);
+deferred_module_init(pkcs7_key_init);
 module_exit(pkcs7_key_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/asymmetric_keys/x509_public_key.c linux-4.1/crypto/asymmetric_keys/x509_public_key.c
--- linux-4.1.orig/crypto/asymmetric_keys/x509_public_key.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/asymmetric_keys/x509_public_key.c	2015-06-25 22:51:15.319679570 +0100
@@ -357,7 +357,7 @@ static void __exit x509_key_exit(void)
 	unregister_asymmetric_key_parser(&x509_key_parser);
 }
 
-module_init(x509_key_init);
+deferred_module_init(x509_key_init);
 module_exit(x509_key_exit);
 
 MODULE_DESCRIPTION("X.509 certificate parser");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/async_tx/async_pq.c linux-4.1/crypto/async_tx/async_pq.c
--- linux-4.1.orig/crypto/async_tx/async_pq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/async_tx/async_pq.c	2015-06-25 22:51:15.319679570 +0100
@@ -447,7 +447,7 @@ static void __exit async_pq_exit(void)
 	put_page(pq_scribble_page);
 }
 
-module_init(async_pq_init);
+module_init(async_pq_init);	//raid6_pq.ko async_xor.ko async_tx.ko
 module_exit(async_pq_exit);
 
 MODULE_DESCRIPTION("asynchronous raid6 syndrome generation/validation");
Only in linux-4.1/crypto/async_tx: async_pq.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/async_tx/async_tx.c linux-4.1/crypto/async_tx/async_tx.c
--- linux-4.1.orig/crypto/async_tx/async_tx.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/async_tx/async_tx.c	2015-06-25 22:51:15.754628723 +0100
@@ -43,7 +43,7 @@ static void __exit async_tx_exit(void)
 	async_dmaengine_put();
 }
 
-module_init(async_tx_init);
+deferred_module_init(async_tx_init);
 module_exit(async_tx_exit);
 
 /**
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/authenc.c linux-4.1/crypto/authenc.c
--- linux-4.1.orig/crypto/authenc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/authenc.c	2015-06-25 22:51:15.755628606 +0100
@@ -716,7 +716,7 @@ static void __exit crypto_authenc_module
 	crypto_unregister_template(&crypto_authenc_tmpl);
 }
 
-module_init(crypto_authenc_module_init);
+deferred_module_init(crypto_authenc_module_init);
 module_exit(crypto_authenc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/authencesn.c linux-4.1/crypto/authencesn.c
--- linux-4.1.orig/crypto/authencesn.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/authencesn.c	2015-06-25 22:51:15.755628606 +0100
@@ -808,7 +808,7 @@ static void __exit crypto_authenc_esn_mo
 	crypto_unregister_template(&crypto_authenc_esn_tmpl);
 }
 
-module_init(crypto_authenc_esn_module_init);
+deferred_module_init(crypto_authenc_esn_module_init);
 module_exit(crypto_authenc_esn_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/blowfish_generic.c linux-4.1/crypto/blowfish_generic.c
--- linux-4.1.orig/crypto/blowfish_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/blowfish_generic.c	2015-06-25 22:51:15.319679570 +0100
@@ -133,7 +133,7 @@ static void __exit blowfish_mod_fini(voi
 	crypto_unregister_alg(&alg);
 }
 
-module_init(blowfish_mod_init);
+deferred_module_init(blowfish_mod_init);	//blowfish_common.ko
 module_exit(blowfish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/camellia_generic.c linux-4.1/crypto/camellia_generic.c
--- linux-4.1.orig/crypto/camellia_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/camellia_generic.c	2015-06-25 22:51:15.756628489 +0100
@@ -1093,7 +1093,7 @@ static void __exit camellia_fini(void)
 	crypto_unregister_alg(&camellia_alg);
 }
 
-module_init(camellia_init);
+deferred_module_init(camellia_init);
 module_exit(camellia_fini);
 
 MODULE_DESCRIPTION("Camellia Cipher Algorithm");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/cast5_generic.c linux-4.1/crypto/cast5_generic.c
--- linux-4.1.orig/crypto/cast5_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/cast5_generic.c	2015-06-25 22:51:15.758628255 +0100
@@ -544,7 +544,7 @@ static void __exit cast5_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast5_mod_init);
+deferred_module_init(cast5_mod_init);
 module_exit(cast5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/cast6_generic.c linux-4.1/crypto/cast6_generic.c
--- linux-4.1.orig/crypto/cast6_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/cast6_generic.c	2015-06-25 22:51:15.758628255 +0100
@@ -286,7 +286,7 @@ static void __exit cast6_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(cast6_mod_init);
+deferred_module_init(cast6_mod_init);
 module_exit(cast6_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/cbc.c linux-4.1/crypto/cbc.c
--- linux-4.1.orig/crypto/cbc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/cbc.c	2015-06-25 22:51:15.320679453 +0100
@@ -284,7 +284,7 @@ static void __exit crypto_cbc_module_exi
 	crypto_unregister_template(&crypto_cbc_tmpl);
 }
 
-module_init(crypto_cbc_module_init);
+deferred_module_init(crypto_cbc_module_init);
 module_exit(crypto_cbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/ccm.c linux-4.1/crypto/ccm.c
--- linux-4.1.orig/crypto/ccm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/ccm.c	2015-06-25 22:51:15.760628022 +0100
@@ -874,7 +874,7 @@ static void __exit crypto_ccm_module_exi
 	crypto_unregister_template(&crypto_ccm_base_tmpl);
 }
 
-module_init(crypto_ccm_module_init);
+deferred_module_init(crypto_ccm_module_init);
 module_exit(crypto_ccm_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/chainiv.c linux-4.1/crypto/chainiv.c
--- linux-4.1.orig/crypto/chainiv.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/chainiv.c	2015-06-25 22:51:15.760628022 +0100
@@ -354,7 +354,7 @@ static void chainiv_module_exit(void)
 	crypto_unregister_template(&chainiv_tmpl);
 }
 
-module_init(chainiv_module_init);
+deferred_module_init(chainiv_module_init);
 module_exit(chainiv_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/cmac.c linux-4.1/crypto/cmac.c
--- linux-4.1.orig/crypto/cmac.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/cmac.c	2015-06-25 22:51:15.760628022 +0100
@@ -308,7 +308,7 @@ static void __exit crypto_cmac_module_ex
 	crypto_unregister_template(&crypto_cmac_tmpl);
 }
 
-module_init(crypto_cmac_module_init);
+deferred_module_init(crypto_cmac_module_init);
 module_exit(crypto_cmac_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/crc32.c linux-4.1/crypto/crc32.c
--- linux-4.1.orig/crypto/crc32.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/crc32.c	2015-06-25 22:51:15.320679453 +0100
@@ -150,7 +150,7 @@ static void __exit crc32_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32_mod_init);
+deferred_module_init(crc32_mod_init);
 module_exit(crc32_mod_fini);
 
 MODULE_AUTHOR("Alexander Boyko <alexander_boyko@xyratex.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/crc32c_generic.c linux-4.1/crypto/crc32c_generic.c
--- linux-4.1.orig/crypto/crc32c_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/crc32c_generic.c	2015-06-25 22:51:15.321679337 +0100
@@ -164,7 +164,7 @@ static void __exit crc32c_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crc32c_mod_init);
+deferred_module_init(crc32c_mod_init);
 module_exit(crc32c_mod_fini);
 
 MODULE_AUTHOR("Clay Haapala <chaapala@cisco.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/crct10dif_generic.c linux-4.1/crypto/crct10dif_generic.c
--- linux-4.1.orig/crypto/crct10dif_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/crct10dif_generic.c	2015-06-25 22:51:15.321679337 +0100
@@ -118,7 +118,7 @@ static void __exit crct10dif_mod_fini(vo
 	crypto_unregister_shash(&alg);
 }
 
-module_init(crct10dif_mod_init);
+deferred_module_init(crct10dif_mod_init);
 module_exit(crct10dif_mod_fini);
 
 MODULE_AUTHOR("Tim Chen <tim.c.chen@linux.intel.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/crypto_null.c linux-4.1/crypto/crypto_null.c
--- linux-4.1.orig/crypto/crypto_null.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/crypto_null.c	2015-06-25 22:51:15.322679220 +0100
@@ -175,7 +175,7 @@ static void __exit crypto_null_mod_fini(
 	crypto_unregister_algs(null_algs, ARRAY_SIZE(null_algs));
 }
 
-module_init(crypto_null_mod_init);
+deferred_module_init(crypto_null_mod_init);
 module_exit(crypto_null_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/crypto_user.c linux-4.1/crypto/crypto_user.c
--- linux-4.1.orig/crypto/crypto_user.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/crypto_user.c	2015-06-25 22:51:15.323679103 +0100
@@ -548,7 +548,7 @@ static void __exit crypto_user_exit(void
 	netlink_kernel_release(crypto_nlsk);
 }
 
-module_init(crypto_user_init);
+deferred_module_init(crypto_user_init);
 module_exit(crypto_user_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Steffen Klassert <steffen.klassert@secunet.com>");
Only in linux-4.1/crypto: crypto_user.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/ctr.c linux-4.1/crypto/ctr.c
--- linux-4.1.orig/crypto/ctr.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/ctr.c	2015-06-25 22:51:15.764627554 +0100
@@ -461,7 +461,7 @@ static void __exit crypto_ctr_module_exi
 	crypto_unregister_template(&crypto_ctr_tmpl);
 }
 
-module_init(crypto_ctr_module_init);
+deferred_module_init(crypto_ctr_module_init);
 module_exit(crypto_ctr_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/cts.c linux-4.1/crypto/cts.c
--- linux-4.1.orig/crypto/cts.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/cts.c	2015-06-25 22:51:15.764627554 +0100
@@ -347,7 +347,7 @@ static void __exit crypto_cts_module_exi
 	crypto_unregister_template(&crypto_cts_tmpl);
 }
 
-module_init(crypto_cts_module_init);
+deferred_module_init(crypto_cts_module_init);
 module_exit(crypto_cts_module_exit);
 
 MODULE_LICENSE("Dual BSD/GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/deflate.c linux-4.1/crypto/deflate.c
--- linux-4.1.orig/crypto/deflate.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/deflate.c	2015-06-25 22:51:15.323679103 +0100
@@ -216,7 +216,7 @@ static void __exit deflate_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(deflate_mod_init);
+module_init(deflate_mod_init);	//zlib_deflate
 module_exit(deflate_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/des_generic.c linux-4.1/crypto/des_generic.c
--- linux-4.1.orig/crypto/des_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/des_generic.c	2015-06-25 22:51:15.765627437 +0100
@@ -993,7 +993,7 @@ static void __exit des_generic_mod_fini(
 	crypto_unregister_algs(des_algs, ARRAY_SIZE(des_algs));
 }
 
-module_init(des_generic_mod_init);
+deferred_module_init(des_generic_mod_init);
 module_exit(des_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/drbg.c linux-4.1/crypto/drbg.c
--- linux-4.1.orig/crypto/drbg.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/drbg.c	2015-06-25 22:51:15.766627320 +0100
@@ -1966,7 +1966,7 @@ static void __exit drbg_exit(void)
 	crypto_unregister_algs(drbg_algs, (ARRAY_SIZE(drbg_cores) * 2));
 }
 
-module_init(drbg_init);
+deferred_module_init(drbg_init);
 module_exit(drbg_exit);
 #ifndef CRYPTO_DRBG_HASH_STRING
 #define CRYPTO_DRBG_HASH_STRING ""
Only in linux-4.1/crypto: drbg.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/ecb.c linux-4.1/crypto/ecb.c
--- linux-4.1.orig/crypto/ecb.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/ecb.c	2015-06-25 22:51:15.324678986 +0100
@@ -180,7 +180,7 @@ static void __exit crypto_ecb_module_exi
 	crypto_unregister_template(&crypto_ecb_tmpl);
 }
 
-module_init(crypto_ecb_module_init);
+deferred_module_init(crypto_ecb_module_init);
 module_exit(crypto_ecb_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/eseqiv.c linux-4.1/crypto/eseqiv.c
--- linux-4.1.orig/crypto/eseqiv.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/eseqiv.c	2015-06-25 22:51:15.768627086 +0100
@@ -262,7 +262,7 @@ static void __exit eseqiv_module_exit(vo
 	crypto_unregister_template(&eseqiv_tmpl);
 }
 
-module_init(eseqiv_module_init);
+deferred_module_init(eseqiv_module_init);
 module_exit(eseqiv_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/fcrypt.c linux-4.1/crypto/fcrypt.c
--- linux-4.1.orig/crypto/fcrypt.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/fcrypt.c	2015-06-25 22:51:15.768627086 +0100
@@ -414,7 +414,7 @@ static void __exit fcrypt_mod_fini(void)
 	crypto_unregister_alg(&fcrypt_alg);
 }
 
-module_init(fcrypt_mod_init);
+deferred_module_init(fcrypt_mod_init);
 module_exit(fcrypt_mod_fini);
 
 MODULE_LICENSE("Dual BSD/GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/gcm.c linux-4.1/crypto/gcm.c
--- linux-4.1.orig/crypto/gcm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/gcm.c	2015-06-25 22:51:15.769626970 +0100
@@ -1435,7 +1435,7 @@ static void __exit crypto_gcm_module_exi
 	crypto_unregister_template(&crypto_gcm_base_tmpl);
 }
 
-module_init(crypto_gcm_module_init);
+deferred_module_init(crypto_gcm_module_init);
 module_exit(crypto_gcm_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/ghash-generic.c linux-4.1/crypto/ghash-generic.c
--- linux-4.1.orig/crypto/ghash-generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/ghash-generic.c	2015-06-25 22:51:15.324678986 +0100
@@ -167,7 +167,7 @@ static void __exit ghash_mod_exit(void)
 	crypto_unregister_shash(&ghash_alg);
 }
 
-module_init(ghash_mod_init);
+module_init(ghash_mod_init);	//gf128mul
 module_exit(ghash_mod_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/hmac.c linux-4.1/crypto/hmac.c
--- linux-4.1.orig/crypto/hmac.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/hmac.c	2015-06-25 22:51:15.770626853 +0100
@@ -263,7 +263,7 @@ static void __exit hmac_module_exit(void
 	crypto_unregister_template(&hmac_tmpl);
 }
 
-module_init(hmac_module_init);
+deferred_module_init(hmac_module_init);
 module_exit(hmac_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/khazad.c linux-4.1/crypto/khazad.c
--- linux-4.1.orig/crypto/khazad.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/khazad.c	2015-06-25 22:51:15.771626736 +0100
@@ -875,7 +875,7 @@ static void __exit khazad_mod_fini(void)
 }
 
 
-module_init(khazad_mod_init);
+deferred_module_init(khazad_mod_init);
 module_exit(khazad_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/krng.c linux-4.1/crypto/krng.c
--- linux-4.1.orig/crypto/krng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/krng.c	2015-06-25 22:51:15.771626736 +0100
@@ -57,7 +57,7 @@ static void __exit krng_mod_fini(void)
 	return;
 }
 
-module_init(krng_mod_init);
+deferred_module_init(krng_mod_init);
 module_exit(krng_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/lrw.c linux-4.1/crypto/lrw.c
--- linux-4.1.orig/crypto/lrw.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/lrw.c	2015-06-25 22:51:15.325678869 +0100
@@ -395,7 +395,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/lz4.c linux-4.1/crypto/lz4.c
--- linux-4.1.orig/crypto/lz4.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/lz4.c	2015-06-25 22:51:15.325678869 +0100
@@ -99,7 +99,7 @@ static void __exit lz4_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4);
 }
 
-module_init(lz4_mod_init);
+deferred_module_init(lz4_mod_init);
 module_exit(lz4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/lz4hc.c linux-4.1/crypto/lz4hc.c
--- linux-4.1.orig/crypto/lz4hc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/lz4hc.c	2015-06-25 22:51:15.325678869 +0100
@@ -99,7 +99,7 @@ static void __exit lz4hc_mod_fini(void)
 	crypto_unregister_alg(&alg_lz4hc);
 }
 
-module_init(lz4hc_mod_init);
+deferred_module_init(lz4hc_mod_init);
 module_exit(lz4hc_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/lzo.c linux-4.1/crypto/lzo.c
--- linux-4.1.orig/crypto/lzo.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/lzo.c	2015-06-25 22:51:15.326678752 +0100
@@ -102,7 +102,7 @@ static void __exit lzo_mod_fini(void)
 	crypto_unregister_alg(&alg);
 }
 
-module_init(lzo_mod_init);
+deferred_module_init(lzo_mod_init);
 module_exit(lzo_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/md4.c linux-4.1/crypto/md4.c
--- linux-4.1.orig/crypto/md4.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/md4.c	2015-06-25 22:51:15.326678752 +0100
@@ -250,7 +250,7 @@ static void __exit md4_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md4_mod_init);
+deferred_module_init(md4_mod_init);
 module_exit(md4_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/md5.c linux-4.1/crypto/md5.c
--- linux-4.1.orig/crypto/md5.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/md5.c	2015-06-25 22:51:15.327678635 +0100
@@ -163,7 +163,7 @@ static void __exit md5_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(md5_mod_init);
+deferred_module_init(md5_mod_init);
 module_exit(md5_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/michael_mic.c linux-4.1/crypto/michael_mic.c
--- linux-4.1.orig/crypto/michael_mic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/michael_mic.c	2015-06-25 22:51:15.775626268 +0100
@@ -178,7 +178,7 @@ static void __exit michael_mic_exit(void
 }
 
 
-module_init(michael_mic_init);
+deferred_module_init(michael_mic_init);
 module_exit(michael_mic_exit);
 
 MODULE_LICENSE("GPL v2");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/pcbc.c linux-4.1/crypto/pcbc.c
--- linux-4.1.orig/crypto/pcbc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/pcbc.c	2015-06-25 22:51:15.776626151 +0100
@@ -290,7 +290,7 @@ static void __exit crypto_pcbc_module_ex
 	crypto_unregister_template(&crypto_pcbc_tmpl);
 }
 
-module_init(crypto_pcbc_module_init);
+deferred_module_init(crypto_pcbc_module_init);
 module_exit(crypto_pcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/pcrypt.c linux-4.1/crypto/pcrypt.c
--- linux-4.1.orig/crypto/pcrypt.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/pcrypt.c	2015-06-25 22:51:15.776626151 +0100
@@ -559,7 +559,7 @@ static void __exit pcrypt_exit(void)
 	crypto_unregister_template(&pcrypt_tmpl);
 }
 
-module_init(pcrypt_init);
+deferred_module_init(pcrypt_init);
 module_exit(pcrypt_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/rmd128.c linux-4.1/crypto/rmd128.c
--- linux-4.1.orig/crypto/rmd128.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/rmd128.c	2015-06-25 22:51:15.328678518 +0100
@@ -321,7 +321,7 @@ static void __exit rmd128_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd128_mod_init);
+deferred_module_init(rmd128_mod_init);
 module_exit(rmd128_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/rmd160.c linux-4.1/crypto/rmd160.c
--- linux-4.1.orig/crypto/rmd160.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/rmd160.c	2015-06-25 22:51:15.329678402 +0100
@@ -365,7 +365,7 @@ static void __exit rmd160_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd160_mod_init);
+deferred_module_init(rmd160_mod_init);
 module_exit(rmd160_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/rmd256.c linux-4.1/crypto/rmd256.c
--- linux-4.1.orig/crypto/rmd256.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/rmd256.c	2015-06-25 22:51:15.329678402 +0100
@@ -340,7 +340,7 @@ static void __exit rmd256_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd256_mod_init);
+deferred_module_init(rmd256_mod_init);
 module_exit(rmd256_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/rmd320.c linux-4.1/crypto/rmd320.c
--- linux-4.1.orig/crypto/rmd320.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/rmd320.c	2015-06-25 22:51:15.330678285 +0100
@@ -389,7 +389,7 @@ static void __exit rmd320_mod_fini(void)
 	crypto_unregister_shash(&alg);
 }
 
-module_init(rmd320_mod_init);
+deferred_module_init(rmd320_mod_init);
 module_exit(rmd320_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/salsa20_generic.c linux-4.1/crypto/salsa20_generic.c
--- linux-4.1.orig/crypto/salsa20_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/salsa20_generic.c	2015-06-25 22:51:15.781625567 +0100
@@ -243,7 +243,7 @@ static void __exit salsa20_generic_mod_f
 	crypto_unregister_alg(&alg);
 }
 
-module_init(salsa20_generic_mod_init);
+deferred_module_init(salsa20_generic_mod_init);
 module_exit(salsa20_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/seed.c linux-4.1/crypto/seed.c
--- linux-4.1.orig/crypto/seed.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/seed.c	2015-06-25 22:51:15.784625216 +0100
@@ -470,7 +470,7 @@ static void __exit seed_fini(void)
 	crypto_unregister_alg(&seed_alg);
 }
 
-module_init(seed_init);
+deferred_module_init(seed_init);
 module_exit(seed_fini);
 
 MODULE_DESCRIPTION("SEED Cipher Algorithm");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/seqiv.c linux-4.1/crypto/seqiv.c
--- linux-4.1.orig/crypto/seqiv.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/seqiv.c	2015-06-25 22:51:15.785625099 +0100
@@ -369,7 +369,7 @@ static void __exit seqiv_module_exit(voi
 	crypto_unregister_template(&seqiv_tmpl);
 }
 
-module_init(seqiv_module_init);
+deferred_module_init(seqiv_module_init);
 module_exit(seqiv_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/serpent_generic.c linux-4.1/crypto/serpent_generic.c
--- linux-4.1.orig/crypto/serpent_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/serpent_generic.c	2015-06-25 22:51:15.786624983 +0100
@@ -659,7 +659,7 @@ static void __exit serpent_mod_fini(void
 	crypto_unregister_algs(srp_algs, ARRAY_SIZE(srp_algs));
 }
 
-module_init(serpent_mod_init);
+deferred_module_init(serpent_mod_init);
 module_exit(serpent_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/sha1_generic.c linux-4.1/crypto/sha1_generic.c
--- linux-4.1.orig/crypto/sha1_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/sha1_generic.c	2015-06-25 22:51:15.330678285 +0100
@@ -85,7 +85,7 @@ static void __exit sha1_generic_mod_fini
 	crypto_unregister_shash(&alg);
 }
 
-module_init(sha1_generic_mod_init);
+deferred_module_init(sha1_generic_mod_init);
 module_exit(sha1_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/crypto: sha1_generic.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/sha256_generic.c linux-4.1/crypto/sha256_generic.c
--- linux-4.1.orig/crypto/sha256_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/sha256_generic.c	2015-06-25 22:51:15.330678285 +0100
@@ -285,7 +285,7 @@ static void __exit sha256_generic_mod_fi
 	crypto_unregister_shashes(sha256_algs, ARRAY_SIZE(sha256_algs));
 }
 
-module_init(sha256_generic_mod_init);
+deferred_module_init(sha256_generic_mod_init);
 module_exit(sha256_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/crypto: sha256_generic.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/sha512_generic.c linux-4.1/crypto/sha512_generic.c
--- linux-4.1.orig/crypto/sha512_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/sha512_generic.c	2015-06-25 22:51:15.331678168 +0100
@@ -201,7 +201,7 @@ static void __exit sha512_generic_mod_fi
 	crypto_unregister_shashes(sha512_algs, ARRAY_SIZE(sha512_algs));
 }
 
-module_init(sha512_generic_mod_init);
+deferred_module_init(sha512_generic_mod_init);
 module_exit(sha512_generic_mod_fini);
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/crypto: sha512_generic.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/tcrypt.c linux-4.1/crypto/tcrypt.c
--- linux-4.1.orig/crypto/tcrypt.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/tcrypt.c	2015-06-25 22:51:15.331678168 +0100
@@ -2188,7 +2188,7 @@ err_free_tv:
  */
 static void __exit tcrypt_mod_fini(void) { }
 
-module_init(tcrypt_mod_init);
+deferred_module_init(tcrypt_mod_init);
 module_exit(tcrypt_mod_fini);
 
 module_param(alg, charp, 0);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/tea.c linux-4.1/crypto/tea.c
--- linux-4.1.orig/crypto/tea.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/tea.c	2015-06-25 22:51:15.332678051 +0100
@@ -274,7 +274,7 @@ MODULE_ALIAS_CRYPTO("tea");
 MODULE_ALIAS_CRYPTO("xtea");
 MODULE_ALIAS_CRYPTO("xeta");
 
-module_init(tea_mod_init);
+deferred_module_init(tea_mod_init);
 module_exit(tea_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/tgr192.c linux-4.1/crypto/tgr192.c
--- linux-4.1.orig/crypto/tgr192.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/tgr192.c	2015-06-25 22:51:15.333677934 +0100
@@ -680,7 +680,7 @@ MODULE_ALIAS_CRYPTO("tgr192");
 MODULE_ALIAS_CRYPTO("tgr160");
 MODULE_ALIAS_CRYPTO("tgr128");
 
-module_init(tgr192_mod_init);
+deferred_module_init(tgr192_mod_init);
 module_exit(tgr192_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/twofish_generic.c linux-4.1/crypto/twofish_generic.c
--- linux-4.1.orig/crypto/twofish_generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/twofish_generic.c	2015-06-25 22:51:15.333677934 +0100
@@ -206,7 +206,7 @@ static void __exit twofish_mod_fini(void
 	crypto_unregister_alg(&alg);
 }
 
-module_init(twofish_mod_init);
+deferred_module_init(twofish_mod_init);	//twofish_common
 module_exit(twofish_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/vmac.c linux-4.1/crypto/vmac.c
--- linux-4.1.orig/crypto/vmac.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/vmac.c	2015-06-25 22:51:15.334677817 +0100
@@ -708,7 +708,7 @@ static void __exit vmac_module_exit(void
 	crypto_unregister_template(&vmac_tmpl);
 }
 
-module_init(vmac_module_init);
+deferred_module_init(vmac_module_init);
 module_exit(vmac_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/wp512.c linux-4.1/crypto/wp512.c
--- linux-4.1.orig/crypto/wp512.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/wp512.c	2015-06-25 22:51:15.334677817 +0100
@@ -1171,7 +1171,7 @@ MODULE_ALIAS_CRYPTO("wp512");
 MODULE_ALIAS_CRYPTO("wp384");
 MODULE_ALIAS_CRYPTO("wp256");
 
-module_init(wp512_mod_init);
+deferred_module_init(wp512_mod_init);
 module_exit(wp512_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/xcbc.c linux-4.1/crypto/xcbc.c
--- linux-4.1.orig/crypto/xcbc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/xcbc.c	2015-06-25 22:51:15.335677700 +0100
@@ -281,7 +281,7 @@ static void __exit crypto_xcbc_module_ex
 	crypto_unregister_template(&crypto_xcbc_tmpl);
 }
 
-module_init(crypto_xcbc_module_init);
+deferred_module_init(crypto_xcbc_module_init);
 module_exit(crypto_xcbc_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/xts.c linux-4.1/crypto/xts.c
--- linux-4.1.orig/crypto/xts.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/xts.c	2015-06-25 22:51:15.336677583 +0100
@@ -357,7 +357,7 @@ static void __exit crypto_module_exit(vo
 	crypto_unregister_template(&crypto_tmpl);
 }
 
-module_init(crypto_module_init);
+deferred_module_init(crypto_module_init);	//gf128mul
 module_exit(crypto_module_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/crypto/zlib.c linux-4.1/crypto/zlib.c
--- linux-4.1.orig/crypto/zlib.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/crypto/zlib.c	2015-06-25 22:51:15.336677583 +0100
@@ -372,7 +372,7 @@ static void __exit zlib_mod_fini(void)
 	crypto_unregister_pcomp(&zlib_alg);
 }
 
-module_init(zlib_mod_init);
+deferred_module_init(zlib_mod_init);	//zlib_deflate
 module_exit(zlib_mod_fini);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/ac.c linux-4.1/drivers/acpi/ac.c
--- linux-4.1.orig/drivers/acpi/ac.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/ac.c	2015-06-25 22:51:15.336677583 +0100
@@ -458,5 +458,5 @@ static void __exit acpi_ac_exit(void)
 	acpi_unlock_ac_dir(acpi_ac_dir);
 #endif
 }
-module_init(acpi_ac_init);
+async_module_init(acpi_ac_init);	//power_supply (subinit)
 module_exit(acpi_ac_exit);
Only in linux-4.1/drivers/acpi: ac.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/acpi_extlog.c linux-4.1/drivers/acpi/acpi_extlog.c
--- linux-4.1.orig/drivers/acpi/acpi_extlog.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/acpi_extlog.c	2015-06-25 22:51:15.796623814 +0100
@@ -319,7 +319,7 @@ static void __exit extlog_exit(void)
 	kfree(elog_buf);
 }
 
-module_init(extlog_init);
+async_module_init(extlog_init);
 module_exit(extlog_exit);
 
 MODULE_AUTHOR("Chen, Gong <gong.chen@intel.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/acpi_ipmi.c linux-4.1/drivers/acpi/acpi_ipmi.c
--- linux-4.1.orig/drivers/acpi/acpi_ipmi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/acpi_ipmi.c	2015-06-25 22:51:15.337677466 +0100
@@ -657,5 +657,5 @@ static void __exit acpi_ipmi_exit(void)
 					  &acpi_ipmi_space_handler);
 }
 
-module_init(acpi_ipmi_init);
+deferred_module_init(acpi_ipmi_init);	//ipmi_msghandler
 module_exit(acpi_ipmi_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/acpi_pad.c linux-4.1/drivers/acpi/acpi_pad.c
--- linux-4.1.orig/drivers/acpi/acpi_pad.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/acpi_pad.c	2015-06-25 22:51:15.337677466 +0100
@@ -495,7 +495,7 @@ static void __exit acpi_pad_exit(void)
 	acpi_bus_unregister_driver(&acpi_pad_driver);
 }
 
-module_init(acpi_pad_init);
+deferred_module_init(acpi_pad_init);
 module_exit(acpi_pad_exit);
 MODULE_AUTHOR("Shaohua Li<shaohua.li@intel.com>");
 MODULE_DESCRIPTION("ACPI Processor Aggregator Driver");
Only in linux-4.1/drivers/acpi: acpi_pad.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/apei/einj.c linux-4.1/drivers/acpi/apei/einj.c
--- linux-4.1.orig/drivers/acpi/apei/einj.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/apei/einj.c	2015-06-25 22:51:15.798623580 +0100
@@ -825,7 +825,7 @@ static void __exit einj_exit(void)
 	debugfs_remove_recursive(einj_debug_dir);
 }
 
-module_init(einj_init);
+async_module_init(einj_init);
 module_exit(einj_exit);
 
 MODULE_AUTHOR("Huang Ying");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/apei/erst-dbg.c linux-4.1/drivers/acpi/apei/erst-dbg.c
--- linux-4.1.orig/drivers/acpi/apei/erst-dbg.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/apei/erst-dbg.c	2015-06-25 22:51:15.799623463 +0100
@@ -235,7 +235,7 @@ static __exit void erst_dbg_exit(void)
 	kfree(erst_dbg_buf);
 }
 
-module_init(erst_dbg_init);
+async_module_init(erst_dbg_init);
 module_exit(erst_dbg_exit);
 
 MODULE_AUTHOR("Huang Ying");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/apei/ghes.c linux-4.1/drivers/acpi/apei/ghes.c
--- linux-4.1.orig/drivers/acpi/apei/ghes.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/apei/ghes.c	2015-06-25 22:51:15.799623463 +0100
@@ -1154,7 +1154,7 @@ static void __exit ghes_exit(void)
 	ghes_ioremap_exit();
 }
 
-module_init(ghes_init);
+async_module_init(ghes_init);
 module_exit(ghes_exit);
 
 MODULE_AUTHOR("Huang Ying");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/battery.c linux-4.1/drivers/acpi/battery.c
--- linux-4.1.orig/drivers/acpi/battery.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/battery.c	2015-06-25 22:51:15.338677350 +0100
@@ -1325,5 +1325,5 @@ static void __exit acpi_battery_exit(voi
 #endif
 }
 
-module_init(acpi_battery_init);
+deferred_module_init(acpi_battery_init);
 module_exit(acpi_battery_exit);
Only in linux-4.1/drivers/acpi: battery.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/pmic/intel_pmic_crc.c linux-4.1/drivers/acpi/pmic/intel_pmic_crc.c
--- linux-4.1.orig/drivers/acpi/pmic/intel_pmic_crc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/pmic/intel_pmic_crc.c	2015-06-25 22:51:15.801623229 +0100
@@ -205,7 +205,7 @@ static int __init intel_crc_pmic_opregio
 {
 	return platform_driver_register(&intel_crc_pmic_opregion_driver);
 }
-module_init(intel_crc_pmic_opregion_driver_init);
+async_module_init(intel_crc_pmic_opregion_driver_init);
 
 MODULE_DESCRIPTION("CrystalCove ACPI operation region driver");
 MODULE_LICENSE("GPL");
Only in linux-4.1/drivers/acpi/pmic: intel_pmic_crc.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/pmic/intel_pmic_xpower.c linux-4.1/drivers/acpi/pmic/intel_pmic_xpower.c
--- linux-4.1.orig/drivers/acpi/pmic/intel_pmic_xpower.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/pmic/intel_pmic_xpower.c	2015-06-25 22:51:15.801623229 +0100
@@ -262,7 +262,7 @@ static int __init intel_xpower_pmic_opre
 {
 	return platform_driver_register(&intel_xpower_pmic_opregion_driver);
 }
-module_init(intel_xpower_pmic_opregion_driver_init);
+async_module_init(intel_xpower_pmic_opregion_driver_init);
 
 MODULE_DESCRIPTION("XPower AXP288 ACPI operation region driver");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/processor_driver.c linux-4.1/drivers/acpi/processor_driver.c
--- linux-4.1.orig/drivers/acpi/processor_driver.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/processor_driver.c	2015-06-25 22:51:15.339677233 +0100
@@ -301,7 +301,7 @@ static void __exit acpi_processor_driver
 	driver_unregister(&acpi_processor_driver);
 }
 
-module_init(acpi_processor_driver_init);
+deferred_module_init(acpi_processor_driver_init);
 module_exit(acpi_processor_driver_exit);
 
 MODULE_ALIAS("processor");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/sbs.c linux-4.1/drivers/acpi/sbs.c
--- linux-4.1.orig/drivers/acpi/sbs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/sbs.c	2015-06-25 22:51:15.339677233 +0100
@@ -769,5 +769,5 @@ static void __exit acpi_sbs_exit(void)
 	return;
 }
 
-module_init(acpi_sbs_init);
+deferred_module_init(acpi_sbs_init);
 module_exit(acpi_sbs_exit);
Only in linux-4.1/drivers/acpi: sbs.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/thermal.c linux-4.1/drivers/acpi/thermal.c
--- linux-4.1.orig/drivers/acpi/thermal.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/thermal.c	2015-06-25 22:51:15.340677116 +0100
@@ -1281,5 +1281,5 @@ static void __exit acpi_thermal_exit(voi
 	return;
 }
 
-module_init(acpi_thermal_init);
+deferred_module_init(acpi_thermal_init);
 module_exit(acpi_thermal_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/acpi/video.c linux-4.1/drivers/acpi/video.c
--- linux-4.1.orig/drivers/acpi/video.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/acpi/video.c	2015-06-25 22:51:15.341676999 +0100
@@ -2227,5 +2227,5 @@ static void __exit acpi_video_exit(void)
 	return;
 }
 
-module_init(acpi_video_init);
+deferred_module_init(acpi_video_init);
 module_exit(acpi_video_exit);
Only in linux-4.1/drivers/acpi: video.c.orig
Only in linux-4.1/drivers: async.c
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/ata/acard-ahci.c linux-4.1/drivers/ata/acard-ahci.c
--- linux-4.1.orig/drivers/ata/acard-ahci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/ata/acard-ahci.c	2015-06-25 22:51:15.342676882 +0100
@@ -501,7 +501,7 @@ static int acard_ahci_init_one(struct pc
 	return ahci_host_activate(host, pdev->irq, &acard_ahci_sht);
 }
 
-module_pci_driver(acard_ahci_pci_driver);
+async_module_pci_driver(acard_ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("ACard AHCI SATA low-level driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/ata/ahci.c linux-4.1/drivers/ata/ahci.c
--- linux-4.1.orig/drivers/ata/ahci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/ata/ahci.c	2015-06-25 22:51:15.343676765 +0100
@@ -1552,7 +1552,7 @@ static int ahci_init_one(struct pci_dev
 	return ahci_host_activate(host, pdev->irq, &ahci_sht);
 }
 
-module_pci_driver(ahci_pci_driver);
+async_module_pci_driver(ahci_pci_driver);
 
 MODULE_AUTHOR("Jeff Garzik");
 MODULE_DESCRIPTION("AHCI SATA low-level driver");
Only in linux-4.1/drivers/ata: ahci.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/ata/ahci_platform.c linux-4.1/drivers/ata/ahci_platform.c
--- linux-4.1.orig/drivers/ata/ahci_platform.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/ata/ahci_platform.c	2015-06-25 22:51:16.547536029 +0100
@@ -87,7 +87,7 @@ static struct platform_driver ahci_drive
 		.pm = &ahci_pm_ops,
 	},
 };
-module_platform_driver(ahci_driver);
+async_module_platform_driver(ahci_driver);
 
 MODULE_DESCRIPTION("AHCI SATA platform driver");
 MODULE_AUTHOR("Anton Vorontsov <avorontsov@ru.mvista.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/block/brd.c linux-4.1/drivers/block/brd.c
--- linux-4.1.orig/drivers/block/brd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/block/brd.c	2015-06-25 22:51:16.116586409 +0100
@@ -646,6 +646,6 @@ static void __exit brd_exit(void)
 	pr_info("brd: module unloaded\n");
 }
 
-module_init(brd_init);
+deferred_module_init(brd_init);
 module_exit(brd_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/block/loop.c linux-4.1/drivers/block/loop.c
--- linux-4.1.orig/drivers/block/loop.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/block/loop.c	2015-06-25 22:51:16.117586292 +0100
@@ -1855,7 +1855,7 @@ static void __exit loop_exit(void)
 	misc_deregister(&loop_misc);
 }
 
-module_init(loop_init);
+deferred_module_init(loop_init);
 module_exit(loop_exit);
 
 #ifndef MODULE
Only in linux-4.1/drivers/block: loop.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/ali-agp.c linux-4.1/drivers/char/agp/ali-agp.c
--- linux-4.1.orig/drivers/char/agp/ali-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/ali-agp.c	2015-06-25 22:51:16.947489273 +0100
@@ -414,7 +414,7 @@ static void __exit agp_ali_cleanup(void)
 	pci_unregister_driver(&agp_ali_pci_driver);
 }
 
-module_init(agp_ali_init);
+async_module_init(agp_ali_init);
 module_exit(agp_ali_cleanup);
 
 MODULE_AUTHOR("Dave Jones");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/alpha-agp.c linux-4.1/drivers/char/agp/alpha-agp.c
--- linux-4.1.orig/drivers/char/agp/alpha-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/alpha-agp.c	2015-06-25 22:51:16.947489273 +0100
@@ -215,7 +215,7 @@ static void __exit agp_alpha_core_cleanu
 	agp_put_bridge(alpha_bridge);
 }
 
-module_init(agp_alpha_core_init);
+async_module_init(agp_alpha_core_init);
 module_exit(agp_alpha_core_cleanup);
 
 MODULE_AUTHOR("Jeff Wiedemeier <Jeff.Wiedemeier@hp.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/amd64-agp.c linux-4.1/drivers/char/agp/amd64-agp.c
--- linux-4.1.orig/drivers/char/agp/amd64-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/amd64-agp.c	2015-06-25 22:51:16.948489156 +0100
@@ -810,7 +810,7 @@ static void __exit agp_amd64_cleanup(voi
 	pci_unregister_driver(&agp_amd64_pci_driver);
 }
 
-module_init(agp_amd64_mod_init);
+async_module_init(agp_amd64_mod_init);
 module_exit(agp_amd64_cleanup);
 
 MODULE_AUTHOR("Dave Jones, Andi Kleen");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/amd-k7-agp.c linux-4.1/drivers/char/agp/amd-k7-agp.c
--- linux-4.1.orig/drivers/char/agp/amd-k7-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/amd-k7-agp.c	2015-06-25 22:51:16.948489156 +0100
@@ -560,7 +560,7 @@ static void __exit agp_amdk7_cleanup(voi
 	pci_unregister_driver(&agp_amdk7_pci_driver);
 }
 
-module_init(agp_amdk7_init);
+async_module_init(agp_amdk7_init);
 module_exit(agp_amdk7_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/ati-agp.c linux-4.1/drivers/char/agp/ati-agp.c
--- linux-4.1.orig/drivers/char/agp/ati-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/ati-agp.c	2015-06-25 22:51:16.949489039 +0100
@@ -576,7 +576,7 @@ static void __exit agp_ati_cleanup(void)
 	pci_unregister_driver(&agp_ati_pci_driver);
 }
 
-module_init(agp_ati_init);
+async_module_init(agp_ati_init);
 module_exit(agp_ati_cleanup);
 
 MODULE_AUTHOR("Dave Jones");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/backend.c linux-4.1/drivers/char/agp/backend.c
--- linux-4.1.orig/drivers/char/agp/backend.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/backend.c	2015-06-25 22:51:15.344676648 +0100
@@ -361,6 +361,6 @@ MODULE_DESCRIPTION("AGP GART driver");
 MODULE_LICENSE("GPL and additional rights");
 MODULE_ALIAS_MISCDEV(AGPGART_MINOR);
 
-module_init(agp_init);
+deferred_module_init(agp_init);
 module_exit(agp_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/efficeon-agp.c linux-4.1/drivers/char/agp/efficeon-agp.c
--- linux-4.1.orig/drivers/char/agp/efficeon-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/efficeon-agp.c	2015-06-25 22:51:16.950488922 +0100
@@ -471,7 +471,7 @@ static void __exit agp_efficeon_cleanup(
 	pci_unregister_driver(&agp_efficeon_pci_driver);
 }
 
-module_init(agp_efficeon_init);
+async_module_init(agp_efficeon_init);
 module_exit(agp_efficeon_cleanup);
 
 MODULE_AUTHOR("Carlos Puchol <cpglinux@puchol.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/hp-agp.c linux-4.1/drivers/char/agp/hp-agp.c
--- linux-4.1.orig/drivers/char/agp/hp-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/hp-agp.c	2015-06-25 22:51:16.950488922 +0100
@@ -547,7 +547,7 @@ agp_hp_cleanup (void)
 {
 }
 
-module_init(agp_hp_init);
+async_module_init(agp_hp_init);
 module_exit(agp_hp_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/i460-agp.c linux-4.1/drivers/char/agp/i460-agp.c
--- linux-4.1.orig/drivers/char/agp/i460-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/i460-agp.c	2015-06-25 22:51:16.950488922 +0100
@@ -652,7 +652,7 @@ static void __exit agp_intel_i460_cleanu
 	pci_unregister_driver(&agp_intel_i460_pci_driver);
 }
 
-module_init(agp_intel_i460_init);
+async_module_init(agp_intel_i460_init);
 module_exit(agp_intel_i460_cleanup);
 
 MODULE_AUTHOR("Chris Ahna <Christopher.J.Ahna@intel.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/intel-agp.c linux-4.1/drivers/char/agp/intel-agp.c
--- linux-4.1.orig/drivers/char/agp/intel-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/intel-agp.c	2015-06-25 22:51:16.951488805 +0100
@@ -917,7 +917,7 @@ static void __exit agp_intel_cleanup(voi
 	pci_unregister_driver(&agp_intel_pci_driver);
 }
 
-module_init(agp_intel_init);
+async_module_init(agp_intel_init);
 module_exit(agp_intel_cleanup);
 
 MODULE_AUTHOR("Dave Jones, Various @Intel");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/nvidia-agp.c linux-4.1/drivers/char/agp/nvidia-agp.c
--- linux-4.1.orig/drivers/char/agp/nvidia-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/nvidia-agp.c	2015-06-25 22:51:15.345676531 +0100
@@ -468,7 +468,7 @@ static void __exit agp_nvidia_cleanup(vo
 	pci_dev_put(nvidia_private.dev_3);
 }
 
-module_init(agp_nvidia_init);
+deferred_module_init(agp_nvidia_init);
 module_exit(agp_nvidia_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/parisc-agp.c linux-4.1/drivers/char/agp/parisc-agp.c
--- linux-4.1.orig/drivers/char/agp/parisc-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/parisc-agp.c	2015-06-25 22:51:16.959487870 +0100
@@ -420,7 +420,7 @@ out:
 	return err;
 }
 
-module_init(parisc_agp_init);
+async_module_init(parisc_agp_init);
 
 MODULE_AUTHOR("Kyle McMartin <kyle@parisc-linux.org>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/sgi-agp.c linux-4.1/drivers/char/agp/sgi-agp.c
--- linux-4.1.orig/drivers/char/agp/sgi-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/sgi-agp.c	2015-06-25 22:51:16.959487870 +0100
@@ -332,7 +332,7 @@ static void agp_sgi_cleanup(void)
 	sgi_tioca_agp_bridges = NULL;
 }
 
-module_init(agp_sgi_init);
+async_module_init(agp_sgi_init);
 module_exit(agp_sgi_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/sis-agp.c linux-4.1/drivers/char/agp/sis-agp.c
--- linux-4.1.orig/drivers/char/agp/sis-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/sis-agp.c	2015-06-25 22:51:16.959487870 +0100
@@ -442,7 +442,7 @@ static void __exit agp_sis_cleanup(void)
 	pci_unregister_driver(&agp_sis_pci_driver);
 }
 
-module_init(agp_sis_init);
+async_module_init(agp_sis_init);
 module_exit(agp_sis_cleanup);
 
 module_param(agp_sis_force_delay, bool, 0);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/sworks-agp.c linux-4.1/drivers/char/agp/sworks-agp.c
--- linux-4.1.orig/drivers/char/agp/sworks-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/sworks-agp.c	2015-06-25 22:51:16.960487753 +0100
@@ -562,7 +562,7 @@ static void __exit agp_serverworks_clean
 	pci_unregister_driver(&agp_serverworks_pci_driver);
 }
 
-module_init(agp_serverworks_init);
+async_module_init(agp_serverworks_init);
 module_exit(agp_serverworks_cleanup);
 
 MODULE_LICENSE("GPL and additional rights");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/uninorth-agp.c linux-4.1/drivers/char/agp/uninorth-agp.c
--- linux-4.1.orig/drivers/char/agp/uninorth-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/uninorth-agp.c	2015-06-25 22:51:16.970486584 +0100
@@ -709,7 +709,7 @@ static void __exit agp_uninorth_cleanup(
 	pci_unregister_driver(&agp_uninorth_pci_driver);
 }
 
-module_init(agp_uninorth_init);
+async_module_init(agp_uninorth_init);
 module_exit(agp_uninorth_cleanup);
 
 module_param(aperture, charp, 0);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/agp/via-agp.c linux-4.1/drivers/char/agp/via-agp.c
--- linux-4.1.orig/drivers/char/agp/via-agp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/agp/via-agp.c	2015-06-25 22:51:16.971486467 +0100
@@ -591,7 +591,7 @@ static void __exit agp_via_cleanup(void)
 	pci_unregister_driver(&agp_via_pci_driver);
 }
 
-module_init(agp_via_init);
+async_module_init(agp_via_init);
 module_exit(agp_via_cleanup);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/apm-emulation.c linux-4.1/drivers/char/apm-emulation.c
--- linux-4.1.orig/drivers/char/apm-emulation.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/apm-emulation.c	2015-06-25 22:51:16.971486467 +0100
@@ -695,7 +695,7 @@ static void __exit apm_exit(void)
 	kthread_stop(kapmd_tsk);
 }
 
-module_init(apm_init);
+async_module_init(apm_init);
 module_exit(apm_exit);
 
 MODULE_AUTHOR("Stephen Rothwell");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/applicom.c linux-4.1/drivers/char/applicom.c
--- linux-4.1.orig/drivers/char/applicom.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/applicom.c	2015-06-25 22:51:16.972486351 +0100
@@ -348,7 +348,7 @@ out:
 	return ret;
 }
 
-module_init(applicom_init);
+async_module_init(applicom_init);
 module_exit(applicom_exit);
 
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/bfin-otp.c linux-4.1/drivers/char/bfin-otp.c
--- linux-4.1.orig/drivers/char/bfin-otp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/bfin-otp.c	2015-06-25 22:51:16.972486351 +0100
@@ -267,7 +267,7 @@ static void __exit bfin_otp_exit(void)
 	misc_deregister(&bfin_otp_misc_device);
 }
 
-module_init(bfin_otp_init);
+async_module_init(bfin_otp_init);
 module_exit(bfin_otp_exit);
 
 MODULE_AUTHOR("Mike Frysinger <vapier@gentoo.org>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/bsr.c linux-4.1/drivers/char/bsr.c
--- linux-4.1.orig/drivers/char/bsr.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/bsr.c	2015-06-25 22:51:16.981485299 +0100
@@ -355,7 +355,7 @@ static void __exit  bsr_exit(void)
 		unregister_chrdev_region(MKDEV(bsr_major, 0), BSR_MAX_DEVS);
 }
 
-module_init(bsr_init);
+async_module_init(bsr_init);
 module_exit(bsr_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Sonny Rao <sonnyrao@us.ibm.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ds1302.c linux-4.1/drivers/char/ds1302.c
--- linux-4.1.orig/drivers/char/ds1302.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ds1302.c	2015-06-25 22:51:16.982485182 +0100
@@ -354,4 +354,4 @@ static int __init ds1302_register(void)
 	return 0;
 }
 
-module_init(ds1302_register);
+async_module_init(ds1302_register);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ds1620.c linux-4.1/drivers/char/ds1620.c
--- linux-4.1.orig/drivers/char/ds1620.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ds1620.c	2015-06-25 22:51:16.983485065 +0100
@@ -429,7 +429,7 @@ static void __exit ds1620_exit(void)
 	misc_deregister(&ds1620_miscdev);
 }
 
-module_init(ds1620_init);
+async_module_init(ds1620_init);
 module_exit(ds1620_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/dsp56k.c linux-4.1/drivers/char/dsp56k.c
--- linux-4.1.orig/drivers/char/dsp56k.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/dsp56k.c	2015-06-25 22:51:16.983485065 +0100
@@ -520,7 +520,7 @@ out_chrdev:
 out:
 	return err;
 }
-module_init(dsp56k_init_driver);
+async_module_init(dsp56k_init_driver);
 
 static void __exit dsp56k_cleanup_driver(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/dtlk.c linux-4.1/drivers/char/dtlk.c
--- linux-4.1.orig/drivers/char/dtlk.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/dtlk.c	2015-06-25 22:51:16.984484948 +0100
@@ -365,7 +365,7 @@ static void __exit dtlk_cleanup (void)
 	release_region(dtlk_port_lpc, DTLK_IO_EXTENT);
 }
 
-module_init(dtlk_init);
+async_module_init(dtlk_init);
 module_exit(dtlk_cleanup);
 
 /* ------------------------------------------------------------------------ */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/efirtc.c linux-4.1/drivers/char/efirtc.c
--- linux-4.1.orig/drivers/char/efirtc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/efirtc.c	2015-06-25 22:51:16.984484948 +0100
@@ -402,7 +402,7 @@ efi_rtc_exit(void)
 	/* not yet used */
 }
 
-module_init(efi_rtc_init);
+async_module_init(efi_rtc_init);
 module_exit(efi_rtc_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/generic_nvram.c linux-4.1/drivers/char/generic_nvram.c
--- linux-4.1.orig/drivers/char/generic_nvram.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/generic_nvram.c	2015-06-25 22:51:16.985484831 +0100
@@ -169,6 +169,6 @@ void __exit nvram_cleanup(void)
         misc_deregister( &nvram_dev );
 }
 
-module_init(nvram_init);
+async_module_init(nvram_init);
 module_exit(nvram_cleanup);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/genrtc.c linux-4.1/drivers/char/genrtc.c
--- linux-4.1.orig/drivers/char/genrtc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/genrtc.c	2015-06-25 22:51:16.985484831 +0100
@@ -531,7 +531,7 @@ static void __exit rtc_generic_exit(void
 }
 
 
-module_init(rtc_generic_init);
+async_module_init(rtc_generic_init);
 module_exit(rtc_generic_exit);
 
 MODULE_AUTHOR("Richard Zidlicky");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hangcheck-timer.c linux-4.1/drivers/char/hangcheck-timer.c
--- linux-4.1.orig/drivers/char/hangcheck-timer.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hangcheck-timer.c	2015-06-25 22:51:16.991484130 +0100
@@ -184,5 +184,5 @@ static void __exit hangcheck_exit(void)
         printk("Hangcheck: Stopped hangcheck timer.\n");
 }
 
-module_init(hangcheck_init);
+async_module_init(hangcheck_init);
 module_exit(hangcheck_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hpet.c linux-4.1/drivers/char/hpet.c
--- linux-4.1.orig/drivers/char/hpet.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hpet.c	2015-06-25 22:51:15.345676531 +0100
@@ -1098,7 +1098,7 @@ static void __exit hpet_exit(void)
 	return;
 }
 
-module_init(hpet_init);
+deferred_module_init(hpet_init);
 module_exit(hpet_exit);
 MODULE_AUTHOR("Bob Picco <Robert.Picco@hp.com>");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/amd-rng.c linux-4.1/drivers/char/hw_random/amd-rng.c
--- linux-4.1.orig/drivers/char/hw_random/amd-rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/amd-rng.c	2015-06-25 22:51:17.003482727 +0100
@@ -161,7 +161,7 @@ static void __exit mod_exit(void)
 	hwrng_unregister(&amd_rng);
 }
 
-module_init(mod_init);
+async_module_init(mod_init);
 module_exit(mod_exit);
 
 MODULE_AUTHOR("The Linux Kernel team");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/core.c linux-4.1/drivers/char/hw_random/core.c
--- linux-4.1.orig/drivers/char/hw_random/core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/core.c	2015-06-25 22:51:17.004482610 +0100
@@ -583,7 +583,7 @@ static void __exit hwrng_modexit(void)
 	unregister_miscdev();
 }
 
-module_init(hwrng_modinit);
+async_module_init(hwrng_modinit);
 module_exit(hwrng_modexit);
 
 MODULE_DESCRIPTION("H/W Random Number Generator (RNG) driver");
Only in linux-4.1/drivers/char/hw_random: core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/geode-rng.c linux-4.1/drivers/char/hw_random/geode-rng.c
--- linux-4.1.orig/drivers/char/hw_random/geode-rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/geode-rng.c	2015-06-25 22:51:17.005482493 +0100
@@ -132,7 +132,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-module_init(mod_init);
+async_module_init(mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for AMD Geode LX CPUs");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/intel-rng.c linux-4.1/drivers/char/hw_random/intel-rng.c
--- linux-4.1.orig/drivers/char/hw_random/intel-rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/intel-rng.c	2015-06-25 22:51:15.485660167 +0100
@@ -325,7 +325,7 @@ PFX "RNG, try using the 'no_fwh_detect'
 }
 
 
-static int __init mod_init(void)
+static int __init intel_rng_mod_init(void)
 {
 	int err = -ENODEV;
 	int i;
@@ -411,7 +411,7 @@ static void __exit mod_exit(void)
 	iounmap(mem);
 }
 
-module_init(mod_init);
+module_init(intel_rng_mod_init);
 module_exit(mod_exit);
 
 MODULE_DESCRIPTION("H/W RNG driver for Intel chipsets");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/ixp4xx-rng.c linux-4.1/drivers/char/hw_random/ixp4xx-rng.c
--- linux-4.1.orig/drivers/char/hw_random/ixp4xx-rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/ixp4xx-rng.c	2015-06-25 22:51:17.006482376 +0100
@@ -67,7 +67,7 @@ static void __exit ixp4xx_rng_exit(void)
 	iounmap(rng_base);
 }
 
-module_init(ixp4xx_rng_init);
+async_module_init(ixp4xx_rng_init);
 module_exit(ixp4xx_rng_exit);
 
 MODULE_AUTHOR("Deepak Saxena <dsaxena@plexity.net>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/pseries-rng.c linux-4.1/drivers/char/hw_random/pseries-rng.c
--- linux-4.1.orig/drivers/char/hw_random/pseries-rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/pseries-rng.c	2015-06-25 22:51:17.006482376 +0100
@@ -93,7 +93,7 @@ static int __init rng_init(void)
 	return vio_register_driver(&pseries_rng_driver);
 }
 
-module_init(rng_init);
+async_module_init(rng_init);
 
 static void __exit rng_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/tpm-rng.c linux-4.1/drivers/char/hw_random/tpm-rng.c
--- linux-4.1.orig/drivers/char/hw_random/tpm-rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/tpm-rng.c	2015-06-25 22:51:17.007482259 +0100
@@ -37,7 +37,7 @@ static int __init rng_init(void)
 {
 	return hwrng_register(&tpm_rng);
 }
-module_init(rng_init);
+async_module_init(rng_init);
 
 static void __exit rng_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/hw_random/via-rng.c linux-4.1/drivers/char/hw_random/via-rng.c
--- linux-4.1.orig/drivers/char/hw_random/via-rng.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/hw_random/via-rng.c	2015-06-25 22:51:17.007482259 +0100
@@ -218,7 +218,7 @@ static void __exit mod_exit(void)
 	hwrng_unregister(&via_rng);
 }
 
-module_init(mod_init);
+async_module_init(mod_init);
 module_exit(mod_exit);
 
 static struct x86_cpu_id __maybe_unused via_rng_cpu_id[] = {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/i8k.c linux-4.1/drivers/char/i8k.c
--- linux-4.1.orig/drivers/char/i8k.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/i8k.c	2015-06-25 22:51:17.008482143 +0100
@@ -1003,5 +1003,5 @@ static void __exit i8k_exit(void)
 	remove_proc_entry("i8k", NULL);
 }
 
-module_init(i8k_init);
+async_module_init(i8k_init);
 module_exit(i8k_exit);
Only in linux-4.1/drivers/char: i8k.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ipmi/ipmi_devintf.c linux-4.1/drivers/char/ipmi/ipmi_devintf.c
--- linux-4.1.orig/drivers/char/ipmi/ipmi_devintf.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ipmi/ipmi_devintf.c	2015-06-25 22:51:17.009482026 +0100
@@ -968,7 +968,7 @@ static int __init init_ipmi_devintf(void
 
 	return 0;
 }
-module_init(init_ipmi_devintf);
+async_module_init(init_ipmi_devintf);
 
 static void __exit cleanup_ipmi(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ipmi/ipmi_msghandler.c linux-4.1/drivers/char/ipmi/ipmi_msghandler.c
--- linux-4.1.orig/drivers/char/ipmi/ipmi_msghandler.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ipmi/ipmi_msghandler.c	2015-06-25 22:51:15.347676298 +0100
@@ -4607,7 +4607,7 @@ static void __exit cleanup_ipmi(void)
 }
 module_exit(cleanup_ipmi);
 
-module_init(ipmi_init_msghandler_mod);
+module_init(ipmi_init_msghandler_mod);  //release acpi_ipmi, 
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("Incoming and outgoing message routing for an IPMI"
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ipmi/ipmi_poweroff.c linux-4.1/drivers/char/ipmi/ipmi_poweroff.c
--- linux-4.1.orig/drivers/char/ipmi/ipmi_poweroff.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ipmi/ipmi_poweroff.c	2015-06-25 22:51:17.013481558 +0100
@@ -743,7 +743,7 @@ static void __exit ipmi_poweroff_cleanup
 module_exit(ipmi_poweroff_cleanup);
 #endif
 
-module_init(ipmi_poweroff_init);
+async_module_init(ipmi_poweroff_init);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("IPMI Poweroff extension to sys_reboot");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ipmi/ipmi_si_intf.c linux-4.1/drivers/char/ipmi/ipmi_si_intf.c
--- linux-4.1.orig/drivers/char/ipmi/ipmi_si_intf.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ipmi/ipmi_si_intf.c	2015-06-25 22:51:17.014481441 +0100
@@ -3775,7 +3775,7 @@ static int init_ipmi_si(void)
 		return 0;
 	}
 }
-module_init(init_ipmi_si);
+async_module_init(init_ipmi_si);
 
 static void cleanup_one_si(struct smi_info *to_clean)
 {
Only in linux-4.1/drivers/char/ipmi: ipmi_si_intf.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ipmi/ipmi_ssif.c linux-4.1/drivers/char/ipmi/ipmi_ssif.c
--- linux-4.1.orig/drivers/char/ipmi/ipmi_ssif.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ipmi/ipmi_ssif.c	2015-06-25 22:51:17.054476766 +0100
@@ -1997,7 +1997,7 @@ static int init_ipmi_ssif(void)
 
 	return rv;
 }
-module_init(init_ipmi_ssif);
+async_module_init(init_ipmi_ssif);
 
 static void cleanup_ipmi_ssif(void)
 {
Only in linux-4.1/drivers/char/ipmi: ipmi_ssif.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ipmi/ipmi_watchdog.c linux-4.1/drivers/char/ipmi/ipmi_watchdog.c
--- linux-4.1.orig/drivers/char/ipmi/ipmi_watchdog.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ipmi/ipmi_watchdog.c	2015-06-25 22:51:17.057476415 +0100
@@ -1379,7 +1379,7 @@ static void __exit ipmi_wdog_exit(void)
 	unregister_reboot_notifier(&wdog_reboot_notifier);
 }
 module_exit(ipmi_wdog_exit);
-module_init(ipmi_wdog_init);
+async_module_init(ipmi_wdog_init);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Corey Minyard <minyard@mvista.com>");
 MODULE_DESCRIPTION("watchdog timer based upon the IPMI interface.");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/lp.c linux-4.1/drivers/char/lp.c
--- linux-4.1.orig/drivers/char/lp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/lp.c	2015-06-25 22:51:17.058476298 +0100
@@ -1056,7 +1056,7 @@ static void lp_cleanup_module (void)
 }
 
 __setup("lp=", lp_setup);
-module_init(lp_init_module);
+async_module_init(lp_init_module);
 module_exit(lp_cleanup_module);
 
 MODULE_ALIAS_CHARDEV_MAJOR(LP_MAJOR);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/mbcs.c linux-4.1/drivers/char/mbcs.c
--- linux-4.1.orig/drivers/char/mbcs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/mbcs.c	2015-06-25 22:51:17.058476298 +0100
@@ -844,7 +844,7 @@ static int __init mbcs_init(void)
 	return cx_driver_register(&mbcs_driver);
 }
 
-module_init(mbcs_init);
+async_module_init(mbcs_init);
 module_exit(mbcs_exit);
 
 MODULE_AUTHOR("Bruce Losure <blosure@sgi.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/mmtimer.c linux-4.1/drivers/char/mmtimer.c
--- linux-4.1.orig/drivers/char/mmtimer.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/mmtimer.c	2015-06-25 22:51:17.059476181 +0100
@@ -855,4 +855,4 @@ out1:
 	return -1;
 }
 
-module_init(mmtimer_init);
+async_module_init(mmtimer_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/msm_smd_pkt.c linux-4.1/drivers/char/msm_smd_pkt.c
--- linux-4.1.orig/drivers/char/msm_smd_pkt.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/msm_smd_pkt.c	2015-06-25 22:51:17.060476064 +0100
@@ -440,7 +440,7 @@ unreg_chardev:
 	unregister_chrdev_region(MAJOR(smd_pkt_number), NUM_SMD_PKT_PORTS);
 	return r;
 }
-module_init(smd_pkt_init);
+async_module_init(smd_pkt_init);
 
 static void __exit smd_pkt_cleanup(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/mspec.c linux-4.1/drivers/char/mspec.c
--- linux-4.1.orig/drivers/char/mspec.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/mspec.c	2015-06-25 22:51:17.060476064 +0100
@@ -442,7 +442,7 @@ mspec_exit(void)
 	}
 }
 
-module_init(mspec_init);
+async_module_init(mspec_init);
 module_exit(mspec_exit);
 
 MODULE_AUTHOR("Silicon Graphics, Inc. <linux-altix@sgi.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/mwave/mwavedd.c linux-4.1/drivers/char/mwave/mwavedd.c
--- linux-4.1.orig/drivers/char/mwave/mwavedd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/mwave/mwavedd.c	2015-06-25 22:51:17.061475947 +0100
@@ -693,5 +693,5 @@ cleanup_error:
 	return -EIO;
 }
 
-module_init(mwave_init);
+async_module_init(mwave_init);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/nsc_gpio.c linux-4.1/drivers/char/nsc_gpio.c
--- linux-4.1.orig/drivers/char/nsc_gpio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/nsc_gpio.c	2015-06-25 22:51:17.061475947 +0100
@@ -131,7 +131,7 @@ static void __exit nsc_gpio_cleanup(void
 	printk(KERN_DEBUG NAME " cleanup\n");
 }
 
-module_init(nsc_gpio_init);
+async_module_init(nsc_gpio_init);
 module_exit(nsc_gpio_cleanup);
 
 MODULE_AUTHOR("Jim Cromie <jim.cromie@gmail.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/nvram.c linux-4.1/drivers/char/nvram.c
--- linux-4.1.orig/drivers/char/nvram.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/nvram.c	2015-06-25 22:51:17.062475830 +0100
@@ -473,7 +473,7 @@ static void __exit nvram_cleanup_module(
 	misc_deregister(&nvram_dev);
 }
 
-module_init(nvram_init);
+async_module_init(nvram_init);
 module_exit(nvram_cleanup_module);
 
 /*
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/nwbutton.c linux-4.1/drivers/char/nwbutton.c
--- linux-4.1.orig/drivers/char/nwbutton.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/nwbutton.c	2015-06-25 22:51:17.062475830 +0100
@@ -243,5 +243,5 @@ static void __exit nwbutton_exit (void)
 MODULE_AUTHOR("Alex Holden");
 MODULE_LICENSE("GPL");
 
-module_init(nwbutton_init);
+async_module_init(nwbutton_init);
 module_exit(nwbutton_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/nwflash.c linux-4.1/drivers/char/nwflash.c
--- linux-4.1.orig/drivers/char/nwflash.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/nwflash.c	2015-06-25 22:51:17.063475714 +0100
@@ -650,5 +650,5 @@ MODULE_LICENSE("GPL");
 
 module_param(flashdebug, bool, 0644);
 
-module_init(nwflash_init);
+async_module_init(nwflash_init);
 module_exit(nwflash_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/pc8736x_gpio.c linux-4.1/drivers/char/pc8736x_gpio.c
--- linux-4.1.orig/drivers/char/pc8736x_gpio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/pc8736x_gpio.c	2015-06-25 22:51:17.063475714 +0100
@@ -348,5 +348,5 @@ static void __exit pc8736x_gpio_cleanup(
 	platform_device_unregister(pdev);
 }
 
-module_init(pc8736x_gpio_init);
+async_module_init(pc8736x_gpio_init);
 module_exit(pc8736x_gpio_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/pcmcia/cm4000_cs.c linux-4.1/drivers/char/pcmcia/cm4000_cs.c
--- linux-4.1.orig/drivers/char/pcmcia/cm4000_cs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/pcmcia/cm4000_cs.c	2015-06-25 22:51:17.064475597 +0100
@@ -1919,6 +1919,6 @@ static void __exit cmm_exit(void)
 	class_destroy(cmm_class);
 };
 
-module_init(cmm_init);
+async_module_init(cmm_init);
 module_exit(cmm_exit);
 MODULE_LICENSE("Dual BSD/GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/pcmcia/cm4040_cs.c linux-4.1/drivers/char/pcmcia/cm4040_cs.c
--- linux-4.1.orig/drivers/char/pcmcia/cm4040_cs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/pcmcia/cm4040_cs.c	2015-06-25 22:51:17.065475480 +0100
@@ -682,6 +682,6 @@ static void __exit cm4040_exit(void)
 	class_destroy(cmx_class);
 }
 
-module_init(cm4040_init);
+async_module_init(cm4040_init);
 module_exit(cm4040_exit);
 MODULE_LICENSE("Dual BSD/GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/pcmcia/synclink_cs.c linux-4.1/drivers/char/pcmcia/synclink_cs.c
--- linux-4.1.orig/drivers/char/pcmcia/synclink_cs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/pcmcia/synclink_cs.c	2015-06-25 22:51:17.066475363 +0100
@@ -2898,7 +2898,7 @@ static void __exit synclink_cs_exit(void
 	put_tty_driver(serial_driver);
 }
 
-module_init(synclink_cs_init);
+async_module_init(synclink_cs_init);
 module_exit(synclink_cs_exit);
 
 static void mgslpc_set_rate(MGSLPC_INFO *info, unsigned char channel, unsigned int rate)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ppdev.c linux-4.1/drivers/char/ppdev.c
--- linux-4.1.orig/drivers/char/ppdev.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ppdev.c	2015-06-25 22:51:17.068475129 +0100
@@ -804,7 +804,7 @@ static void __exit ppdev_cleanup (void)
 	unregister_chrdev (PP_MAJOR, CHRDEV);
 }
 
-module_init(ppdev_init);
+async_module_init(ppdev_init);
 module_exit(ppdev_cleanup);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/ps3flash.c linux-4.1/drivers/char/ps3flash.c
--- linux-4.1.orig/drivers/char/ps3flash.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/ps3flash.c	2015-06-25 22:51:17.068475129 +0100
@@ -449,7 +449,7 @@ static void __exit ps3flash_exit(void)
 	ps3_system_bus_driver_unregister(&ps3flash);
 }
 
-module_init(ps3flash_init);
+async_module_init(ps3flash_init);
 module_exit(ps3flash_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/raw.c linux-4.1/drivers/char/raw.c
--- linux-4.1.orig/drivers/char/raw.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/raw.c	2015-06-25 22:51:17.069475012 +0100
@@ -364,6 +364,6 @@ static void __exit raw_exit(void)
 	unregister_chrdev_region(MKDEV(RAW_MAJOR, 0), max_raw_minors);
 }
 
-module_init(raw_init);
+async_module_init(raw_init);
 module_exit(raw_exit);
 MODULE_LICENSE("GPL");
Only in linux-4.1/drivers/char: raw.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/rtc.c linux-4.1/drivers/char/rtc.c
--- linux-4.1.orig/drivers/char/rtc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/rtc.c	2015-06-25 22:51:17.070474895 +0100
@@ -1155,7 +1155,7 @@ static void __exit rtc_exit(void)
 #endif /* CONFIG_SPARC32 */
 }
 
-module_init(rtc_init);
+async_module_init(rtc_init);
 module_exit(rtc_exit);
 
 #ifdef RTC_IRQ
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/scx200_gpio.c linux-4.1/drivers/char/scx200_gpio.c
--- linux-4.1.orig/drivers/char/scx200_gpio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/scx200_gpio.c	2015-06-25 22:51:17.070474895 +0100
@@ -128,5 +128,5 @@ static void __exit scx200_gpio_cleanup(v
 	platform_device_unregister(pdev);
 }
 
-module_init(scx200_gpio_init);
+async_module_init(scx200_gpio_init);
 module_exit(scx200_gpio_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/snsc.c linux-4.1/drivers/char/snsc.c
--- linux-4.1.orig/drivers/char/snsc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/snsc.c	2015-06-25 22:51:17.071474778 +0100
@@ -462,4 +462,4 @@ scdrv_init(void)
 	return 0;
 }
 
-module_init(scdrv_init);
+async_module_init(scdrv_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/sonypi.c linux-4.1/drivers/char/sonypi.c
--- linux-4.1.orig/drivers/char/sonypi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/sonypi.c	2015-06-25 22:51:17.072474662 +0100
@@ -1559,5 +1559,5 @@ static void __exit sonypi_exit(void)
 	printk(KERN_INFO "sonypi: removed.\n");
 }
 
-module_init(sonypi_init);
+async_module_init(sonypi_init);
 module_exit(sonypi_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tb0219.c linux-4.1/drivers/char/tb0219.c
--- linux-4.1.orig/drivers/char/tb0219.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tb0219.c	2015-06-25 22:51:17.072474662 +0100
@@ -367,5 +367,5 @@ static void __exit tanbac_tb0219_exit(vo
 	platform_device_unregister(tb0219_platform_device);
 }
 
-module_init(tanbac_tb0219_init);
+async_module_init(tanbac_tb0219_init);
 module_exit(tanbac_tb0219_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tile-srom.c linux-4.1/drivers/char/tile-srom.c
--- linux-4.1.orig/drivers/char/tile-srom.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tile-srom.c	2015-06-25 22:51:17.073474545 +0100
@@ -468,5 +468,5 @@ static void srom_cleanup(void)
 	kfree(srom_devices);
 }
 
-module_init(srom_init);
+async_module_init(srom_init);
 module_exit(srom_cleanup);
Only in linux-4.1/drivers/char: tile-srom.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tlclk.c linux-4.1/drivers/char/tlclk.c
--- linux-4.1.orig/drivers/char/tlclk.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tlclk.c	2015-06-25 22:51:17.074474428 +0100
@@ -933,5 +933,5 @@ static irqreturn_t tlclk_interrupt(int i
 	return IRQ_HANDLED;
 }
 
-module_init(tlclk_init);
+async_module_init(tlclk_init);
 module_exit(tlclk_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/toshiba.c linux-4.1/drivers/char/toshiba.c
--- linux-4.1.orig/drivers/char/toshiba.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/toshiba.c	2015-06-25 22:51:17.074474428 +0100
@@ -541,6 +541,6 @@ static void __exit toshiba_exit(void)
 	misc_deregister(&tosh_device);
 }
 
-module_init(toshiba_init);
+async_module_init(toshiba_init);
 module_exit(toshiba_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tpm/tpm_atmel.c linux-4.1/drivers/char/tpm/tpm_atmel.c
--- linux-4.1.orig/drivers/char/tpm/tpm_atmel.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tpm/tpm_atmel.c	2015-06-25 22:51:17.075474311 +0100
@@ -218,7 +218,7 @@ static void __exit cleanup_atmel(void)
 	atml_plat_remove();
 }
 
-module_init(init_atmel);
+async_module_init(init_atmel);
 module_exit(cleanup_atmel);
 
 MODULE_AUTHOR("Leendert van Doorn (leendert@watson.ibm.com)");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tpm/tpm_ibmvtpm.c linux-4.1/drivers/char/tpm/tpm_ibmvtpm.c
--- linux-4.1.orig/drivers/char/tpm/tpm_ibmvtpm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tpm/tpm_ibmvtpm.c	2015-06-25 22:51:17.075474311 +0100
@@ -690,7 +690,7 @@ static void __exit ibmvtpm_module_exit(v
 	vio_unregister_driver(&ibmvtpm_driver);
 }
 
-module_init(ibmvtpm_module_init);
+async_module_init(ibmvtpm_module_init);
 module_exit(ibmvtpm_module_exit);
 
 MODULE_AUTHOR("adlai@us.ibm.com");
Only in linux-4.1/drivers/char/tpm: tpm_infineon.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tpm/tpm_nsc.c linux-4.1/drivers/char/tpm/tpm_nsc.c
--- linux-4.1.orig/drivers/char/tpm/tpm_nsc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tpm/tpm_nsc.c	2015-06-25 22:51:17.076474194 +0100
@@ -374,7 +374,7 @@ static void __exit cleanup_nsc(void)
 	platform_driver_unregister(&nsc_drv);
 }
 
-module_init(init_nsc);
+async_module_init(init_nsc);
 module_exit(cleanup_nsc);
 
 MODULE_AUTHOR("Leendert van Doorn (leendert@watson.ibm.com)");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tpm/tpm_tis.c linux-4.1/drivers/char/tpm/tpm_tis.c
--- linux-4.1.orig/drivers/char/tpm/tpm_tis.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tpm/tpm_tis.c	2015-06-25 22:51:17.077474077 +0100
@@ -1005,7 +1005,7 @@ static void __exit cleanup_tis(void)
 	platform_driver_unregister(&tis_drv);
 }
 
-module_init(init_tis);
+async_module_init(init_tis);
 module_exit(cleanup_tis);
 MODULE_AUTHOR("Leendert van Doorn (leendert@watson.ibm.com)");
 MODULE_DESCRIPTION("TPM Driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/tpm/xen-tpmfront.c linux-4.1/drivers/char/tpm/xen-tpmfront.c
--- linux-4.1.orig/drivers/char/tpm/xen-tpmfront.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/tpm/xen-tpmfront.c	2015-06-25 22:51:17.078473960 +0100
@@ -388,7 +388,7 @@ static int __init xen_tpmfront_init(void
 
 	return xenbus_register_frontend(&tpmfront_driver);
 }
-module_init(xen_tpmfront_init);
+async_module_init(xen_tpmfront_init);
 
 static void __exit xen_tpmfront_exit(void)
 {
Only in linux-4.1/drivers/char/tpm: xen-tpmfront.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/uv_mmtimer.c linux-4.1/drivers/char/uv_mmtimer.c
--- linux-4.1.orig/drivers/char/uv_mmtimer.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/uv_mmtimer.c	2015-06-25 22:51:17.078473960 +0100
@@ -217,4 +217,4 @@ static int __init uv_mmtimer_init(void)
 	return 0;
 }
 
-module_init(uv_mmtimer_init);
+async_module_init(uv_mmtimer_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/virtio_console.c linux-4.1/drivers/char/virtio_console.c
--- linux-4.1.orig/drivers/char/virtio_console.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/virtio_console.c	2015-06-25 22:51:17.079473843 +0100
@@ -2312,7 +2312,7 @@ static void __exit fini(void)
 	class_destroy(pdrvdata.class);
 	debugfs_remove_recursive(pdrvdata.debugfs_dir);
 }
-module_init(init);
+async_module_init(init);
 module_exit(fini);
 
 MODULE_DEVICE_TABLE(virtio, id_table);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/xilinx_hwicap/xilinx_hwicap.c linux-4.1/drivers/char/xilinx_hwicap/xilinx_hwicap.c
--- linux-4.1.orig/drivers/char/xilinx_hwicap/xilinx_hwicap.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/xilinx_hwicap/xilinx_hwicap.c	2015-06-25 22:51:17.080473726 +0100
@@ -886,7 +886,7 @@ static void __exit hwicap_module_cleanup
 	unregister_chrdev_region(devt, HWICAP_DEVICES);
 }
 
-module_init(hwicap_module_init);
+async_module_init(hwicap_module_init);
 module_exit(hwicap_module_cleanup);
 
 MODULE_AUTHOR("Xilinx, Inc; Xilinx Research Labs Group");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/char/xillybus/xillybus_core.c linux-4.1/drivers/char/xillybus/xillybus_core.c
--- linux-4.1.orig/drivers/char/xillybus/xillybus_core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/char/xillybus/xillybus_core.c	2015-06-25 22:51:17.081473610 +0100
@@ -2101,5 +2101,5 @@ static void __exit xillybus_exit(void)
 	class_destroy(xillybus_class);
 }
 
-module_init(xillybus_init);
+async_module_init(xillybus_init);
 module_exit(xillybus_exit);
Only in linux-4.1/drivers/char/xillybus: xillybus_core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/blackfin-cpufreq.c linux-4.1/drivers/cpufreq/blackfin-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/blackfin-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/blackfin-cpufreq.c	2015-06-25 22:51:15.488659816 +0100
@@ -213,5 +213,5 @@ MODULE_AUTHOR("Michael Hennerich <henner
 MODULE_DESCRIPTION("cpufreq driver for Blackfin");
 MODULE_LICENSE("GPL");
 
-module_init(bfin_cpu_init);
+deferred_module_init(bfin_cpu_init);
 module_exit(bfin_cpu_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cpufreq_conservative.c linux-4.1/drivers/cpufreq/cpufreq_conservative.c
--- linux-4.1.orig/drivers/cpufreq/cpufreq_conservative.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cpufreq_conservative.c	2015-06-25 22:51:15.350675947 +0100
@@ -403,6 +403,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cpufreq-nforce2.c linux-4.1/drivers/cpufreq/cpufreq-nforce2.c
--- linux-4.1.orig/drivers/cpufreq/cpufreq-nforce2.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cpufreq-nforce2.c	2015-06-25 22:51:15.489659699 +0100
@@ -440,6 +440,6 @@ static void __exit nforce2_exit(void)
 	cpufreq_unregister_driver(&nforce2_driver);
 }
 
-module_init(nforce2_init);
+deferred_module_init(nforce2_init);
 module_exit(nforce2_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cpufreq_ondemand.c linux-4.1/drivers/cpufreq/cpufreq_ondemand.c
--- linux-4.1.orig/drivers/cpufreq/cpufreq_ondemand.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cpufreq_ondemand.c	2015-06-25 22:51:15.351675830 +0100
@@ -626,6 +626,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND
 fs_initcall(cpufreq_gov_dbs_init);
 #else
-module_init(cpufreq_gov_dbs_init);
+deferred_module_init(cpufreq_gov_dbs_init);
 #endif
 module_exit(cpufreq_gov_dbs_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cpufreq_powersave.c linux-4.1/drivers/cpufreq/cpufreq_powersave.c
--- linux-4.1.orig/drivers/cpufreq/cpufreq_powersave.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cpufreq_powersave.c	2015-06-25 22:51:15.352675713 +0100
@@ -59,6 +59,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE
 fs_initcall(cpufreq_gov_powersave_init);
 #else
-module_init(cpufreq_gov_powersave_init);
+deferred_module_init(cpufreq_gov_powersave_init);
 #endif
 module_exit(cpufreq_gov_powersave_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cpufreq_stats.c linux-4.1/drivers/cpufreq/cpufreq_stats.c
--- linux-4.1.orig/drivers/cpufreq/cpufreq_stats.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cpufreq_stats.c	2015-06-25 22:51:15.353675596 +0100
@@ -353,5 +353,5 @@ MODULE_AUTHOR("Zou Nan hai <nanhai.zou@i
 MODULE_DESCRIPTION("Export cpufreq stats via sysfs");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_stats_init);
+deferred_module_init(cpufreq_stats_init);
 module_exit(cpufreq_stats_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cpufreq_userspace.c linux-4.1/drivers/cpufreq/cpufreq_userspace.c
--- linux-4.1.orig/drivers/cpufreq/cpufreq_userspace.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cpufreq_userspace.c	2015-06-25 22:51:15.353675596 +0100
@@ -118,6 +118,6 @@ MODULE_LICENSE("GPL");
 #ifdef CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE
 fs_initcall(cpufreq_gov_userspace_init);
 #else
-module_init(cpufreq_gov_userspace_init);
+deferred_module_init(cpufreq_gov_userspace_init);
 #endif
 module_exit(cpufreq_gov_userspace_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cris-artpec3-cpufreq.c linux-4.1/drivers/cpufreq/cris-artpec3-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/cris-artpec3-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cris-artpec3-cpufreq.c	2015-06-25 22:51:15.493659232 +0100
@@ -89,4 +89,4 @@ cris_sdram_freq_notifier(struct notifier
 }
 
 
-module_init(cris_freq_init);
+deferred_module_init(cris_freq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/cris-etraxfs-cpufreq.c linux-4.1/drivers/cpufreq/cris-etraxfs-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/cris-etraxfs-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/cris-etraxfs-cpufreq.c	2015-06-25 22:51:15.493659232 +0100
@@ -88,4 +88,4 @@ cris_sdram_freq_notifier(struct notifier
 	return 0;
 }
 
-module_init(cris_freq_init);
+deferred_module_init(cris_freq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/elanfreq.c linux-4.1/drivers/cpufreq/elanfreq.c
--- linux-4.1.orig/drivers/cpufreq/elanfreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/elanfreq.c	2015-06-25 22:51:15.493659232 +0100
@@ -228,5 +228,5 @@ MODULE_AUTHOR("Robert Schwebel <r.schweb
 		"Sven Geggus <sven@geggus.net>");
 MODULE_DESCRIPTION("cpufreq driver for AMD's Elan CPUs");
 
-module_init(elanfreq_init);
+deferred_module_init(elanfreq_init);
 module_exit(elanfreq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/e_powersaver.c linux-4.1/drivers/cpufreq/e_powersaver.c
--- linux-4.1.orig/drivers/cpufreq/e_powersaver.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/e_powersaver.c	2015-06-25 22:51:15.494659115 +0100
@@ -437,5 +437,5 @@ MODULE_AUTHOR("Rafal Bilski <rafalbilski
 MODULE_DESCRIPTION("Enhanced PowerSaver driver for VIA C7 CPU's.");
 MODULE_LICENSE("GPL");
 
-module_init(eps_init);
+deferred_module_init(eps_init);
 module_exit(eps_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/gx-suspmod.c linux-4.1/drivers/cpufreq/gx-suspmod.c
--- linux-4.1.orig/drivers/cpufreq/gx-suspmod.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/gx-suspmod.c	2015-06-25 22:51:15.494659115 +0100
@@ -497,6 +497,6 @@ MODULE_AUTHOR("Hiroshi Miura <miura@da-c
 MODULE_DESCRIPTION("Cpufreq driver for Cyrix MediaGX and NatSemi Geode");
 MODULE_LICENSE("GPL");
 
-module_init(cpufreq_gx_init);
+deferred_module_init(cpufreq_gx_init);
 module_exit(cpufreq_gx_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/highbank-cpufreq.c linux-4.1/drivers/cpufreq/highbank-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/highbank-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/highbank-cpufreq.c	2015-06-25 22:51:15.495658998 +0100
@@ -102,7 +102,7 @@ out_put_node:
 	of_node_put(np);
 	return ret;
 }
-module_init(hb_cpufreq_driver_init);
+deferred_module_init(hb_cpufreq_driver_init);
 
 MODULE_AUTHOR("Mark Langsdorf <mark.langsdorf@calxeda.com>");
 MODULE_DESCRIPTION("Calxeda Highbank cpufreq driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/longrun.c linux-4.1/drivers/cpufreq/longrun.c
--- linux-4.1.orig/drivers/cpufreq/longrun.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/longrun.c	2015-06-25 22:51:15.495658998 +0100
@@ -320,5 +320,5 @@ MODULE_DESCRIPTION("LongRun driver for T
 		"Efficeon processors.");
 MODULE_LICENSE("GPL");
 
-module_init(longrun_init);
+deferred_module_init(longrun_init);
 module_exit(longrun_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/loongson2_cpufreq.c linux-4.1/drivers/cpufreq/loongson2_cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/loongson2_cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/loongson2_cpufreq.c	2015-06-25 22:51:15.495658998 +0100
@@ -189,7 +189,7 @@ static void __exit cpufreq_exit(void)
 	platform_driver_unregister(&platform_driver);
 }
 
-module_init(cpufreq_init);
+deferred_module_init(cpufreq_init);
 module_exit(cpufreq_exit);
 
 module_param(nowait, uint, 0644);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/maple-cpufreq.c linux-4.1/drivers/cpufreq/maple-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/maple-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/maple-cpufreq.c	2015-06-25 22:51:15.496658881 +0100
@@ -240,7 +240,7 @@ bail_noprops:
 	return rc;
 }
 
-module_init(maple_cpufreq_init);
+deferred_module_init(maple_cpufreq_init);
 
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/pasemi-cpufreq.c linux-4.1/drivers/cpufreq/pasemi-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/pasemi-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/pasemi-cpufreq.c	2015-06-25 22:51:15.496658881 +0100
@@ -284,7 +284,7 @@ static void __exit pas_cpufreq_exit(void
 	cpufreq_unregister_driver(&pas_cpufreq_driver);
 }
 
-module_init(pas_cpufreq_init);
+deferred_module_init(pas_cpufreq_init);
 module_exit(pas_cpufreq_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/pmac32-cpufreq.c linux-4.1/drivers/cpufreq/pmac32-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/pmac32-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/pmac32-cpufreq.c	2015-06-25 22:51:15.497658764 +0100
@@ -682,5 +682,5 @@ out:
 	return cpufreq_register_driver(&pmac_cpufreq_driver);
 }
 
-module_init(pmac_cpufreq_setup);
+deferred_module_init(pmac_cpufreq_setup);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/pmac64-cpufreq.c linux-4.1/drivers/cpufreq/pmac64-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/pmac64-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/pmac64-cpufreq.c	2015-06-25 22:51:15.497658764 +0100
@@ -670,7 +670,7 @@ static int __init g5_cpufreq_init(void)
 	return rc;
 }
 
-module_init(g5_cpufreq_init);
+deferred_module_init(g5_cpufreq_init);
 
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/powernow-k6.c linux-4.1/drivers/cpufreq/powernow-k6.c
--- linux-4.1.orig/drivers/cpufreq/powernow-k6.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/powernow-k6.c	2015-06-25 22:51:15.498658647 +0100
@@ -305,5 +305,5 @@ MODULE_AUTHOR("Arjan van de Ven, Dave Jo
 MODULE_DESCRIPTION("PowerNow! driver for AMD K6-2+ / K6-3+ processors.");
 MODULE_LICENSE("GPL");
 
-module_init(powernow_k6_init);
+deferred_module_init(powernow_k6_init);
 module_exit(powernow_k6_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/powernv-cpufreq.c linux-4.1/drivers/cpufreq/powernv-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/powernv-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/powernv-cpufreq.c	2015-06-25 22:51:15.498658647 +0100
@@ -432,7 +432,7 @@ static int __init powernv_cpufreq_init(v
 	register_reboot_notifier(&powernv_cpufreq_reboot_nb);
 	return cpufreq_register_driver(&powernv_cpufreq_driver);
 }
-module_init(powernv_cpufreq_init);
+deferred_module_init(powernv_cpufreq_init);
 
 static void __exit powernv_cpufreq_exit(void)
 {
Only in linux-4.1/drivers/cpufreq: powernv-cpufreq.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/ppc_cbe_cpufreq.c linux-4.1/drivers/cpufreq/ppc_cbe_cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/ppc_cbe_cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/ppc_cbe_cpufreq.c	2015-06-25 22:51:15.498658647 +0100
@@ -163,7 +163,7 @@ static void __exit cbe_cpufreq_exit(void
 	cpufreq_unregister_driver(&cbe_cpufreq_driver);
 }
 
-module_init(cbe_cpufreq_init);
+deferred_module_init(cbe_cpufreq_init);
 module_exit(cbe_cpufreq_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c linux-4.1/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c
--- linux-4.1.orig/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/ppc_cbe_cpufreq_pmi.c	2015-06-25 22:51:15.499658530 +0100
@@ -149,7 +149,7 @@ static void __exit cbe_cpufreq_pmi_exit(
 	pmi_unregister_handler(&cbe_pmi_handler);
 }
 
-module_init(cbe_cpufreq_pmi_init);
+deferred_module_init(cbe_cpufreq_pmi_init);
 module_exit(cbe_cpufreq_pmi_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/pxa2xx-cpufreq.c linux-4.1/drivers/cpufreq/pxa2xx-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/pxa2xx-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/pxa2xx-cpufreq.c	2015-06-25 22:51:15.499658530 +0100
@@ -448,5 +448,5 @@ static void __exit pxa_cpu_exit(void)
 MODULE_AUTHOR("Intrinsyc Software Inc.");
 MODULE_DESCRIPTION("CPU frequency changing driver for the PXA architecture");
 MODULE_LICENSE("GPL");
-module_init(pxa_cpu_init);
+deferred_module_init(pxa_cpu_init);
 module_exit(pxa_cpu_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/pxa3xx-cpufreq.c linux-4.1/drivers/cpufreq/pxa3xx-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/pxa3xx-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/pxa3xx-cpufreq.c	2015-06-25 22:51:15.500658413 +0100
@@ -216,7 +216,7 @@ static int __init cpufreq_init(void)
 
 	return 0;
 }
-module_init(cpufreq_init);
+deferred_module_init(cpufreq_init);
 
 static void __exit cpufreq_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/s3c2416-cpufreq.c linux-4.1/drivers/cpufreq/s3c2416-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/s3c2416-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/s3c2416-cpufreq.c	2015-06-25 22:51:15.500658413 +0100
@@ -488,4 +488,4 @@ static int __init s3c2416_cpufreq_init(v
 {
 	return cpufreq_register_driver(&s3c2416_cpufreq_driver);
 }
-module_init(s3c2416_cpufreq_init);
+deferred_module_init(s3c2416_cpufreq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/s3c64xx-cpufreq.c linux-4.1/drivers/cpufreq/s3c64xx-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/s3c64xx-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/s3c64xx-cpufreq.c	2015-06-25 22:51:15.500658413 +0100
@@ -224,4 +224,4 @@ static int __init s3c64xx_cpufreq_init(v
 {
 	return cpufreq_register_driver(&s3c64xx_cpufreq_driver);
 }
-module_init(s3c64xx_cpufreq_init);
+deferred_module_init(s3c64xx_cpufreq_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/sc520_freq.c linux-4.1/drivers/cpufreq/sc520_freq.c
--- linux-4.1.orig/drivers/cpufreq/sc520_freq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/sc520_freq.c	2015-06-25 22:51:15.501658296 +0100
@@ -135,6 +135,6 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Sean Young <sean@mess.org>");
 MODULE_DESCRIPTION("cpufreq driver for AMD's Elan sc520 CPU");
 
-module_init(sc520_freq_init);
+deferred_module_init(sc520_freq_init);
 module_exit(sc520_freq_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/sh-cpufreq.c linux-4.1/drivers/cpufreq/sh-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/sh-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/sh-cpufreq.c	2015-06-25 22:51:15.501658296 +0100
@@ -158,7 +158,7 @@ static struct cpufreq_driver sh_cpufreq_
 	.attr		= cpufreq_generic_attr,
 };
 
-static int __init sh_cpufreq_module_init(void)
+static int __init sh_cpufreq_deferred_module_init(void)
 {
 	pr_notice("SuperH CPU frequency driver.\n");
 	return cpufreq_register_driver(&sh_cpufreq_driver);
@@ -169,7 +169,7 @@ static void __exit sh_cpufreq_module_exi
 	cpufreq_unregister_driver(&sh_cpufreq_driver);
 }
 
-module_init(sh_cpufreq_module_init);
+deferred_module_init(sh_cpufreq_module_init);
 module_exit(sh_cpufreq_module_exit);
 
 MODULE_AUTHOR("Paul Mundt <lethal@linux-sh.org>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/sparc-us2e-cpufreq.c linux-4.1/drivers/cpufreq/sparc-us2e-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/sparc-us2e-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/sparc-us2e-cpufreq.c	2015-06-25 22:51:15.501658296 +0100
@@ -374,5 +374,5 @@ MODULE_AUTHOR("David S. Miller <davem@re
 MODULE_DESCRIPTION("cpufreq driver for UltraSPARC-IIe");
 MODULE_LICENSE("GPL");
 
-module_init(us2e_freq_init);
+deferred_module_init(us2e_freq_init);
 module_exit(us2e_freq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/sparc-us3-cpufreq.c linux-4.1/drivers/cpufreq/sparc-us3-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/sparc-us3-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/sparc-us3-cpufreq.c	2015-06-25 22:51:15.502658180 +0100
@@ -233,5 +233,5 @@ MODULE_AUTHOR("David S. Miller <davem@re
 MODULE_DESCRIPTION("cpufreq driver for UltraSPARC-III");
 MODULE_LICENSE("GPL");
 
-module_init(us3_freq_init);
+deferred_module_init(us3_freq_init);
 module_exit(us3_freq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/speedstep-ich.c linux-4.1/drivers/cpufreq/speedstep-ich.c
--- linux-4.1.orig/drivers/cpufreq/speedstep-ich.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/speedstep-ich.c	2015-06-25 22:51:15.502658180 +0100
@@ -383,5 +383,5 @@ MODULE_DESCRIPTION("Speedstep driver for
 		"with ICH-M southbridges.");
 MODULE_LICENSE("GPL");
 
-module_init(speedstep_init);
+deferred_module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/speedstep-smi.c linux-4.1/drivers/cpufreq/speedstep-smi.c
--- linux-4.1.orig/drivers/cpufreq/speedstep-smi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/speedstep-smi.c	2015-06-25 22:51:15.503658063 +0100
@@ -392,5 +392,5 @@ MODULE_AUTHOR("Hiroshi Miura");
 MODULE_DESCRIPTION("Speedstep driver for IST applet SMI interface.");
 MODULE_LICENSE("GPL");
 
-module_init(speedstep_init);
+deferred_module_init(speedstep_init);
 module_exit(speedstep_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/cpufreq/tegra-cpufreq.c linux-4.1/drivers/cpufreq/tegra-cpufreq.c
--- linux-4.1.orig/drivers/cpufreq/tegra-cpufreq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/cpufreq/tegra-cpufreq.c	2015-06-25 22:51:15.504657946 +0100
@@ -214,5 +214,5 @@ static void __exit tegra_cpufreq_exit(vo
 MODULE_AUTHOR("Colin Cross <ccross@android.com>");
 MODULE_DESCRIPTION("cpufreq driver for Nvidia Tegra2");
 MODULE_LICENSE("GPL");
-module_init(tegra_cpufreq_init);
+deferred_module_init(tegra_cpufreq_init);
 module_exit(tegra_cpufreq_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/gpu/drm/drm_drv.c linux-4.1/drivers/gpu/drm/drm_drv.c
--- linux-4.1.orig/drivers/gpu/drm/drm_drv.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/gpu/drm/drm_drv.c	2015-06-25 22:51:15.504657946 +0100
@@ -908,5 +908,5 @@ static void __exit drm_core_exit(void)
 	idr_destroy(&drm_minors_idr);
 }
 
-module_init(drm_core_init);
+deferred_module_init(drm_core_init);
 module_exit(drm_core_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/gpu/drm/Kconfig linux-4.1/drivers/gpu/drm/Kconfig
--- linux-4.1.orig/drivers/gpu/drm/Kconfig	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/gpu/drm/Kconfig	2015-06-25 22:57:56.686800173 +0100
@@ -81,6 +81,8 @@ source "drivers/gpu/drm/i2c/Kconfig"
 
 source "drivers/gpu/drm/bridge/Kconfig"
 
+source "drivers/gpu/drm/nvidia-ion/Kconfig"
+
 config DRM_TDFX
 	tristate "3dfx Banshee/Voodoo3+"
 	depends on DRM && PCI
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/gpu/drm/Makefile linux-4.1/drivers/gpu/drm/Makefile
--- linux-4.1.orig/drivers/gpu/drm/Makefile	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/gpu/drm/Makefile	2015-06-25 22:51:15.354675479 +0100
@@ -32,8 +32,10 @@ obj-$(CONFIG_DRM_KMS_HELPER) += drm_kms_
 
 CFLAGS_drm_trace_points.o := -I$(src)
 
+obj-$(CONFIG_NVIDIA_ION) += nvidia-ion/
 obj-$(CONFIG_DRM)	+= drm.o
 obj-$(CONFIG_DRM_MIPI_DSI) += drm_mipi_dsi.o
+obj-$(CONFIG_NVIDIA_ION)	+= nvidia-ion/
 obj-$(CONFIG_DRM_TTM)	+= ttm/
 obj-$(CONFIG_DRM_TDFX)	+= tdfx/
 obj-$(CONFIG_DRM_R128)	+= r128/
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-cherry.c linux-4.1/drivers/hid/hid-cherry.c
--- linux-4.1.orig/drivers/hid/hid-cherry.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-cherry.c	2015-06-25 22:51:15.354675479 +0100
@@ -63,12 +63,12 @@ static const struct hid_device_id ch_dev
 };
 MODULE_DEVICE_TABLE(hid, ch_devices);
 
-static struct hid_driver ch_driver = {
+static struct hid_driver cherry_driver = {
 	.name = "cherry",
 	.id_table = ch_devices,
 	.report_fixup = ch_report_fixup,
 	.input_mapping = ch_input_mapping,
 };
-module_hid_driver(ch_driver);
+module_hid_driver(cherry_driver);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-chicony.c linux-4.1/drivers/hid/hid-chicony.c
--- linux-4.1.orig/drivers/hid/hid-chicony.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-chicony.c	2015-06-25 22:51:15.355675362 +0100
@@ -65,11 +65,11 @@ static const struct hid_device_id ch_dev
 };
 MODULE_DEVICE_TABLE(hid, ch_devices);
 
-static struct hid_driver ch_driver = {
+static struct hid_driver chicony_driver = {
 	.name = "chicony",
 	.id_table = ch_devices,
 	.input_mapping = ch_input_mapping,
 };
-module_hid_driver(ch_driver);
+module_hid_driver(chicony_driver);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-core.c linux-4.1/drivers/hid/hid-core.c
--- linux-4.1.orig/drivers/hid/hid-core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-core.c	2015-06-25 22:51:15.356675246 +0100
@@ -2755,7 +2755,7 @@ static void __exit hid_exit(void)
 	bus_unregister(&hid_bus_type);
 }
 
-module_init(hid_init);
+deferred_module_init(hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
Only in linux-4.1/drivers/hid: hid-core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-elo.c linux-4.1/drivers/hid/hid-elo.c
--- linux-4.1.orig/drivers/hid/hid-elo.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-elo.c	2015-06-25 22:51:15.357675129 +0100
@@ -293,7 +293,7 @@ static int __init elo_driver_init(void)
 
 	return ret;
 }
-module_init(elo_driver_init);
+deferred_module_init(elo_driver_init);
 
 static void __exit elo_driver_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-hyperv.c linux-4.1/drivers/hid/hid-hyperv.c
--- linux-4.1.orig/drivers/hid/hid-hyperv.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-hyperv.c	2015-06-25 22:51:15.358675012 +0100
@@ -611,5 +611,5 @@ static void __exit mousevsc_exit(void)
 }
 
 MODULE_LICENSE("GPL");
-module_init(mousevsc_init);
+deferred_module_init(mousevsc_init);
 module_exit(mousevsc_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-arvo.c linux-4.1/drivers/hid/hid-roccat-arvo.c
--- linux-4.1.orig/drivers/hid/hid-roccat-arvo.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-arvo.c	2015-06-25 22:51:15.358675012 +0100
@@ -452,7 +452,7 @@ static void __exit arvo_exit(void)
 	class_destroy(arvo_class);
 }
 
-module_init(arvo_init);
+deferred_module_init(arvo_init);
 module_exit(arvo_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat.c linux-4.1/drivers/hid/hid-roccat.c
--- linux-4.1.orig/drivers/hid/hid-roccat.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat.c	2015-06-25 22:51:15.359674895 +0100
@@ -453,7 +453,7 @@ static void __exit roccat_exit(void)
 	unregister_chrdev_region(dev_id, ROCCAT_MAX_DEVICES);
 }
 
-module_init(roccat_init);
+deferred_module_init(roccat_init);
 module_exit(roccat_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-isku.c linux-4.1/drivers/hid/hid-roccat-isku.c
--- linux-4.1.orig/drivers/hid/hid-roccat-isku.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-isku.c	2015-06-25 22:51:15.360674778 +0100
@@ -454,7 +454,7 @@ static void __exit isku_exit(void)
 	class_destroy(isku_class);
 }
 
-module_init(isku_init);
+deferred_module_init(isku_init);
 module_exit(isku_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-kone.c linux-4.1/drivers/hid/hid-roccat-kone.c
--- linux-4.1.orig/drivers/hid/hid-roccat-kone.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-kone.c	2015-06-25 22:51:15.360674778 +0100
@@ -901,7 +901,7 @@ static void __exit kone_exit(void)
 	class_destroy(kone_class);
 }
 
-module_init(kone_init);
+deferred_module_init(kone_init);
 module_exit(kone_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-koneplus.c linux-4.1/drivers/hid/hid-roccat-koneplus.c
--- linux-4.1.orig/drivers/hid/hid-roccat-koneplus.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-koneplus.c	2015-06-25 22:51:15.361674661 +0100
@@ -570,7 +570,7 @@ static void __exit koneplus_exit(void)
 	class_destroy(koneplus_class);
 }
 
-module_init(koneplus_init);
+deferred_module_init(koneplus_init);
 module_exit(koneplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-konepure.c linux-4.1/drivers/hid/hid-roccat-konepure.c
--- linux-4.1.orig/drivers/hid/hid-roccat-konepure.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-konepure.c	2015-06-25 22:51:15.361674661 +0100
@@ -224,7 +224,7 @@ static void __exit konepure_exit(void)
 	class_destroy(konepure_class);
 }
 
-module_init(konepure_init);
+deferred_module_init(konepure_init);
 module_exit(konepure_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-kovaplus.c linux-4.1/drivers/hid/hid-roccat-kovaplus.c
--- linux-4.1.orig/drivers/hid/hid-roccat-kovaplus.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-kovaplus.c	2015-06-25 22:51:15.362674544 +0100
@@ -657,7 +657,7 @@ static void __exit kovaplus_exit(void)
 	class_destroy(kovaplus_class);
 }
 
-module_init(kovaplus_init);
+deferred_module_init(kovaplus_init);
 module_exit(kovaplus_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-pyra.c linux-4.1/drivers/hid/hid-roccat-pyra.c
--- linux-4.1.orig/drivers/hid/hid-roccat-pyra.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-pyra.c	2015-06-25 22:51:15.362674544 +0100
@@ -607,7 +607,7 @@ static void __exit pyra_exit(void)
 	class_destroy(pyra_class);
 }
 
-module_init(pyra_init);
+deferred_module_init(pyra_init);
 module_exit(pyra_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-ryos.c linux-4.1/drivers/hid/hid-roccat-ryos.c
--- linux-4.1.orig/drivers/hid/hid-roccat-ryos.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-ryos.c	2015-06-25 22:51:15.363674427 +0100
@@ -233,7 +233,7 @@ static void __exit ryos_exit(void)
 	class_destroy(ryos_class);
 }
 
-module_init(ryos_init);
+deferred_module_init(ryos_init);
 module_exit(ryos_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-roccat-savu.c linux-4.1/drivers/hid/hid-roccat-savu.c
--- linux-4.1.orig/drivers/hid/hid-roccat-savu.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-roccat-savu.c	2015-06-25 22:51:15.363674427 +0100
@@ -221,7 +221,7 @@ static void __exit savu_exit(void)
 	class_destroy(savu_class);
 }
 
-module_init(savu_init);
+deferred_module_init(savu_init);
 module_exit(savu_exit);
 
 MODULE_AUTHOR("Stefan Achatz");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/hid-sony.c linux-4.1/drivers/hid/hid-sony.c
--- linux-4.1.orig/drivers/hid/hid-sony.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/hid-sony.c	2015-06-25 22:51:15.364674310 +0100
@@ -2178,7 +2178,7 @@ static void __exit sony_exit(void)
 	hid_unregister_driver(&sony_driver);
 	ida_destroy(&sony_device_id_allocator);
 }
-module_init(sony_init);
+deferred_module_init(sony_init);
 module_exit(sony_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/drivers/hid: hid-sony.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/uhid.c linux-4.1/drivers/hid/uhid.c
--- linux-4.1.orig/drivers/hid/uhid.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/uhid.c	2015-06-25 22:51:15.366674077 +0100
@@ -775,7 +775,7 @@ static void __exit uhid_exit(void)
 	misc_deregister(&uhid_misc);
 }
 
-module_init(uhid_init);
+deferred_module_init(uhid_init);
 module_exit(uhid_exit);
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("David Herrmann <dh.herrmann@gmail.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hid/usbhid/hid-core.c linux-4.1/drivers/hid/usbhid/hid-core.c
--- linux-4.1.orig/drivers/hid/usbhid/hid-core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hid/usbhid/hid-core.c	2015-06-25 22:51:15.367673960 +0100
@@ -1626,7 +1626,7 @@ struct usb_interface *usbhid_find_interf
 	return usb_find_interface(&hid_driver, minor);
 }
 
-static int __init hid_init(void)
+static int __init usb_hid_init(void)
 {
 	int retval = -ENOMEM;
 
@@ -1651,7 +1651,7 @@ static void __exit hid_exit(void)
 	usbhid_quirks_exit();
 }
 
-module_init(hid_init);
+deferred_module_init(usb_hid_init);
 module_exit(hid_exit);
 
 MODULE_AUTHOR("Andreas Gal");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hwmon/coretemp.c linux-4.1/drivers/hwmon/coretemp.c
--- linux-4.1.orig/drivers/hwmon/coretemp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hwmon/coretemp.c	2015-06-25 22:51:17.129467999 +0100
@@ -853,5 +853,5 @@ MODULE_AUTHOR("Rudolf Marek <r.marek@ass
 MODULE_DESCRIPTION("Intel Core temperature monitor");
 MODULE_LICENSE("GPL");
 
-module_init(coretemp_init)
+async_module_init(coretemp_init)
 module_exit(coretemp_exit)
Only in linux-4.1/drivers/hwmon: coretemp.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/hwmon/gpio-fan.c linux-4.1/drivers/hwmon/gpio-fan.c
--- linux-4.1.orig/drivers/hwmon/gpio-fan.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/hwmon/gpio-fan.c	2015-06-25 22:51:17.129467999 +0100
@@ -673,7 +673,7 @@ static struct platform_driver gpio_fan_d
 	},
 };
 
-module_platform_driver(gpio_fan_driver);
+async_module_platform_driver(gpio_fan_driver);
 
 MODULE_AUTHOR("Simon Guinot <sguinot@lacie.com>");
 MODULE_DESCRIPTION("GPIO FAN driver");
Only in linux-4.1/drivers/hwmon: gpio-fan.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/i2c/busses/i2c-i801.c linux-4.1/drivers/i2c/busses/i2c-i801.c
--- linux-4.1.orig/drivers/i2c/busses/i2c-i801.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/i2c/busses/i2c-i801.c	2015-06-25 22:51:18.492308678 +0100
@@ -1349,5 +1349,5 @@ MODULE_AUTHOR("Mark D. Studebaker <mdsxy
 MODULE_DESCRIPTION("I801 SMBus driver");
 MODULE_LICENSE("GPL");
 
-module_init(i2c_i801_init);
+async_module_init(i2c_i801_init);
 module_exit(i2c_i801_exit);
Only in linux-4.1/drivers/i2c/busses: i2c-i801.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/i2c/busses/i2c-isch.c linux-4.1/drivers/i2c/busses/i2c-isch.c
--- linux-4.1.orig/drivers/i2c/busses/i2c-isch.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/i2c/busses/i2c-isch.c	2015-06-25 22:51:18.492308678 +0100
@@ -314,7 +314,7 @@ static struct platform_driver smbus_sch_
 	.remove		= smbus_sch_remove,
 };
 
-module_platform_driver(smbus_sch_driver);
+async_module_platform_driver(smbus_sch_driver);
 
 MODULE_AUTHOR("Jacob Pan <jacob.jun.pan@intel.com>");
 MODULE_DESCRIPTION("Intel SCH SMBus driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/i2c/busses/i2c-ismt.c linux-4.1/drivers/i2c/busses/i2c-ismt.c
--- linux-4.1.orig/drivers/i2c/busses/i2c-ismt.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/i2c/busses/i2c-ismt.c	2015-06-25 22:51:17.130467882 +0100
@@ -995,7 +995,7 @@ static struct pci_driver ismt_driver = {
 	.resume = ismt_resume,
 };
 
-module_pci_driver(ismt_driver);
+async_module_pci_driver(ismt_driver);
 
 MODULE_LICENSE("Dual BSD/GPL");
 MODULE_AUTHOR("Bill E. Brown <bill.e.brown@intel.com>");
Only in linux-4.1/drivers/i2c/busses: i2c-ismt.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/i2c/busses/i2c-nforce2.c linux-4.1/drivers/i2c/busses/i2c-nforce2.c
--- linux-4.1.orig/drivers/i2c/busses/i2c-nforce2.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/i2c/busses/i2c-nforce2.c	2015-06-25 22:51:15.368673843 +0100
@@ -448,4 +448,4 @@ static struct pci_driver nforce2_driver
 	.remove		= nforce2_remove,
 };
 
-module_pci_driver(nforce2_driver);
+deferred_module_pci_driver(nforce2_driver);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/evdev.c linux-4.1/drivers/input/evdev.c
--- linux-4.1.orig/drivers/input/evdev.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/evdev.c	2015-06-25 22:51:17.827386410 +0100
@@ -1253,7 +1253,7 @@ static void __exit evdev_exit(void)
 	input_unregister_handler(&evdev_handler);
 }
 
-module_init(evdev_init);
+async_module_init(evdev_init);
 module_exit(evdev_exit);
 
 MODULE_AUTHOR("Vojtech Pavlik <vojtech@ucw.cz>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/keyboard/atkbd.c linux-4.1/drivers/input/keyboard/atkbd.c
--- linux-4.1.orig/drivers/input/keyboard/atkbd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/keyboard/atkbd.c	2015-06-25 22:51:15.368673843 +0100
@@ -1817,5 +1817,5 @@ static void __exit atkbd_exit(void)
 	serio_unregister_driver(&atkbd_drv);
 }
 
-module_init(atkbd_init);
+deferred_module_init(atkbd_init);
 module_exit(atkbd_exit);
Only in linux-4.1/drivers/input/keyboard: atkbd.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/misc/uinput.c linux-4.1/drivers/input/misc/uinput.c
--- linux-4.1.orig/drivers/input/misc/uinput.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/misc/uinput.c	2015-06-25 22:51:15.369673726 +0100
@@ -939,5 +939,5 @@ MODULE_DESCRIPTION("User level driver su
 MODULE_LICENSE("GPL");
 MODULE_VERSION("0.3");
 
-module_init(uinput_init);
+deferred_module_init(uinput_init);
 module_exit(uinput_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/mouse/psmouse-base.c linux-4.1/drivers/input/mouse/psmouse-base.c
--- linux-4.1.orig/drivers/input/mouse/psmouse-base.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/mouse/psmouse-base.c	2015-06-25 22:51:15.370673609 +0100
@@ -1937,5 +1937,5 @@ static void __exit psmouse_exit(void)
 	destroy_workqueue(kpsmoused_wq);
 }
 
-module_init(psmouse_init);
+deferred_module_init(psmouse_init);
 module_exit(psmouse_exit);
Only in linux-4.1/drivers/input/mouse: psmouse-base.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/mousedev.c linux-4.1/drivers/input/mousedev.c
--- linux-4.1.orig/drivers/input/mousedev.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/mousedev.c	2015-06-25 22:51:15.371673492 +0100
@@ -1124,5 +1124,5 @@ static void __exit mousedev_exit(void)
 	mousedev_destroy(mousedev_mix);
 }
 
-module_init(mousedev_init);
+deferred_module_init(mousedev_init);
 module_exit(mousedev_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/serio/i8042.c linux-4.1/drivers/input/serio/i8042.c
--- linux-4.1.orig/drivers/input/serio/i8042.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/serio/i8042.c	2015-06-25 22:51:15.372673375 +0100
@@ -1546,5 +1546,5 @@ static void __exit i8042_exit(void)
 	panic_blink = NULL;
 }
 
-module_init(i8042_init);
+deferred_module_init(i8042_init);
 module_exit(i8042_exit);
Only in linux-4.1/drivers/input/serio: i8042.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/serio/pcips2.c linux-4.1/drivers/input/serio/pcips2.c
--- linux-4.1.orig/drivers/input/serio/pcips2.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/serio/pcips2.c	2015-06-25 22:51:17.832385825 +0100
@@ -213,7 +213,7 @@ static struct pci_driver pcips2_driver =
 	.remove			= pcips2_remove,
 };
 
-module_pci_driver(pcips2_driver);
+async_module_pci_driver(pcips2_driver);
 
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Russell King <rmk@arm.linux.org.uk>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/input/serio/serport.c linux-4.1/drivers/input/serio/serport.c
--- linux-4.1.orig/drivers/input/serio/serport.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/input/serio/serport.c	2015-06-25 22:51:15.372673375 +0100
@@ -297,5 +297,5 @@ static void __exit serport_exit(void)
 	tty_unregister_ldisc(N_MOUSE);
 }
 
-module_init(serport_init);
+deferred_module_init(serport_init);
 module_exit(serport_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/Kconfig linux-4.1/drivers/Kconfig
--- linux-4.1.orig/drivers/Kconfig	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/Kconfig	2015-06-25 22:51:15.373673258 +0100
@@ -1,5 +1,20 @@
 menu "Device Drivers"
 
+config ASYNCHRO_MODULE_INIT
+	bool "Initialize module in Asynchronize way using single module dependencies"
+	---help---
+	Asynchrone drivers initialization routine 
+	
+if ASYNCHRO_MODULE_INIT
+	config ASYNCHRO_MODULE_INIT_DEBUG
+	bool "Debug mode"
+	
+	config ASYNCHRO_MODULE_INIT_THREADS	
+	int "Maximum number of threads"
+	range 0 4
+	default "2" 
+endif
+	
 source "drivers/amba/Kconfig"
 
 source "drivers/base/Kconfig"
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/Makefile linux-4.1/drivers/Makefile
--- linux-4.1.orig/drivers/Makefile	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/Makefile	2015-06-25 22:51:19.553184659 +0100
@@ -33,6 +33,51 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
+#ready for asyncronized initialization
+obj-y += async.o
+
 # SOC specific infrastructure drivers.
 obj-y				+= soc/
 
@@ -165,3 +210,5 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= hwtracing/coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+
Only in linux-4.1/drivers: Makefile.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/media/usb/gspca/gspca.c linux-4.1/drivers/media/usb/gspca/gspca.c
--- linux-4.1.orig/drivers/media/usb/gspca/gspca.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/media/usb/gspca/gspca.c	2015-06-25 22:51:17.142466479 +0100
@@ -2269,7 +2269,7 @@ static void __exit gspca_exit(void)
 {
 }
 
-module_init(gspca_init);
+async_module_init(gspca_init);
 module_exit(gspca_exit);
 
 module_param_named(debug, gspca_debug, int, 0644);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/media/usb/uvc/uvc_driver.c linux-4.1/drivers/media/usb/uvc/uvc_driver.c
--- linux-4.1.orig/drivers/media/usb/uvc/uvc_driver.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/media/usb/uvc/uvc_driver.c	2015-06-25 22:51:17.143466362 +0100
@@ -2580,7 +2580,7 @@ static void __exit uvc_cleanup(void)
 	uvc_debugfs_cleanup();
 }
 
-module_init(uvc_init);
+async_module_init(uvc_init);
 module_exit(uvc_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.1/drivers/media/usb/uvc: uvc_driver.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/mfd/lpc_ich.c linux-4.1/drivers/mfd/lpc_ich.c
--- linux-4.1.orig/drivers/mfd/lpc_ich.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/mfd/lpc_ich.c	2015-06-25 22:51:17.144466245 +0100
@@ -1084,7 +1084,7 @@ static struct pci_driver lpc_ich_driver
 	.remove		= lpc_ich_remove,
 };
 
-module_pci_driver(lpc_ich_driver);
+async_module_pci_driver(lpc_ich_driver);
 
 MODULE_AUTHOR("Aaron Sierra <asierra@xes-inc.com>");
 MODULE_DESCRIPTION("LPC interface for Intel ICH");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/mfd/lpc_sch.c linux-4.1/drivers/mfd/lpc_sch.c
--- linux-4.1.orig/drivers/mfd/lpc_sch.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/mfd/lpc_sch.c	2015-06-25 22:51:17.145466129 +0100
@@ -209,7 +209,7 @@ static struct pci_driver lpc_sch_driver
 	.remove		= lpc_sch_remove,
 };
 
-module_pci_driver(lpc_sch_driver);
+async_module_pci_driver(lpc_sch_driver);
 
 MODULE_AUTHOR("Denis Turischev <denis@compulab.co.il>");
 MODULE_DESCRIPTION("LPC interface for Intel Poulsbo SCH");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/mtd/devices/mtdram.c linux-4.1/drivers/mtd/devices/mtdram.c
--- linux-4.1.orig/drivers/mtd/devices/mtdram.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/mtd/devices/mtdram.c	2015-06-25 22:51:17.145466129 +0100
@@ -150,7 +150,7 @@ static int __init init_mtdram(void)
 	return err;
 }
 
-module_init(init_mtdram);
+async_module_init(init_mtdram);
 module_exit(cleanup_mtdram);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/mtd/mtdblock.c linux-4.1/drivers/mtd/mtdblock.c
--- linux-4.1.orig/drivers/mtd/mtdblock.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/mtd/mtdblock.c	2015-06-25 22:51:17.146466012 +0100
@@ -387,7 +387,7 @@ static void __exit cleanup_mtdblock(void
 	deregister_mtd_blktrans(&mtdblock_tr);
 }
 
-module_init(init_mtdblock);
+async_module_init(init_mtdblock);
 module_exit(cleanup_mtdblock);
 
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/mtd/mtdcore.c linux-4.1/drivers/mtd/mtdcore.c
--- linux-4.1.orig/drivers/mtd/mtdcore.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/mtd/mtdcore.c	2015-06-25 22:51:17.146466012 +0100
@@ -1295,7 +1295,7 @@ static void __exit cleanup_mtd(void)
 	bdi_destroy(&mtd_bdi);
 }
 
-module_init(init_mtd);
+async_module_init(init_mtd);
 module_exit(cleanup_mtd);
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/drivers/mtd: mtdcore.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/mtd/ubi/build.c linux-4.1/drivers/mtd/ubi/build.c
--- linux-4.1.orig/drivers/mtd/ubi/build.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/mtd/ubi/build.c	2015-06-25 22:51:15.537654088 +0100
@@ -1341,7 +1341,7 @@ out:
 	pr_err("UBI error: cannot initialize UBI, error %d", err);
 	return err;
 }
-late_initcall(ubi_init);
+module_init(ubi_init);
 
 static void __exit ubi_exit(void)
 {
Only in linux-4.1/drivers/mtd/ubi: build.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/net/ethernet/nvidia/forcedeth.c linux-4.1/drivers/net/ethernet/nvidia/forcedeth.c
--- linux-4.1.orig/drivers/net/ethernet/nvidia/forcedeth.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/net/ethernet/nvidia/forcedeth.c	2015-06-25 22:51:15.540653738 +0100
@@ -6378,7 +6378,7 @@ module_param(debug_tx_timeout, bool, 0);
 MODULE_PARM_DESC(debug_tx_timeout,
 		 "Dump tx related registers and ring when tx_timeout happens");
 
-module_pci_driver(forcedeth_pci_driver);
+deferred_module_pci_driver(forcedeth_pci_driver);
 MODULE_AUTHOR("Manfred Spraul <manfred@colorfullife.com>");
 MODULE_DESCRIPTION("Reverse Engineered nForce ethernet driver");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/net/wireless/b43/main.c linux-4.1/drivers/net/wireless/b43/main.c
--- linux-4.1.orig/drivers/net/wireless/b43/main.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/net/wireless/b43/main.c	2015-06-25 22:51:15.375673025 +0100
@@ -5897,5 +5897,5 @@ static void __exit b43_exit(void)
 	b43_debugfs_exit();
 }
 
-module_init(b43_init)
+deferred_module_init(b43_init)
 module_exit(b43_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/net/wireless/b43legacy/main.c linux-4.1/drivers/net/wireless/b43legacy/main.c
--- linux-4.1.orig/drivers/net/wireless/b43legacy/main.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/net/wireless/b43legacy/main.c	2015-06-25 22:51:15.377672791 +0100
@@ -4061,5 +4061,5 @@ static void __exit b43legacy_exit(void)
 	b43legacy_debugfs_exit();
 }
 
-module_init(b43legacy_init)
+deferred_module_init(b43legacy_init)
 module_exit(b43legacy_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/net/wireless/ipw2x00/ipw2100.c linux-4.1/drivers/net/wireless/ipw2x00/ipw2100.c
--- linux-4.1.orig/drivers/net/wireless/ipw2x00/ipw2100.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/net/wireless/ipw2x00/ipw2100.c	2015-06-25 22:51:15.381672323 +0100
@@ -6611,7 +6611,7 @@ static void __exit ipw2100_exit(void)
 	pm_qos_remove_request(&ipw2100_pm_qos_req);
 }
 
-module_init(ipw2100_init);
+deferred_module_init(ipw2100_init);
 module_exit(ipw2100_exit);
 
 static int ipw2100_wx_get_name(struct net_device *dev,
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/oprofile/oprof.c linux-4.1/drivers/oprofile/oprof.c
--- linux-4.1.orig/drivers/oprofile/oprof.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/oprofile/oprof.c	2015-06-25 22:51:17.165463791 +0100
@@ -275,7 +275,7 @@ static void __exit oprofile_exit(void)
 }
 
 
-module_init(oprofile_init);
+async_module_init(oprofile_init);
 module_exit(oprofile_exit);
 
 module_param_named(timer, timer, int, 0644);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/pci/hotplug/pciehp_core.c linux-4.1/drivers/pci/hotplug/pciehp_core.c
--- linux-4.1.orig/drivers/pci/hotplug/pciehp_core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/pci/hotplug/pciehp_core.c	2015-06-25 22:51:15.383672090 +0100
@@ -383,5 +383,5 @@ static void __exit pcied_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(pcied_init);
+deferred_module_init(pcied_init);
 module_exit(pcied_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/pci/hotplug/pci_hotplug_core.c linux-4.1/drivers/pci/hotplug/pci_hotplug_core.c
--- linux-4.1.orig/drivers/pci/hotplug/pci_hotplug_core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/pci/hotplug/pci_hotplug_core.c	2015-06-25 22:51:15.383672090 +0100
@@ -545,7 +545,7 @@ static void __exit pci_hotplug_exit(void
 	cpci_hotplug_exit();
 }
 
-module_init(pci_hotplug_init);
+deferred_module_init(pci_hotplug_init);
 module_exit(pci_hotplug_exit);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/pci/hotplug/shpchp_core.c linux-4.1/drivers/pci/hotplug/shpchp_core.c
--- linux-4.1.orig/drivers/pci/hotplug/shpchp_core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/pci/hotplug/shpchp_core.c	2015-06-25 22:51:15.385671856 +0100
@@ -385,5 +385,5 @@ static void __exit shpcd_cleanup(void)
 	info(DRIVER_DESC " version: " DRIVER_VERSION " unloaded\n");
 }
 
-module_init(shpcd_init);
+deferred_module_init(shpcd_init);
 module_exit(shpcd_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/pci/pcie/pme.c linux-4.1/drivers/pci/pcie/pme.c
--- linux-4.1.orig/drivers/pci/pcie/pme.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/pci/pcie/pme.c	2015-06-25 22:51:15.858616566 +0100
@@ -478,4 +478,4 @@ static int __init pcie_pme_service_init(
 	return pcie_port_service_register(&pcie_pme_driver);
 }
 
-module_init(pcie_pme_service_init);
+async_module_init(pcie_pme_service_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/pci/pcie/portdrv_pci.c linux-4.1/drivers/pci/pcie/portdrv_pci.c
--- linux-4.1.orig/drivers/pci/pcie/portdrv_pci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/pci/pcie/portdrv_pci.c	2015-06-25 22:51:15.385671856 +0100
@@ -361,4 +361,4 @@ static int __init pcie_portdrv_init(void
 	return retval;
 }
 
-module_init(pcie_portdrv_init);
+deferred_module_init(pcie_portdrv_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/spi/spi-gpio.c linux-4.1/drivers/spi/spi-gpio.c
--- linux-4.1.orig/drivers/spi/spi-gpio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/spi/spi-gpio.c	2015-06-25 22:51:17.169463323 +0100
@@ -540,7 +540,7 @@ static struct platform_driver spi_gpio_d
 	.probe		= spi_gpio_probe,
 	.remove		= spi_gpio_remove,
 };
-module_platform_driver(spi_gpio_driver);
+async_module_platform_driver(spi_gpio_driver);
 
 MODULE_DESCRIPTION("SPI master driver using generic bitbanged GPIO ");
 MODULE_AUTHOR("David Brownell");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/bfin_jtag_comm.c linux-4.1/drivers/tty/bfin_jtag_comm.c
--- linux-4.1.orig/drivers/tty/bfin_jtag_comm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/bfin_jtag_comm.c	2015-06-25 22:51:17.169463323 +0100
@@ -266,7 +266,7 @@ static int __init bfin_jc_init(void)
 	kthread_stop(bfin_jc_kthread);
 	return ret;
 }
-module_init(bfin_jc_init);
+async_module_init(bfin_jc_init);
 
 static void __exit bfin_jc_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/cyclades.c linux-4.1/drivers/tty/cyclades.c
--- linux-4.1.orig/drivers/tty/cyclades.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/cyclades.c	2015-06-25 22:51:17.171463089 +0100
@@ -4159,7 +4159,7 @@ static void __exit cy_cleanup_module(voi
 	put_tty_driver(cy_serial_driver);
 } /* cy_cleanup_module */
 
-module_init(cy_init);
+async_module_init(cy_init);
 module_exit(cy_cleanup_module);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/ehv_bytechan.c linux-4.1/drivers/tty/ehv_bytechan.c
--- linux-4.1.orig/drivers/tty/ehv_bytechan.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/ehv_bytechan.c	2015-06-25 22:51:17.173462856 +0100
@@ -829,7 +829,7 @@ static void __exit ehv_bc_exit(void)
 	kfree(bcs);
 }
 
-module_init(ehv_bc_init);
+async_module_init(ehv_bc_init);
 module_exit(ehv_bc_exit);
 
 MODULE_AUTHOR("Timur Tabi <timur@freescale.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/hvc/hvc_beat.c linux-4.1/drivers/tty/hvc/hvc_beat.c
--- linux-4.1.orig/drivers/tty/hvc/hvc_beat.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/hvc/hvc_beat.c	2015-06-25 22:51:17.176462505 +0100
@@ -126,7 +126,7 @@ static void __exit hvc_beat_exit(void)
 		hvc_remove(hvc_beat_dev);
 }
 
-module_init(hvc_beat_init);
+async_module_init(hvc_beat_init);
 module_exit(hvc_beat_exit);
 
 __setup("hvc_beat=", hvc_beat_config);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/hvc/hvcs.c linux-4.1/drivers/tty/hvc/hvcs.c
--- linux-4.1.orig/drivers/tty/hvc/hvcs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/hvc/hvcs.c	2015-06-25 22:51:17.177462388 +0100
@@ -1612,5 +1612,5 @@ static void __exit hvcs_module_exit(void
 	printk(KERN_INFO "HVCS: driver module removed.\n");
 }
 
-module_init(hvcs_module_init);
+async_module_init(hvcs_module_init);
 module_exit(hvcs_module_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/hvc/hvc_vio.c linux-4.1/drivers/tty/hvc/hvc_vio.c
--- linux-4.1.orig/drivers/tty/hvc/hvc_vio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/hvc/hvc_vio.c	2015-06-25 22:51:17.178462271 +0100
@@ -394,7 +394,7 @@ static int __init hvc_vio_init(void)
 
 	return rc;
 }
-module_init(hvc_vio_init); /* after drivers/char/hvc_console.c */
+async_module_init(hvc_vio_init); /* after drivers/char/hvc_console.c */
 
 static void __exit hvc_vio_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/ipwireless/main.c linux-4.1/drivers/tty/ipwireless/main.c
--- linux-4.1.orig/drivers/tty/ipwireless/main.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/ipwireless/main.c	2015-06-25 22:51:17.178462271 +0100
@@ -339,7 +339,7 @@ static void __exit exit_ipwireless(void)
 	ipwireless_tty_release();
 }
 
-module_init(init_ipwireless);
+async_module_init(init_ipwireless);
 module_exit(exit_ipwireless);
 
 MODULE_AUTHOR(IPWIRELESS_PCMCIA_AUTHOR);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/isicom.c linux-4.1/drivers/tty/isicom.c
--- linux-4.1.orig/drivers/tty/isicom.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/isicom.c	2015-06-25 22:51:17.179462154 +0100
@@ -1723,7 +1723,7 @@ static void __exit isicom_exit(void)
 	put_tty_driver(isicom_normal);
 }
 
-module_init(isicom_init);
+async_module_init(isicom_init);
 module_exit(isicom_exit);
 
 MODULE_AUTHOR("MultiTech");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/metag_da.c linux-4.1/drivers/tty/metag_da.c
--- linux-4.1.orig/drivers/tty/metag_da.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/metag_da.c	2015-06-25 22:51:17.180462037 +0100
@@ -657,7 +657,7 @@ static void dashtty_exit(void)
 	put_tty_driver(channel_driver);
 }
 
-module_init(dashtty_init);
+async_module_init(dashtty_init);
 module_exit(dashtty_exit);
 
 #ifdef CONFIG_DA_CONSOLE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/moxa.c linux-4.1/drivers/tty/moxa.c
--- linux-4.1.orig/drivers/tty/moxa.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/moxa.c	2015-06-25 22:51:17.181461920 +0100
@@ -1137,7 +1137,7 @@ static void __exit moxa_exit(void)
 	put_tty_driver(moxaDriver);
 }
 
-module_init(moxa_init);
+async_module_init(moxa_init);
 module_exit(moxa_exit);
 
 static void moxa_shutdown(struct tty_port *port)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/mxser.c linux-4.1/drivers/tty/mxser.c
--- linux-4.1.orig/drivers/tty/mxser.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/mxser.c	2015-06-25 22:51:17.182461804 +0100
@@ -2813,5 +2813,5 @@ static void __exit mxser_module_exit(voi
 			mxser_release_ISA_res(&mxser_boards[i]);
 }
 
-module_init(mxser_module_init);
+async_module_init(mxser_module_init);
 module_exit(mxser_module_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/n_gsm.c linux-4.1/drivers/tty/n_gsm.c
--- linux-4.1.orig/drivers/tty/n_gsm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/n_gsm.c	2015-06-25 22:51:17.185461453 +0100
@@ -3255,7 +3255,7 @@ static void __exit gsm_exit(void)
 	put_tty_driver(gsm_tty_driver);
 }
 
-module_init(gsm_init);
+async_module_init(gsm_init);
 module_exit(gsm_exit);
 
 
Only in linux-4.1/drivers/tty: n_gsm.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/n_hdlc.c linux-4.1/drivers/tty/n_hdlc.c
--- linux-4.1.orig/drivers/tty/n_hdlc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/n_hdlc.c	2015-06-25 22:51:17.186461336 +0100
@@ -989,7 +989,7 @@ static void __exit n_hdlc_exit(void)
 		printk(hdlc_unregister_ok);
 }
 
-module_init(n_hdlc_init);
+async_module_init(n_hdlc_init);
 module_exit(n_hdlc_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/nozomi.c linux-4.1/drivers/tty/nozomi.c
--- linux-4.1.orig/drivers/tty/nozomi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/nozomi.c	2015-06-25 22:51:17.186461336 +0100
@@ -1940,7 +1940,7 @@ static __exit void nozomi_exit(void)
 	put_tty_driver(ntty_driver);
 }
 
-module_init(nozomi_init);
+async_module_init(nozomi_init);
 module_exit(nozomi_exit);
 
 module_param(debug, int, S_IRUGO | S_IWUSR);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/n_r3964.c linux-4.1/drivers/tty/n_r3964.c
--- linux-4.1.orig/drivers/tty/n_r3964.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/n_r3964.c	2015-06-25 22:51:17.187461219 +0100
@@ -218,7 +218,7 @@ static int __init r3964_init(void)
 	return status;
 }
 
-module_init(r3964_init);
+async_module_init(r3964_init);
 module_exit(r3964_exit);
 
 /*************************************************************
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/n_tracerouter.c linux-4.1/drivers/tty/n_tracerouter.c
--- linux-4.1.orig/drivers/tty/n_tracerouter.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/n_tracerouter.c	2015-06-25 22:51:17.188461102 +0100
@@ -234,7 +234,7 @@ static void __exit n_tracerouter_exit(vo
 		kfree(tr_data);
 }
 
-module_init(n_tracerouter_init);
+async_module_init(n_tracerouter_init);
 module_exit(n_tracerouter_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/n_tracesink.c linux-4.1/drivers/tty/n_tracesink.c
--- linux-4.1.orig/drivers/tty/n_tracesink.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/n_tracesink.c	2015-06-25 22:51:17.188461102 +0100
@@ -229,7 +229,7 @@ static void __exit n_tracesink_exit(void
 		pr_err("%s: Unregistration failed: %d\n", __func__,  retval);
 }
 
-module_init(n_tracesink_init);
+async_module_init(n_tracesink_init);
 module_exit(n_tracesink_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/pty.c linux-4.1/drivers/tty/pty.c
--- linux-4.1.orig/drivers/tty/pty.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/pty.c	2015-06-25 22:51:17.189460985 +0100
@@ -869,4 +869,4 @@ static int __init pty_init(void)
 	unix98_pty_init();
 	return 0;
 }
-module_init(pty_init);
+async_module_init(pty_init);
Only in linux-4.1/drivers/tty: pty.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/rocket.c linux-4.1/drivers/tty/rocket.c
--- linux-4.1.orig/drivers/tty/rocket.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/rocket.c	2015-06-25 22:51:17.190460868 +0100
@@ -282,7 +282,7 @@ MODULE_PARM_DESC(pc104_4, "set interface
 static int rp_init(void);
 static void rp_cleanup_module(void);
 
-module_init(rp_init);
+async_module_init(rp_init);
 module_exit(rp_cleanup_module);
 
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/21285.c linux-4.1/drivers/tty/serial/21285.c
--- linux-4.1.orig/drivers/tty/serial/21285.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/21285.c	2015-06-25 22:51:17.191460752 +0100
@@ -498,7 +498,7 @@ static void __exit serial21285_exit(void
 	uart_unregister_driver(&serial21285_reg);
 }
 
-module_init(serial21285_init);
+async_module_init(serial21285_init);
 module_exit(serial21285_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/68328serial.c linux-4.1/drivers/tty/serial/68328serial.c
--- linux-4.1.orig/drivers/tty/serial/68328serial.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/68328serial.c	2015-06-25 22:51:17.192460635 +0100
@@ -1223,7 +1223,7 @@ rs68328_init(void)
 	return 0;
 }
 
-module_init(rs68328_init);
+async_module_init(rs68328_init);
 
 
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_accent.c linux-4.1/drivers/tty/serial/8250/8250_accent.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_accent.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_accent.c	2015-06-25 22:51:17.193460518 +0100
@@ -38,7 +38,7 @@ static int __init accent_init(void)
 	return platform_device_register(&accent_device);
 }
 
-module_init(accent_init);
+async_module_init(accent_init);
 
 MODULE_AUTHOR("Russell King");
 MODULE_DESCRIPTION("8250 serial probe module for Accent Async cards");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_acorn.c linux-4.1/drivers/tty/serial/8250/8250_acorn.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_acorn.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_acorn.c	2015-06-25 22:51:17.193460518 +0100
@@ -137,5 +137,5 @@ MODULE_AUTHOR("Russell King");
 MODULE_DESCRIPTION("Acorn 8250-compatible serial port expansion card driver");
 MODULE_LICENSE("GPL");
 
-module_init(serial_card_init);
+async_module_init(serial_card_init);
 module_exit(serial_card_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_boca.c linux-4.1/drivers/tty/serial/8250/8250_boca.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_boca.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_boca.c	2015-06-25 22:51:17.194460401 +0100
@@ -52,7 +52,7 @@ static int __init boca_init(void)
 	return platform_device_register(&boca_device);
 }
 
-module_init(boca_init);
+async_module_init(boca_init);
 
 MODULE_AUTHOR("Russell King");
 MODULE_DESCRIPTION("8250 serial probe module for Boca cards");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_core.c linux-4.1/drivers/tty/serial/8250/8250_core.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_core.c	2015-06-25 22:51:15.557651750 +0100
@@ -4019,7 +4019,7 @@ static void __exit serial8250_exit(void)
 #endif
 }
 
-module_init(serial8250_init);
+deferred_module_init(serial8250_init);
 module_exit(serial8250_exit);
 
 EXPORT_SYMBOL(serial8250_suspend_port);
Only in linux-4.1/drivers/tty/serial/8250: 8250_core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_exar_st16c554.c linux-4.1/drivers/tty/serial/8250/8250_exar_st16c554.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_exar_st16c554.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_exar_st16c554.c	2015-06-25 22:51:17.197460050 +0100
@@ -43,7 +43,7 @@ static int __init exar_init(void)
 	return platform_device_register(&exar_device);
 }
 
-module_init(exar_init);
+async_module_init(exar_init);
 
 MODULE_AUTHOR("Paul B Schroeder");
 MODULE_DESCRIPTION("8250 serial probe module for Exar cards");
Only in linux-4.1/drivers/tty/serial/8250: 8250_fintek.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_fourport.c linux-4.1/drivers/tty/serial/8250/8250_fourport.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_fourport.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_fourport.c	2015-06-25 22:51:17.198459933 +0100
@@ -44,7 +44,7 @@ static int __init fourport_init(void)
 	return platform_device_register(&fourport_device);
 }
 
-module_init(fourport_init);
+async_module_init(fourport_init);
 
 MODULE_AUTHOR("Russell King");
 MODULE_DESCRIPTION("8250 serial probe module for AST Fourport cards");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_gsc.c linux-4.1/drivers/tty/serial/8250/8250_gsc.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_gsc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_gsc.c	2015-06-25 22:51:17.198459933 +0100
@@ -124,6 +124,6 @@ static int __init probe_serial_gsc(void)
 	return 0;
 }
 
-module_init(probe_serial_gsc);
+async_module_init(probe_serial_gsc);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_hp300.c linux-4.1/drivers/tty/serial/8250/8250_hp300.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_hp300.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_hp300.c	2015-06-25 22:51:17.198459933 +0100
@@ -315,7 +315,7 @@ static void __exit hp300_8250_exit(void)
 #endif
 }
 
-module_init(hp300_8250_init);
+async_module_init(hp300_8250_init);
 module_exit(hp300_8250_exit);
 MODULE_DESCRIPTION("HP DCA/APCI serial driver");
 MODULE_AUTHOR("Kars de Jong <jongk@linux-m68k.org>");
Only in linux-4.1/drivers/tty/serial/8250: 8250_hp300.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_hub6.c linux-4.1/drivers/tty/serial/8250/8250_hub6.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_hub6.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_hub6.c	2015-06-25 22:51:17.199459816 +0100
@@ -49,7 +49,7 @@ static int __init hub6_init(void)
 	return platform_device_register(&hub6_device);
 }
 
-module_init(hub6_init);
+async_module_init(hub6_init);
 
 MODULE_AUTHOR("Russell King");
 MODULE_DESCRIPTION("8250 serial probe module for Hub6 cards");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/8250/8250_pci.c linux-4.1/drivers/tty/serial/8250/8250_pci.c
--- linux-4.1.orig/drivers/tty/serial/8250/8250_pci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/8250/8250_pci.c	2015-06-25 22:51:17.201459583 +0100
@@ -5717,7 +5717,7 @@ static struct pci_driver serial_pci_driv
 	.err_handler	= &serial8250_err_handler,
 };
 
-module_pci_driver(serial_pci_driver);
+async_module_pci_driver(serial_pci_driver);
 
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("Generic 8250/16x50 PCI serial probe module");
Only in linux-4.1/drivers/tty/serial/8250: 8250_pci.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/altera_jtaguart.c linux-4.1/drivers/tty/serial/altera_jtaguart.c
--- linux-4.1.orig/drivers/tty/serial/altera_jtaguart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/altera_jtaguart.c	2015-06-25 22:51:17.202459466 +0100
@@ -499,7 +499,7 @@ static void __exit altera_jtaguart_exit(
 	uart_unregister_driver(&altera_jtaguart_driver);
 }
 
-module_init(altera_jtaguart_init);
+async_module_init(altera_jtaguart_init);
 module_exit(altera_jtaguart_exit);
 
 MODULE_DESCRIPTION("Altera JTAG UART driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/altera_uart.c linux-4.1/drivers/tty/serial/altera_uart.c
--- linux-4.1.orig/drivers/tty/serial/altera_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/altera_uart.c	2015-06-25 22:51:17.203459349 +0100
@@ -647,7 +647,7 @@ static void __exit altera_uart_exit(void
 	uart_unregister_driver(&altera_uart_driver);
 }
 
-module_init(altera_uart_init);
+async_module_init(altera_uart_init);
 module_exit(altera_uart_exit);
 
 MODULE_DESCRIPTION("Altera UART driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/amba-pl010.c linux-4.1/drivers/tty/serial/amba-pl010.c
--- linux-4.1.orig/drivers/tty/serial/amba-pl010.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/amba-pl010.c	2015-06-25 22:51:17.203459349 +0100
@@ -835,7 +835,7 @@ static void __exit pl010_exit(void)
 	uart_unregister_driver(&amba_reg);
 }
 
-module_init(pl010_init);
+async_module_init(pl010_init);
 module_exit(pl010_exit);
 
 MODULE_AUTHOR("ARM Ltd/Deep Blue Solutions Ltd");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/apbuart.c linux-4.1/drivers/tty/serial/apbuart.c
--- linux-4.1.orig/drivers/tty/serial/apbuart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/apbuart.c	2015-06-25 22:51:17.204459232 +0100
@@ -682,7 +682,7 @@ static void __exit grlib_apbuart_exit(vo
 	platform_driver_unregister(&grlib_apbuart_of_driver);
 }
 
-module_init(grlib_apbuart_init);
+async_module_init(grlib_apbuart_init);
 module_exit(grlib_apbuart_exit);
 
 MODULE_AUTHOR("Aeroflex Gaisler AB");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/ar933x_uart.c linux-4.1/drivers/tty/serial/ar933x_uart.c
--- linux-4.1.orig/drivers/tty/serial/ar933x_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/ar933x_uart.c	2015-06-25 22:51:17.205459115 +0100
@@ -777,7 +777,7 @@ static void __exit ar933x_uart_exit(void
 	uart_unregister_driver(&ar933x_uart_driver);
 }
 
-module_init(ar933x_uart_init);
+async_module_init(ar933x_uart_init);
 module_exit(ar933x_uart_exit);
 
 MODULE_DESCRIPTION("Atheros AR933X UART driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/arc_uart.c linux-4.1/drivers/tty/serial/arc_uart.c
--- linux-4.1.orig/drivers/tty/serial/arc_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/arc_uart.c	2015-06-25 22:51:17.205459115 +0100
@@ -678,7 +678,7 @@ static void __exit arc_serial_exit(void)
 	uart_unregister_driver(&arc_uart_driver);
 }
 
-module_init(arc_serial_init);
+async_module_init(arc_serial_init);
 module_exit(arc_serial_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/atmel_serial.c linux-4.1/drivers/tty/serial/atmel_serial.c
--- linux-4.1.orig/drivers/tty/serial/atmel_serial.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/atmel_serial.c	2015-06-25 22:51:17.207458881 +0100
@@ -2772,7 +2772,7 @@ static void __exit atmel_serial_exit(voi
 	uart_unregister_driver(&atmel_uart);
 }
 
-module_init(atmel_serial_init);
+async_module_init(atmel_serial_init);
 module_exit(atmel_serial_exit);
 
 MODULE_AUTHOR("Rick Bronson");
Only in linux-4.1/drivers/tty/serial: atmel_serial.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/bcm63xx_uart.c linux-4.1/drivers/tty/serial/bcm63xx_uart.c
--- linux-4.1.orig/drivers/tty/serial/bcm63xx_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/bcm63xx_uart.c	2015-06-25 22:51:17.208458764 +0100
@@ -911,7 +911,7 @@ static void __exit bcm_uart_exit(void)
 	uart_unregister_driver(&bcm_uart_driver);
 }
 
-module_init(bcm_uart_init);
+async_module_init(bcm_uart_init);
 module_exit(bcm_uart_exit);
 
 MODULE_AUTHOR("Maxime Bizon <mbizon@freebox.fr>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/bfin_sport_uart.c linux-4.1/drivers/tty/serial/bfin_sport_uart.c
--- linux-4.1.orig/drivers/tty/serial/bfin_sport_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/bfin_sport_uart.c	2015-06-25 22:51:17.208458764 +0100
@@ -924,7 +924,7 @@ static int __init sport_uart_init(void)
 
 	return ret;
 }
-module_init(sport_uart_init);
+async_module_init(sport_uart_init);
 
 static void __exit sport_uart_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/bfin_uart.c linux-4.1/drivers/tty/serial/bfin_uart.c
--- linux-4.1.orig/drivers/tty/serial/bfin_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/bfin_uart.c	2015-06-25 22:51:17.209458648 +0100
@@ -1546,7 +1546,7 @@ static void __exit bfin_serial_exit(void
 }
 
 
-module_init(bfin_serial_init);
+async_module_init(bfin_serial_init);
 module_exit(bfin_serial_exit);
 
 MODULE_AUTHOR("Sonic Zhang, Aubrey Li");
Only in linux-4.1/drivers/tty/serial: bfin_uart.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/clps711x.c linux-4.1/drivers/tty/serial/clps711x.c
--- linux-4.1.orig/drivers/tty/serial/clps711x.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/clps711x.c	2015-06-25 22:51:17.214458063 +0100
@@ -566,7 +566,7 @@ static int __init uart_clps711x_init(voi
 
 	return platform_driver_register(&clps711x_uart_platform);
 }
-module_init(uart_clps711x_init);
+async_module_init(uart_clps711x_init);
 
 static void __exit uart_clps711x_exit(void)
 {
Only in linux-4.1/drivers/tty/serial: clps711x.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/cpm_uart/cpm_uart_core.c linux-4.1/drivers/tty/serial/cpm_uart/cpm_uart_core.c
--- linux-4.1.orig/drivers/tty/serial/cpm_uart/cpm_uart_core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/cpm_uart/cpm_uart_core.c	2015-06-25 22:51:17.215457946 +0100
@@ -1479,7 +1479,7 @@ static void __exit cpm_uart_exit(void)
 	uart_unregister_driver(&cpm_reg);
 }
 
-module_init(cpm_uart_init);
+async_module_init(cpm_uart_init);
 module_exit(cpm_uart_exit);
 
 MODULE_AUTHOR("Kumar Gala/Antoniou Pantelis");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/crisv10.c linux-4.1/drivers/tty/serial/crisv10.c
--- linux-4.1.orig/drivers/tty/serial/crisv10.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/crisv10.c	2015-06-25 22:51:17.218457596 +0100
@@ -4367,4 +4367,4 @@ static int __init rs_init(void)
 
 /* this makes sure that rs_init is called during kernel boot */
 
-module_init(rs_init);
+async_module_init(rs_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/digicolor-usart.c linux-4.1/drivers/tty/serial/digicolor-usart.c
--- linux-4.1.orig/drivers/tty/serial/digicolor-usart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/digicolor-usart.c	2015-06-25 22:51:17.219457479 +0100
@@ -546,7 +546,7 @@ static int __init digicolor_uart_init(vo
 
 	return platform_driver_register(&digicolor_uart_platform);
 }
-module_init(digicolor_uart_init);
+async_module_init(digicolor_uart_init);
 
 static void __exit digicolor_uart_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/dz.c linux-4.1/drivers/tty/serial/dz.c
--- linux-4.1.orig/drivers/tty/serial/dz.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/dz.c	2015-06-25 22:51:17.220457362 +0100
@@ -944,4 +944,4 @@ static int __init dz_init(void)
 	return 0;
 }
 
-module_init(dz_init);
+async_module_init(dz_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/efm32-uart.c linux-4.1/drivers/tty/serial/efm32-uart.c
--- linux-4.1.orig/drivers/tty/serial/efm32-uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/efm32-uart.c	2015-06-25 22:51:17.221457245 +0100
@@ -834,7 +834,7 @@ static int __init efm32_uart_init(void)
 
 	return ret;
 }
-module_init(efm32_uart_init);
+async_module_init(efm32_uart_init);
 
 static void __exit efm32_uart_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/etraxfs-uart.c linux-4.1/drivers/tty/serial/etraxfs-uart.c
--- linux-4.1.orig/drivers/tty/serial/etraxfs-uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/etraxfs-uart.c	2015-06-25 22:51:17.221457245 +0100
@@ -992,5 +992,5 @@ static void __exit etraxfs_uart_exit(voi
 	uart_unregister_driver(&etraxfs_uart_driver);
 }
 
-module_init(etraxfs_uart_init);
+async_module_init(etraxfs_uart_init);
 module_exit(etraxfs_uart_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/fsl_lpuart.c linux-4.1/drivers/tty/serial/fsl_lpuart.c
--- linux-4.1.orig/drivers/tty/serial/fsl_lpuart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/fsl_lpuart.c	2015-06-25 22:51:17.222457128 +0100
@@ -1937,7 +1937,7 @@ static void __exit lpuart_serial_exit(vo
 	uart_unregister_driver(&lpuart_reg);
 }
 
-module_init(lpuart_serial_init);
+async_module_init(lpuart_serial_init);
 module_exit(lpuart_serial_exit);
 
 MODULE_DESCRIPTION("Freescale lpuart serial port driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/icom.c linux-4.1/drivers/tty/serial/icom.c
--- linux-4.1.orig/drivers/tty/serial/icom.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/icom.c	2015-06-25 22:51:17.224456894 +0100
@@ -1648,7 +1648,7 @@ static void __exit icom_exit(void)
 	uart_unregister_driver(&icom_uart_driver);
 }
 
-module_init(icom_init);
+async_module_init(icom_init);
 module_exit(icom_exit);
 
 MODULE_AUTHOR("Michael Anderson <mjanders@us.ibm.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/ifx6x60.c linux-4.1/drivers/tty/serial/ifx6x60.c
--- linux-4.1.orig/drivers/tty/serial/ifx6x60.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/ifx6x60.c	2015-06-25 22:51:17.225456777 +0100
@@ -1445,7 +1445,7 @@ err_free_tty:
 	return result;
 }
 
-module_init(ifx_spi_init);
+async_module_init(ifx_spi_init);
 module_exit(ifx_spi_exit);
 
 MODULE_AUTHOR("Intel");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/imx.c linux-4.1/drivers/tty/serial/imx.c
--- linux-4.1.orig/drivers/tty/serial/imx.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/imx.c	2015-06-25 22:51:17.226456660 +0100
@@ -2027,7 +2027,7 @@ static void __exit imx_serial_exit(void)
 	uart_unregister_driver(&imx_reg);
 }
 
-module_init(imx_serial_init);
+async_module_init(imx_serial_init);
 module_exit(imx_serial_exit);
 
 MODULE_AUTHOR("Sascha Hauer");
Only in linux-4.1/drivers/tty/serial: imx.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/ioc3_serial.c linux-4.1/drivers/tty/serial/ioc3_serial.c
--- linux-4.1.orig/drivers/tty/serial/ioc3_serial.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/ioc3_serial.c	2015-06-25 22:51:17.227456544 +0100
@@ -2189,7 +2189,7 @@ static void __exit ioc3uart_exit(void)
 	uart_unregister_driver(&ioc3_uart);
 }
 
-module_init(ioc3uart_init);
+async_module_init(ioc3uart_init);
 module_exit(ioc3uart_exit);
 
 MODULE_AUTHOR("Pat Gefre - Silicon Graphics Inc. (SGI) <pfg@sgi.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/ip22zilog.c linux-4.1/drivers/tty/serial/ip22zilog.c
--- linux-4.1.orig/drivers/tty/serial/ip22zilog.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/ip22zilog.c	2015-06-25 22:51:17.228456427 +0100
@@ -1214,7 +1214,7 @@ static void __exit ip22zilog_exit(void)
 	uart_unregister_driver(&ip22zilog_reg);
 }
 
-module_init(ip22zilog_init);
+async_module_init(ip22zilog_init);
 module_exit(ip22zilog_exit);
 
 /* David wrote it but I'm to blame for the bugs ...  */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/jsm/jsm_driver.c linux-4.1/drivers/tty/serial/jsm/jsm_driver.c
--- linux-4.1.orig/drivers/tty/serial/jsm/jsm_driver.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/jsm/jsm_driver.c	2015-06-25 22:51:17.229456310 +0100
@@ -388,5 +388,5 @@ static void __exit jsm_exit_module(void)
 	uart_unregister_driver(&jsm_uart_driver);
 }
 
-module_init(jsm_init_module);
+async_module_init(jsm_init_module);
 module_exit(jsm_exit_module);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/kgdboc.c linux-4.1/drivers/tty/serial/kgdboc.c
--- linux-4.1.orig/drivers/tty/serial/kgdboc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/kgdboc.c	2015-06-25 22:51:17.229456310 +0100
@@ -331,7 +331,7 @@ static int __init kgdboc_early_init(char
 early_param("ekgdboc", kgdboc_early_init);
 #endif /* CONFIG_KGDB_SERIAL_CONSOLE */
 
-module_init(init_kgdboc);
+async_module_init(init_kgdboc);
 module_exit(cleanup_kgdboc);
 module_param_call(kgdboc, param_set_kgdboc_var, param_get_string, &kps, 0644);
 MODULE_PARM_DESC(kgdboc, "<serial_device>[,baud]");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/lantiq.c linux-4.1/drivers/tty/serial/lantiq.c
--- linux-4.1.orig/drivers/tty/serial/lantiq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/lantiq.c	2015-06-25 22:51:17.230456193 +0100
@@ -765,7 +765,7 @@ init_lqasc(void)
 	return ret;
 }
 
-module_init(init_lqasc);
+async_module_init(init_lqasc);
 
 MODULE_DESCRIPTION("Lantiq serial port driver");
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/lpc32xx_hs.c linux-4.1/drivers/tty/serial/lpc32xx_hs.c
--- linux-4.1.orig/drivers/tty/serial/lpc32xx_hs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/lpc32xx_hs.c	2015-06-25 22:51:17.231456076 +0100
@@ -793,7 +793,7 @@ static void __exit lpc32xx_hsuart_exit(v
 	uart_unregister_driver(&lpc32xx_hs_reg);
 }
 
-module_init(lpc32xx_hsuart_init);
+async_module_init(lpc32xx_hsuart_init);
 module_exit(lpc32xx_hsuart_exit);
 
 MODULE_AUTHOR("Kevin Wells <kevin.wells@nxp.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/m32r_sio.c linux-4.1/drivers/tty/serial/m32r_sio.c
--- linux-4.1.orig/drivers/tty/serial/m32r_sio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/m32r_sio.c	2015-06-25 22:51:17.231456076 +0100
@@ -1160,7 +1160,7 @@ static void __exit m32r_sio_exit(void)
 	uart_unregister_driver(&m32r_sio_reg);
 }
 
-module_init(m32r_sio_init);
+async_module_init(m32r_sio_init);
 module_exit(m32r_sio_exit);
 
 EXPORT_SYMBOL(m32r_sio_suspend_port);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/mcf.c linux-4.1/drivers/tty/serial/mcf.c
--- linux-4.1.orig/drivers/tty/serial/mcf.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/mcf.c	2015-06-25 22:51:17.232455959 +0100
@@ -698,7 +698,7 @@ static void __exit mcf_exit(void)
 
 /****************************************************************************/
 
-module_init(mcf_init);
+async_module_init(mcf_init);
 module_exit(mcf_exit);
 
 MODULE_AUTHOR("Greg Ungerer <gerg@uclinux.org>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/men_z135_uart.c linux-4.1/drivers/tty/serial/men_z135_uart.c
--- linux-4.1.orig/drivers/tty/serial/men_z135_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/men_z135_uart.c	2015-06-25 22:51:17.233455842 +0100
@@ -911,7 +911,7 @@ static int __init men_z135_init(void)
 
 	return 0;
 }
-module_init(men_z135_init);
+async_module_init(men_z135_init);
 
 /**
  * men_z135_exit() - Driver Exit Routine
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/meson_uart.c linux-4.1/drivers/tty/serial/meson_uart.c
--- linux-4.1.orig/drivers/tty/serial/meson_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/meson_uart.c	2015-06-25 22:51:17.233455842 +0100
@@ -625,7 +625,7 @@ static void __exit meson_uart_exit(void)
 	uart_unregister_driver(&meson_uart_driver);
 }
 
-module_init(meson_uart_init);
+async_module_init(meson_uart_init);
 module_exit(meson_uart_exit);
 
 MODULE_AUTHOR("Carlo Caione <carlo@caione.org>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/mpc52xx_uart.c linux-4.1/drivers/tty/serial/mpc52xx_uart.c
--- linux-4.1.orig/drivers/tty/serial/mpc52xx_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/mpc52xx_uart.c	2015-06-25 22:51:17.242454790 +0100
@@ -1950,7 +1950,7 @@ mpc52xx_uart_exit(void)
 }
 
 
-module_init(mpc52xx_uart_init);
+async_module_init(mpc52xx_uart_init);
 module_exit(mpc52xx_uart_exit);
 
 MODULE_AUTHOR("Sylvain Munaut <tnt@246tNt.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/mpsc.c linux-4.1/drivers/tty/serial/mpsc.c
--- linux-4.1.orig/drivers/tty/serial/mpsc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/mpsc.c	2015-06-25 22:51:17.248454089 +0100
@@ -2159,7 +2159,7 @@ static void __exit mpsc_drv_exit(void)
 	memset(&mpsc_shared_regs, 0, sizeof(mpsc_shared_regs));
 }
 
-module_init(mpsc_drv_init);
+async_module_init(mpsc_drv_init);
 module_exit(mpsc_drv_exit);
 
 MODULE_AUTHOR("Mark A. Greer <mgreer@mvista.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/msm_serial.c linux-4.1/drivers/tty/serial/msm_serial.c
--- linux-4.1.orig/drivers/tty/serial/msm_serial.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/msm_serial.c	2015-06-25 22:51:17.250453855 +0100
@@ -1130,7 +1130,7 @@ static void __exit msm_serial_exit(void)
 	uart_unregister_driver(&msm_uart_driver);
 }
 
-module_init(msm_serial_init);
+async_module_init(msm_serial_init);
 module_exit(msm_serial_exit);
 
 MODULE_AUTHOR("Robert Love <rlove@google.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/msm_smd_tty.c linux-4.1/drivers/tty/serial/msm_smd_tty.c
--- linux-4.1.orig/drivers/tty/serial/msm_smd_tty.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/msm_smd_tty.c	2015-06-25 22:51:17.250453855 +0100
@@ -229,4 +229,4 @@ static int __init smd_tty_init(void)
 	return 0;
 }
 
-module_init(smd_tty_init);
+async_module_init(smd_tty_init);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/mux.c linux-4.1/drivers/tty/serial/mux.c
--- linux-4.1.orig/drivers/tty/serial/mux.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/mux.c	2015-06-25 22:51:17.251453738 +0100
@@ -613,7 +613,7 @@ static void __exit mux_exit(void)
 	uart_unregister_driver(&mux_driver);
 }
 
-module_init(mux_init);
+async_module_init(mux_init);
 module_exit(mux_exit);
 
 MODULE_AUTHOR("Ryan Bradetich");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/mxs-auart.c linux-4.1/drivers/tty/serial/mxs-auart.c
--- linux-4.1.orig/drivers/tty/serial/mxs-auart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/mxs-auart.c	2015-06-25 22:51:17.252453621 +0100
@@ -1355,7 +1355,7 @@ static void __exit mxs_auart_exit(void)
 	uart_unregister_driver(&auart_driver);
 }
 
-module_init(mxs_auart_init);
+async_module_init(mxs_auart_init);
 module_exit(mxs_auart_exit);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("Freescale MXS application uart driver");
Only in linux-4.1/drivers/tty/serial: mxs-auart.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/netx-serial.c linux-4.1/drivers/tty/serial/netx-serial.c
--- linux-4.1.orig/drivers/tty/serial/netx-serial.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/netx-serial.c	2015-06-25 22:51:17.252453621 +0100
@@ -736,7 +736,7 @@ static void __exit netx_serial_exit(void
 	uart_unregister_driver(&netx_reg);
 }
 
-module_init(netx_serial_init);
+async_module_init(netx_serial_init);
 module_exit(netx_serial_exit);
 
 MODULE_AUTHOR("Sascha Hauer");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/omap-serial.c linux-4.1/drivers/tty/serial/omap-serial.c
--- linux-4.1.orig/drivers/tty/serial/omap-serial.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/omap-serial.c	2015-06-25 22:51:17.254453388 +0100
@@ -1916,7 +1916,7 @@ static void __exit serial_omap_exit(void
 	uart_unregister_driver(&serial_omap_reg);
 }
 
-module_init(serial_omap_init);
+async_module_init(serial_omap_init);
 module_exit(serial_omap_exit);
 
 MODULE_DESCRIPTION("OMAP High Speed UART driver");
Only in linux-4.1/drivers/tty/serial: omap-serial.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/pch_uart.c linux-4.1/drivers/tty/serial/pch_uart.c
--- linux-4.1.orig/drivers/tty/serial/pch_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/pch_uart.c	2015-06-25 22:51:17.255453271 +0100
@@ -1975,7 +1975,7 @@ static struct pci_driver pch_uart_pci_dr
 	.resume = pch_uart_pci_resume,
 };
 
-static int __init pch_uart_module_init(void)
+static int __init pch_uart_async_module_init(void)
 {
 	int ret;
 
@@ -1991,7 +1991,7 @@ static int __init pch_uart_module_init(v
 
 	return ret;
 }
-module_init(pch_uart_module_init);
+async_module_init(pch_uart_module_init);
 
 static void __exit pch_uart_module_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/pmac_zilog.c linux-4.1/drivers/tty/serial/pmac_zilog.c
--- linux-4.1.orig/drivers/tty/serial/pmac_zilog.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/pmac_zilog.c	2015-06-25 22:51:17.256453154 +0100
@@ -2067,5 +2067,5 @@ static int __init pmz_console_init(void)
 console_initcall(pmz_console_init);
 #endif /* CONFIG_SERIAL_PMACZILOG_CONSOLE */
 
-module_init(init_pmz);
+async_module_init(init_pmz);
 module_exit(exit_pmz);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/pnx8xxx_uart.c linux-4.1/drivers/tty/serial/pnx8xxx_uart.c
--- linux-4.1.orig/drivers/tty/serial/pnx8xxx_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/pnx8xxx_uart.c	2015-06-25 22:51:17.257453037 +0100
@@ -859,7 +859,7 @@ static void __exit pnx8xxx_serial_exit(v
 	uart_unregister_driver(&pnx8xxx_reg);
 }
 
-module_init(pnx8xxx_serial_init);
+async_module_init(pnx8xxx_serial_init);
 module_exit(pnx8xxx_serial_exit);
 
 MODULE_AUTHOR("Embedded Alley Solutions, Inc.");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/pxa.c linux-4.1/drivers/tty/serial/pxa.c
--- linux-4.1.orig/drivers/tty/serial/pxa.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/pxa.c	2015-06-25 22:51:17.258452920 +0100
@@ -961,7 +961,7 @@ static void __exit serial_pxa_exit(void)
 	uart_unregister_driver(&serial_pxa_reg);
 }
 
-module_init(serial_pxa_init);
+async_module_init(serial_pxa_init);
 module_exit(serial_pxa_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/rp2.c linux-4.1/drivers/tty/serial/rp2.c
--- linux-4.1.orig/drivers/tty/serial/rp2.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/rp2.c	2015-06-25 22:51:17.259452803 +0100
@@ -878,7 +878,7 @@ static void __exit rp2_uart_exit(void)
 	uart_unregister_driver(&rp2_uart_driver);
 }
 
-module_init(rp2_uart_init);
+async_module_init(rp2_uart_init);
 module_exit(rp2_uart_exit);
 
 MODULE_DESCRIPTION("Comtrol RocketPort EXPRESS/INFINITY driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sa1100.c linux-4.1/drivers/tty/serial/sa1100.c
--- linux-4.1.orig/drivers/tty/serial/sa1100.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sa1100.c	2015-06-25 22:51:17.259452803 +0100
@@ -924,7 +924,7 @@ static void __exit sa1100_serial_exit(vo
 	uart_unregister_driver(&sa1100_reg);
 }
 
-module_init(sa1100_serial_init);
+async_module_init(sa1100_serial_init);
 module_exit(sa1100_serial_exit);
 
 MODULE_AUTHOR("Deep Blue Solutions Ltd");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sb1250-duart.c linux-4.1/drivers/tty/serial/sb1250-duart.c
--- linux-4.1.orig/drivers/tty/serial/sb1250-duart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sb1250-duart.c	2015-06-25 22:51:17.260452686 +0100
@@ -972,5 +972,5 @@ static void __exit sbd_exit(void)
 	uart_unregister_driver(&sbd_reg);
 }
 
-module_init(sbd_init);
+async_module_init(sbd_init);
 module_exit(sbd_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/serial_ks8695.c linux-4.1/drivers/tty/serial/serial_ks8695.c
--- linux-4.1.orig/drivers/tty/serial/serial_ks8695.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/serial_ks8695.c	2015-06-25 22:51:17.261452569 +0100
@@ -695,7 +695,7 @@ static void __exit ks8695uart_exit(void)
 	uart_unregister_driver(&ks8695_reg);
 }
 
-module_init(ks8695uart_init);
+async_module_init(ks8695uart_init);
 module_exit(ks8695uart_exit);
 
 MODULE_DESCRIPTION("KS8695 serial port driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/serial-tegra.c linux-4.1/drivers/tty/serial/serial-tegra.c
--- linux-4.1.orig/drivers/tty/serial/serial-tegra.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/serial-tegra.c	2015-06-25 22:51:17.262452452 +0100
@@ -1399,7 +1399,7 @@ static void __exit tegra_uart_exit(void)
 	uart_unregister_driver(&tegra_uart_driver);
 }
 
-module_init(tegra_uart_init);
+async_module_init(tegra_uart_init);
 module_exit(tegra_uart_exit);
 
 MODULE_ALIAS("platform:serial-tegra");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/serial_txx9.c linux-4.1/drivers/tty/serial/serial_txx9.c
--- linux-4.1.orig/drivers/tty/serial/serial_txx9.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/serial_txx9.c	2015-06-25 22:51:17.263452336 +0100
@@ -1319,7 +1319,7 @@ static void __exit serial_txx9_exit(void
 	uart_unregister_driver(&serial_txx9_reg);
 }
 
-module_init(serial_txx9_init);
+async_module_init(serial_txx9_init);
 module_exit(serial_txx9_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sh-sci.c linux-4.1/drivers/tty/serial/sh-sci.c
--- linux-4.1.orig/drivers/tty/serial/sh-sci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sh-sci.c	2015-06-25 22:51:17.264452219 +0100
@@ -2721,7 +2721,7 @@ static void __exit sci_exit(void)
 early_platform_init_buffer("earlyprintk", &sci_driver,
 			   early_serial_buf, ARRAY_SIZE(early_serial_buf));
 #endif
-module_init(sci_init);
+async_module_init(sci_init);
 module_exit(sci_exit);
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/drivers/tty/serial: sh-sci.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sirfsoc_uart.c linux-4.1/drivers/tty/serial/sirfsoc_uart.c
--- linux-4.1.orig/drivers/tty/serial/sirfsoc_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sirfsoc_uart.c	2015-06-25 22:51:17.265452102 +0100
@@ -1516,7 +1516,7 @@ static int __init sirfsoc_uart_init(void
 out:
 	return ret;
 }
-module_init(sirfsoc_uart_init);
+async_module_init(sirfsoc_uart_init);
 
 static void __exit sirfsoc_uart_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sn_console.c linux-4.1/drivers/tty/serial/sn_console.c
--- linux-4.1.orig/drivers/tty/serial/sn_console.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sn_console.c	2015-06-25 22:51:17.266451985 +0100
@@ -857,7 +857,7 @@ static void __exit sn_sal_module_exit(vo
 	misc_deregister(&misc);
 }
 
-module_init(sn_sal_module_init);
+async_module_init(sn_sal_module_init);
 module_exit(sn_sal_module_exit);
 
 /**
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/st-asc.c linux-4.1/drivers/tty/serial/st-asc.c
--- linux-4.1.orig/drivers/tty/serial/st-asc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/st-asc.c	2015-06-25 22:51:17.267451868 +0100
@@ -924,7 +924,7 @@ static void __exit asc_exit(void)
 	uart_unregister_driver(&asc_uart_driver);
 }
 
-module_init(asc_init);
+async_module_init(asc_init);
 module_exit(asc_exit);
 
 MODULE_ALIAS("platform:" DRIVER_NAME);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/suncore.c linux-4.1/drivers/tty/serial/suncore.c
--- linux-4.1.orig/drivers/tty/serial/suncore.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/suncore.c	2015-06-25 22:51:17.267451868 +0100
@@ -239,7 +239,7 @@ static void __exit suncore_exit(void)
 {
 }
 
-module_init(suncore_init);
+async_module_init(suncore_init);
 module_exit(suncore_exit);
 
 MODULE_AUTHOR("Eddie C. Dost, David S. Miller");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sunhv.c linux-4.1/drivers/tty/serial/sunhv.c
--- linux-4.1.orig/drivers/tty/serial/sunhv.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sunhv.c	2015-06-25 22:51:17.268451751 +0100
@@ -645,7 +645,7 @@ static void __exit sunhv_exit(void)
 	platform_driver_unregister(&hv_driver);
 }
 
-module_init(sunhv_init);
+async_module_init(sunhv_init);
 module_exit(sunhv_exit);
 
 MODULE_AUTHOR("David S. Miller");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sunsab.c linux-4.1/drivers/tty/serial/sunsab.c
--- linux-4.1.orig/drivers/tty/serial/sunsab.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sunsab.c	2015-06-25 22:51:17.269451634 +0100
@@ -1152,7 +1152,7 @@ static void __exit sunsab_exit(void)
 	sunsab_ports = NULL;
 }
 
-module_init(sunsab_init);
+async_module_init(sunsab_init);
 module_exit(sunsab_exit);
 
 MODULE_AUTHOR("Eddie C. Dost and David S. Miller");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sunsu.c linux-4.1/drivers/tty/serial/sunsu.c
--- linux-4.1.orig/drivers/tty/serial/sunsu.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sunsu.c	2015-06-25 22:51:17.270451517 +0100
@@ -1603,7 +1603,7 @@ static void __exit sunsu_exit(void)
 		sunserial_unregister_minors(&sunsu_reg, sunsu_reg.nr);
 }
 
-module_init(sunsu_init);
+async_module_init(sunsu_init);
 module_exit(sunsu_exit);
 
 MODULE_AUTHOR("Eddie C. Dost, Peter Zaitcev, and David S. Miller");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/sunzilog.c linux-4.1/drivers/tty/serial/sunzilog.c
--- linux-4.1.orig/drivers/tty/serial/sunzilog.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/sunzilog.c	2015-06-25 22:51:17.272451284 +0100
@@ -1643,7 +1643,7 @@ static void __exit sunzilog_exit(void)
 	}
 }
 
-module_init(sunzilog_init);
+async_module_init(sunzilog_init);
 module_exit(sunzilog_exit);
 
 MODULE_AUTHOR("David S. Miller");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/tilegx.c linux-4.1/drivers/tty/serial/tilegx.c
--- linux-4.1.orig/drivers/tty/serial/tilegx.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/tilegx.c	2015-06-25 22:51:17.272451284 +0100
@@ -690,7 +690,7 @@ static void __exit tilegx_exit(void)
 }
 
 
-module_init(tilegx_init);
+async_module_init(tilegx_init);
 module_exit(tilegx_exit);
 
 MODULE_AUTHOR("Tilera Corporation");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/uartlite.c linux-4.1/drivers/tty/serial/uartlite.c
--- linux-4.1.orig/drivers/tty/serial/uartlite.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/uartlite.c	2015-06-25 22:51:17.273451167 +0100
@@ -704,7 +704,7 @@ static void __exit ulite_exit(void)
 	uart_unregister_driver(&ulite_uart_driver);
 }
 
-module_init(ulite_init);
+async_module_init(ulite_init);
 module_exit(ulite_exit);
 
 MODULE_AUTHOR("Peter Korsgaard <jacmet@sunsite.dk>");
Only in linux-4.1/drivers/tty/serial: uartlite.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/ucc_uart.c linux-4.1/drivers/tty/serial/ucc_uart.c
--- linux-4.1.orig/drivers/tty/serial/ucc_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/ucc_uart.c	2015-06-25 22:51:17.278450582 +0100
@@ -1525,7 +1525,7 @@ static void __exit ucc_uart_exit(void)
 	uart_unregister_driver(&ucc_uart_driver);
 }
 
-module_init(ucc_uart_init);
+async_module_init(ucc_uart_init);
 module_exit(ucc_uart_exit);
 
 MODULE_DESCRIPTION("Freescale QUICC Engine (QE) UART");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/vt8500_serial.c linux-4.1/drivers/tty/serial/vt8500_serial.c
--- linux-4.1.orig/drivers/tty/serial/vt8500_serial.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/vt8500_serial.c	2015-06-25 22:51:17.279450465 +0100
@@ -774,7 +774,7 @@ static void __exit vt8500_serial_exit(vo
 	uart_unregister_driver(&vt8500_uart_driver);
 }
 
-module_init(vt8500_serial_init);
+async_module_init(vt8500_serial_init);
 module_exit(vt8500_serial_exit);
 
 MODULE_AUTHOR("Alexey Charkov <alchark@gmail.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/xilinx_uartps.c linux-4.1/drivers/tty/serial/xilinx_uartps.c
--- linux-4.1.orig/drivers/tty/serial/xilinx_uartps.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/xilinx_uartps.c	2015-06-25 22:51:17.280450348 +0100
@@ -1507,7 +1507,7 @@ static void __exit cdns_uart_exit(void)
 	uart_unregister_driver(&cdns_uart_uart_driver);
 }
 
-module_init(cdns_uart_init);
+async_module_init(cdns_uart_init);
 module_exit(cdns_uart_exit);
 
 MODULE_DESCRIPTION("Driver for Cadence UART");
Only in linux-4.1/drivers/tty/serial: xilinx_uartps.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/serial/zs.c linux-4.1/drivers/tty/serial/zs.c
--- linux-4.1.orig/drivers/tty/serial/zs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/serial/zs.c	2015-06-25 22:51:17.281450232 +0100
@@ -1301,5 +1301,5 @@ static void __exit zs_exit(void)
 	uart_unregister_driver(&zs_reg);
 }
 
-module_init(zs_init);
+async_module_init(zs_init);
 module_exit(zs_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/synclink.c linux-4.1/drivers/tty/synclink.c
--- linux-4.1.orig/drivers/tty/synclink.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/synclink.c	2015-06-25 22:51:17.284449881 +0100
@@ -4464,7 +4464,7 @@ static void __exit synclink_exit(void)
 	synclink_cleanup();
 }
 
-module_init(synclink_init);
+async_module_init(synclink_init);
 module_exit(synclink_exit);
 
 /*
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/synclink_gt.c linux-4.1/drivers/tty/synclink_gt.c
--- linux-4.1.orig/drivers/tty/synclink_gt.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/synclink_gt.c	2015-06-25 22:51:17.291449063 +0100
@@ -3849,7 +3849,7 @@ static void __exit slgt_exit(void)
 	slgt_cleanup();
 }
 
-module_init(slgt_init);
+async_module_init(slgt_init);
 module_exit(slgt_exit);
 
 /*
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/synclinkmp.c linux-4.1/drivers/tty/synclinkmp.c
--- linux-4.1.orig/drivers/tty/synclinkmp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/synclinkmp.c	2015-06-25 22:51:17.294448712 +0100
@@ -4019,7 +4019,7 @@ static void __exit synclinkmp_exit(void)
 	synclinkmp_cleanup();
 }
 
-module_init(synclinkmp_init);
+async_module_init(synclinkmp_init);
 module_exit(synclinkmp_exit);
 
 /* Set the port for internal loopback mode.
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/tty/sysrq.c linux-4.1/drivers/tty/sysrq.c
--- linux-4.1.orig/drivers/tty/sysrq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/tty/sysrq.c	2015-06-25 22:51:17.297448361 +0100
@@ -1126,4 +1126,4 @@ static int __init sysrq_init(void)
 
 	return 0;
 }
-module_init(sysrq_init);
+async_module_init(sysrq_init);
Only in linux-4.1/drivers/tty: sysrq.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/uio/uio.c linux-4.1/drivers/uio/uio.c
--- linux-4.1.orig/drivers/uio/uio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/uio/uio.c	2015-06-25 22:51:15.558651634 +0100
@@ -897,6 +897,6 @@ static void __exit uio_exit(void)
 	release_uio_class();
 }
 
-module_init(uio_init)
+deferred_module_init(uio_init)
 module_exit(uio_exit)
 MODULE_LICENSE("GPL v2");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/uio/uio_cif.c linux-4.1/drivers/uio/uio_cif.c
--- linux-4.1.orig/drivers/uio/uio_cif.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/uio/uio_cif.c	2015-06-25 22:51:15.559651517 +0100
@@ -134,7 +134,7 @@ static struct pci_driver hilscher_pci_dr
 	.remove = hilscher_pci_remove,
 };
 
-module_pci_driver(hilscher_pci_driver);
+deferred_module_pci_driver(hilscher_pci_driver);
 MODULE_DEVICE_TABLE(pci, hilscher_pci_ids);
 MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Hans J. Koch, Benedikt Spranger");
Only in linux-4.1/drivers/uio: uio.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/ehci-hcd.c linux-4.1/drivers/usb/host/ehci-hcd.c
--- linux-4.1.orig/drivers/usb/host/ehci-hcd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/ehci-hcd.c	2015-06-25 22:51:15.386671739 +0100
@@ -1376,7 +1376,7 @@ err_debug:
 	clear_bit(USB_EHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ehci_hcd_init);
+deferred_module_init(ehci_hcd_init);
 
 static void __exit ehci_hcd_cleanup(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/ehci-pci.c linux-4.1/drivers/usb/host/ehci-pci.c
--- linux-4.1.orig/drivers/usb/host/ehci-pci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/ehci-pci.c	2015-06-25 22:51:15.387671622 +0100
@@ -421,7 +421,7 @@ static int __init ehci_pci_init(void)
 
 	return pci_register_driver(&ehci_pci_driver);
 }
-module_init(ehci_pci_init);
+deferred_module_init(ehci_pci_init);
 
 static void __exit ehci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/ehci-platform.c linux-4.1/drivers/usb/host/ehci-platform.c
--- linux-4.1.orig/drivers/usb/host/ehci-platform.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/ehci-platform.c	2015-06-25 22:51:15.388671505 +0100
@@ -428,7 +428,7 @@ static int __init ehci_platform_init(voi
 	ehci_init_driver(&ehci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ehci_platform_driver);
 }
-module_init(ehci_platform_init);
+deferred_module_init(ehci_platform_init);
 
 static void __exit ehci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/ohci-hcd.c linux-4.1/drivers/usb/host/ohci-hcd.c
--- linux-4.1.orig/drivers/usb/host/ohci-hcd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/ohci-hcd.c	2015-06-25 22:51:15.388671505 +0100
@@ -1352,7 +1352,7 @@ static int __init ohci_hcd_mod_init(void
 	clear_bit(USB_OHCI_LOADED, &usb_hcds_loaded);
 	return retval;
 }
-module_init(ohci_hcd_mod_init);
+deferred_module_init(ohci_hcd_mod_init);
 
 static void __exit ohci_hcd_mod_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/ohci-pci.c linux-4.1/drivers/usb/host/ohci-pci.c
--- linux-4.1.orig/drivers/usb/host/ohci-pci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/ohci-pci.c	2015-06-25 22:51:15.389671388 +0100
@@ -302,7 +302,7 @@ static int __init ohci_pci_init(void)
 
 	return pci_register_driver(&ohci_pci_driver);
 }
-module_init(ohci_pci_init);
+deferred_module_init(ohci_pci_init);
 
 static void __exit ohci_pci_cleanup(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/ohci-platform.c linux-4.1/drivers/usb/host/ohci-platform.c
--- linux-4.1.orig/drivers/usb/host/ohci-platform.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/ohci-platform.c	2015-06-25 22:51:15.389671388 +0100
@@ -402,7 +402,7 @@ static int __init ohci_platform_init(voi
 	ohci_init_driver(&ohci_platform_hc_driver, &platform_overrides);
 	return platform_driver_register(&ohci_platform_driver);
 }
-module_init(ohci_platform_init);
+deferred_module_init(ohci_platform_init);
 
 static void __exit ohci_platform_cleanup(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/ssb-hcd.c linux-4.1/drivers/usb/host/ssb-hcd.c
--- linux-4.1.orig/drivers/usb/host/ssb-hcd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/ssb-hcd.c	2015-06-25 22:51:15.389671388 +0100
@@ -269,7 +269,7 @@ static int __init ssb_hcd_init(void)
 {
 	return ssb_driver_register(&ssb_hcd_driver);
 }
-module_init(ssb_hcd_init);
+deferred_module_init(ssb_hcd_init);
 
 static void __exit ssb_hcd_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/uhci-hcd.c linux-4.1/drivers/usb/host/uhci-hcd.c
--- linux-4.1.orig/drivers/usb/host/uhci-hcd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/uhci-hcd.c	2015-06-25 22:51:15.390671271 +0100
@@ -937,7 +937,7 @@ static void __exit uhci_hcd_cleanup(void
 	clear_bit(USB_UHCI_LOADED, &usb_hcds_loaded);
 }
 
-module_init(uhci_hcd_init);
+deferred_module_init(uhci_hcd_init);
 module_exit(uhci_hcd_cleanup);
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
Only in linux-4.1/drivers/usb/host: xhci.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/xhci-pci.c linux-4.1/drivers/usb/host/xhci-pci.c
--- linux-4.1.orig/drivers/usb/host/xhci-pci.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/xhci-pci.c	2015-06-25 22:51:15.570650231 +0100
@@ -386,7 +386,7 @@ static int __init xhci_pci_init(void)
 #endif
 	return pci_register_driver(&xhci_pci_driver);
 }
-module_init(xhci_pci_init);
+deferred_module_init(xhci_pci_init);
 
 static void __exit xhci_pci_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/usb/host/xhci-plat.c linux-4.1/drivers/usb/host/xhci-plat.c
--- linux-4.1.orig/drivers/usb/host/xhci-plat.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/usb/host/xhci-plat.c	2015-06-25 22:51:15.571650114 +0100
@@ -275,7 +275,7 @@ static int __init xhci_plat_init(void)
 	xhci_plat_hc_driver.start = xhci_plat_start;
 	return platform_driver_register(&usb_xhci_driver);
 }
-module_init(xhci_plat_init);
+deferred_module_init(xhci_plat_init);
 
 static void __exit xhci_plat_exit(void)
 {
Only in linux-4.1/drivers/usb/host: xhci-plat.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/video/console/mdacon.c linux-4.1/drivers/video/console/mdacon.c
--- linux-4.1.orig/drivers/video/console/mdacon.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/video/console/mdacon.c	2015-06-25 22:51:17.320445673 +0100
@@ -600,7 +600,7 @@ static void __exit mda_console_exit(void
 	give_up_console(&mda_con);
 }
 
-module_init(mda_console_init);
+async_module_init(mda_console_init);
 module_exit(mda_console_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/video/console/newport_con.c linux-4.1/drivers/video/console/newport_con.c
--- linux-4.1.orig/drivers/video/console/newport_con.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/video/console/newport_con.c	2015-06-25 22:51:17.321445556 +0100
@@ -796,7 +796,7 @@ void __exit newport_console_exit(void)
 	gio_unregister_driver(&newport_driver);
 }
 
-module_init(newport_console_init);
+async_module_init(newport_console_init);
 module_exit(newport_console_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/video/console/sticon.c linux-4.1/drivers/video/console/sticon.c
--- linux-4.1.orig/drivers/video/console/sticon.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/video/console/sticon.c	2015-06-25 22:51:17.321445556 +0100
@@ -391,5 +391,5 @@ static int __init sticonsole_init(void)
     return 0;
 }
 
-module_init(sticonsole_init);
+async_module_init(sticonsole_init);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/drivers/video/fbdev/core/fbmem.c linux-4.1/drivers/video/fbdev/core/fbmem.c
--- linux-4.1.orig/drivers/video/fbdev/core/fbmem.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/drivers/video/fbdev/core/fbmem.c	2015-06-25 22:51:17.322445439 +0100
@@ -1860,7 +1860,7 @@ fbmem_init(void)
 }
 
 #ifdef MODULE
-module_init(fbmem_init);
+async_module_init(fbmem_init);
 static void __exit
 fbmem_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/cifs/cifsfs.c linux-4.1/fs/cifs/cifsfs.c
--- linux-4.1.orig/fs/cifs/cifsfs.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/cifs/cifsfs.c	2015-06-25 22:51:15.390671271 +0100
@@ -1304,5 +1304,5 @@ MODULE_DESCRIPTION
     ("VFS to access servers complying with the SNIA CIFS Specification "
      "e.g. Samba and Windows");
 MODULE_VERSION(CIFS_VERSION);
-module_init(init_cifs)
+deferred_module_init(init_cifs)
 module_exit(exit_cifs)
Only in linux-4.1/fs/cifs: cifsfs.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/ext2/super.c linux-4.1/fs/ext2/super.c
--- linux-4.1.orig/fs/ext2/super.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/ext2/super.c	2015-06-25 22:51:17.325445088 +0100
@@ -1576,5 +1576,5 @@ static void __exit exit_ext2_fs(void)
 MODULE_AUTHOR("Remy Card and others");
 MODULE_DESCRIPTION("Second Extended Filesystem");
 MODULE_LICENSE("GPL");
-module_init(init_ext2_fs)
+async_module_init(init_ext2_fs)
 module_exit(exit_ext2_fs)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/ext3/super.c linux-4.1/fs/ext3/super.c
--- linux-4.1.orig/fs/ext3/super.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/ext3/super.c	2015-06-25 22:51:17.326444972 +0100
@@ -3161,5 +3161,5 @@ static void __exit exit_ext3_fs(void)
 MODULE_AUTHOR("Remy Card, Stephen Tweedie, Andrew Morton, Andreas Dilger, Theodore Ts'o and others");
 MODULE_DESCRIPTION("Second Extended Filesystem with journaling extensions");
 MODULE_LICENSE("GPL");
-module_init(init_ext3_fs)
+async_module_init(init_ext3_fs)
 module_exit(exit_ext3_fs)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/fat/inode.c linux-4.1/fs/fat/inode.c
--- linux-4.1.orig/fs/fat/inode.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/fat/inode.c	2015-06-25 22:51:15.391671154 +0100
@@ -1844,7 +1844,7 @@ static void __exit exit_fat_fs(void)
 	fat_destroy_inodecache();
 }
 
-module_init(init_fat_fs)
+deferred_module_init(init_fat_fs)
 module_exit(exit_fat_fs)
 
 MODULE_LICENSE("GPL");
Only in linux-4.1/fs/fat: inode.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/fat/namei_msdos.c linux-4.1/fs/fat/namei_msdos.c
--- linux-4.1.orig/fs/fat/namei_msdos.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/fat/namei_msdos.c	2015-06-25 22:51:15.392671038 +0100
@@ -680,5 +680,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Werner Almesberger");
 MODULE_DESCRIPTION("MS-DOS filesystem support");
 
-module_init(init_msdos_fs)
+deferred_module_init(init_msdos_fs)
 module_exit(exit_msdos_fs)
Only in linux-4.1/fs/fat: namei_msdos.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/fat/namei_vfat.c linux-4.1/fs/fat/namei_vfat.c
--- linux-4.1.orig/fs/fat/namei_vfat.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/fat/namei_vfat.c	2015-06-25 22:51:15.393670921 +0100
@@ -1085,5 +1085,5 @@ MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("VFAT filesystem support");
 MODULE_AUTHOR("Gordon Chaffee");
 
-module_init(init_vfat_fs)
+deferred_module_init(init_vfat_fs)
 module_exit(exit_vfat_fs)
Only in linux-4.1/fs/fat: namei_vfat.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/fuse/cuse.c linux-4.1/fs/fuse/cuse.c
--- linux-4.1.orig/fs/fuse/cuse.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/fuse/cuse.c	2015-06-25 22:51:17.331444387 +0100
@@ -628,7 +628,7 @@ static void __exit cuse_exit(void)
 	class_destroy(cuse_class);
 }
 
-module_init(cuse_init);
+async_module_init(cuse_init);
 module_exit(cuse_exit);
 
 MODULE_AUTHOR("Tejun Heo <tj@kernel.org>");
Only in linux-4.1/fs/fuse: cuse.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/fuse/inode.c linux-4.1/fs/fuse/inode.c
--- linux-4.1.orig/fs/fuse/inode.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/fuse/inode.c	2015-06-25 22:51:17.331444387 +0100
@@ -1319,5 +1319,5 @@ static void __exit fuse_exit(void)
 	fuse_dev_cleanup();
 }
 
-module_init(fuse_init);
+async_module_init(fuse_init);
 module_exit(fuse_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/isofs/inode.c linux-4.1/fs/isofs/inode.c
--- linux-4.1.orig/fs/isofs/inode.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/isofs/inode.c	2015-06-25 22:51:15.394670804 +0100
@@ -1552,6 +1552,6 @@ static void __exit exit_iso9660_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_iso9660_fs)
+deferred_module_init(init_iso9660_fs)
 module_exit(exit_iso9660_fs)
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/ntfs/super.c linux-4.1/fs/ntfs/super.c
--- linux-4.1.orig/fs/ntfs/super.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/ntfs/super.c	2015-06-25 22:51:15.395670687 +0100
@@ -3216,5 +3216,5 @@ module_param(debug_msgs, bint, 0);
 MODULE_PARM_DESC(debug_msgs, "Enable debug messages.");
 #endif
 
-module_init(init_ntfs_fs)
+deferred_module_init(init_ntfs_fs)
 module_exit(exit_ntfs_fs)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/fs/udf/super.c linux-4.1/fs/udf/super.c
--- linux-4.1.orig/fs/udf/super.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/fs/udf/super.c	2015-06-25 22:51:17.961370746 +0100
@@ -254,7 +254,7 @@ static void __exit exit_udf_fs(void)
 	destroy_inodecache();
 }
 
-module_init(init_udf_fs)
+async_module_init(init_udf_fs)
 module_exit(exit_udf_fs)
 
 static int udf_sb_alloc_partition_maps(struct super_block *sb, u32 count)
Only in linux-4.1/fs/udf: super.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/acpi/acpi_bus.h linux-4.1/include/acpi/acpi_bus.h
--- linux-4.1.orig/include/acpi/acpi_bus.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/acpi/acpi_bus.h	2015-06-25 23:19:38.159262881 +0100
@@ -503,8 +503,8 @@ static inline bool acpi_device_enumerate
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_acpi_driver(__acpi_driver) \
-	module_driver(__acpi_driver, acpi_bus_register_driver, \
-		      acpi_bus_unregister_driver)
+	async_module_driver(__acpi_driver, acpi_bus_register_driver, \
+		      acpi_bus_unregister_driver)  \
 
 /*
  * Bind physical devices with ACPI devices
Only in linux-4.1/include/acpi: acpi_bus.h.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/asm-generic/vmlinux.lds.h linux-4.1/include/asm-generic/vmlinux.lds.h
--- linux-4.1.orig/include/asm-generic/vmlinux.lds.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/asm-generic/vmlinux.lds.h	2015-06-25 22:51:19.743162450 +0100
@@ -646,6 +646,276 @@
 		*(.initcall##level##.init)				\
 		*(.initcall##level##s.init)				\
 
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
+#define ASYNC_INITCALLS           \
+   VMLINUX_SYMBOL(__async_initcall_start) = .;    \
+   *(.async_initcall.init)        \
+   VMLINUX_SYMBOL(__async_initcall_end) = .;
+
+#define MODULES_DEPENDENCIES           \
+   VMLINUX_SYMBOL(__async_modules_depends_start) = .;    \
+   *(.async_modules_depends.init)        \
+   VMLINUX_SYMBOL(__async_modules_depends_end) = .;
+
 #define INIT_CALLS							\
 		VMLINUX_SYMBOL(__initcall_start) = .;			\
 		*(.initcallearly.init)					\
@@ -816,9 +1086,11 @@
 		INIT_DATA						\
 		INIT_SETUP(initsetup_align)				\
 		INIT_CALLS						\
+		ASYNC_INITCALLS   \
 		CON_INITCALL						\
 		SECURITY_INITCALL					\
 		INIT_RAM_FS						\
+		MODULES_DEPENDENCIES \
 	}
 
 #define BSS_SECTION(sbss_align, bss_align, stop_align)			\
Only in linux-4.1/include/asm-generic: vmlinux.lds.h.orig
Only in linux-4.1/include/linux: async_minit.h
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/linux/device.h linux-4.1/include/linux/device.h
--- linux-4.1.orig/include/linux/device.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/linux/device.h	2015-06-25 22:51:19.744162333 +0100
@@ -13,6 +13,7 @@
 #ifndef _DEVICE_H_
 #define _DEVICE_H_
 
+#include <linux/async_minit.h>
 #include <linux/ioport.h>
 #include <linux/kobject.h>
 #include <linux/klist.h>
@@ -1269,4 +1270,31 @@ static void __exit __driver##_exit(void)
 } \
 module_exit(__driver##_exit);
 
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
 #endif /* _DEVICE_H_ */
Only in linux-4.1/include/linux: device.h.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/linux/hid.h linux-4.1/include/linux/hid.h
--- linux-4.1.orig/include/linux/hid.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/linux/hid.h	2015-06-25 23:26:18.032766867 +0100
@@ -784,8 +784,8 @@ extern void hid_unregister_driver(struct
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_hid_driver(__hid_driver) \
-	module_driver(__hid_driver, hid_register_driver, \
-		      hid_unregister_driver)
+	deferred_module_driver(__hid_driver, hid_register_driver, \
+		      hid_unregister_driver); \
 
 extern void hidinput_hid_event(struct hid_device *, struct hid_field *, struct hid_usage *, __s32);
 extern void hidinput_report_event(struct hid_device *hid, struct hid_report *report);
Only in linux-4.1/include/linux: hid.h.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/linux/i2c.h linux-4.1/include/linux/i2c.h
--- linux-4.1.orig/include/linux/i2c.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/linux/i2c.h	2015-06-25 22:51:16.651523872 +0100
@@ -626,7 +626,7 @@ static inline int i2c_adapter_id(struct
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_i2c_driver(__i2c_driver) \
-	module_driver(__i2c_driver, i2c_add_driver, \
+	deferred_module_driver(__i2c_driver, i2c_add_driver, \
 			i2c_del_driver)
 
 #endif /* I2C */
Only in linux-4.1/include/linux: i2c.h.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/linux/module.h linux-4.1/include/linux/module.h
--- linux-4.1.orig/include/linux/module.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/linux/module.h	2015-06-25 22:51:15.401669986 +0100
@@ -6,6 +6,7 @@
  * Rewritten by Richard Henderson <rth@tamu.edu> Dec 1996
  * Rewritten again by Rusty Russell, 2002
  */
+#include "linux/async_minit.h"
 #include <linux/list.h>
 #include <linux/stat.h>
 #include <linux/compiler.h>
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/linux/pci.h linux-4.1/include/linux/pci.h
--- linux-4.1.orig/include/linux/pci.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/linux/pci.h	2015-06-25 22:51:17.357441348 +0100
@@ -16,7 +16,7 @@
 #ifndef LINUX_PCI_H
 #define LINUX_PCI_H
 
-
+#include <linux/async_minit.h>
 #include <linux/mod_devicetable.h>
 
 #include <linux/types.h>
@@ -1157,7 +1157,7 @@ void pci_unregister_driver(struct pci_dr
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_pci_driver(__pci_driver) \
-	module_driver(__pci_driver, pci_register_driver, \
+	async_module_driver(__pci_driver, pci_register_driver, \
 		       pci_unregister_driver)
 
 struct pci_driver *pci_dev_driver(const struct pci_dev *dev);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/linux/serio.h linux-4.1/include/linux/serio.h
--- linux-4.1.orig/include/linux/serio.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/linux/serio.h	2015-06-25 22:51:17.966370162 +0100
@@ -102,7 +102,7 @@ void serio_unregister_driver(struct seri
  * and module_exit().
  */
 #define module_serio_driver(__serio_driver) \
-	module_driver(__serio_driver, serio_register_driver, \
+	async_module_driver(__serio_driver, serio_register_driver, \
 		       serio_unregister_driver)
 
 static inline int serio_write(struct serio *serio, unsigned char data)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/include/linux/usb.h linux-4.1/include/linux/usb.h
--- linux-4.1.orig/include/linux/usb.h	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/include/linux/usb.h	2015-06-25 22:51:15.592647659 +0100
@@ -1,6 +1,7 @@
 #ifndef __LINUX_USB_H
 #define __LINUX_USB_H
 
+#include <linux/async_minit.h>
 #include <linux/mod_devicetable.h>
 #include <linux/usb/ch9.h>
 
@@ -1184,7 +1185,7 @@ extern void usb_deregister(struct usb_dr
  * use this macro once, and calling it replaces module_init() and module_exit()
  */
 #define module_usb_driver(__usb_driver) \
-	module_driver(__usb_driver, usb_register, \
+	async_module_driver(__usb_driver, usb_register, \
 		       usb_deregister)
 
 extern int usb_register_device_driver(struct usb_device_driver *,
Only in linux-4.1/include/linux: usb.h.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/init/main.c linux-4.1/init/main.c
--- linux-4.1.orig/init/main.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/init/main.c	2015-06-25 23:00:55.106002127 +0100
@@ -924,6 +924,11 @@ static int try_to_run_init_process(const
 
 static noinline void __init kernel_init_freeable(void);
 
+// atomic counter for free init memory
+atomic_t  free_init_ref = ATOMIC_INIT(1);
+
+EXPORT_SYMBOL(free_init_ref);
+
 static int __ref kernel_init(void *unused)
 {
 	int ret;
@@ -931,7 +936,7 @@ static int __ref kernel_init(void *unuse
 	kernel_init_freeable();
 	/* need to finish all async __init code before freeing the memory */
 	async_synchronize_full();
-	free_initmem();
+	//free_initmem();
 	mark_rodata_ro();
 	system_state = SYSTEM_RUNNING;
 	numa_default_policy();
Only in linux-4.1/init: main.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/net/bluetooth/rfcomm/core.c linux-4.1/net/bluetooth/rfcomm/core.c
--- linux-4.1.orig/net/bluetooth/rfcomm/core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/net/bluetooth/rfcomm/core.c	2015-06-25 22:51:15.596647192 +0100
@@ -2255,7 +2255,7 @@ static void __exit rfcomm_exit(void)
 	rfcomm_cleanup_sockets();
 }
 
-module_init(rfcomm_init);
+deferred_module_init(rfcomm_init);
 module_exit(rfcomm_exit);
 
 module_param(disable_cfc, bool, 0644);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/net/ipv4/tcp_cong.c linux-4.1/net/ipv4/tcp_cong.c
--- linux-4.1.orig/net/ipv4/tcp_cong.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/net/ipv4/tcp_cong.c	2015-06-25 22:51:16.263569226 +0100
@@ -236,7 +236,7 @@ static int __init tcp_congestion_default
 {
 	return tcp_set_default_congestion_control(CONFIG_DEFAULT_TCP_CONG);
 }
-late_initcall(tcp_congestion_default);
+deferred_module_init(tcp_congestion_default);
 
 /* Build string with list of available congestion control values */
 void tcp_get_available_congestion_control(char *buf, size_t maxlen)
Only in linux-4.1/net/ipv4: tcp_cong.c.orig
Only in linux-4.1: out.rej
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/compress_offload.c linux-4.1/sound/core/compress_offload.c
--- linux-4.1.orig/sound/core/compress_offload.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/compress_offload.c	2015-06-25 22:51:15.403669752 +0100
@@ -1002,7 +1002,7 @@ static void __exit snd_compress_exit(voi
 {
 }
 
-module_init(snd_compress_init);
+deferred_module_init(snd_compress_init);
 module_exit(snd_compress_exit);
 
 MODULE_DESCRIPTION("ALSA Compressed offload framework");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/hrtimer.c linux-4.1/sound/core/hrtimer.c
--- linux-4.1.orig/sound/core/hrtimer.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/hrtimer.c	2015-06-25 22:51:15.404669635 +0100
@@ -162,5 +162,5 @@ static void __exit snd_hrtimer_exit(void
 	}
 }
 
-module_init(snd_hrtimer_init);
+deferred_module_init(snd_hrtimer_init);
 module_exit(snd_hrtimer_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/hwdep.c linux-4.1/sound/core/hwdep.c
--- linux-4.1.orig/sound/core/hwdep.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/hwdep.c	2015-06-25 22:51:15.404669635 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_hwdep_exit(void)
 	snd_hwdep_proc_done();
 }
 
-module_init(alsa_hwdep_init)
+deferred_module_init(alsa_hwdep_init);
 module_exit(alsa_hwdep_exit)
Only in linux-4.1/sound/core: hwdep.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/oss/mixer_oss.c linux-4.1/sound/core/oss/mixer_oss.c
--- linux-4.1.orig/sound/core/oss/mixer_oss.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/oss/mixer_oss.c	2015-06-25 22:51:15.405669518 +0100
@@ -1416,7 +1416,7 @@ static void __exit alsa_mixer_oss_exit(v
 	}
 }
 
-module_init(alsa_mixer_oss_init)
+deferred_module_init(alsa_mixer_oss_init)
 module_exit(alsa_mixer_oss_exit)
 
 EXPORT_SYMBOL(snd_mixer_oss_ioctl_card);
Only in linux-4.1/sound/core/oss: mixer_oss.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/oss/pcm_oss.c linux-4.1/sound/core/oss/pcm_oss.c
--- linux-4.1.orig/sound/core/oss/pcm_oss.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/oss/pcm_oss.c	2015-06-25 22:51:15.406669401 +0100
@@ -3107,5 +3107,5 @@ static void __exit alsa_pcm_oss_exit(voi
 	snd_pcm_notify(&snd_pcm_oss_notify, 1);
 }
 
-module_init(alsa_pcm_oss_init)
+deferred_module_init(alsa_pcm_oss_init)
 module_exit(alsa_pcm_oss_exit)
Only in linux-4.1/sound/core/oss: pcm_oss.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/pcm.c linux-4.1/sound/core/pcm.c
--- linux-4.1.orig/sound/core/pcm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/pcm.c	2015-06-25 22:51:15.407669284 +0100
@@ -1252,5 +1252,5 @@ static void __exit alsa_pcm_exit(void)
 	snd_pcm_proc_done();
 }
 
-module_init(alsa_pcm_init)
+deferred_module_init(alsa_pcm_init)
 module_exit(alsa_pcm_exit)
Only in linux-4.1/sound/core: pcm.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/rawmidi.c linux-4.1/sound/core/rawmidi.c
--- linux-4.1.orig/sound/core/rawmidi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/rawmidi.c	2015-06-25 22:51:15.408669167 +0100
@@ -1735,5 +1735,5 @@ static void __exit alsa_rawmidi_exit(voi
 	snd_ctl_unregister_ioctl_compat(snd_rawmidi_control_ioctl);
 }
 
-module_init(alsa_rawmidi_init)
+deferred_module_init(alsa_rawmidi_init)
 module_exit(alsa_rawmidi_exit)
Only in linux-4.1/sound/core: rawmidi.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/rtctimer.c linux-4.1/sound/core/rtctimer.c
--- linux-4.1.orig/sound/core/rtctimer.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/rtctimer.c	2015-06-25 22:51:15.408669167 +0100
@@ -174,7 +174,7 @@ static void __exit rtctimer_exit(void)
 /*
  * exported stuff
  */
-module_init(rtctimer_init)
+deferred_module_init(rtctimer_init)
 module_exit(rtctimer_exit)
 
 module_param(rtctimer_freq, int, 0444);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/seq/oss/seq_oss.c linux-4.1/sound/core/seq/oss/seq_oss.c
--- linux-4.1.orig/sound/core/seq/oss/seq_oss.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/seq/oss/seq_oss.c	2015-06-25 22:51:15.411668817 +0100
@@ -114,7 +114,7 @@ static void __exit alsa_seq_oss_exit(voi
 	unregister_device();
 }
 
-module_init(alsa_seq_oss_init)
+deferred_module_init(alsa_seq_oss_init)
 module_exit(alsa_seq_oss_exit)
 
 /*
Only in linux-4.1/sound/core/seq/oss: seq_oss.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/seq/seq.c linux-4.1/sound/core/seq/seq.c
--- linux-4.1.orig/sound/core/seq/seq.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/seq/seq.c	2015-06-25 22:51:15.412668700 +0100
@@ -134,5 +134,5 @@ static void __exit alsa_seq_exit(void)
 	snd_seq_autoload_exit();
 }
 
-module_init(alsa_seq_init)
+deferred_module_init(alsa_seq_init)
 module_exit(alsa_seq_exit)
Only in linux-4.1/sound/core/seq: seq_device.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/seq/seq_dummy.c linux-4.1/sound/core/seq/seq_dummy.c
--- linux-4.1.orig/sound/core/seq/seq_dummy.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/seq/seq_dummy.c	2015-06-25 22:51:15.412668700 +0100
@@ -222,5 +222,5 @@ static void __exit alsa_seq_dummy_exit(v
 	delete_client();
 }
 
-module_init(alsa_seq_dummy_init)
+deferred_module_init(alsa_seq_dummy_init)
 module_exit(alsa_seq_dummy_exit)
Only in linux-4.1/sound/core/seq: seq_dummy.c.orig
Only in linux-4.1/sound/core/seq: seq_midi.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/seq/seq_midi_emul.c linux-4.1/sound/core/seq/seq_midi_emul.c
--- linux-4.1.orig/sound/core/seq/seq_midi_emul.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/seq/seq_midi_emul.c	2015-06-25 22:51:15.414668466 +0100
@@ -734,7 +734,7 @@ static void __exit alsa_seq_midi_emul_ex
 {
 }
 
-module_init(alsa_seq_midi_emul_init)
+deferred_module_init(alsa_seq_midi_emul_init)
 module_exit(alsa_seq_midi_emul_exit)
 
 EXPORT_SYMBOL(snd_midi_process_event);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/seq/seq_midi_event.c linux-4.1/sound/core/seq/seq_midi_event.c
--- linux-4.1.orig/sound/core/seq/seq_midi_event.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/seq/seq_midi_event.c	2015-06-25 22:51:15.414668466 +0100
@@ -546,5 +546,5 @@ static void __exit alsa_seq_midi_event_e
 {
 }
 
-module_init(alsa_seq_midi_event_init)
+deferred_module_init(alsa_seq_midi_event_init)
 module_exit(alsa_seq_midi_event_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/seq/seq_virmidi.c linux-4.1/sound/core/seq/seq_virmidi.c
--- linux-4.1.orig/sound/core/seq/seq_virmidi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/seq/seq_virmidi.c	2015-06-25 22:51:15.415668349 +0100
@@ -537,7 +537,7 @@ static void __exit alsa_virmidi_exit(voi
 {
 }
 
-module_init(alsa_virmidi_init)
+deferred_module_init(alsa_virmidi_init)
 module_exit(alsa_virmidi_exit)
 
 EXPORT_SYMBOL(snd_virmidi_new);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/core/timer.c linux-4.1/sound/core/timer.c
--- linux-4.1.orig/sound/core/timer.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/core/timer.c	2015-06-25 22:51:15.415668349 +0100
@@ -1996,7 +1996,7 @@ static void __exit alsa_timer_exit(void)
 #endif
 }
 
-module_init(alsa_timer_init)
+deferred_module_init(alsa_timer_init)
 module_exit(alsa_timer_exit)
 
 EXPORT_SYMBOL(snd_timer_open);
Only in linux-4.1/sound/core: timer.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/drivers/aloop.c linux-4.1/sound/drivers/aloop.c
--- linux-4.1.orig/sound/drivers/aloop.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/drivers/aloop.c	2015-06-25 22:51:15.416668232 +0100
@@ -1272,5 +1272,5 @@ static void __exit alsa_card_loopback_ex
 	loopback_unregister_all();
 }
 
-module_init(alsa_card_loopback_init)
+deferred_module_init(alsa_card_loopback_init)
 module_exit(alsa_card_loopback_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/drivers/dummy.c linux-4.1/sound/drivers/dummy.c
--- linux-4.1.orig/sound/drivers/dummy.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/drivers/dummy.c	2015-06-25 22:51:15.417668115 +0100
@@ -1219,5 +1219,5 @@ static void __exit alsa_card_dummy_exit(
 	snd_dummy_unregister_all();
 }
 
-module_init(alsa_card_dummy_init)
+deferred_module_init(alsa_card_dummy_init)
 module_exit(alsa_card_dummy_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/drivers/mpu401/mpu401.c linux-4.1/sound/drivers/mpu401/mpu401.c
--- linux-4.1.orig/sound/drivers/mpu401/mpu401.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/drivers/mpu401/mpu401.c	2015-06-25 22:51:15.418667998 +0100
@@ -283,5 +283,5 @@ static void __exit alsa_card_mpu401_exit
 	snd_mpu401_unregister_all();
 }
 
-module_init(alsa_card_mpu401_init)
+deferred_module_init(alsa_card_mpu401_init)
 module_exit(alsa_card_mpu401_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/drivers/mpu401/mpu401_uart.c linux-4.1/sound/drivers/mpu401/mpu401_uart.c
--- linux-4.1.orig/sound/drivers/mpu401/mpu401_uart.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/drivers/mpu401/mpu401_uart.c	2015-06-25 22:51:15.418667998 +0100
@@ -630,5 +630,5 @@ static void __exit alsa_mpu401_uart_exit
 {
 }
 
-module_init(alsa_mpu401_uart_init)
+deferred_module_init(alsa_mpu401_uart_init)
 module_exit(alsa_mpu401_uart_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/drivers/virmidi.c linux-4.1/sound/drivers/virmidi.c
--- linux-4.1.orig/sound/drivers/virmidi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/drivers/virmidi.c	2015-06-25 22:51:15.418667998 +0100
@@ -195,5 +195,5 @@ static void __exit alsa_card_virmidi_exi
 	snd_virmidi_unregister_all();
 }
 
-module_init(alsa_card_virmidi_init)
+deferred_module_init(alsa_card_virmidi_init)
 module_exit(alsa_card_virmidi_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/firewire/dice/dice.c linux-4.1/sound/firewire/dice/dice.c
--- linux-4.1.orig/sound/firewire/dice/dice.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/firewire/dice/dice.c	2015-06-25 22:51:15.621644270 +0100
@@ -363,5 +363,5 @@ static void __exit alsa_dice_exit(void)
 	driver_unregister(&dice_driver.driver);
 }
 
-module_init(alsa_dice_init);
+deferred_module_init(alsa_dice_init);
 module_exit(alsa_dice_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/firewire/fcp.c linux-4.1/sound/firewire/fcp.c
--- linux-4.1.orig/sound/firewire/fcp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/firewire/fcp.c	2015-06-25 22:51:15.621644270 +0100
@@ -374,7 +374,7 @@ static struct fw_address_handler respons
 	.address_callback = fcp_response,
 };
 
-static int __init fcp_module_init(void)
+static int __init fcp_deferred_module_init(void)
 {
 	static const struct fw_address_region response_register_region = {
 		.start = CSR_REGISTER_BASE + CSR_FCP_RESPONSE,
@@ -393,5 +393,5 @@ static void __exit fcp_module_exit(void)
 	fw_core_remove_address_handler(&response_register_handler);
 }
 
-module_init(fcp_module_init);
+deferred_module_init(fcp_deferred_module_init);
 module_exit(fcp_module_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/firewire/fireworks/fireworks.c linux-4.1/sound/firewire/fireworks/fireworks.c
--- linux-4.1.orig/sound/firewire/fireworks/fireworks.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/firewire/fireworks/fireworks.c	2015-06-25 22:51:15.622644153 +0100
@@ -356,5 +356,5 @@ static void __exit snd_efw_exit(void)
 	driver_unregister(&efw_driver.driver);
 }
 
-module_init(snd_efw_init);
+deferred_module_init(snd_efw_init);
 module_exit(snd_efw_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/firewire/isight.c linux-4.1/sound/firewire/isight.c
--- linux-4.1.orig/sound/firewire/isight.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/firewire/isight.c	2015-06-25 22:51:15.622644153 +0100
@@ -738,5 +738,5 @@ static void __exit alsa_isight_exit(void
 	driver_unregister(&isight_driver.driver);
 }
 
-module_init(alsa_isight_init);
+deferred_module_init(alsa_isight_init);
 module_exit(alsa_isight_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/firewire/oxfw/oxfw.c linux-4.1/sound/firewire/oxfw/oxfw.c
--- linux-4.1.orig/sound/firewire/oxfw/oxfw.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/firewire/oxfw/oxfw.c	2015-06-25 22:51:15.623644036 +0100
@@ -320,5 +320,5 @@ static void __exit snd_oxfw_exit(void)
 	driver_unregister(&oxfw_driver.driver);
 }
 
-module_init(snd_oxfw_init);
+deferred_module_init(snd_oxfw_init);
 module_exit(snd_oxfw_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/firewire/scs1x.c linux-4.1/sound/firewire/scs1x.c
--- linux-4.1.orig/sound/firewire/scs1x.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/firewire/scs1x.c	2015-06-25 22:51:15.623644036 +0100
@@ -526,5 +526,5 @@ static void __exit alsa_scs1x_exit(void)
 	driver_unregister(&scs_driver.driver);
 }
 
-module_init(alsa_scs1x_init);
+deferred_module_init(alsa_scs1x_init);
 module_exit(alsa_scs1x_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/i2c/cs8427.c linux-4.1/sound/i2c/cs8427.c
--- linux-4.1.orig/sound/i2c/cs8427.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/i2c/cs8427.c	2015-06-25 22:51:15.624643919 +0100
@@ -622,7 +622,7 @@ int snd_cs8427_iec958_pcm(struct snd_i2c
 
 EXPORT_SYMBOL(snd_cs8427_iec958_pcm);
 
-static int __init alsa_cs8427_module_init(void)
+static int __init alsa_cs8427_deferred_module_init(void)
 {
 	return 0;
 }
@@ -631,5 +631,5 @@ static void __exit alsa_cs8427_module_ex
 {
 }
 
-module_init(alsa_cs8427_module_init)
+deferred_module_init(alsa_cs8427_deferred_module_init)
 module_exit(alsa_cs8427_module_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/i2c/i2c.c linux-4.1/sound/i2c/i2c.c
--- linux-4.1.orig/sound/i2c/i2c.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/i2c/i2c.c	2015-06-25 22:51:15.624643919 +0100
@@ -349,5 +349,5 @@ static void __exit alsa_i2c_exit(void)
 {
 }
 
-module_init(alsa_i2c_init)
+deferred_module_init(alsa_i2c_init)
 module_exit(alsa_i2c_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/i2c/other/ak4xxx-adda.c linux-4.1/sound/i2c/other/ak4xxx-adda.c
--- linux-4.1.orig/sound/i2c/other/ak4xxx-adda.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/i2c/other/ak4xxx-adda.c	2015-06-25 22:51:15.625643802 +0100
@@ -916,7 +916,7 @@ int snd_akm4xxx_build_controls(struct sn
 }
 EXPORT_SYMBOL(snd_akm4xxx_build_controls);
 
-static int __init alsa_akm4xxx_module_init(void)
+static int __init alsa_akm4xxx_deferred_module_init(void)
 {
 	return 0;
 }
@@ -925,5 +925,5 @@ static void __exit alsa_akm4xxx_module_e
 {
 }
         
-module_init(alsa_akm4xxx_module_init)
+deferred_module_init(alsa_akm4xxx_deferred_module_init)
 module_exit(alsa_akm4xxx_module_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/i2c/tea6330t.c linux-4.1/sound/i2c/tea6330t.c
--- linux-4.1.orig/sound/i2c/tea6330t.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/i2c/tea6330t.c	2015-06-25 22:51:15.626643685 +0100
@@ -382,5 +382,5 @@ static void __exit alsa_tea6330t_exit(vo
 {
 }
 
-module_init(alsa_tea6330t_init)
+deferred_module_init(alsa_tea6330t_init)
 module_exit(alsa_tea6330t_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/ad1816a/ad1816a.c linux-4.1/sound/isa/ad1816a/ad1816a.c
--- linux-4.1.orig/sound/isa/ad1816a/ad1816a.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/ad1816a/ad1816a.c	2015-06-25 22:51:15.626643685 +0100
@@ -299,5 +299,5 @@ static void __exit alsa_card_ad1816a_exi
 	pnp_unregister_card_driver(&ad1816a_pnpc_driver);
 }
 
-module_init(alsa_card_ad1816a_init)
+deferred_module_init(alsa_card_ad1816a_init)
 module_exit(alsa_card_ad1816a_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/ad1848/ad1848.c linux-4.1/sound/isa/ad1848/ad1848.c
--- linux-4.1.orig/sound/isa/ad1848/ad1848.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/ad1848/ad1848.c	2015-06-25 22:51:15.627643568 +0100
@@ -180,5 +180,5 @@ static void __exit alsa_card_ad1848_exit
 	isa_unregister_driver(&snd_ad1848_driver);
 }
 
-module_init(alsa_card_ad1848_init);
+deferred_module_init(alsa_card_ad1848_init);
 module_exit(alsa_card_ad1848_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/adlib.c linux-4.1/sound/isa/adlib.c
--- linux-4.1.orig/sound/isa/adlib.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/adlib.c	2015-06-25 22:51:15.627643568 +0100
@@ -122,5 +122,5 @@ static void __exit alsa_card_adlib_exit(
 	isa_unregister_driver(&snd_adlib_driver);
 }
 
-module_init(alsa_card_adlib_init);
+deferred_module_init(alsa_card_adlib_init);
 module_exit(alsa_card_adlib_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/als100.c linux-4.1/sound/isa/als100.c
--- linux-4.1.orig/sound/isa/als100.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/als100.c	2015-06-25 22:51:15.627643568 +0100
@@ -374,5 +374,5 @@ static void __exit alsa_card_als100_exit
 	pnp_unregister_card_driver(&als100_pnpc_driver);
 }
 
-module_init(alsa_card_als100_init)
+deferred_module_init(alsa_card_als100_init)
 module_exit(alsa_card_als100_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/azt2320.c linux-4.1/sound/isa/azt2320.c
--- linux-4.1.orig/sound/isa/azt2320.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/azt2320.c	2015-06-25 22:51:15.628643451 +0100
@@ -350,5 +350,5 @@ static void __exit alsa_card_azt2320_exi
 	pnp_unregister_card_driver(&azt2320_pnpc_driver);
 }
 
-module_init(alsa_card_azt2320_init)
+deferred_module_init(alsa_card_azt2320_init)
 module_exit(alsa_card_azt2320_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/cmi8328.c linux-4.1/sound/isa/cmi8328.c
--- linux-4.1.orig/sound/isa/cmi8328.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/cmi8328.c	2015-06-25 22:51:15.628643451 +0100
@@ -479,5 +479,5 @@ static void __exit alsa_card_cmi8328_exi
 	isa_unregister_driver(&snd_cmi8328_driver);
 }
 
-module_init(alsa_card_cmi8328_init)
+deferred_module_init(alsa_card_cmi8328_init)
 module_exit(alsa_card_cmi8328_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/cmi8330.c linux-4.1/sound/isa/cmi8330.c
--- linux-4.1.orig/sound/isa/cmi8330.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/cmi8330.c	2015-06-25 22:51:15.629643334 +0100
@@ -776,5 +776,5 @@ static void __exit alsa_card_cmi8330_exi
 		isa_unregister_driver(&snd_cmi8330_driver);
 }
 
-module_init(alsa_card_cmi8330_init)
+deferred_module_init(alsa_card_cmi8330_init)
 module_exit(alsa_card_cmi8330_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/cs423x/cs4231.c linux-4.1/sound/isa/cs423x/cs4231.c
--- linux-4.1.orig/sound/isa/cs423x/cs4231.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/cs423x/cs4231.c	2015-06-25 22:51:15.629643334 +0100
@@ -196,5 +196,5 @@ static void __exit alsa_card_cs4231_exit
 	isa_unregister_driver(&snd_cs4231_driver);
 }
 
-module_init(alsa_card_cs4231_init);
+deferred_module_init(alsa_card_cs4231_init);
 module_exit(alsa_card_cs4231_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/cs423x/cs4236.c linux-4.1/sound/isa/cs423x/cs4236.c
--- linux-4.1.orig/sound/isa/cs423x/cs4236.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/cs423x/cs4236.c	2015-06-25 22:51:15.630643218 +0100
@@ -719,5 +719,5 @@ static void __exit alsa_card_cs423x_exit
 		isa_unregister_driver(&cs423x_isa_driver);
 }
 
-module_init(alsa_card_cs423x_init)
+deferred_module_init(alsa_card_cs423x_init)
 module_exit(alsa_card_cs423x_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/es1688/es1688.c linux-4.1/sound/isa/es1688/es1688.c
--- linux-4.1.orig/sound/isa/es1688/es1688.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/es1688/es1688.c	2015-06-25 22:51:15.632642984 +0100
@@ -364,5 +364,5 @@ static void __exit alsa_card_es1688_exit
 #endif
 }
 
-module_init(alsa_card_es1688_init);
+deferred_module_init(alsa_card_es1688_init);
 module_exit(alsa_card_es1688_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/es1688/es1688_lib.c linux-4.1/sound/isa/es1688/es1688_lib.c
--- linux-4.1.orig/sound/isa/es1688/es1688_lib.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/es1688/es1688_lib.c	2015-06-25 22:51:15.632642984 +0100
@@ -1043,5 +1043,5 @@ static void __exit alsa_es1688_exit(void
 {
 }
 
-module_init(alsa_es1688_init)
+deferred_module_init(alsa_es1688_init)
 module_exit(alsa_es1688_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/es18xx.c linux-4.1/sound/isa/es18xx.c
--- linux-4.1.orig/sound/isa/es18xx.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/es18xx.c	2015-06-25 22:51:15.633642867 +0100
@@ -2436,5 +2436,5 @@ static void __exit alsa_card_es18xx_exit
 		isa_unregister_driver(&snd_es18xx_isa_driver);
 }
 
-module_init(alsa_card_es18xx_init)
+deferred_module_init(alsa_card_es18xx_init)
 module_exit(alsa_card_es18xx_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/galaxy/galaxy.c linux-4.1/sound/isa/galaxy/galaxy.c
--- linux-4.1.orig/sound/isa/galaxy/galaxy.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/galaxy/galaxy.c	2015-06-25 22:51:15.634642750 +0100
@@ -644,5 +644,5 @@ static void __exit alsa_card_galaxy_exit
 	isa_unregister_driver(&snd_galaxy_driver);
 }
 
-module_init(alsa_card_galaxy_init);
+deferred_module_init(alsa_card_galaxy_init);
 module_exit(alsa_card_galaxy_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/gus/gusclassic.c linux-4.1/sound/isa/gus/gusclassic.c
--- linux-4.1.orig/sound/isa/gus/gusclassic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/gus/gusclassic.c	2015-06-25 22:51:15.634642750 +0100
@@ -239,5 +239,5 @@ static void __exit alsa_card_gusclassic_
 	isa_unregister_driver(&snd_gusclassic_driver);
 }
 
-module_init(alsa_card_gusclassic_init);
+deferred_module_init(alsa_card_gusclassic_init);
 module_exit(alsa_card_gusclassic_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/gus/gusextreme.c linux-4.1/sound/isa/gus/gusextreme.c
--- linux-4.1.orig/sound/isa/gus/gusextreme.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/gus/gusextreme.c	2015-06-25 22:51:15.635642633 +0100
@@ -368,5 +368,5 @@ static void __exit alsa_card_gusextreme_
 	isa_unregister_driver(&snd_gusextreme_driver);
 }
 
-module_init(alsa_card_gusextreme_init);
+deferred_module_init(alsa_card_gusextreme_init);
 module_exit(alsa_card_gusextreme_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/gus/gus_main.c linux-4.1/sound/isa/gus/gus_main.c
--- linux-4.1.orig/sound/isa/gus/gus_main.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/gus/gus_main.c	2015-06-25 22:51:15.635642633 +0100
@@ -479,5 +479,5 @@ static void __exit alsa_gus_exit(void)
 {
 }
 
-module_init(alsa_gus_init)
+deferred_module_init(alsa_gus_init)
 module_exit(alsa_gus_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/gus/gusmax.c linux-4.1/sound/isa/gus/gusmax.c
--- linux-4.1.orig/sound/isa/gus/gusmax.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/gus/gusmax.c	2015-06-25 22:51:15.636642516 +0100
@@ -380,5 +380,5 @@ static void __exit alsa_card_gusmax_exit
 	isa_unregister_driver(&snd_gusmax_driver);
 }
 
-module_init(alsa_card_gusmax_init)
+deferred_module_init(alsa_card_gusmax_init)
 module_exit(alsa_card_gusmax_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/gus/interwave.c linux-4.1/sound/isa/gus/interwave.c
--- linux-4.1.orig/sound/isa/gus/interwave.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/gus/interwave.c	2015-06-25 22:51:15.636642516 +0100
@@ -933,5 +933,5 @@ static void __exit alsa_card_interwave_e
 		isa_unregister_driver(&snd_interwave_driver);
 }
 
-module_init(alsa_card_interwave_init)
+deferred_module_init(alsa_card_interwave_init)
 module_exit(alsa_card_interwave_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/msnd/msnd_pinnacle.c linux-4.1/sound/isa/msnd/msnd_pinnacle.c
--- linux-4.1.orig/sound/isa/msnd/msnd_pinnacle.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/msnd/msnd_pinnacle.c	2015-06-25 22:51:15.637642399 +0100
@@ -1237,6 +1237,6 @@ static void __exit snd_msnd_exit(void)
 		isa_unregister_driver(&snd_msnd_driver);
 }
 
-module_init(snd_msnd_init);
+deferred_module_init(snd_msnd_init);
 module_exit(snd_msnd_exit);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/opl3sa2.c linux-4.1/sound/isa/opl3sa2.c
--- linux-4.1.orig/sound/isa/opl3sa2.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/opl3sa2.c	2015-06-25 22:51:15.638642282 +0100
@@ -962,5 +962,5 @@ static void __exit alsa_card_opl3sa2_exi
 		isa_unregister_driver(&snd_opl3sa2_isa_driver);
 }
 
-module_init(alsa_card_opl3sa2_init)
+deferred_module_init(alsa_card_opl3sa2_init)
 module_exit(alsa_card_opl3sa2_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/opti9xx/miro.c linux-4.1/sound/isa/opti9xx/miro.c
--- linux-4.1.orig/sound/isa/opti9xx/miro.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/opti9xx/miro.c	2015-06-25 22:51:15.639642166 +0100
@@ -1656,5 +1656,5 @@ static void __exit alsa_card_miro_exit(v
 #endif
 }
 
-module_init(alsa_card_miro_init)
+deferred_module_init(alsa_card_miro_init)
 module_exit(alsa_card_miro_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/opti9xx/opti92x-ad1848.c linux-4.1/sound/isa/opti9xx/opti92x-ad1848.c
--- linux-4.1.orig/sound/isa/opti9xx/opti92x-ad1848.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/opti9xx/opti92x-ad1848.c	2015-06-25 22:51:15.640642049 +0100
@@ -1197,5 +1197,5 @@ static void __exit alsa_card_opti9xx_exi
 #endif
 }
 
-module_init(alsa_card_opti9xx_init)
+deferred_module_init(alsa_card_opti9xx_init)
 module_exit(alsa_card_opti9xx_exit)
Only in linux-4.1/sound/isa/sb: emu8000_synth.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sb/jazz16.c linux-4.1/sound/isa/sb/jazz16.c
--- linux-4.1.orig/sound/isa/sb/jazz16.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sb/jazz16.c	2015-06-25 22:51:15.641641932 +0100
@@ -397,5 +397,5 @@ static void __exit alsa_card_jazz16_exit
 	isa_unregister_driver(&snd_jazz16_driver);
 }
 
-module_init(alsa_card_jazz16_init)
+deferred_module_init(alsa_card_jazz16_init)
 module_exit(alsa_card_jazz16_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sb/sb16.c linux-4.1/sound/isa/sb/sb16.c
--- linux-4.1.orig/sound/isa/sb/sb16.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sb/sb16.c	2015-06-25 22:51:15.641641932 +0100
@@ -693,5 +693,5 @@ static void __exit alsa_card_sb16_exit(v
 		isa_unregister_driver(&snd_sb16_isa_driver);
 }
 
-module_init(alsa_card_sb16_init)
+deferred_module_init(alsa_card_sb16_init)
 module_exit(alsa_card_sb16_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sb/sb16_csp.c linux-4.1/sound/isa/sb/sb16_csp.c
--- linux-4.1.orig/sound/isa/sb/sb16_csp.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sb/sb16_csp.c	2015-06-25 22:51:15.642641815 +0100
@@ -1199,5 +1199,5 @@ static void __exit alsa_sb_csp_exit(void
 {
 }
 
-module_init(alsa_sb_csp_init)
+deferred_module_init(alsa_sb_csp_init)
 module_exit(alsa_sb_csp_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sb/sb16_main.c linux-4.1/sound/isa/sb/sb16_main.c
--- linux-4.1.orig/sound/isa/sb/sb16_main.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sb/sb16_main.c	2015-06-25 22:51:15.643641698 +0100
@@ -911,5 +911,5 @@ static void __exit alsa_sb16_exit(void)
 {
 }
 
-module_init(alsa_sb16_init)
+deferred_module_init(alsa_sb16_init)
 module_exit(alsa_sb16_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sb/sb8.c linux-4.1/sound/isa/sb/sb8.c
--- linux-4.1.orig/sound/isa/sb/sb8.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sb/sb8.c	2015-06-25 22:51:15.643641698 +0100
@@ -261,5 +261,5 @@ static void __exit alsa_card_sb8_exit(vo
 	isa_unregister_driver(&snd_sb8_driver);
 }
 
-module_init(alsa_card_sb8_init)
+deferred_module_init(alsa_card_sb8_init)
 module_exit(alsa_card_sb8_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sb/sb8_main.c linux-4.1/sound/isa/sb/sb8_main.c
--- linux-4.1.orig/sound/isa/sb/sb8_main.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sb/sb8_main.c	2015-06-25 22:51:15.644641581 +0100
@@ -638,5 +638,5 @@ static void __exit alsa_sb8_exit(void)
 {
 }
 
-module_init(alsa_sb8_init)
+deferred_module_init(alsa_sb8_init)
 module_exit(alsa_sb8_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sb/sb_common.c linux-4.1/sound/isa/sb/sb_common.c
--- linux-4.1.orig/sound/isa/sb/sb_common.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sb/sb_common.c	2015-06-25 22:51:15.645641464 +0100
@@ -319,5 +319,5 @@ static void __exit alsa_sb_common_exit(v
 {
 }
 
-module_init(alsa_sb_common_init)
+deferred_module_init(alsa_sb_common_init)
 module_exit(alsa_sb_common_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sc6000.c linux-4.1/sound/isa/sc6000.c
--- linux-4.1.orig/sound/isa/sc6000.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sc6000.c	2015-06-25 22:51:15.645641464 +0100
@@ -721,5 +721,5 @@ static void __exit alsa_card_sc6000_exit
 	isa_unregister_driver(&snd_sc6000_driver);
 }
 
-module_init(alsa_card_sc6000_init)
+deferred_module_init(alsa_card_sc6000_init)
 module_exit(alsa_card_sc6000_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/sscape.c linux-4.1/sound/isa/sscape.c
--- linux-4.1.orig/sound/isa/sscape.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/sscape.c	2015-06-25 22:51:15.647641230 +0100
@@ -1353,5 +1353,5 @@ static void __exit sscape_exit(void)
 		isa_unregister_driver(&snd_sscape_driver);
 }
 
-module_init(sscape_init);
+deferred_module_init(sscape_init);
 module_exit(sscape_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/wavefront/wavefront.c linux-4.1/sound/isa/wavefront/wavefront.c
--- linux-4.1.orig/sound/isa/wavefront/wavefront.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/wavefront/wavefront.c	2015-06-25 22:51:15.647641230 +0100
@@ -678,5 +678,5 @@ static void __exit alsa_card_wavefront_e
 		isa_unregister_driver(&snd_wavefront_driver);
 }
 
-module_init(alsa_card_wavefront_init)
+deferred_module_init(alsa_card_wavefront_init)
 module_exit(alsa_card_wavefront_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/isa/wss/wss_lib.c linux-4.1/sound/isa/wss/wss_lib.c
--- linux-4.1.orig/sound/isa/wss/wss_lib.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/isa/wss/wss_lib.c	2015-06-25 22:51:15.648641113 +0100
@@ -2293,5 +2293,5 @@ static void __exit alsa_wss_exit(void)
 {
 }
 
-module_init(alsa_wss_init);
+deferred_module_init(alsa_wss_init);
 module_exit(alsa_wss_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/ad1848.c linux-4.1/sound/oss/ad1848.c
--- linux-4.1.orig/sound/oss/ad1848.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/ad1848.c	2015-06-25 22:51:15.650640880 +0100
@@ -26,7 +26,7 @@
  *			  general sleep/wakeup clean up.
  * Alan Cox		: reformatted. Fixed SMP bugs. Moved to kernel alloc/free
  *		          of irqs. Use dev_id.
- * Christoph Hellwig	: adapted to module_init/module_exit
+ * Christoph Hellwig	: adapted to deferred_module_init/module_exit
  * Aki Laukkanen	: added power management support
  * Arnaldo C. de Melo	: added missing restore_flags in ad1848_resume
  * Miguel Freitas       : added ISA PnP support
@@ -3040,7 +3040,7 @@ static void __exit cleanup_ad1848(void)
 #endif
 }
 
-module_init(init_ad1848);
+deferred_module_init(init_ad1848);
 module_exit(cleanup_ad1848);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/aedsp16.c linux-4.1/sound/oss/aedsp16.c
--- linux-4.1.orig/sound/oss/aedsp16.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/aedsp16.c	2015-06-25 22:51:15.651640763 +0100
@@ -1349,7 +1349,7 @@ static void __exit cleanup_aedsp16(void)
 	uninit_aedsp16();
 }
 
-module_init(do_init_aedsp16);
+deferred_module_init(do_init_aedsp16);
 module_exit(cleanup_aedsp16);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/dmasound/dmasound_atari.c linux-4.1/sound/oss/dmasound/dmasound_atari.c
--- linux-4.1.orig/sound/oss/dmasound/dmasound_atari.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/dmasound/dmasound_atari.c	2015-06-25 22:51:15.652640646 +0100
@@ -1615,6 +1615,6 @@ static void __exit dmasound_atari_cleanu
 	dmasound_deinit();
 }
 
-module_init(dmasound_atari_init);
+deferred_module_init(dmasound_atari_init);
 module_exit(dmasound_atari_cleanup);
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/dmasound/dmasound_q40.c linux-4.1/sound/oss/dmasound/dmasound_q40.c
--- linux-4.1.orig/sound/oss/dmasound/dmasound_q40.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/dmasound/dmasound_q40.c	2015-06-25 22:51:15.652640646 +0100
@@ -631,7 +631,7 @@ static void __exit dmasound_q40_cleanup(
 	dmasound_deinit();
 }
 
-module_init(dmasound_q40_init);
+deferred_module_init(dmasound_q40_init);
 module_exit(dmasound_q40_cleanup);
 
 MODULE_DESCRIPTION("Q40/Q60 sound driver");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/kahlua.c linux-4.1/sound/oss/kahlua.c
--- linux-4.1.orig/sound/oss/kahlua.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/kahlua.c	2015-06-25 22:51:15.653640529 +0100
@@ -224,6 +224,6 @@ static void kahlua_cleanup_module(void)
 }
 
 
-module_init(kahlua_init_module);
+deferred_module_init(kahlua_init_module);
 module_exit(kahlua_cleanup_module);
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/mpu401.c linux-4.1/sound/oss/mpu401.c
--- linux-4.1.orig/sound/oss/mpu401.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/mpu401.c	2015-06-25 22:51:15.653640529 +0100
@@ -1782,7 +1782,7 @@ static void __exit cleanup_mpu401(void)
 	}
 }
 
-module_init(init_mpu401);
+deferred_module_init(init_mpu401);
 module_exit(cleanup_mpu401);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/msnd_pinnacle.c linux-4.1/sound/oss/msnd_pinnacle.c
--- linux-4.1.orig/sound/oss/msnd_pinnacle.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/msnd_pinnacle.c	2015-06-25 22:51:15.654640412 +0100
@@ -1936,5 +1936,5 @@ static void __exit msdn_cleanup(void)
 	msnd_fifo_free(&dev.DARF);
 }
 
-module_init(msnd_init);
+deferred_module_init(msnd_init);
 module_exit(msdn_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/pas2_card.c linux-4.1/sound/oss/pas2_card.c
--- linux-4.1.orig/sound/oss/pas2_card.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/pas2_card.c	2015-06-25 22:51:15.655640295 +0100
@@ -430,7 +430,7 @@ static void __exit cleanup_pas2(void)
 	unload_pas(&cfg);
 }
 
-module_init(init_pas2);
+deferred_module_init(init_pas2);
 module_exit(cleanup_pas2);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/sb_card.c linux-4.1/sound/oss/sb_card.c
--- linux-4.1.orig/sound/oss/sb_card.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/sb_card.c	2015-06-25 22:51:15.655640295 +0100
@@ -350,5 +350,5 @@ static void __exit sb_exit(void)
 	smw_free = NULL;
 }
 
-module_init(sb_init);
+deferred_module_init(sb_init);
 module_exit(sb_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/soundcard.c linux-4.1/sound/oss/soundcard.c
--- linux-4.1.orig/sound/oss/soundcard.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/soundcard.c	2015-06-25 22:51:15.419667881 +0100
@@ -599,7 +599,7 @@ static void __exit oss_cleanup(void)
 
 }
 
-module_init(oss_init);
+deferred_module_init(oss_init);
 module_exit(oss_cleanup);
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("OSS Sound subsystem");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/swarm_cs4297a.c linux-4.1/sound/oss/swarm_cs4297a.c
--- linux-4.1.orig/sound/oss/swarm_cs4297a.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/swarm_cs4297a.c	2015-06-25 22:51:15.657640061 +0100
@@ -2777,5 +2777,5 @@ MODULE_DESCRIPTION("Cirrus Logic CS4297a
 
 // --------------------------------------------------------------------- 
 
-module_init(cs4297a_init);
+deferred_module_init(cs4297a_init);
 module_exit(cs4297a_cleanup);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/vidc.c linux-4.1/sound/oss/vidc.c
--- linux-4.1.orig/sound/oss/vidc.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/vidc.c	2015-06-25 22:51:15.658639944 +0100
@@ -549,7 +549,7 @@ static void __exit cleanup_vidc(void)
 	unload_vidc(&cfg);
 }
 
-module_init(init_vidc);
+deferred_module_init(init_vidc);
 module_exit(cleanup_vidc);
 
 MODULE_AUTHOR("Russell King");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/oss/waveartist.c linux-4.1/sound/oss/waveartist.c
--- linux-4.1.orig/sound/oss/waveartist.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/oss/waveartist.c	2015-06-25 22:51:15.659639828 +0100
@@ -2016,7 +2016,7 @@ static void __exit cleanup_waveartist(vo
 		unload_waveartist(&cfg);
 }
 
-module_init(init_waveartist);
+deferred_module_init(init_waveartist);
 module_exit(cleanup_waveartist);
 
 #ifndef MODULE
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/parisc/harmony.c linux-4.1/sound/parisc/harmony.c
--- linux-4.1.orig/sound/parisc/harmony.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/parisc/harmony.c	2015-06-25 22:51:15.659639828 +0100
@@ -1030,5 +1030,5 @@ MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Kyle McMartin <kyle@parisc-linux.org>");
 MODULE_DESCRIPTION("Harmony sound driver");
 
-module_init(alsa_harmony_init);
+deferred_module_init(alsa_harmony_init);
 module_exit(alsa_harmony_fini);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/pci/ac97/ac97_codec.c linux-4.1/sound/pci/ac97/ac97_codec.c
--- linux-4.1.orig/sound/pci/ac97/ac97_codec.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/pci/ac97/ac97_codec.c	2015-06-25 22:51:15.661639594 +0100
@@ -2955,5 +2955,5 @@ static void __exit alsa_ac97_exit(void)
 {
 }
 
-module_init(alsa_ac97_init)
+deferred_module_init(alsa_ac97_init)
 module_exit(alsa_ac97_exit)
Only in linux-4.1/sound/pci/ac97: ac97_codec.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/pci/asihpi/asihpi.c linux-4.1/sound/pci/asihpi/asihpi.c
--- linux-4.1.orig/sound/pci/asihpi/asihpi.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/pci/asihpi/asihpi.c	2015-06-25 22:51:15.662639477 +0100
@@ -3055,6 +3055,6 @@ static void __exit snd_asihpi_exit(void)
 	asihpi_exit();
 }
 
-module_init(snd_asihpi_init)
+deferred_module_init(snd_asihpi_init)
 module_exit(snd_asihpi_exit)
 
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/pci/bt87x.c linux-4.1/sound/pci/bt87x.c
--- linux-4.1.orig/sound/pci/bt87x.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/pci/bt87x.c	2015-06-25 22:51:15.664639243 +0100
@@ -990,5 +990,5 @@ static void __exit alsa_card_bt87x_exit(
 	pci_unregister_driver(&driver);
 }
 
-module_init(alsa_card_bt87x_init)
+deferred_module_init(alsa_card_bt87x_init)
 module_exit(alsa_card_bt87x_exit)
Only in linux-4.1/sound/pci/emu10k1: emu10k1_synth.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/pci/hda/hda_intel.c linux-4.1/sound/pci/hda/hda_intel.c
--- linux-4.1.orig/sound/pci/hda/hda_intel.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/pci/hda/hda_intel.c	2015-06-25 22:51:15.665639126 +0100
@@ -2184,4 +2184,4 @@ static struct pci_driver azx_driver = {
 	},
 };
 
-module_pci_driver(azx_driver);
+deferred_module_pci_driver(azx_driver);
Only in linux-4.1/sound/pci/hda: hda_intel.c.orig
Only in linux-4.1/sound/pci/hda: patch_analog.c.orig
Only in linux-4.1/sound/pci/hda: patch_ca0110.c.orig
Only in linux-4.1/sound/pci/hda: patch_ca0132.c.orig
Only in linux-4.1/sound/pci/hda: patch_cirrus.c.orig
Only in linux-4.1/sound/pci/hda: patch_cmedia.c.orig
Only in linux-4.1/sound/pci/hda: patch_conexant.c.orig
Only in linux-4.1/sound/pci/hda: patch_hdmi.c.orig
Only in linux-4.1/sound/pci/hda: patch_realtek.c.orig
Only in linux-4.1/sound/pci/hda: patch_si3054.c.orig
Only in linux-4.1/sound/pci/hda: patch_sigmatel.c.orig
Only in linux-4.1/sound/pci/hda: patch_via.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/pci/riptide/riptide.c linux-4.1/sound/pci/riptide/riptide.c
--- linux-4.1.orig/sound/pci/riptide/riptide.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/pci/riptide/riptide.c	2015-06-25 22:51:15.705634451 +0100
@@ -2213,5 +2213,5 @@ static void __exit alsa_card_riptide_exi
 #endif
 }
 
-module_init(alsa_card_riptide_init);
+deferred_module_init(alsa_card_riptide_init);
 module_exit(alsa_card_riptide_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/ppc/powermac.c linux-4.1/sound/ppc/powermac.c
--- linux-4.1.orig/sound/ppc/powermac.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/ppc/powermac.c	2015-06-25 22:51:15.438665660 +0100
@@ -190,5 +190,5 @@ static void __exit alsa_card_pmac_exit(v
 	platform_driver_unregister(&snd_pmac_driver);
 }
 
-module_init(alsa_card_pmac_init)
+deferred_module_init(alsa_card_pmac_init)
 module_exit(alsa_card_pmac_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/ppc/snd_ps3.c linux-4.1/sound/ppc/snd_ps3.c
--- linux-4.1.orig/sound/ppc/snd_ps3.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/ppc/snd_ps3.c	2015-06-25 22:51:15.439665543 +0100
@@ -1147,7 +1147,7 @@ static int __init snd_ps3_init(void)
 
 	return ret;
 }
-module_init(snd_ps3_init);
+deferred_module_init(snd_ps3_init);
 
 static void __exit snd_ps3_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/sh/aica.c linux-4.1/sound/sh/aica.c
--- linux-4.1.orig/sound/sh/aica.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/sh/aica.c	2015-06-25 22:51:15.708634100 +0100
@@ -681,5 +681,5 @@ static void __exit aica_exit(void)
 	spu_reset();
 }
 
-module_init(aica_init);
+deferred_module_init(aica_init);
 module_exit(aica_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/blackfin/bf5xx-ad193x.c linux-4.1/sound/soc/blackfin/bf5xx-ad193x.c
--- linux-4.1.orig/sound/soc/blackfin/bf5xx-ad193x.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/blackfin/bf5xx-ad193x.c	2015-06-25 22:51:15.708634100 +0100
@@ -121,7 +121,7 @@ static void __exit bf5xx_ad193x_exit(voi
 	platform_device_unregister(bfxx_ad193x_snd_device);
 }
 
-module_init(bf5xx_ad193x_init);
+deferred_module_init(bf5xx_ad193x_init);
 module_exit(bf5xx_ad193x_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/blackfin/bf5xx-ad1980.c linux-4.1/sound/soc/blackfin/bf5xx-ad1980.c
--- linux-4.1.orig/sound/soc/blackfin/bf5xx-ad1980.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/blackfin/bf5xx-ad1980.c	2015-06-25 22:51:15.708634100 +0100
@@ -100,7 +100,7 @@ static void __exit bf5xx_board_exit(void
 	platform_device_unregister(bf5xx_board_snd_device);
 }
 
-module_init(bf5xx_board_init);
+deferred_module_init(bf5xx_board_init);
 module_exit(bf5xx_board_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/blackfin/bf5xx-ad73311.c linux-4.1/sound/soc/blackfin/bf5xx-ad73311.c
--- linux-4.1.orig/sound/soc/blackfin/bf5xx-ad73311.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/blackfin/bf5xx-ad73311.c	2015-06-25 22:51:15.709633983 +0100
@@ -202,7 +202,7 @@ static void __exit bf5xx_ad73311_exit(vo
 	platform_device_unregister(bf5xx_ad73311_snd_device);
 }
 
-module_init(bf5xx_ad73311_init);
+deferred_module_init(bf5xx_ad73311_init);
 module_exit(bf5xx_ad73311_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/blackfin/bf5xx-ssm2602.c linux-4.1/sound/soc/blackfin/bf5xx-ssm2602.c
--- linux-4.1.orig/sound/soc/blackfin/bf5xx-ssm2602.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/blackfin/bf5xx-ssm2602.c	2015-06-25 22:51:15.709633983 +0100
@@ -116,7 +116,7 @@ static void __exit bf5xx_ssm2602_exit(vo
 	platform_device_unregister(bf5xx_ssm2602_snd_device);
 }
 
-module_init(bf5xx_ssm2602_init);
+deferred_module_init(bf5xx_ssm2602_init);
 module_exit(bf5xx_ssm2602_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/da7210.c linux-4.1/sound/soc/codecs/da7210.c
--- linux-4.1.orig/sound/soc/codecs/da7210.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/da7210.c	2015-06-25 22:51:15.710633866 +0100
@@ -1366,7 +1366,7 @@ static int __init da7210_modinit(void)
 #endif
 	return ret;
 }
-module_init(da7210_modinit);
+deferred_module_init(da7210_modinit);
 
 static void __exit da7210_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/uda1380.c linux-4.1/sound/soc/codecs/uda1380.c
--- linux-4.1.orig/sound/soc/codecs/uda1380.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/uda1380.c	2015-06-25 22:51:15.711633749 +0100
@@ -832,7 +832,7 @@ static int __init uda1380_modinit(void)
 #endif
 	return ret;
 }
-module_init(uda1380_modinit);
+deferred_module_init(uda1380_modinit);
 
 static void __exit uda1380_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8510.c linux-4.1/sound/soc/codecs/wm8510.c
--- linux-4.1.orig/sound/soc/codecs/wm8510.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8510.c	2015-06-25 22:51:15.711633749 +0100
@@ -719,7 +719,7 @@ static int __init wm8510_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8510_modinit);
+deferred_module_init(wm8510_modinit);
 
 static void __exit wm8510_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8523.c linux-4.1/sound/soc/codecs/wm8523.c
--- linux-4.1.orig/sound/soc/codecs/wm8523.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8523.c	2015-06-25 22:51:15.712633632 +0100
@@ -530,7 +530,7 @@ static int __init wm8523_modinit(void)
 #endif
 	return 0;
 }
-module_init(wm8523_modinit);
+deferred_module_init(wm8523_modinit);
 
 static void __exit wm8523_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8580.c linux-4.1/sound/soc/codecs/wm8580.c
--- linux-4.1.orig/sound/soc/codecs/wm8580.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8580.c	2015-06-25 22:51:15.713633516 +0100
@@ -1001,7 +1001,7 @@ static int __init wm8580_modinit(void)
 
 	return ret;
 }
-module_init(wm8580_modinit);
+deferred_module_init(wm8580_modinit);
 
 static void __exit wm8580_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8711.c linux-4.1/sound/soc/codecs/wm8711.c
--- linux-4.1.orig/sound/soc/codecs/wm8711.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8711.c	2015-06-25 22:51:15.713633516 +0100
@@ -507,7 +507,7 @@ static int __init wm8711_modinit(void)
 #endif
 	return 0;
 }
-module_init(wm8711_modinit);
+deferred_module_init(wm8711_modinit);
 
 static void __exit wm8711_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8728.c linux-4.1/sound/soc/codecs/wm8728.c
--- linux-4.1.orig/sound/soc/codecs/wm8728.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8728.c	2015-06-25 22:51:15.714633399 +0100
@@ -348,7 +348,7 @@ static int __init wm8728_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8728_modinit);
+deferred_module_init(wm8728_modinit);
 
 static void __exit wm8728_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8731.c linux-4.1/sound/soc/codecs/wm8731.c
--- linux-4.1.orig/sound/soc/codecs/wm8731.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8731.c	2015-06-25 22:51:15.715633282 +0100
@@ -817,7 +817,7 @@ static int __init wm8731_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8731_modinit);
+deferred_module_init(wm8731_modinit);
 
 static void __exit wm8731_exit(void)
 {
Only in linux-4.1/sound/soc/codecs: wm8731.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8737.c linux-4.1/sound/soc/codecs/wm8737.c
--- linux-4.1.orig/sound/soc/codecs/wm8737.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8737.c	2015-06-25 22:51:15.715633282 +0100
@@ -735,7 +735,7 @@ static int __init wm8737_modinit(void)
 #endif
 	return 0;
 }
-module_init(wm8737_modinit);
+deferred_module_init(wm8737_modinit);
 
 static void __exit wm8737_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8741.c linux-4.1/sound/soc/codecs/wm8741.c
--- linux-4.1.orig/sound/soc/codecs/wm8741.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8741.c	2015-06-25 22:51:15.716633165 +0100
@@ -625,7 +625,7 @@ static int __init wm8741_modinit(void)
 
 	return ret;
 }
-module_init(wm8741_modinit);
+deferred_module_init(wm8741_modinit);
 
 static void __exit wm8741_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8750.c linux-4.1/sound/soc/codecs/wm8750.c
--- linux-4.1.orig/sound/soc/codecs/wm8750.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8750.c	2015-06-25 22:51:15.716633165 +0100
@@ -855,7 +855,7 @@ static int __init wm8750_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8750_modinit);
+deferred_module_init(wm8750_modinit);
 
 static void __exit wm8750_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8753.c linux-4.1/sound/soc/codecs/wm8753.c
--- linux-4.1.orig/sound/soc/codecs/wm8753.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8753.c	2015-06-25 22:51:15.717633048 +0100
@@ -1638,7 +1638,7 @@ static int __init wm8753_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8753_modinit);
+deferred_module_init(wm8753_modinit);
 
 static void __exit wm8753_exit(void)
 {
Only in linux-4.1/sound/soc/codecs: wm8753.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8776.c linux-4.1/sound/soc/codecs/wm8776.c
--- linux-4.1.orig/sound/soc/codecs/wm8776.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8776.c	2015-06-25 22:51:15.718632931 +0100
@@ -565,7 +565,7 @@ static int __init wm8776_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8776_modinit);
+deferred_module_init(wm8776_modinit);
 
 static void __exit wm8776_exit(void)
 {
Only in linux-4.1/sound/soc/codecs: wm8804.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8900.c linux-4.1/sound/soc/codecs/wm8900.c
--- linux-4.1.orig/sound/soc/codecs/wm8900.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8900.c	2015-06-25 22:51:15.721632580 +0100
@@ -1340,7 +1340,7 @@ static int __init wm8900_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8900_modinit);
+deferred_module_init(wm8900_modinit);
 
 static void __exit wm8900_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8983.c linux-4.1/sound/soc/codecs/wm8983.c
--- linux-4.1.orig/sound/soc/codecs/wm8983.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8983.c	2015-06-25 22:51:15.721632580 +0100
@@ -1162,7 +1162,7 @@ static int __init wm8983_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8983_modinit);
+deferred_module_init(wm8983_modinit);
 
 static void __exit wm8983_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8985.c linux-4.1/sound/soc/codecs/wm8985.c
--- linux-4.1.orig/sound/soc/codecs/wm8985.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8985.c	2015-06-25 22:51:15.722632464 +0100
@@ -1173,7 +1173,7 @@ static int __init wm8985_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8985_modinit);
+deferred_module_init(wm8985_modinit);
 
 static void __exit wm8985_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8988.c linux-4.1/sound/soc/codecs/wm8988.c
--- linux-4.1.orig/sound/soc/codecs/wm8988.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8988.c	2015-06-25 22:51:15.724632230 +0100
@@ -947,7 +947,7 @@ static int __init wm8988_modinit(void)
 #endif
 	return ret;
 }
-module_init(wm8988_modinit);
+deferred_module_init(wm8988_modinit);
 
 static void __exit wm8988_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/codecs/wm8995.c linux-4.1/sound/soc/codecs/wm8995.c
--- linux-4.1.orig/sound/soc/codecs/wm8995.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/codecs/wm8995.c	2015-06-25 22:51:15.725632113 +0100
@@ -2327,7 +2327,7 @@ static int __init wm8995_modinit(void)
 	return ret;
 }
 
-module_init(wm8995_modinit);
+deferred_module_init(wm8995_modinit);
 
 static void __exit wm8995_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/davinci/davinci-evm.c linux-4.1/sound/soc/davinci/davinci-evm.c
--- linux-4.1.orig/sound/soc/davinci/davinci-evm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/davinci/davinci-evm.c	2015-06-25 22:51:15.726631996 +0100
@@ -496,7 +496,7 @@ static void __exit evm_exit(void)
 	platform_device_unregister(evm_snd_device);
 }
 
-module_init(evm_init);
+deferred_module_init(evm_init);
 module_exit(evm_exit);
 
 MODULE_AUTHOR("Vladimir Barinov");
Only in linux-4.1/sound/soc/davinci: davinci-evm.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/fsl/efika-audio-fabric.c linux-4.1/sound/soc/fsl/efika-audio-fabric.c
--- linux-4.1.orig/sound/soc/fsl/efika-audio-fabric.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/fsl/efika-audio-fabric.c	2015-06-25 22:51:15.726631996 +0100
@@ -82,7 +82,7 @@ static __init int efika_fabric_init(void
 	return 0;
 }
 
-module_init(efika_fabric_init);
+deferred_module_init(efika_fabric_init);
 
 
 MODULE_AUTHOR("Jon Smirl <jonsmirl@gmail.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/fsl/mpc8610_hpcd.c linux-4.1/sound/soc/fsl/mpc8610_hpcd.c
--- linux-4.1.orig/sound/soc/fsl/mpc8610_hpcd.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/fsl/mpc8610_hpcd.c	2015-06-25 22:51:15.727631879 +0100
@@ -425,7 +425,7 @@ static void __exit mpc8610_hpcd_exit(voi
 	platform_driver_unregister(&mpc8610_hpcd_driver);
 }
 
-module_init(mpc8610_hpcd_init);
+deferred_module_init(mpc8610_hpcd_init);
 module_exit(mpc8610_hpcd_exit);
 
 MODULE_AUTHOR("Timur Tabi <timur@freescale.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/fsl/p1022_ds.c linux-4.1/sound/soc/fsl/p1022_ds.c
--- linux-4.1.orig/sound/soc/fsl/p1022_ds.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/fsl/p1022_ds.c	2015-06-25 22:51:15.727631879 +0100
@@ -434,7 +434,7 @@ static void __exit p1022_ds_exit(void)
 	platform_driver_unregister(&p1022_ds_driver);
 }
 
-module_init(p1022_ds_init);
+deferred_module_init(p1022_ds_init);
 module_exit(p1022_ds_exit);
 
 MODULE_AUTHOR("Timur Tabi <timur@freescale.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/fsl/wm1133-ev1.c linux-4.1/sound/soc/fsl/wm1133-ev1.c
--- linux-4.1.orig/sound/soc/fsl/wm1133-ev1.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/fsl/wm1133-ev1.c	2015-06-25 22:51:15.728631762 +0100
@@ -279,7 +279,7 @@ static int __init wm1133_ev1_audio_init(
 
 	return ret;
 }
-module_init(wm1133_ev1_audio_init);
+deferred_module_init(wm1133_ev1_audio_init);
 
 static void __exit wm1133_ev1_audio_exit(void)
 {
Only in linux-4.1/sound/soc/fsl: wm1133-ev1.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/nuc900/nuc900-audio.c linux-4.1/sound/soc/nuc900/nuc900-audio.c
--- linux-4.1.orig/sound/soc/nuc900/nuc900-audio.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/nuc900/nuc900-audio.c	2015-06-25 22:51:15.728631762 +0100
@@ -67,7 +67,7 @@ static void __exit nuc900evb_audio_exit(
 	platform_device_unregister(nuc900evb_asoc_dev);
 }
 
-module_init(nuc900evb_audio_init);
+deferred_module_init(nuc900evb_audio_init);
 module_exit(nuc900evb_audio_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/omap/am3517evm.c linux-4.1/sound/soc/omap/am3517evm.c
--- linux-4.1.orig/sound/soc/omap/am3517evm.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/omap/am3517evm.c	2015-06-25 22:51:15.729631645 +0100
@@ -133,7 +133,7 @@ static void __exit am3517evm_soc_exit(vo
 	platform_device_unregister(am3517evm_snd_device);
 }
 
-module_init(am3517evm_soc_init);
+deferred_module_init(am3517evm_soc_init);
 module_exit(am3517evm_soc_exit);
 
 MODULE_AUTHOR("Anuj Aggarwal <anuj.aggarwal@ti.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/omap/n810.c linux-4.1/sound/soc/omap/n810.c
--- linux-4.1.orig/sound/soc/omap/n810.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/omap/n810.c	2015-06-25 22:51:15.729631645 +0100
@@ -364,7 +364,7 @@ static void __exit n810_soc_exit(void)
 	platform_device_unregister(n810_snd_device);
 }
 
-module_init(n810_soc_init);
+deferred_module_init(n810_soc_init);
 module_exit(n810_soc_exit);
 
 MODULE_AUTHOR("Jarkko Nikula <jarkko.nikula@bitmer.com>");
Only in linux-4.1/sound/soc/omap: n810.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/omap/omap3pandora.c linux-4.1/sound/soc/omap/omap3pandora.c
--- linux-4.1.orig/sound/soc/omap/omap3pandora.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/omap/omap3pandora.c	2015-06-25 22:51:15.730631528 +0100
@@ -301,7 +301,7 @@ fail0:
 	gpio_free(OMAP3_PANDORA_DAC_POWER_GPIO);
 	return ret;
 }
-module_init(omap3pandora_soc_init);
+deferred_module_init(omap3pandora_soc_init);
 
 static void __exit omap3pandora_soc_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/omap/osk5912.c linux-4.1/sound/soc/omap/osk5912.c
--- linux-4.1.orig/sound/soc/omap/osk5912.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/omap/osk5912.c	2015-06-25 22:51:15.730631528 +0100
@@ -179,7 +179,7 @@ static void __exit osk_soc_exit(void)
 	platform_device_unregister(osk_snd_device);
 }
 
-module_init(osk_soc_init);
+deferred_module_init(osk_soc_init);
 module_exit(osk_soc_exit);
 
 MODULE_AUTHOR("Arun KS <arunks@mistralsolutions.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/pxa/em-x270.c linux-4.1/sound/soc/pxa/em-x270.c
--- linux-4.1.orig/sound/soc/pxa/em-x270.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/pxa/em-x270.c	2015-06-25 22:51:15.730631528 +0100
@@ -87,7 +87,7 @@ static void __exit em_x270_exit(void)
 	platform_device_unregister(em_x270_snd_device);
 }
 
-module_init(em_x270_init);
+deferred_module_init(em_x270_init);
 module_exit(em_x270_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/pxa/magician.c linux-4.1/sound/soc/pxa/magician.c
--- linux-4.1.orig/sound/soc/pxa/magician.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/pxa/magician.c	2015-06-25 22:51:15.731631412 +0100
@@ -526,7 +526,7 @@ static void __exit magician_exit(void)
 	gpio_free(EGPIO_MAGICIAN_SPK_POWER);
 }
 
-module_init(magician_init);
+deferred_module_init(magician_init);
 module_exit(magician_exit);
 
 MODULE_AUTHOR("Philipp Zabel");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/pxa/pxa2xx-i2s.c linux-4.1/sound/soc/pxa/pxa2xx-i2s.c
--- linux-4.1.orig/sound/soc/pxa/pxa2xx-i2s.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/pxa/pxa2xx-i2s.c	2015-06-25 22:51:15.731631412 +0100
@@ -397,7 +397,7 @@ static void __exit pxa2xx_i2s_exit(void)
 	platform_driver_unregister(&pxa2xx_i2s_driver);
 }
 
-module_init(pxa2xx_i2s_init);
+deferred_module_init(pxa2xx_i2s_init);
 module_exit(pxa2xx_i2s_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/pxa/raumfeld.c linux-4.1/sound/soc/pxa/raumfeld.c
--- linux-4.1.orig/sound/soc/pxa/raumfeld.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/pxa/raumfeld.c	2015-06-25 22:51:15.732631295 +0100
@@ -311,7 +311,7 @@ static void __exit raumfeld_audio_exit(v
 	gpio_free(GPIO_SPDIF_RESET);
 }
 
-module_init(raumfeld_audio_init);
+deferred_module_init(raumfeld_audio_init);
 module_exit(raumfeld_audio_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/pxa/z2.c linux-4.1/sound/soc/pxa/z2.c
--- linux-4.1.orig/sound/soc/pxa/z2.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/pxa/z2.c	2015-06-25 22:51:15.732631295 +0100
@@ -218,7 +218,7 @@ static void __exit z2_exit(void)
 	platform_device_unregister(z2_snd_device);
 }
 
-module_init(z2_init);
+deferred_module_init(z2_init);
 module_exit(z2_exit);
 
 MODULE_AUTHOR("Ken McGuire <kenm@desertweyr.com>, "
Only in linux-4.1/sound/soc/pxa: z2.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/pxa/zylonite.c linux-4.1/sound/soc/pxa/zylonite.c
--- linux-4.1.orig/sound/soc/pxa/zylonite.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/pxa/zylonite.c	2015-06-25 22:51:15.733631178 +0100
@@ -267,7 +267,7 @@ static void __exit zylonite_exit(void)
 	platform_device_unregister(zylonite_snd_ac97_device);
 }
 
-module_init(zylonite_init);
+deferred_module_init(zylonite_init);
 module_exit(zylonite_exit);
 
 MODULE_AUTHOR("Mark Brown <broonie@opensource.wolfsonmicro.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/h1940_uda1380.c linux-4.1/sound/soc/samsung/h1940_uda1380.c
--- linux-4.1.orig/sound/soc/samsung/h1940_uda1380.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/h1940_uda1380.c	2015-06-25 22:51:15.733631178 +0100
@@ -253,7 +253,7 @@ static void __exit h1940_exit(void)
 	gpio_free(S3C_GPIO_END + 9);
 }
 
-module_init(h1940_init);
+deferred_module_init(h1940_init);
 module_exit(h1940_exit);
 
 /* Module information */
Only in linux-4.1/sound/soc/samsung: h1940_uda1380.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/jive_wm8750.c linux-4.1/sound/soc/samsung/jive_wm8750.c
--- linux-4.1.orig/sound/soc/samsung/jive_wm8750.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/jive_wm8750.c	2015-06-25 22:51:15.733631178 +0100
@@ -138,7 +138,7 @@ static void __exit jive_exit(void)
 	platform_device_unregister(jive_snd_device);
 }
 
-module_init(jive_init);
+deferred_module_init(jive_init);
 module_exit(jive_exit);
 
 MODULE_AUTHOR("Ben Dooks <ben@simtec.co.uk>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/ln2440sbc_alc650.c linux-4.1/sound/soc/samsung/ln2440sbc_alc650.c
--- linux-4.1.orig/sound/soc/samsung/ln2440sbc_alc650.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/ln2440sbc_alc650.c	2015-06-25 22:51:15.734631061 +0100
@@ -63,7 +63,7 @@ static void __exit ln2440sbc_exit(void)
 	platform_device_unregister(ln2440sbc_snd_ac97_device);
 }
 
-module_init(ln2440sbc_init);
+deferred_module_init(ln2440sbc_init);
 module_exit(ln2440sbc_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/neo1973_wm8753.c linux-4.1/sound/soc/samsung/neo1973_wm8753.c
--- linux-4.1.orig/sound/soc/samsung/neo1973_wm8753.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/neo1973_wm8753.c	2015-06-25 22:51:15.735630944 +0100
@@ -376,7 +376,7 @@ err_gpio_free:
 	}
 	return ret;
 }
-module_init(neo1973_init);
+deferred_module_init(neo1973_init);
 
 static void __exit neo1973_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/rx1950_uda1380.c linux-4.1/sound/soc/samsung/rx1950_uda1380.c
--- linux-4.1.orig/sound/soc/samsung/rx1950_uda1380.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/rx1950_uda1380.c	2015-06-25 22:51:15.736630827 +0100
@@ -275,7 +275,7 @@ static void __exit rx1950_exit(void)
 	gpio_free(S3C2410_GPA(1));
 }
 
-module_init(rx1950_init);
+deferred_module_init(rx1950_init);
 module_exit(rx1950_exit);
 
 /* Module information */
Only in linux-4.1/sound/soc/samsung: rx1950_uda1380.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/smartq_wm8987.c linux-4.1/sound/soc/samsung/smartq_wm8987.c
--- linux-4.1.orig/sound/soc/samsung/smartq_wm8987.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/smartq_wm8987.c	2015-06-25 22:51:15.736630827 +0100
@@ -257,7 +257,7 @@ static void __exit smartq_exit(void)
 	platform_device_unregister(smartq_snd_device);
 }
 
-module_init(smartq_init);
+deferred_module_init(smartq_init);
 module_exit(smartq_exit);
 
 /* Module information */
Only in linux-4.1/sound/soc/samsung: smartq_wm8987.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/smdk2443_wm9710.c linux-4.1/sound/soc/samsung/smdk2443_wm9710.c
--- linux-4.1.orig/sound/soc/samsung/smdk2443_wm9710.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/smdk2443_wm9710.c	2015-06-25 22:51:15.737630710 +0100
@@ -59,7 +59,7 @@ static void __exit smdk2443_exit(void)
 	platform_device_unregister(smdk2443_snd_ac97_device);
 }
 
-module_init(smdk2443_init);
+deferred_module_init(smdk2443_init);
 module_exit(smdk2443_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/smdk_spdif.c linux-4.1/sound/soc/samsung/smdk_spdif.c
--- linux-4.1.orig/sound/soc/samsung/smdk_spdif.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/smdk_spdif.c	2015-06-25 22:51:15.737630710 +0100
@@ -215,7 +215,7 @@ static void __exit smdk_exit(void)
 	platform_device_unregister(smdk_snd_spdif_dit_device);
 }
 
-module_init(smdk_init);
+deferred_module_init(smdk_init);
 module_exit(smdk_exit);
 
 MODULE_AUTHOR("Seungwhan Youn, <sw.youn@samsung.com>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/smdk_wm8580.c linux-4.1/sound/soc/samsung/smdk_wm8580.c
--- linux-4.1.orig/sound/soc/samsung/smdk_wm8580.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/smdk_wm8580.c	2015-06-25 22:51:15.738630593 +0100
@@ -228,7 +228,7 @@ static int __init smdk_audio_init(void)
 
 	return ret;
 }
-module_init(smdk_audio_init);
+deferred_module_init(smdk_audio_init);
 
 static void __exit smdk_audio_exit(void)
 {
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/samsung/smdk_wm9713.c linux-4.1/sound/soc/samsung/smdk_wm9713.c
--- linux-4.1.orig/sound/soc/samsung/smdk_wm9713.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/samsung/smdk_wm9713.c	2015-06-25 22:51:15.738630593 +0100
@@ -99,7 +99,7 @@ static void __exit smdk_exit(void)
 	platform_device_unregister(smdk_snd_wm9713_device);
 }
 
-module_init(smdk_init);
+deferred_module_init(smdk_init);
 module_exit(smdk_exit);
 
 /* Module information */
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/sh/migor.c linux-4.1/sound/soc/sh/migor.c
--- linux-4.1.orig/sound/soc/sh/migor.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/sh/migor.c	2015-06-25 22:51:15.738630593 +0100
@@ -200,7 +200,7 @@ static void __exit migor_exit(void)
 	platform_device_unregister(migor_snd_device);
 }
 
-module_init(migor_init);
+deferred_module_init(migor_init);
 module_exit(migor_exit);
 
 MODULE_AUTHOR("Guennadi Liakhovetski <g.liakhovetski@gmx.de>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/sh/sh7760-ac97.c linux-4.1/sound/soc/sh/sh7760-ac97.c
--- linux-4.1.orig/sound/soc/sh/sh7760-ac97.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/sh/sh7760-ac97.c	2015-06-25 22:51:15.739630476 +0100
@@ -65,7 +65,7 @@ static void __exit sh7760_ac97_exit(void
 	platform_device_unregister(sh7760_ac97_snd_device);
 }
 
-module_init(sh7760_ac97_init);
+deferred_module_init(sh7760_ac97_init);
 module_exit(sh7760_ac97_exit);
 
 MODULE_LICENSE("GPL");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/soc-core.c linux-4.1/sound/soc/soc-core.c
--- linux-4.1.orig/sound/soc/soc-core.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/soc-core.c	2015-06-25 22:51:15.740630360 +0100
@@ -3629,7 +3629,7 @@ static int __init snd_soc_init(void)
 
 	return platform_driver_register(&soc_driver);
 }
-module_init(snd_soc_init);
+deferred_module_init(snd_soc_init);
 
 static void __exit snd_soc_exit(void)
 {
Only in linux-4.1/sound/soc: soc-core.c.orig
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/soc/txx9/txx9aclc-generic.c linux-4.1/sound/soc/txx9/txx9aclc-generic.c
--- linux-4.1.orig/sound/soc/txx9/txx9aclc-generic.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/soc/txx9/txx9aclc-generic.c	2015-06-25 22:51:15.741630243 +0100
@@ -80,7 +80,7 @@ static void __exit txx9aclc_generic_exit
 	platform_driver_unregister(&txx9aclc_generic_driver);
 }
 
-module_init(txx9aclc_generic_init);
+deferred_module_init(txx9aclc_generic_init);
 module_exit(txx9aclc_generic_exit);
 
 MODULE_AUTHOR("Atsushi Nemoto <anemo@mba.ocn.ne.jp>");
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/sparc/amd7930.c linux-4.1/sound/sparc/amd7930.c
--- linux-4.1.orig/sound/sparc/amd7930.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/sparc/amd7930.c	2015-06-25 22:51:15.741630243 +0100
@@ -1094,5 +1094,5 @@ static void __exit amd7930_exit(void)
 	platform_driver_unregister(&amd7930_sbus_driver);
 }
 
-module_init(amd7930_init);
+deferred_module_init(amd7930_init);
 module_exit(amd7930_exit);
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/synth/emux/emux.c linux-4.1/sound/synth/emux/emux.c
--- linux-4.1.orig/sound/synth/emux/emux.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/synth/emux/emux.c	2015-06-25 22:51:15.439665543 +0100
@@ -182,5 +182,5 @@ static void __exit alsa_emux_exit(void)
 {
 }
 
-module_init(alsa_emux_init)
+deferred_module_init(alsa_emux_init)
 module_exit(alsa_emux_exit)
diff -rup -x '*.o' -x Documentation -x bzImage '--exclude=.cproject' '--exclude=build' '--exclude=nvidia-ion' linux-4.1.orig/sound/synth/util_mem.c linux-4.1/sound/synth/util_mem.c
--- linux-4.1.orig/sound/synth/util_mem.c	2015-06-22 06:05:43.000000000 +0100
+++ linux-4.1/sound/synth/util_mem.c	2015-06-25 22:51:15.439665543 +0100
@@ -207,5 +207,5 @@ static void __exit alsa_util_mem_exit(vo
 {
 }
 
-module_init(alsa_util_mem_init)
+deferred_module_init(alsa_util_mem_init)
 module_exit(alsa_util_mem_exit)
